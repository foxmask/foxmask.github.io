{"pages":[{"title":"√Ä propos","text":"I'm Freeeeee ! C'est l'histoire d'un mec qu'est tomb√© dans la potion \"logiciel libre\" depuis la version GNU/Debian Slink , c'√©tait en 1998. Il n'est pas pass√© sur le pont de l'Alma ni n'a perdu ses lunettes dans la Loire , juste pass√© par du Perl, PHP et enfin Python. Du Debian de l'√©poque, il retient une \"F√™te de l'Internet\" √† la mairie de Boulogne Billancourt avec la team DaLinuxFrenchPage d'alors, o√π on avait fini l'install party en parties de Quake3 :) Du Perl il retient IRSSI :P avec ce client je codais alors un gestionnaire de matches de jeux en reseau (comme ClanCalendar:P) Du PHP il retient : La cr√©ation de PhpFr.Org site d'entraide au dev en PHP et permettant √† tout √† chacun de se mettre au developpement avec ce langage, site gracieusement h√©berg√© 5ans par GCU et l'ami iMil . PunBB en PHP4 o√π j'avais crois√© alors Vincent Garnier aka \"Vin100\" , auteur alors de Puntal, que j'avais rejoins sur le projet, puis nicosomb . CakePHP en PHP4. Avec lequel je retentais de faire Puntal avec le framework. Puis enfin l'excellentissime framework Jelix en PHP5 (dont le mec fut core-developper) et tous les membres qui composaient la team. Avec ce dernier je produisis le forum du site du projet, puis le repository des applications faites avec le framework nomm√© Booster Du Python il retient tout ce qu'on peut imaginer gravitant autour du web et du devops. Genre au pif, Django , l'exceptionnel DjangoRestFramework , et Ansible / Fabric Mon dernier joujou en date est un projet libre, un clone du service IFTTT (If This Then That) , nomm√© Trigger-Happy . A part √ßa je mets mon grin de sel √† droite √† gauche, je fais de la relecture chez Sam & Max ou parcours indexerror.net , ou aide √©galement la communaut√© Joplin , cet √©diteur de texte multiplaforme. Chess Parfois je pousse du buis tant√¥t blanc tant√¥t noir. Mon joueur pr√©f√©r√© est un parano√Øaque Aaron Nimzowitsch et son livre Mein System traduit tr√®s bien sa peur permanente, et du coup la prophylaxie qui fut son domaine aux √©checs. Get in touch irc : sur Freenode @foxmask Mastodon @foxxmask Twitter foxmask Gitter.im keybase.io/foxmask","tags":"A Propos","url":"https://foxmask.net/pages/a-propos"},{"title":"De Django √† Starlette","text":"Flashback fin 2012, je cr√©ais un petit projet et en mai 2013, je sortais une version de ce dernier, nomm√© \" Trigger Happy \", entierement con√ßu avec l'excellentissime framework web Django . 7 ans plus tard, en l'√©crivant je m'√©touffe en r√©alisant , le projet n'est pas mort mais mais mais depuis l'arriv√©e d'asyncio, je me suis demand√© comment lui apporter un seconde souflle funky, en terme de techno. Django-Channel vit le jour et promettait de l'async partout mais l'archi me paraissait beaucoup beaucoup trop lourde, en t√©moigne la palanqu√©e de pr√©-requis. Avant hier Lors de l'hacktoberfest 2018 dernier, j'aper√ßu le projet Responder , tout asynchrone, et sortie vitesse lumi√®re √† la fin du mois d'octobre, avec moult talentueux contributeurs, dont Tom Christie, \"Mr Dango Rest Framework\". Le projet m'attira tr√®s fortement, mais encore un petit quelque chose m'empecha de me l'approprier et je laissais alors tomber, avec la flemme et envie d'autre chose. Aujourd'hui Mais depuis quelques mois, en d√©cortiquant d'avantage les prerequis un √† un de responder, je me suis arr√™t√© sur starlette ( The little ASGI framework that shines ) L'auteur de Starlette n'est autre que Tom Christie ;) Comme d'hab pour s'approprier le projet, rien de mieux qu'un tuto. Je tombe alors donc sur https://github.com/encode/starlette-example/ et hop c'√©tait parti. Le principe de starlette, pour qui ne connait pas encore le projet, est d'√©viter la moindre friction entre les couches que sont la vue, la base de donn√©es, les formulaires, etc. Du coup Starlette propose un socle de base tr√®s efficace, et l'auteur de starlette s'est, dans la foul√©e attel√©, √† produire des projets p√©ripheriques tels que orm ; pour comme avec Django ; permettre d'utiliser vos tables avec juste Models.object.all() typeschema ; pour la validation de vos formulaires database ; pour l'abstraction aux SGBD √âvidemment tous sont async. Si vous souhaitez voir une video qui detaille Starlette, Tom Christie donne un talk, commencez donc la vid√©o √† partir de 7h30 vous aurez une heure √† vous r√©galer ;) Comme un poisson dans l'eau Passer de Django \"synchrone\" √† starlette \"asynchrone\" devrait √™tre un jeu d'enfant pour vous autres, utilisateurs de Django, comme la plupart des √©l√©ments dans starlette, devraient furieusement, vous rappeler des strates de Django. Comparatif des couches entre les 2 projets P√©rim√®tre Django Starlette Templating Template Django Jinja2 Vue *View fonctions dans le(s) module(s) de votre application Formulaire *Form typesystem (*) ORM Django ORM ORM (*) \"Migration\" manage.py migrate utilisation d'SQL Alchemy Routage urls.py Route() (*) = Fonctionnalit√©s non incluses dans starlette, application tierce. Les projets jumeaux Pour vous illustrer le propos, revenons √† Trigger Happy. Alors non je ne l'ai pas refait int√©gralement avec starlette, mais j'en ai pris 2 morceaux pour produire un petit projet: le premier : l'extraction des flux RSS le second : l'√©diteur markdown nomm√© Joplin avec ces 2 l√†, je cr√©√© des notes automatiquement dans Joplin √† partir du flux RSS de mon choix Mon but √©tant, au d√©part, de faire la veille techno en cr√©ant des notes dans joplin pour les lire ult√©rieurement √† partir de flux RSS de mes sites favoris. Le premier projet en Django est nomm√© JONG : JO plin N ote G enerator Le second projet avec Starlette est nomm√© Yeoboseyo C'est au pif que je me suis mis √† recorder Jong √† la sauce Starlette, c'est au 3/4 de la fin que je me suis dit ho marrant j'ai refait Jong avec Starlette finallement et finallement ce n'etait pas la mer √† boire, loin s'en faut, et puis c'est modulaire souple et c'est tout ce qu'on attend ;) Comment fait on ... suis ci dessous, chaque √©l√©ment du tableau, une fois pour django une fois pour starlette ... une Vue enfin ici il m'aura fallu 3 CBV * Django class RssListView ( ListView ): \"\"\" list of Rss \"\"\" context_object_name = \"rss_list\" queryset = Rss . objects . all () def get_queryset ( self ): return self . queryset . filter () . order_by ( '-date_triggered' ) def get_context_data ( self , ** kw ): data = self . queryset . filter () . order_by ( '-date_triggered' ) # paginator vars record_per_page = 10 page = self . request . GET . get ( 'page' ) # paginator call paginator = Paginator ( data , record_per_page ) try : data = paginator . page ( page ) except PageNotAnInteger : # If page is not an integer, deliver first page. data = paginator . page ( 1 ) except EmptyPage : # If page is out of range (e.g. 9999), # deliver last page of results. data = paginator . page ( paginator . num_pages ) context = super ( RssListView , self ) . get_context_data ( ** kw ) context [ 'data' ] = data return context class RssCreateView ( RssMixin , CreateView ): \"\"\" list of Rss \"\"\" template_name = 'jong/rss.html' def get_context_data ( self , ** kw ): context = super ( RssCreateView , self ) . get_context_data ( ** kw ) context [ 'mode' ] = 'add' return context class RssUpdateView ( RssMixin , UpdateView ): \"\"\" Form to update description \"\"\" template_name = 'jong/rss.html' def get_context_data ( self , ** kw ): context = super ( RssUpdateView , self ) . get_context_data ( ** kw ) context [ 'mode' ] = 'Edit' return context Starlette avec Starlette, pas de ClassBasedView :P on a une class HTTPEndPoint si on veut mais l√† pour la petitesse du projet je m'en suis affranchi async def homepage ( request ): \"\"\" get the list of triggers :param request: :return: \"\"\" triggers = await Trigger . objects . all () template = \"index.html\" if request . method == 'GET' : # trigger_id provided, form to edit this one if 'trigger_id' in request . path_params : trigger_id = request . path_params [ 'trigger_id' ] trigger = await Trigger . objects . get ( id = trigger_id ) form = forms . Form ( TriggerSchema , values = trigger ) # empty form else : trigger_id = 0 form = forms . Form ( TriggerSchema ) for trigger in triggers : print ( trigger ) context = { \"request\" : request , \"form\" : form , \"triggers_list\" : triggers , \"trigger_id\" : trigger_id } return templates . TemplateResponse ( template , context ) # POST else : data = await request . form () trigger , errors = TriggerSchema . validate_or_error ( data ) if errors : form = forms . Form ( TriggerSchema , values = data , errors = errors ) context = { \"request\" : request , \"form\" : form , \"triggers_list\" : triggers } return templates . TemplateResponse ( template , context ) if 'trigger_id' in request . path_params : trigger_id = request . path_params [ 'trigger_id' ] trigger_to_update = await Trigger . objects . get ( id = trigger_id ) print ( trigger . rss_url , trigger . joplin_folder , trigger . description ) await trigger_to_update . update ( rss_url = trigger . rss_url , joplin_folder = trigger . joplin_folder , status = bool ( trigger . status ), description = trigger . description ) else : await Trigger . objects . create ( rss_url = trigger . rss_url , joplin_folder = trigger . joplin_folder , description = trigger . description ) return RedirectResponse ( request . url_for ( \"homepage\" )) voil√† qui remplace les 3 CBV :P ... un Template Django < table class = \"table table-striped table-hover\" > < tr > < th > {% trans \"Name\" %} </ th > < th > {% trans \"URL\" %} </ th > < th > {% trans \"Triggered\" %} </ th > < th > {% trans \"Notebook\" %} </ th > < th > {% trans \"Bypass Errors\" %} </ th > < th > {% trans \"Actions\" %} </ th > </ tr > {% for data in rss_list %} < tr > < td >< a href = \"{% url 'edit' data.id %}\" title = \"Edit this feed\" > {{ data.name }} </ a ></ td > < td >< a href = \"{{ data.url }}\" title = \"Go to this feed\" > {{ data.url }} </ a ></ td > < td > {{ data.date_triggered }} </ td > < td > {{ data.notebook }} </ td > < td > {% if data.bypass_bozo %} < span class = \"label label-danger\" > {% trans \"Yes\" %} </ span > {% else %} < span class = \"label label-success\" > {% trans \"No\" %} </ span > {% endif %} </ td > < td >< a class = \"btn btn-sm btn-md btn-lg btn-success\" role = \"button\" href = \"{% url 'edit' data.id %}\" title = \"Edit this feed\" >< span class = \"glyphicon glyphicon-pencil icon-white\" ></ span ></ a > {% if data.status %} < a class = \"btn btn-sm btn-md btn-lg btn-primary\" role = \"button\" href = \"{% url 'switch' data.id %}\" title = \"{% trans 'Set this Feed off' %}\" >< span class = \"glyphicon glyphicon-off icon-white\" ></ span ></ a > {% else %} < a class = \"btn btn-sm btn-md btn-lg btn-warning\" role = \"button\" href = \"{% url 'switch' data.id %}\" title = \"{% trans 'Set this Feed on' %}\" >< span class = \"glyphicon glyphicon-off icon-white\" ></ span ></ a > {% endif %} < a class = \"btn btn-sm btn-md btn-lg btn-danger\" role = \"button\" href = \"{% url 'delete' data.id %}\" title = \"Delete this feed\" >< span class = \"glyphicon glyphicon-trash icon-white\" ></ span ></ a > </ td > </ tr > {% endfor %} </ table > Starlette {% extends \"base.html\" %} {% block content %} < div class = \"col-xs-5 col-md-5 col-lg-5\" > {% if trigger_id > 0 %} < form method = \"POST\" action = '{{ url_for(' homepage ', trigger_id = trigger_id) }}' > {% else %} < form method = \"POST\" action = '{{ url_for(' homepage ') }}' > {% endif %} {{ form }} < button type = \"submit\" class = \"btn btn-primary\" > Submit </ button > </ form > </ div > < div class = \"col-xs-7 col-md-7 col-lg-7\" > < table class = \"table table-striped table-hover\" > < thead > < tr >< th scope = \"col\" > Description </ th > < th scope = \"col\" > RSS URL </ th > < th scope = \"col\" > Joplin Folder </ th > < th scope = \"col\" > Triggered </ th > < th scope = \"col\" > Created </ th > < th scope = \"col\" > Status </ th > < th scope = \"col\" > Action </ th > </ tr > </ thead > {% if triggers_list %} < tbody > {% for trigger in triggers_list %} < tr >< td >< a href = \"{{ url_for('homepage', trigger_id=trigger.id)}}\" title = \"Edit this trigger\" > {{ trigger.description }} </ a ></ td > < td >< a href = \"{{ trigger.rss_url }}\" title = \"go to this URL\" > {{ trigger.rss_url }} </ a > </ td > < td > {{ trigger.joplin_folder }} </ td > < td > {{ trigger.date_triggered }} </ td > < td > {{ trigger.date_created}} </ td > < td > {{ trigger.status }} </ td > < td > < button type = \"button\" class = \"btn btn-danger\" data-toggle = \"modal\" data-target = \"#trigger{{ trigger.id }}\" > Delete </ button > < div class = \"modal fade\" id = \"trigger{{ trigger.id }}\" tabindex = \"-1\" role = \"dialog\" aria-labelledby = \"trigger{{ trigger.id}}Label\" aria-hidden = \"true\" > < div class = \"modal-dialog\" role = \"document\" > < div class = \"modal-content\" > < div class = \"modal-header\" > < h5 class = \"modal-title\" > Deletion : {{ trigger.description }} </ h5 > < button type = \"button\" class = \"close\" data-dismiss = \"modal\" aria-label = \"Close\" > < span aria-hidden = \"true\" > &times; </ span > </ button > </ div > < div class = \"modal-body\" > < p > are your sure you want to delete this trigger ? {{ trigger.description }} </ p > </ div > < div class = \"modal-footer\" > < button type = \"button\" class = \"btn btn-secondary\" data-dismiss = \"modal\" > Close </ button > < a href = \"{{ url_for('delete', trigger_id=trigger.id)}}\" class = \"btn btn-danger\" role = \"button\" > Delete it </ a > </ div > </ div > </ div > </ div > </ td > </ tr > {% endfor %} </ tbody > {% endif %} </ table > </ div > {% endblock %} ... un Model Django from django.db import models class Rss ( models . Model ): \"\"\" Rss \"\"\" name = models . CharField ( max_length = 200 , unique = True ) status = models . BooleanField ( default = True ) notebook = models . CharField ( max_length = 200 ) url = models . URLField () tag = models . CharField ( max_length = 40 , null = True , blank = True ) date_triggered = models . DateTimeField ( auto_now = True , auto_created = True ) # to ignore the not well formed RSS feeds # bozo detection https://pythonhosted.org/feedparser/bozo.html?highlight=bozo # default is False : we do not ignore not well formed Feeds. bypass_bozo = models . BooleanField ( default = False ) def show ( self ): \"\"\" :return: string representing object \"\"\" return \"RSS %s %s \" % ( self . name , self . status ) def __str__ ( self ): return self . name Starlette import orm class Trigger ( orm . Model ): __tablename__ = \"trigger\" __database__ = database __metadata__ = metadata id = orm . Integer ( primary_key = True ) rss_url = orm . String ( max_length = 255 ) joplin_folder = orm . String ( max_length = 80 ) description = orm . String ( max_length = 200 ) date_created = orm . DateTime ( default = datetime . datetime . now ) date_triggered = orm . DateTime ( allow_null = True ) status = orm . Boolean ( default = False ) result = orm . Text ( allow_null = True ) date_result = orm . DateTime ( allow_null = True ) provider_failed = orm . Integer ( allow_null = True ) consumer_failed = orm . Integer ( allow_null = True ) ... Un Forms Django je vous fais gr√¢ce du template du formulaire, le but √©tant de se focaliser sur les √©l√©ments identiques ;) class RssForm ( forms . ModelForm ): \"\"\" RSS Form \"\"\" def __init__ ( self , * args , ** kwargs ): # Get initial data passed from the view super ( RssForm , self ) . __init__ ( * args , ** kwargs ) self . fields [ 'notebook' ] . choices = folders () class Meta : model = Rss exclude = ( 'date_triggered' ,) widgets = { 'name' : TextInput ( attrs = { 'class' : 'form-control' }), 'url' : TextInput ( attrs = { 'class' : 'form-control' }), 'notebook' : TextInput ( attrs = { 'class' : 'form-control' }), 'tag' : TextInput ( attrs = { 'class' : 'form-control' }), 'status' : TextInput ( attrs = { 'class' : 'form-control' }), 'bypass_bozo' : CheckboxInput ( attrs = { 'class' : 'checkbox' }), } notebook = forms . ChoiceField () Starlette import typesystem class TriggerSchema ( typesystem . Schema ): \"\"\" Schema to define the structure of a Trigger \"\"\" rss_url = typesystem . String ( title = \"RSS URL\" , max_length = 255 ) joplin_folder = typesystem . String ( title = \"Joplin Folder\" , max_length = 80 ) description = typesystem . String ( title = \"Description\" , max_length = 200 ) status = typesystem . Boolean ( title = \"Status\" , default = False ) ... Un Routage Django urlpatterns = [ path ( 'admin/' , admin . site . urls ), path ( '' , RssListView . as_view (), name = 'base' ), path ( '' , RssListView . as_view (), name = 'rss' ), path ( 'add/' , RssCreateView . as_view (), name = 'add' ), url ( r '&#94;edit/(?P<pk>\\d+)$' , RssUpdateView . as_view (), name = 'edit' ), [ ... ] ] Starlette app = Starlette ( debug = True , routes = [ Route ( '/' , homepage , methods = [ 'GET' , 'POST' ], name = 'homepage' ), Route ( '/id/{trigger_id:int}' , homepage , methods = [ 'POST' , 'GET' ], name = 'homepage' ), Route ( '/delete/{trigger_id:int}' , delete , methods = [ 'GET' ], name = 'delete' ), Mount ( '/static' , StaticFiles ( directory = 'static' ), name = 'static' ) ], ) Voilou pour l'essentiel, si vous souhaitez comparer int√©gralement les 2 projets, au dossier/fichier pret, vous avez les liens sur github au dessus. Pour ma part je trouve starlette et ses amis, modulaires comme il faut. On dirait qu'on plug des pi√®ces de t√©tris au fur et √† mesure pour obtenir √† la fin un projet costaud.","tags":"Techno","url":"https://foxmask.net/post/2019/05/02/de-django-a-startlette/"},{"title":"Mais vous etes fou ? Hoo Oui !","text":"ÎÑà ÎØ∏Ï≥§Ïñ¥ ? intro Mon activit√© \"libre\" d√©clinant d√©lib√©r√©ment, j'avais beau chercher un nouveau projet fun √† faire en python, aucune id√©e me vint. le cor√©en ! Alors je me suis dit, \"laisse tomber, fais autre chose\", histoire d'√©viter la saturation et permettre la \"r√©oxyg√©nation\". Ci fait, en achetant 3 livres... je me suis mis au Cor√©en üòÅ (vous m'direz ÎÑà ÎØ∏Ï≥§Ïñ¥? T'es fou?) ...Carr√©ment, √ßa m'a pris comme une envie de pisser ! En les parcourant je me suis demand√© comment ingurgiter tout √ßa sans trop de prise de t√™te. des ressources ? Sur le net, des blogs de francophones, parlant cor√©en, sugg√®rent d'installer des applications sur Android, pour l'apprentissage de la langue... Niveau enfant ü§£, mais enfant √©cole primaire hein, parceque l'alphabet c'est pas avec nos lettres \"√† nous\", et √ßa c'est d√©j√† toute une histoire. Ensuite sur IRC @freenode, j'ai √©chang√© avec des Fran√ßais bossant en Asie et cette fois ci, on m'a sugg√©r√© une application de r√©p√©tition (dans le temps) de flashcard contenant sur une face le fran√ßais et l'autre le cor√©en. Au fur et √† mesure qu'on juge si on a compris/ retenu le contenu de la carte , l'application propose de revoir la carte √† \"j+x \"o√π x varie selon votre besoin , √ßa peut √™tre dans 10min si c'√©tait trop dur, 1 jour si moyen , 5 jours si facile, 1 mois etc... Son petit nom : \"Anki\" qui se d√©cline en version desktop, smartphone et web avec \" ankidroid \" et \" Ankiweb \". De plus √©tant Open Source, plein de gens partagent leur propre \"deck\" (piles de cartes). Du coup il est pratique de se mettre √† une langue de la sorte. Le revers du truc c'est que 99% des cartes sont anglo-cor√©ennes, donc le vocabulaire sp√©cifique cor√©en , notamment sur la bouffe (vous allez comprendre pourquoi plus bas).... tout en anglais, ben bonjour pour capter en fran√ßais ü§£ Avec tout √ßa, je me suis senti frustr√©, et comme d'habitude quand √ßa me g√®ne ... Action/r√©action J'ai donc d√©marr√© la transcription de 2 des 3 livres dont je parlais au d√©but. Avec un peu d'huile de coude, Je rentre dans joplin des fiches enti√®res par th√®me. Mais √ßa me tarabustait trop de ne pas pouvoir les mettre dans Anki sans y repasser des heures en plus de mes notes dans joplin. Et r√©cemment, j'ai d√©couvert le moyen de les y int√©grer, avec un addon qui permet de rendre votre Anki desktop, accessible en REST ! Donc j'ai fait un petit grigri pour cr√©er des cartes dans Anki √† partir de notes √©crites dans joplin. Comme j'avais d√©j√† pondu l'API de joplin en python pour d'autres projets, hop, recyclage ;) A pr√©sent je fais de parler deux appli exploitant de l'API Rest . Et quand Anki synchronise, j'ai toutes les cartes sur mon smartphone üëç Mais alors ? Deux questions qu'on me pose : Pourquoi le cor√©en ? Tu vas en Cor√©e bient√¥t ? R√©ponses; pourquoi pas :p, et : non! Alors pourquoi faire ? J'ai besoin de m'a√©rer la t√™te avec autre chose que le boulot et des projets sans int√©r√™ts. En plus sur Netflix je regarde des s√©ries cor√©ennes. Ca me pla√Æt bien, √ßa change de l'h√©g√©monie am√©ricaine √† la TV fran√ßaise, qui est devenue insipide. M√™me l'√©criture cor√©enne c'est marrant. Par exemple pour un mot de plusieurs syllabes, on ne peut en √©crire que 4 lettres maximum par syllabe dans \"un carr√© imaginaire\" apr√®s on change de carr√© et on fini son mot, exemple la Cor√©e : ÌïúÍµ≠ (hangug, grosso modo se prononce ane-gou). Ensuite, les lettres sont toujours altern√©es \"consonne / voyelle\" jamais l'inverse, ni jamais 2 consonnes ou 2 voyelles d'affil√©e. Si on d√©marre par une voyelle on mettra un „Öá devant, ceci est une consonne muette. De m√™me une lettre ne se prononce pas pareil qu'elle soit au d√©but ou la fin de la syllabe. Genre \"trois\" se dit \"set\" (comme en anglais) le s et le t sont le m√™me signe „ÖÖ dans ÏÖã (set ; trois) Par contre, faut que je retourne chez l'ophtalmolo parce, parfois, le carr√© fait \"tr√®s surcharg√©\" pour mes yeux et je confonds le u „Öú et le o „Öó ou le √© „Öî et le √® „Öê Apr√®s 3 mois j'en suis toujours √† faire comme en primaire, quand on apprenait √† lire \"ba,bo pou,....\" Je d√©chiffre les signes, mais ne comprends pas, soit toute une phrase, soit des mots. Comme je cuisine cor√©en, je d√©chiffre les √©tiquettes mais m√™me l√† c'est marrant, on n'a pas des fruits ou l√©gumes comme les leur du coup je capte pas tout. Bon les chiens chats voitures √ßa pousse aussi bien chez nous que chez eux, donc √ßa, je pige vite, encore que je n'ai pas trouv√© de recette pour manger ces trucs. En r√©sum√© Tout √ßa pourrait se r√©sumer √† Je joue avec python pour apprendre le cor√©en en m'amusant Mais encore ? Outils pour jouer √† apprendre le cor√©en : - dico fr/le 'Naver' - Netflix (si quand-m√™me ;) - Je cite https://fr.wikihow.com/parler-cor%C3%A9en Recherchez des applis pour enfants. √âcrivez ÏïåÌååÎ≤≥ÏùÑ Î∞∞Ïö∞Îã§ sur Google ou sur l'App Store (cela veut dire ¬´ apprendre l'alphabet ¬ª) ou bien Ïñ¥Î¶∞Ïù¥ Í≤åÏûÑ qui veut dire ¬´ jeux pour enfants ¬ª. Ce genre d'application √©tant destin√©e aux enfants, elles sont simples d'utilisation et vous n'avez g√©n√©ralement pas besoin de parler le cor√©en pour les utiliser. C'est √©galement plus √©conomique que de se procurer des DVD. Ces applis vont vous enseigner comment √©crire les caract√®res cor√©ens et vous faire progresser de mani√®re visuelle, souvent avec des jeux, ce qui vous permettra d'enrichir votre vocabulaire. Faites cependant attention √† ne pas acheter une application servant √† enseigner l'anglais aux enfants cor√©ens ! Livres en cours de lecture : - le cor√©en pour les nuls - kimchi ! Apprendre et r√©viser son vocabulaire cor√©en. (Niveau 1) et l'application ? L'application pour cr√©er des cartes Anki depuis des notes r√©dig√©es dans joplin : baeuda ( Î∞∞Ïö∞Îã§ - Learn - Apprendre ), n√©cessite python 3.6 ou plus, joplin, Anki et l'addon AnkiConnnect Dans joplin, chaque note = - Un titre (qui sera un deck) - Un tableau Cor√©e/Romanisation/Fran√ßais Le projet extrait alors les notes ( en markdown) en cor√©en , les met en HTML, parcours les tableaux HTML et pour chaque ligne , cr√©e une carte dans un deck du nom du titre de la note 1) 2) 3) 4) 5)","tags":"Techno","url":"https://foxmask.net/post/2019/04/23/mais-tu-es-fou-hoo-oui/"},{"title":"Jong Imp : import your notes from your cloud storage service","text":"Story always searching a way to improve the joplin project \"on my side\", as i'm not a ReactJS dev yet, I just make some toys here and there Jong Imp this new toy is just a little script that will read the folder of your choice on your cloud storage service, and one it's done, import your notes. prerequisite Python 3.4 or + joplin terminal installed installing create a virtualenv and activate it python3 - m venv jong_imp cd jong_imp source bin / activate get the source git clone https : // github . com / foxmask / jong_imp cd jong_imp settings in the jong_imp/settings.ini file set the following properties [ JOPLIN_CONFIG ] # path to the joplin terminal version JOPLIN_BIN_PATH = / home / foxmask /. joplin - bin / bin / joplin # path to the profile of the joplin client (terminal/desktop) JOPLIN_PROFILE_PATH = / home / foxmask /. config / joplin - desktop # path to the folder of the cloud storage service joplin_import_folder = / home / foxmask / Dropbox / Applications / Joplin / letterbox / # default folder where to import notes JOPLIN_DEFAULT_FOLDER = Home Notes from Dropbox running python jong_imp / go . py Importation des notes ... Importation des notes ... Importation des notes ... Notes in Joplin and here is the result in Joplin itself","tags":"Techno","url":"https://foxmask.net/post/2018/08/20/jong-imp/"},{"title":"Jong, JOplin Notes Generator","text":"Hey ! dans un court billet pr√©c√©dent , j'avais abord√© mon dernier joujou Jong , un projet premettant de cr√©er des notes Joplin √† partir de flux RSS/Atom de mon choix. L'int√©ret ? H√© bien comme avec Evernote que j'utilisais jadis, cela me permet d'avoir ma veille techno, et mes notes de toutes sortes, sous la main en permanence que ca soit sur PC ou sur smartphone. Pour installer le projet c'est tout QQ: Installation Jong est en python et donc s'installe comme ceci: cr√©ation d'un environnement virtuel python (aka virtualenv) on tapera ceci python3 -m venv jong puis on se rend dans notre virtualenv cd jong source bin/activate je recupere les sources du projet comme suit git clone https://github.com/foxmask/jong cd jong et on installera comme suit pip install -r requirements.txt cr√©ation de la base de donn√©es python manage.py migrate D√©marrer JONG python manage.py runserver & Acc√®s √† l'application A l'aide de son butineur favori, on se rendra sur l'url http://127.0.0.1:8000/ voici la page d'accueil et la page pour ajouter un nouveau flux Pour que Jong fonctionne, il faut que Joplin 'desktop' soit d√©marr√©, et surtout que le service Webclipper soit activ√©. Ainsi cela permettra √† Jong de vous fournir la liste de tous les carnets de votre Joplin, et de cr√©er les notes (cf la suite) Lancer la r√©cup√©ration des articles on tapera python manage.py run ce qui donnera INFO reading foxmask INFO reading korben INFO reading Python Planet INFO reading Sam et Max INFO reading Un Odieux Connard INFO reading Django INFO korben: article added DevTube - Des vid√©os pour les dev qui en veulent INFO korben: article added Open Logos - Des logos gratuits (et beaux) pour vos projets open source INFO korben: article added SuperCopter interpr√©t√© par un orchestre un peu sp√©cial INFO korben: article added Comment emp√®cher votre op√©rateur de bloquer le partage de connexion de votre smartphone Android ? INFO korben: article added Comment avoir des coins magiques sous Windows INFO korben: article added Comment trouver les sous-domaines de n'importe quel site ? INFO korben: article added Jusqu'o√π un arbre peut-il pousser ? INFO korben: article added Edito du 27/06/2018 INFO korben: article added Submerg√© par les distractions, les notifications et les emails ? Voici un moyen simple de vous reconcentrer pour atteindre votre but. INFO korben: article added Partez √† la chasse aux dinos fa√ßon Pokemon Go et on peut contempler le r√©sultat ici dans joplin","tags":"Techno","url":"https://foxmask.net/post/2018/06/27/jong/"},{"title":"SFR 8 mois de calvaire ...","text":"Je m'en va vous conter une chronologie quasi au jour le jour (surtout vers la fin) de tout ce cauchemar... Il √©tait une fois un an et un mois chez SFR ca nous changera des d√©boires des transports en commun d'ile de france, meme si c'est aussi chiant √† vivre ... allez jettons nous dans la story moisie. Et dire que je suis un cas isol√©, ... j'ai des doutes :) 2016 En novembre 2016, arrive la saison de la valse des op√©rateurs internet/t√©l√©phone pour tirer les prix vers le bas et faire des econocrocs. Dans le coin, par chez nous, la fibre c'est Orange ou SFR. Comme j'√©tais chez Djosh et qu'il ne voulait pas s'aligner (avec une pauvre r√©duc de 5EUR sur 6 mois lolilol... ), je leur ai dit \"bon ben je pars, et √† l'ann√©e prochaine !\" 28 Novembre 2016, souscription SFR Mobile 20 D√©cembre 2016, souscription SFR Fibre Pour une connerie de \"j'ai oublie mes papiers d'identiti\" j'ai pas pu souscrire les 2 offres en m√™me temps, ce qui aura un impact ... non n√©gligeable par la suite ... Jusqu'√† l'√©t√© 2017, TOUT baigne ! 2017 Ete et d√©but des emmerdes √† la p√®le ... Juillet 2017 : Blackout internet suite √† la temp√™te \"estival\" qu'on a subit. Tout le quartier est coup√© du net, SFR comme Orange. Ao√ªt 2017 : Retour du service Je me r√©engage pour un an apr√®s avoir bien gueul√© sur leur manque de comm... La dame etait trop forte et m'a convaincu ... Finalement girouette, et comme on subit des probl√®mes de r√©seau wifi √† la maison, pression de la smala, j'appelle pour me r√©tracter d√®s le lendemain, pour obtenir un retour √† la date d'engagement initiale du 28/11/2017 pour le mobile, mais pour le fixe, c'est plus compliqu√©, ca traine (ce n'est pas le m√™me service qui g√®re, faut pas m√©langer ...) parce que je me suis r√©tract√© trop vite et que ce sont crois√©es la proc√©dure de r√©engagement et celle de r√©traction :P (ouais d√©j√† que chez eux c'est le dawa, j'en rajoute une couche) Toujours en Aout, on recoit un mail de SFR qui n'a rien √† voir avec la choucroute mais qui va en rajouter une triple couche ... pour nous informer du changement tarifaire. Du coup, bibi emet le souhait de r√©siliation, puisque je ne suis pas d'accord pour payer une chaine (altice:P) dont j'ai rien √† foutre... Mais menaces au t√©l√©phone de mon interlocutrice de devoir payer des p√©nalit√©s de r√©siliation... Comme ca m'a bien remont√© j'ai laiss√© courir en mettant sur papier ce qui m'arrivait pour bien les coincer le moment venu Ensuite, pendant septembre 2017, SFR ne m'a jamais appel√© pour me dire o√π √ßa en √©tait ma r√©tractation sur la prologation de la fibre. Octbore 2017 : SFR fait le mort, et moi aussi, mais c'etait pour mieux nous retrouver :P Novembre 2017 : Ma r√©traction de fin ao√ªt enfin prise en compte le 23 11 2017, je suis tout joie ... (ca sera de courte dur√©e ...) L'engagement \"fibre\" prend donc fin en d√©cembre 2017 comme pr√©vu initialement. YOU ... PI 28/11 : Changement d'op√©rateur mobile en passant par Sosh (c'est l√† que commence la merde) D√©cembre 2017 : Je m'aper√ßois 4 jours avant la date de fin pr√©vu, de mon engagment initial √† la fibre, le 20/12/2017, que SFR m'a r√©engag√© pour le fixe pour un an... √Ä mon insu, du coup j'appelle pour leur demander ce qu'ils leur √† pris ... A partir du 16/12, je les relance tous les 2 jours pour avoir des nouvelles. Lors de mes relances, j'apprends que j'aurai appel√© et demand√© √† me r√©engager. Ce qui est faux puisque je suis pach√© chez choche pour changer d'op√©rateur... \"ouais mais pour r√©silier il faut nous appeler\" qu'on me dit. Et puis quoi encore ? Appel le 17/12 au soir, on m'annonce l'annulation de la prolongation faite par SFR. (l√†, SFR admet son erreur) Rappel le 18/12 on me r√©pond \"pour l'annulation, c'est fait, vous avez d√ª recevoir un mail\" mais jamais re√ßu ce mail m√™me pas dans les spam (parce que j'ai pas de filtre anti spam :P) Rappel le 26/12 on me r√©pond \"c'est fait, on rappelle sous 2 √† 5 j\", SFR en mode p√©roquet Rappel le 28/12 on me r√©pond \"vous n'√™tes plus engag√© depuis le 22/12 et la r√©tractation est en cours\" donc on a convenu que je pouvais r√©silier. Je suis enfin tomb√© sur une femme qui a entendu et compris ce que je disais... Aleylouya ! Pendant tout ce temps, √† aucun moment j'ai √† faire √† des fran√ßais (on reconnait un \"accent\") ce qui fait que eux traitent ma demande du mieux qu'ils peuvent, limite en se d√©barrassant fissa de mon probl√®me... sauf cette femme. A qui je demande, pendant que je la tiens, la proc√©dure de r√©siliation... Avec cette good news, le jour m√™me, sans plus attendre, je passe chez Orange. Avec cette r√©siliation de fin novembre, les options et services qui √©taient \"inclus dans le forfait\" me sont factur√©es au prix fort ... 62EUR pour d√©cembre ... Le 29/12 : r√©ception de la LiveBox. Envoi en recommand√© avec AR √† SFR de ma lettre de r√©siliation. Ah oui, au fait, chez SFR, le client communique avec du papier. Les mails, le site web, ca sert pas √† r√©silier... t'oublies. Le 29/12 : D√©branchement de la SFR box, branchement de la LiveBox Le 30/12 : Suspension de l'autorisation de pr√©l√®vement SFR. Pendant tout ce temps, avec tous ces probl√®mes, jamais SFR ne me rappelle pour r√©soudre mes probl√®mes, n'envoie de SMS ni de mail pour me tenir inform√© de quoi que ce soit. 2018 Janvier 2018 : 08/01 : J'ai re√ßu 3 mails ... accrochez vous parce que 3 MAILS KWA ; d'UN COUP alors que SFR m'en avait JAMAIS envoy√© jusqu'alors :) 2 mails pour m'expliquer ce qu'il faut que j'f√© pour retourner le mat√©riel, 1 mail pour me dire \"vous pouvez conserver le mat√©riel sans frais ....\" 10/01 : Je contacte SFR par t√©l√©phone. \"Qu'est-ce je faiiiiiiiis??????? avec vos mails contradictoires ?\" Finalement je renvoie les appareils SFR par la poste. avec un tout beau gros colis tout ficel√© avec tout le matos :P Le tout √† MES frais, l'√©tiquette que SFR m'envoie par mail pour que je la colle sur le colis, sert juste pour l'adresse, pas √† affranchir le paquet dont elle connait le poids de ses appareils (faut pas d√©conner :P) 16/01 : mail de SFR (SI SI un autre MAIL !!!) pour remboursement d√©p√¥t de garantie de 49EUR.... 19/01 : suivi Colissimo, colis pas encore arriv√© chez SFR, manquerait plus que LaPoste mette son grin de sel moisi quand je vois le tour de la terre que fait le colis ... 19/01 : Attente de la facture de cl√¥ture, de compte de la part de SFR. 21/01 : en consultant mes comptes je vois que SFR a rembours√© 15EUR par virement (un trop per√ßu sur les 62EUR :P), reste le d√©p√¥t de garantie qui arriva sous 2j Finalement le colis est livre depuis le 15/01/2018 √† DINAN (le lieu o√π doit retourner le matos), mais comme d'habitude, pas de mail pour accuser r√©ception, ni SMS ni appel. 23/01 mail (ENCORE!) de SFR, mais celui l√† vaut le d√©tour : \"Votre facture box de SFR n¬∞ xxx du 20/01/2018, d'un montant de 222,35 EUR\" ... Ben tiens donc, comme si je ne m'y √©tais pas attendu √† celle l√†... Appel √† 9h le jour m√™me, pour la contester cette facture, on me r√©pond \"on vous rappelle sous 3 ou 4 jours ouvr√©s\" Finalement un SMS de SFR (oui oui un SMS maintenant) le jour m√™me pour confirmer leur erreur qui sera corrig√© le 20/02. Je fais un SMS √† ma femme pour lui annoncer mais je lui dit \"de toute fa√ßon c'est pas fini tant qu'on n'a pas cette facture de cloture de compte ...\" Et me demande de faire opposition au pr√©l√®vement. J'ai d√©j√† fait sauter le pr√©l√®vement SEPA le mois dernier quand j'ai r√©sili√©.... Pendant tous ces √©changes t√©l√©phoniques, j'ai d√ª r√©p√©ter √† chaque fois mon histoire \"je me suis abo en 2016 .... \" alors qu'ils ont eu traces de tous les √©changes dans leur outil de suivi... Comme on peut s'attendre √† tout de sfr, je n'ai pas pavois√© avant d'avoir cette fameuse facture de cl√¥ture de compte. Pendant tout cette p√©riode, on apprendra que le PDG de SFR perd \"juste\" 5 milliards https://www.universfreebox.com/article/41432/SFR-fait-perdre-5-milliards-a-Altice-en-bourse avec le cours de l'action qui plonge en fl√®che. De m√™me qu'on lit la d√©sastreuse gestion de ce dernier par ici https://www.capital.fr/entreprises-marches/sfr-comment-le-management-de-patrick-drahi-a-conduit-au-fiasco-1268741 Mais bon on n'est que poussiere :P De la poussiere d'or quand meme vu la tronche d'SFR ces temps ci :D Fevrier 2018 : Comme je m'y attendais en envoyant le SMS √† ma chere et tendre ... 16/02 reception d'une mise en demeure de payer les 222EUR li√©s au p√©nalit√© d'engagement 17/02 appel de SFR qui me conseille de faire un courrier au Contentieux + Service Client avec copie du SMS (je vous √©pargne les aller-retour parmi les incomp√©tents que j'ai eu au bout du fil qui m'invitait √† appeler le service client SFR alors que c'etait leur num√©ro que j'avais fait ... et j'en passe et des meilleures) 19/02 donc envoye lettre avec AR aux services SFR Contentieux + Service Client 20/02 r√©ception par mail des AR 21/02 r√©ponse du service client par mail qui confirme que je n'ai pas √† r√©gler les 238EUR et font cesser les relances jusqu'√† ce que la r√©gularisation soit faite Mars 2018 : 06/03 Cette fois ci SFR me contacte pour me confirmer qu'ils me doivent encore 15 boules et que les 238 c'est fini 07/03 facture de regul' faite en ma faveur... FIN Conclusion: Il faut √™tre tenace pour ne pas laisser filer son argent. je vous √©pargnerai le \"SFR plus jamais d'ma vie\", par contre un \"truc\" int√©ressant pour nous autres clients, quand on prend des abonnements mobiles chez X et une ligne fixe chez Y, c'est pour une somme Z pendant un an qui augmentera g√©n√©ralement dans 12mois. Mais c'est SANS ENGAGEMENT alors qu'avec une offre group√©e Fixe+Mobile c'est engagement 12mois ... Donc c'est beaucoup plus souple ainsi. Ah vous le saviez d√©j√† ? :) Et comme je l'avais annonc√© √† Djoche je suis reviendu chez eux.","tags":"Techno","url":"https://foxmask.net/post/2018/03/20/sfr-8-mois-calvaire/"},{"title":"Migrer de Evernote vers Joplin","text":"Petit tuto pour migrer sans encombres ses affaires depuis Evernote vers Joplin. Exporter les notes Evernote Pour importer ses notes Evernote, d'abord exportez les depuis le client Evernote sous windows (en les selectionnant toutes d'un coup) dans une fichier sous le format .enex. Importer Puis, une fois fait, depuis le client Joplin, ouvrez \"Fichier > Import > Evernote Export File\" Mon bon gros paquet de 2500 notes (pour une poids de 650Mo) a √©t√© int√©gr√© sur mon vioc PC un Quad Core av√© 6Go de RAM, de 8ans d'age en 25mnn alors que sur la babasse de compet @ work : 10mn... J'ai d√ª m'y reprendre √† deux fois. Raison ? H√© bien, l'import ne g√®re pas la cr√©ation des dossiers existants, et tout arrive dans une dossier Evernote. Du coup, pour pr√©parer le terrain en amont, depuis Evernote, j'ai affect√© √† mes notes, le tag du nom de son dossier o√π elles se trouvaient. Preparer le terrain avant la synchronisation Une fois l'import effectu√©, on prendra le temps de retirer les tags cr√©√©s \"expres\" pour la migration, mais pas tout de suite. Pourquoi ? Comme dit juste avant, l'import ne cr√©√© pas les dossiers. Donc : on va cr√©er les dossiers manquants dans joplin √† la mimine on va cliquer sur chaque tag et faire glisser toutes les notes dans le dossier de destination du m√™me nom que son tag Du coup on se rend compte que si on supprime les tags avant, l'op√©ration de dispatching va √™tre empirque, voire impossible. Synchronisation Une fois fait tout ce mic mac, on va synchroniser les notes sur OneDrive, pour qu'ensuite ses notes soient dispo sur mobile. Pour mon cas 2500 notes produisent 8500 \" objets \" qu'il faut synchroniser. Donc j'ai laiss√© tel quel afin que la synchornisation se fasse sans encombre. Finalisation Au bout de quelques soir√©es, la synchro finie, on peut supprimer les tags ajout√©s pr√©c√©demment dans la foul√©e, et enfin profiter :) La suite ? On va attendre que Joplin s'enrichisse de fonctionnalit√©s, par exemple : sur le filtrage de notes: recherche une chaine de caract√®res mais dans un dossier donn√© recherche une chaine de caract√®res mais dans un dossier donn√© sur une p√©riode donn√©e sur le suppport de la prise en charge de plus de documents puisque les pdf ou odt n'y ont pas droit de citer pour le moment etc... Pour le moment je cherche un moyen de cr√©er des notes en me passant du moindre \"client\" desktop/mobile.","tags":"Techno","url":"https://foxmask.net/post/2018/03/17/migrer-evernote-joplin/"},{"title":"Tableau comparatif d'outils de prise de notes partie 2 : Boostnote vs Joplin","text":"Dans la continuit√© du comparatif d'outils de prise de notes , voici 2 editeurs libres utilisant absolument les m√™mes techno et archi. En effet tous deux : utilisent React Native fournissent un client \"lourd\" pour le desktop, un client mobile, mais 0 app web utilisent le format markdown (enfin le markdown de github pour Boostnote pour etre pr√©cis) exploitent le stockage \"sur le cloud\" pour synchroniser ses notes. Malgr√© cela ils se distinguent l'un de l'autre facilement. Boostnote Joplin Stockage Dropbox One drive (dropbox en cours de portage) Import Evernote ever2boost se nomme l'outil, mais plante Oui mais les pdf et docx ne sont pas g√©r√©s donc non synchronis√©s Cloud Pas pu tester le comportement de Dropbox puisque les imports Evernote plantent limitation des tailles de fichiers √† 4Mo sur Onenote, rend les notes vide de sens, donc ne sont pas synchornis√©es Recherche Trouve immediatement les notes et surligne le terme rechercher Trouve les notes comportant le terme sans les surligner Boostnote h√©las, sans mati√®re, sans mes notes migr√©es de evernote, le tour du proprietaire a √©t√© rapide. Par exemple, il a un manque d'uniformisation entre la version desktop et mobile. Sur mobile on a l'impression qu'on a perdu ses notes qui sont pourtant synchronis√©es sur dropbox, la faute au menu qui liste les \"stockages\" au lieu d'afficher directement leur contenu. Par ailleurs, au lieu d'afficher le rendu d'une note dans la liste, pour l'heure, on nous affiche le code markdown.... sur une seule ligne... Joplin Autant l'extraction des notes sur mon desktop a √©t√© hyper rapide (~25min pour 650Mo de 2500notes), autant la synchronisation de Joplin vers Onedrive est TRES longue Mes notes ont √©t√© decortiqu√©es par Joplin qui a comptabilis√© 8500 objets √† synchroniser (ce qui prend en compte, les dossiers, tags, tags dans les notes, images dans les notes etc) J'ai eu 8500 objets synchronis√©s en 4 soir√©es (de 19h √† 1h du matin + une, ce soir, de 20h √† 23h40 ;). Manques : Pour les 2 projets : Organiser les tag et dossiers en 'arbre' car la liste des dossiers et tags devient tr√®s longue et pollue visuellement Pas de widget sur mobile ni pour l'un ni pour l'autre. Limitation d√ª √† un bug li√© React Native il semblerait, donc bug qui impacterait aussi Boostnote. Sur Joplin les tags ne peuvent √™tre cr√©√©s depuis le mobile. Pour Boostnote : Pas de reminder Ce que sait faire l'un mais pas l'autre Boostnote on peut blogger depuis boostnote sur Wordpress :P Joplin les notes peuvent √™tre chiffr√©es int√©gralement transformer une note en reminder et inversement Conlusion Ca serait sympa d'avoir un mix des deux, le desktop the Boostnote et la version mobile de Joplin Boostnote est attrayant visuellement mais Joplin gagne pour moi car j'ai pu recuperer toutes mes notes Evernote, que ca synchronise (m√™me si l'int√©gralit√© aura pris beaucoup de temps la premi√®re fois) Il faudrait que je tarabiscote l'auteur de Joplin pour savoir comment je pourrai cr√©er des notes en me passant du mobile et du destkop pour l'integrer √† TriggerHappy :) Le contenu des fichiers markdown est special du coup si je ne mets pas le bon hash dedans, c'est comme si j'avais piss√© dans un violon. PS : Un dernier d√©tail qui ne gate rien, Joplin c'est fran√ßais :P","tags":"Techno","url":"https://foxmask.net/post/2018/03/15/comparatif-editeurs-partie2-boostnote-vs-joplin/"},{"title":"Tableau comparatif d'outils de prise de notes","text":"Voici un petit recapitulatif sans pr√©tention, des outils de prise de notes que j'ai pu croiser, tester et tenter d'int√©grer √† Trigger-Happy . Il y a 2 ans je m'√©utais d√©j√† pench√© sur le sujet d'Evernote , et ce sujet continue encore et encore de me titiller. Tableau Comparatif des Editeurs Nom Evernote Simplenote Onenote Multi plateforme X X X Widget de liste des notes (android) X X X Recherche dans carnets offline X Recherche dans pdf + images X G√©rer des rappels X X X E-mail pour recevoir les notes X API disponible X Jamais X Prix 29.90‚Ç¨/an (1Go de nouvelles notes) 0 tributaire de OneDrive Tableau Comparatif des Editeurs (2nde partie) Nom Google Keep Nimbus Dropbox Paper Multi plateforme X X X Widget de liste des notes (android) X widget H.S. aucun fonctionne Recherche dans carnets offline Recherche dans pdf + images G√©rer des rappels X X X E-mail pour recevoir les notes X API disponible Jamais En cours X Prix tributaire de GoogleDrive 45$/an - 0 pour 100mb/mois tributaire de DropBox UI : Evernote: L'appli web \"ancienne version\" est devenue catastrophique pour s√©lectionner plusieurs notes. Quand on scrolle ses notes, elles disparaissent litt√©rallement. La \"nouvelle version\" ne permet plus de s√©lectionner plusieurs notes d'un coup ... Sur windows, l'ouverture et la synchro avec le client natif, freezent l'appli Simplenote: Trop trop trop minimaliste. Pas de dossiers pour classer. Poiur ajouter des tags, sur mobile on met 3 heures √† chercher o√π c'est cach√©... Il faut scroller 1km pour arriver en bas de sa page blanche, un champ tag. Le \"Term of service\" tr√®s ol√© ol√©, fa√ßon \"google reader\" ... genre \"je fais ce que je veux sans vous pr√©venir\" OneNote: Au bout de 10 minutes d'utilisation, conflit de synchro alors que je suis tout seul sur le compte depuis le mobile Google Keep: le widget est hideux. ne donne pas envie d'utiliser l'appli. Nimbus: Copie conforme de Evernote, on se retrouve vite avec ses habitudes. J'ai aim√© les recherches sauvegard√©es dynamiquement pour refaire la m√™me recherche ult√©rieurement sans avoir √† la retaper Sur windows, l'ouverture et la synchro avec le client natif, freezent l'appli... comme Evernote :P Dropbox Paper: Sur l'appli web, on peut vraiment tout faire. Le rendu sur mobile est bien si on exclue les tableaux avec un scrolling horizontal pas g√©nial mais quand on se cr√©√© un doc on sait pour quel usage on le fait et donc on √©vitera d'√©diter un tableau trop long sur le mobile sauf si on est joueur :) | Un truc me g√®ne quand m√™me, compte tenu du fait que Dropbox paper s'appuie sur Dropbox, les reminder eux s'appuient sur le calendrier de Google Calendar... et ca j'aime pas du tout. Autant qu'un tel outil ne se \"d√©charge\" pas de la fonctionnalit√© en la d√©l√©guant. On peut comprendre le pourquoi du comment quand on sait/se rend compte que Paper est un outil collaboratif, et que Google Calendar offre la souplesse de la gestion des invitations pour des rdv, mais pour le quidam tout seul dans son coin, g√©rant ses rappels p√©p√®re, ca le fait pas je trouve. My XP :) Dropbox : limitation de l'API Comme Evernote devient de plus en plus compliqu√© √† utiliser, je me suis tourn√©, en premier lieu, vers Dropbox Paper mais avec l'API qui limite la cr√©ation de notes √† 100 par jour, la migration de mes notes Evernote vers Dropbox Paper prendrait 25j ... Du coup je me suis fendu d'un ticket sur le github du SDK pour leur demander une possibilit√© de passer outre le Ratelimit juste pour l'op√©ration d'import.... Attendons ... L'an dernier j'avais demand√© la possibilit√© de cr√©er des \"paper\" et ca avait fini par arriver en novembre dernier :) Nimbus : limitation de la bande passante consomm√©e Ensuite j'ai tent√© Nimbus, qui importe vos notes les doigts dans le nez. Mais comme j'ai 2500notes, l'op√©ration a consomm√© les 100mb du mois ... Je songe refaire l'operation avec un autre compte en pr√©parant mieux le terrain car : L'import des notes, ne recr√©√© pas les dossiers dans lesquelles se trouvaient mes notes. Donc pour preparer les choses, je pense mettre en guise de nom de dossier dans Evernote, un tag qui correspondrait au nom du dossier. Chaque modification, resynchronise avec Nimbus ce qui ampute les 100mb mensuels Donc je conserverai pendant un temps, l'organisation des notes dans un tag (en lieu et place du dossier) et les d√©placerait au compte-gouttes dans un dossier au fur et √† mesure qu'il resterait du rab de bande passante en fin de mois. API : Il n'y en n'a pas pour le moment mais elle serait en cours de dev ... Autres J'ai aussi test√© ya un bail Paperwork, mais je n'ai jamais daign√© installer la stack LAMP + Node sur un serveur. Et pendant ce temps ... j'attends toujours la derni√®re version de Turtl ... Et j'ai d√©marr√© mon propre √©diteur de prise de notes (en django & django rest framework & vuejs) mais c'est juste une version web, loin de couvrir le spectre des fonctionnalit√©s des Nimbus et Evernote... Changement de mes habitudes Avant, avec Evernote, et TriggerHappy, je mettais absoluement TOUT dedans. Des id√©es de projets, des recettes de cuisines, des d√©marches administratives, mes CV, des rdv de doc, des tweets de conf√©rences, des billets chopper chez \"sam et max\", tout y passait. Avec les problemes d'evernote, j'ai d√ª revoir et redecouper ma fa√ßon de m'organiser. A pr√©sent je colle dans pocket \"ma vie de technophile\", et dans l'outil que j'aurai adopt√©, \"ma vie personnelle\". Ca s√©parera les contenus et evitera la dispersion de ma concentration comme quand j'ouvrais Evernote pour lire un rappel et tombait sur un article de sam&max. Wikipedia encore et toujours update du 12/03/2018 un comparatif avec beaucoup beaucoup plus d'info et de softs Autres comparatifs update du 16/03/2018 une partie deux de nouveaux outils de prise de notes est disponible √©galement ici","tags":"Techno","url":"https://foxmask.net/post/2018/03/07/comparatif-editeurs/"},{"title":"Apart√© avec Horizon Zero Dawn","text":"Intro Adepte du FPS depuis \"Counter-Strike 1.3\", et malgr√© une tentative de MMORPG, rien y faisait, c'√©tait toujours le FPS qui avait mes faveurs ou rien. La d√©couverte Mais l√†, au d√©tour de surfing on the toile, √† la recherche de \"hits\" pour le fils, √† par BattleFront II et COD WWII, en d√©cembre 2017, rien d'autre ne semblait se distinguer. Mais mais mais, l'univers de Horizon Zero Dawn a fini par bien me plaire. Un univers post apocalyptique, o√π l'homme redevient simple humain au sein de tribus. Arm√©s d'arcs et de fl√®ches, vivant dans une nature hostile, au dessus des vestiges de b√¢timents et structures d'une √©poque proche de la n√¥tre... Chass√©s par des √©normes animaux robotis√©s ayant r√©sist√©s √† cette fin du monde \"commune\", voire m√™me qui l'aurait provoqu√©e sous l'impulsion de quelques \"savants fous\". Le jeu Ce qui suit n'est qu'un petit tour d'horizon sans rien spoiler, pour cela il y a plein de sites bien faits fournissant d√©tails en tout genre et des soluces quand on s√®che sur une mission. Je ne vous ferai donc pas le tour de tout ce que fourni \" Guerilla Games \", ce afin de vous pr√©server, et vous laisser l'envie de vous mettre √† ce jeu. L'histoire commence par la d√©couverte d'une gamine √©lev√©e par un mentor, et initi√©e au rudiment de la chasse, gamine que l'on voit grandir, pour passer une √©preuve de \"guerriers ado\": \"l'Eclosion\", qui sera le d√©but de tout ce qui d√©coulera. Jeu ouvert et totale libert√© du choix du sc√©nario √Ä aucun moment vous ne vous retrouvez contraint de suivre un chemin, si vous vous retrouver dans une mission trop ardue pour le niveau de comp√©tence du personnage, on peut partir du lieu o√π on se trouve pour se rendre ailleurs dans un lieu plus serein pour se refaire une sant√© quand √ßa se g√¢te :) Des qu√™tes, du tr√®s tr√®s facile (chasser du lapin/sanglier/renard/p√™cher du poisson etc pour pouvoir construire des armes) au tr√®s tr√®s difficile (tuer une horde de Ravageurs/Dents de Scie au fin fond d'une caverne o√π l'on doit pirater un \"coeur\" de creuset) mais, fort heureusement, on nous r√©p√®te √† coeur et √† cris, que tout dans le jeu n'est jamais rendu \"impossible\" (et vous allez lire pourquoi la dessous:) Se d√©placer dans la pampa Bon √©videmment, en jouant on peut faire le neuneu bourrin, et traverser toute la carte √† dos de Brouteuse ou Galopeur pour se contenter des missions principales, mais on passera forcement √† cot√© des petites qui, toutes aussi immersives, permettront de se refaire une sant√©, recharger ses munitions, gagner des points de comp√©tences etc. les montures Cependant comme c'est \"ouvert\", vous pouvez passer d'une qu√™te secondaire √† une principale et inversement. Vous n'√™tes pas obliger de finir ce que vous avez commenc√©, on le laisse tomber et on y revient quand on s'en sent l'envie. Par contre, dans les zones dites corrompues, si vous entamez la mission et en partez parce qu'√† cours de fl√®ches, quand vous y reviendrez, les ennemis √©limin√©s seront de retour. De m√™me, les zones corrompues sont d√©limit√©es par un cercle rouge, si vous en sortez trop longtemps, ca sera la m√™me sentence. Pas glop quand on vient de ratatiner des gros zanimo pas bom√©chant. Donc en gros quand on se tape une zone corrompue, il faut y aller blinder de munitions sur tous ses arcs. A l'oppos√© du bourrin neuneu qui fonce de qu√™te principale en qu√™te principale, on peut prendre le temps de faire des \"t√¢ches\", et qu√™tes secondaires (initi√©es par des personnages avec un point d'exclamation au dessus d'eux) pour acqu√©rir des points de comp√©tences en aidant les personnes crois√©es sur le chemin. Une t√¢che consiste par exemple √† ratatiner des malheureux raton-laveur/sanglier/lapin pour r√©cup√©rer leur viande/peau/os et se forger une carquois plus grand et passer d'une capacit√© de stockage de 10 √† 40 fl√®ches. Mais comme ne tombe pas tout cuit, m√™me en √©crabouillant l'une de ces bestioles vous n'allez syst√©matiquement tomber sur, soit l'os, soit la peau, soit la viande √† chaque coup meurtrier. Nan, les r√©compenses sont random. Selon la couleur de la r√©compense bleue ou verte, on sait qu'on aura mis la main sur l'os ou la peau, r√©compense en blanc, vous choppez la viande. Un qu√™te secondaire , c'est \"un coup de main\" demander par un personnage que vous croisez dans les villes ou en chemin et qui vous dira \"ma soeur est en danger ; peux tu me l'a sauver des griffes de XXX ?\" et comme zetes bonne poire, qu'est-ce que vous ne feriez pas pour un peu plus de points d'XP :) Perso quand je me d√©place, quand on est accroupis dans les hautes herbes, on n'est pas visible par les machines, du coup par r√©flexe, quand je me retrouve dans des lieux inconnus je me dis \"si hautes herbes pour se cacher, doit y avoir danger\" et je fais ma \"pause caca\" en scrutant \"au focus\" les alentours pour rep√©rer un danger imminent, au cas o√π. Les comp√©tences, les armes Avec les points de comp√©tences acquis, vous les √©changez pour de nouvelles aptitudes du genre, \"chasseuse\" pour avoir un carquois plus grand pour ses arcs et fl√®ches, du genre \"discr√©tion\" (pouvoir courir √† cot√© d'une machine sans se faire rep√©rer au bruit). A cot√© des aptitudes de Aloy, on a la possibilit√© d'apporter des \"modifications\" √† ses armes pour accentuer leur puissance, ou √† ses armures (armures qui ne sont qu'en peau de bete hein:) pour accentuer leur r√©sistance. Parmi les fl√®ches de vos arcs, certaines sont de feu, de pierre, d'√©lectricit√©, ou implosives (tr√®s tr√®s pratique pour faire sauter la carapace des carapateurs/crocodile par exemple, qui une fois sans d√©fense, se finissent avec des fl√®ches normales). Tout ce m√©lange de gestion de ses ressources, vous am√®ne √† avoir une strat√©gie accrue selon les lieux (montagne/d√©serts) et les animaux (tant√¥t faible au feu et r√©sistant au froid tant√¥t faible √† l'√©lectricit√© et r√©sistant au feu par exemple). Les zanimos machines Les machines portent des noms √©vocateurs de leur fonction plus que de leur forme d'animal. Certaines sont tr√®s connes, certaines tr√®s retors et ne tombent pas dans vos pi√®ges \"trop gros\". Ah oui je ne vous ai pas dit, on peut poser des pi√®ges pour se d√©faire de casse pieds :) Du coup pour les plus malins qui voient/sentent le pi√®ge, ils ne viennent pas √† vous et c'est eux qui vous attendent de pattes fermes ! Les points de vie En cheminant de ci de l√†, vous croiserez des plantes qui retabliront la sant√© de votre personnage. Et quand cela ne suffira pas, vous aurez la possibilit√© d'acquerir des potions, quand vous n'en trouverez pas sur les corps des m√©chants :) Conclusion Le niveau le plus √©lev√© est le 50, j'en suis √† 42 et j'ai √† peine fait 50% du jeu (selon la barre de progression du jeu). J'ai encore plein de petites t√¢ches qui me pendent au nez comme des d√©fis des chasseurs, assez ardus pour le manchot que je suis sur manettes (15ans de clavier/souris ca aide pas :). Avec le niveau du jeu choisi (qu'on peut accentuer pendant la partie ou adoucir) on prend le temps de faire le tour des mondes. Perso, le seul truc qui ne m'int√©resse pas ; ce sont les dialogues entre Aloy et les personnes qu'elle croise. Je cherche l'action (des relents de FPS ca :) Par contre les enfants, qui au d√©but ne s'int√©ressaient pas √† ce jeu, scotch√©s sur StarWars BF2, s'y sont mis finalement et eux aiment justement les √©changent entre les personnages, articuler comme un film... tout pareil. Au final tout peut se r√©sumer √† \"Graphisme superbe & Univers immersif avec tr√®s grande modularit√© du personnage et libert√© de choix\". Et pour un jeu qui payait pas de mine, Sony semble faire un carton avec ce jeu inattendu.","tags":"Games","url":"https://foxmask.net/post/2018/02/05/horizon-zero-dawn-aparte/"},{"title":"Quand Fabric refuse de bosser","text":"Un comportement completement fou se produit pour moi avec Fabric, il n'execute absolument pas une command (run ici) en se faisant jetter par le serveur o√π il devrait executer celle ci... Je pose √ßa l√† vite fait pour qui rencontrerait le probl√®me √† son tour J'ai un script, le plus con du monde qui execute la commande id sur le serveur de mon choix, comme suit : # coding: utf-8 from fabric.api import env , local , run , settings from fabric.colors import blue , yellow env . user = 'root' env . password = 'root' def the_log ( f ): def new_f ( server ): msg = \"[{0}] {1}\" . format ( server , f . __doc__ ) print ( blue ( msg )) f ( server ) return new_f @the_log def main ( server ): \"\"\"This is my main function that will triggers anything\"\"\" with settings ( warn_only = True ): output = local ( \"id\" ) print ( yellow ( output )) output = run ( \"id\" , shell = True , combine_stderr = True ) print ( blue ( output )) Quand ce script tourne il fait : [ foxmask:~/DjangoVirtualEnv/monitoring/monitoring ] [ monitoring ] $ fab main:server = server1 -H server1 [ server1 ] Executing task 'main' [ server1 ] This is my main function that will triggers anything [ localhost ] local: id uid = 1000 ( foxmask ) gid = 1000 ( foxmask ) groupes = 1000 ( foxmask ) ,24 ( cdrom ) ,25 ( floppy ) ,29 ( audio ) ,30 ( dip ) ,44 ( video ) ,46 ( plugdev ) ,100 ( users ) ,103 ( scanner ) ,112 ( netdev ) [ server1 ] run: id on voit le resultat des 2 commandes... la seconde ne fonctionne pas et pourtant un ssh passe lui ssh root@server1 id uid = 0 ( root ) gid = 0 ( root ) groupes = 0 ( root ) apr√®s avoir √©cr√®m√© la toile √† la recherche de config SSH que j'aurai rat√©, je test√© le meme script sur un serveur. Et la entre serveurs tout passe. La difference avec ma station, OpenSSH 7.1 vs OpenSSH 5.3 Donc me dis que c'est quand m√™me gonfl√© qu'une diff d'openssh me mette dedans Je mets √† jour OpenSSH sur la Redhat mais j'arrive tout juste √† la 5.3.13. Je mets du PDB partout pour voir qu'est-ce qui n'irait pas. Et je tombe sur cette page http://www.fabfile.org/troubleshooting.html?highlight=ssh O√π je fais un bon copier coller du code sous le paragraphe \"Enable Paramiko-level debug logging\" Et l√† √† l'execution ca donne : [ foxmask:~/DjangoVirtualEnv/monitoring/monitoring ] [ monitoring ] $ fab -f main main:server = server1 -H server1 -p pass1 [ server1 ] Executing task 'main' [ server1 ] This is my main function that will triggers anything [ localhost ] local: id uid = 1000 ( foxmask ) gid = 1000 ( foxmask ) groupes = 1000 ( foxmask ) ,24 ( cdrom ) ,25 ( floppy ) ,29 ( audio ) ,30 ( dip ) ,44 ( video ) ,46 ( plugdev ) ,100 ( users ) ,103 ( scanner ) ,112 ( netdev ) [ server1 ] run: id DEBUG:paramiko.transport:starting thread ( client mode ) : 0x66aed748 DEBUG:paramiko.transport:Local version/idstring: SSH-2.0-paramiko_2.4.0 DEBUG:paramiko.transport:Remote version/idstring: SSH-2.0-OpenSSH_5.3 INFO:paramiko.transport:Connected ( version 2 .0, client OpenSSH_5.3 ) DEBUG:paramiko.transport:kex algos: [ 'diffie-hellman-group-exchange-sha256' , 'diffie-hellman-group-exchange-sha1' , 'diffie-hellman-group14-sha1' , 'diffie-hellman-group1-sha1' ] server key: [ 'ssh-rsa' , 'ssh-dss' ] client encrypt: [ 'aes128-ctr' , 'aes192-ctr' , 'aes256-ctr' , 'arcfour256' , 'arcfour128' , 'aes128-cbc' , '3des-cbc' , 'blowfish-cbc' , 'cast128-cbc' , 'aes192-cbc' , 'aes256-cbc' , 'arcfour' , 'rijndael-cbc@lysator.liu.se' ] server encrypt: [ 'aes128-ctr' , 'aes192-ctr' , 'aes256-ctr' , 'arcfour256' , 'arcfour128' , 'aes128-cbc' , '3des-cbc' , 'blowfish-cbc' , 'cast128-cbc' , 'aes192-cbc' , 'aes256-cbc' , 'arcfour' , 'rijndael-cbc@lysator.liu.se' ] client mac: [ 'hmac-md5' , 'hmac-sha1' , 'umac-64@openssh.com' , 'hmac-sha2-256' , 'hmac-sha2-512' , 'hmac-ripemd160' , 'hmac-ripemd160@openssh.com' , 'hmac-sha1-96' , 'hmac-md5-96' ] server mac: [ 'hmac-md5' , 'hmac-sha1' , 'umac-64@openssh.com' , 'hmac-sha2-256' , 'hmac-sha2-512' , 'hmac-ripemd160' , 'hmac-ripemd160@openssh.com' , 'hmac-sha1-96' , 'hmac-md5-96' ] client compress: [ 'none' , 'zlib@openssh.com' ] server compress: [ 'none' , 'zlib@openssh.com' ] client lang: [ '' ] server lang: [ '' ] kex follows?False DEBUG:paramiko.transport:Kex agreed: diffie-hellman-group-exchange-sha256 DEBUG:paramiko.transport:HostKey agreed: ssh-rsa DEBUG:paramiko.transport:Cipher agreed: aes128-ctr DEBUG:paramiko.transport:MAC agreed: hmac-sha2-256 DEBUG:paramiko.transport:Compression agreed: none DEBUG:paramiko.transport:Got server p ( 2048 bits ) DEBUG:paramiko.transport:kex engine KexGexSHA256 specified hash_algo <built-in function openssl_sha256> DEBUG:paramiko.transport:Switch to new keys ... DEBUG:paramiko.transport:Trying discovered key b '8fbb1c6beb76bcc6767eccfcbef3730e' in /home/foxmask/.ssh/id_rsa DEBUG:paramiko.transport:userauth is OK INFO:paramiko.transport:Authentication ( publickey ) failed. du coup me v'la frais avec un paramiko qui met son caca en trouvant bien que l'userauth est ok mais pas la publickey. Ca te ferait mal de me laisser passer puisque tu as vu que le user/pass etait ok ? Etape suivante, trouver comment forcer SSH √† utiliser le mot de passe et basta ... Je n'ai pas encore mis la main sur une solution , je mettrai √† jour si j'en trouve une d'ici l√† :) @Tchao :)","tags":"Techno","url":"https://foxmask.net/post/2018/01/23/quand-fabric-refuse-bosser/"},{"title":"2017 at a glance","text":"2017 a special year this year was plenty of differents and rich activities from differents aspects OpenSource activities In 2015 my github activity concerned 90 contributions where in 2016 I increased by 400%, and finally by 50% more in 2017. During this year, I published 7 releases for the project TriggerHappy, from 1.3.0 to 1.5.2. New ideas, new needs I started a new project with VueJS and Django to produce an a11y editor, with OpenDyslexia font, speech2text and text2speech. I could quickly make something simple that works perfectly, but not for speech2text/text2speech where I still don't know how I could manage that part. That project allowed me to discover a new world between VueJS and DRF. That was a real pleasure. Now VueJS has progressed a lot, and other projects to bootstrap Django project with VueJS have been created to simplify everything, every steps, of the integration. Hacktoberfest (october 2017) An event that allows to meet dev arround the Trigger Happy project with the issues I opened and with other projects I submitted PR like Twython, Requests, Mastodon.py, Cozy-debian, Dropbox Paper, Django Channels and so on. At the end of the month I released a special \"Hacktoberfest version 1.5.0\" to thank every contributors. Meetup I went to just two meetups this year, the Django Paris meetup in september, and one about VueJS/NextJS early this year. I hope to be able to go and see more of them next year. Donation As there are projects where I can't contribute, I make donations instead. This year was for Django Rest Framework. This is a really great project that is so powerful in its simplicity, and managed by really nice guys. PSF Member I joined the PSF also, and i'm now a PSF member in the middle of the armada of all the talented developers. We feel to be part of something bigger than us, and at the same time, a little grain of dust in the Python galaxy ;) Journ√©e des Femmes (march 2017) A special day, where I offered the place of my blog, for women I knew, to publish articles on any subjects. 2018, End and Conclusion Each year, when you are a lonly developer, there are a lot of moments where you don't have the mood to dive into anything, and moments where you are very motivated and ready to redo the world. Thus, I have many ideas about my main project for the next year, and i'd be glad to exchange with future contributors. Finally, 2018 will be the year of my 20 years of contributions in the OpenSource world. I will post about the path I followed since then, that cuold be fun to have a look at of thoses years :) I wish you the best for the celebretion of Christmas","tags":"Techno","url":"https://foxmask.net/post/2017/12/21/2017-at-a-glance/"},{"title":"Coverage, install, upload results","text":"Installation of Coverage pip install coverage running on a django project : Running coverage coverage run -- source = '.' ./ manage . py test - v2 coverage html coverage report Publishing the results with covveralls.io On https://coveralls.io/github/foxmask/django-th get the token, then install pip install python - coveralls Now the command coveralls is available As I don't use Travis (but not in pro) and don't have private repo, I don't put the token in a .coveralls.yml at all, so to share the result we use the command line : COVERALLS_REPO_TOKEN = _the_long_string_of_the_token coveralls INFO : coveralls : 200 INFO : coveralls :{ \"message\" : \"Job ##1.1\" , \"url\" : \"https://coveralls.io/jobs/30251510\" } If you go back to coveralls.io, you will find the job and the result of the coverage Then add the following to your README.rst (for example) .. image :: https://coveralls.io/repos/github/foxmask/django-th/badge.svg :target: https://coveralls.io/github/foxmask/django-th End Ready to go !","tags":"Techno","url":"https://foxmask.net/post/2017/10/14/coverage-install-upload-results/"},{"title":"Retour sur des clients Mastodon","text":"Dans le genre \"j'ai test√© pour vous\", voici un retour sur des clients mastodon pour android, que j'ai crois√© depuis l'ouverture de ce reseau social 1 Tusky : pour: UI agr√©able, le haut de l'appli est √©pur√©e (comparer √† Subway Tooter par exemple , cf plus bas) contre: mono compte on n'a pas le compteur du nombre d'√©toiles, retoot, r√©ponses pour une toot donn√© 2 Mastalab : pour: multi compte appli propre traduction des toots √† la demande programmation de toots l'auteur de l'application est √† l'√©coute des demandes, par exemple C'est fran√ßais (en plus d'√™tre opensource) :P contre: la partie param√®tres qui parait un peu trop charg√©e parfois le bouton de traduction apparait pour des mots \"non compris\" et qui ne veulent \"rien dire\", comme quand je toot \"bonjello\", du coup ca pollue un peu visuellement 3 Subway Tooter : pour: multi compte la personalisation des couleurs de l'interface la personalisation de l'affichage des onglets contre: on n'a pas le compteur du nombre d'√©toiles, retoot, reponses pour une toot donn√© la grande quantitie de param√®tres, compar√© √† mastalab, on ne sait meme pas √† quoi serve la moiti√© :) on ne peut pas avoir une UI plus epur√©, l'affichage constant du brandeau de l'onglet courant + celui du bas de l'√©cran est de trop. Un bouton flottant en bas suffirait et le haut pourrait disparaitre pour ressembler plus √† ce que font mastalab ou tusky de ce cot√© l√† consomme trop de batterie 4 Twidere : pour: multi comptes on peut ecrire un texte qui est publi√© sur twitter et mastodon en m√™me temps contre: la timeline m√©lange les toots et les tweets, comme j'aime bien le rangement, je prefere les separer, ce que ne permet pas l'application consomme trop de batterie beaucoup trop de param√®tres plus que subway tooter 5 Client Web Je finirai pas un client mastodon web : tooty qui est super bien foutu mais dont le seul point \"contre\" que je souleverai sera que par defaut on ne peut pas d√©finir la visibilit√© de ses toots. Il faut faire gaffe √† chaque fois √† qui on parle. 6 Conclusion Je recherchais dans ces clients, quelque chose de propre (et pas gourmand) et avec toutes les infos (les \"compteurs\") sur un toot donn√©, sans √™tre contraint de l'ouvrir. j'en ai aussi test√© d'autres qui √©taient m√™me en beta sur le playstore mais au final je conserve Mastalab , qui avec la mise √† jour de ce mois, me va tr√®s bien √† un truc ou deux pr√®s qui seront r√©solu dans les prochaines versions :) Merci donc √† son auteur Thomas Schneider !","tags":"Techno","url":"https://foxmask.net/post/2017/08/31/clients-mastodon/"},{"title":"Fabric, et la contrib django pour acceder √† tous vos joujoux","text":"Dans mon billet pr√©c√©dent , j'√©voquais l'existence d'une \"contrib\" Fabric pour int√©grer Django au sein de ses tasks Fabric, mais qu'elle d√©connait... Apr√®s maints tests supplementaires et digging ze toile, j'ai entrevu la lumi√®re apr√®s la lecture de 3 issues chez Fabric #1509 , #1033 , #1207 . Tout compuls√© ca donne ceci : # coding: utf-8 import sys import os # ajout du chemin o√π se trouve projetA path = os . path . join ( os . path . dirname ( __file__ ), '../../projeta' ) sys . path . insert ( 1 , path ) # appel de la librairie django de Fabric pour appeler les objets Django from fabric.contrib import django django . project ( 'projeta' ) # import de django import django # setup django django . setup () # appel du model from projeta.models import MonModel def main (): print ( MonModel . objects . get ( name = 'foobar' )) execution $ fab main foobar Done. Ceci fonctionne (pour un vhost) si vous avez coll√© votre appli \"fabric\" dans le m√™me dossier que celui du projet Django, sinon adapter la ligne path = pour que ca match votre env","tags":"Techno","url":"https://foxmask.net/post/2017/07/10/fabric-contrib-django/"},{"title":"Fabric, sa var 'env' et nos variables dynamiques !","text":"Fabric est un s√©rieux concurrent face √† ansible, quoiqu'on en pense. Intro : J'ai eu √† faire √† ansible pendant plus d'un an pour automatiser des installations d'applications java sur tous les types de serveur d'applications du march√©. Mais comme √† mon habitude, je n'utilise pas des outils de DevOps pour ce qu'ils ont √©t√© con√ßus d√®s le d√©part, √† savoir, r√©p√©ter la m√™me operation sur plusieurs hosts √† la fois. Non, j'ai vu dans ansible, la possibilit√© d'automatiser toujours la m√™me op√©ration sur UN serveur et UN seul √† la fois. En effet, les environnements jEE en entreprise sont du genre \"production\", \"test\", \"developpement\", et √©videment, on ne va pas s'amuser √† deployer la version de dev automatiquement en test et en prod. Donc on a 3 environnements par client, chacun vivant sa vie, comme chacun peut l'imaginer. Les corrections de bug de prod dans un coin, les √©vol en cours sur l'env de test etc... Du coup on voit bien que l'industrialisation \"classique\" des DevOps, consistant √† installer 'n' fois un service sur 'n' serveurs, ne colle pas du tout au \"m√©tier\". Ansible at first Avec ansible tout se passait pour le mieux, mais arriva un moment o√π, les serveurs unix devenaient retord et ansible n'accrochait plus ces derniers correctement. Plus de retour des t√¢ches habituellement ex√©cut√©es, tant√¥t stuck, tant√¥t plant√©es, mais trop souvent, rest√©es dans le flou avec une question r√©currente : \"mais o√π ca en est ?\" Alors sont en cause les serveurs eux m√™mes puisque surcharg√©s et RAM faible, mais √† ce moment l√† je m'attendais √† un minumum de reaction de ansible pour quand m√™me \"revenir\" au serveur d√©clencheur du playbook et s'arr√™ter proprement. Donc las de cette situation, j'ai r√©√©crit tous mon playbook et roles ansible en 5 modules python avec fabric en lieu et place. Fabric : avec ansible, il est possible de fournir un fichier JSON contenant des extra-vars. Tr√®s pratique pour moi, pour fournir √† ansible, dynamiquement, le nom du serveur et les URL des applications java √† recuperer pour les deplooyer ensuite. avec fabric , je fis un petit wrapper qui me permet de passer du JSON en un fichier settings √† la django dynamiquement. Par contre, j'oubliais que comme 'n' users pouvaient utiliser mon appli Django pour d√©clencher les installations, tout allaient √©crire dans le m√™me fichier settings ... Donc en creusant comme avoir aussi avec Fabric un fichier d'extra-vars, je n'ai rien trouv√© de meiux que de peupler la variable env de Fabric avec ma propre sauce. Vous pourriez objecter que c'est une grosse connerie parce que je vais me m√©langer les crayons avec les variables de Fabric, mais que n√©ni, mes variables sont toutes en MAJUSCULE, ce qui n'est pas la cas de Fabric. Donc env.user et env.password ne seront pas √©cras√©es par mes env.ENV_USER et env.PASSWORD par exemple. Donc pour obtenir une fonctiionnalit√© √©quivalente de extra-var de Ansible avec Fabric, on sp√©cifiera sur la ligne de commande l'option \"-c\" pour que Fabric aille chercher le fichier RC, qui lui, contiendra le m√™me contenu que le fichier settings sus-mentionn√©. Ainsi 'n' users ne se marcheront plus sur les pieds. Derni√®re subtilit√© donn√©e dans la doc : les fichiers RC sont lus comme suit : CLE_A = valeur o√π valeur sera retourn√©e sous la valeur : 'valeur' si valeur est un path ca donnera '/mon/path/' ce qui est la chianli quand on fait un os.path.join(env.CLE_A, 'sous_dossier') puisqu'on obtiendra comme valeur : '/mon/path/'/sous_dossier de m√™me pour mon env.ENV_USER qui a pour valeur 'foxmask' ; quand je fais un sudo(cmd, user=env.ENV_USER) j'ai droit √† un manignifique \"sudo user 'foxmask' n'existe pas\" de m√™me pour un dict CLE_B = [{ 'truc_machin' : 'bidule' ] sera retourn√© sous une la forme d'une string du coup on le voit on se fait bien enfumer Pour r√©gler son compte √† ce comportement, reste √† se faire une petite m√©thode pour √©purer les valeurs de ses propres variables, avec un coup de env . MAVARIABLE = env . MAVARIABLE . replace ( \"'\" , '' ) l√† o√π c'est n√©c√©ssaire et appeler ladite m√©thode dans les modules o√π on utilise \"env\" :P Et pour la cas du dict, il faudra passer par le module \" ast \" pour revenir √† un \"dict\" nomal, like this cle_b = ast . literal_eval ( env . CLE_B ) et on pourra retourner faire joujou avec son dict comme d'hab Fabric and Django integration Un moment j'ai cru voir une lueur d'espoir avec cette contribution qui permettrait d'acc√©der √† \"ses affaires\" made in Django, depuis Fabric, genre au pif les donn√©es du mod√®le que j'injecte en JSON √† la vol√©e et r√©cup√®re dans env.MES_VARIABLES_A_LA_NOIX mais, j'ai vite d√©chant√© avec un erreur on ne peut plus bateau : ModuleNotFoundError : No module named 'monmodule' Conclusion : Voila voilo pour une billet fait rapidos sur des utilisations completements d√©tourn√©es du but premier :)","tags":"Techno","url":"https://foxmask.net/post/2017/07/06/fabric-sa-var-env-nos-variables-dynamiques/"},{"title":"Orotangi, pour se jouer de la dyslexie","text":"intro Je me suis lanc√© dans un nouveau projet, de prises de notes √† la Evernote, qui sera loin de couvrir tout cette derni√®re offre mais pour l'heure ce n'est pas le but. Un sujet qui me tient √† coeur ici, c'est qu'il me faut absolument la gestion de la police de caract√®res OpenDyslexic. En effet, \"n¬∞2\" est concern√© et c'est vraiement un plaie √† g√©rer pour sa scolarit√©. J'ai le pot d'avoir un coll√®ge qui a un protocol pour les dyslexiques, et l√† c''est g√©nial, mais il faut pousser plus loin. Par ailleurs il existe des associations pour dyslexiques dont Ordyslexie qui recycle des ordinateurs pour les reconditionner et fournir aux adh√©rents, moyennant un certain budget, \"un cartable numerique\" o√π l'√©l√®ve dyslexique, fini par √™tre plus rapide que son camarade non dyslexique. Seulement pour obtenir ce \"cartable\" il y a des d√©marches medicales et l'achat du \"cartable\", dont le co√ªt s'envole gr√¢ce √† la licence Microsoft OneNote... Du coup face, √† √ßa, alors que Bill Gates (l'homme le plus riche du monde?) a mont√© une fondation (sans aucun rapport:), il aurait au moins pu laisser courir sur la licence de OnteNote..., je me suis lanc√© dans ce projet aux antipodes de ce que je fais habituellement. Le \"bidule\" (projet) inclura donc : Une prise de note facilit√© avec un √©diteur \"tout pret\" avec l'utilisation de la police OpenDyslexic (ou non selon ce que chacun voudra) Du Text To Speech / Speech To Text, que le texte mis dans l'editeur soit lu au gamin (en surlignant mot √† mot si possible), ou que le gamin parle et que ca enregistre ce qu'il dit dans une note. Les Dyslexiques n'√©tant pas tous identiques, chacun adaptera l'outil selon ce qui lui rendra service. Par exemple la police OpenDyslexic, pour certains d'entre eux n'est pas agr√©able, donc ils pourront retourner √† une police \"classique\". Plus tard j'aimerai bien, comme ce que fait Ordyslexie, scanner des doc pour √©crire directement dedans :) ou qu'apr√®s le scan, l'appli enregistre le texte dans une note pour que le TextToSpeech fasse la lecture du contenu. la Dyslexie et des \"g√©nies\" Enfin √† celles et ceux qui penseraient que les dyslexiques ne sont pas des lumi√®res (vous en connaissez forcement 2, les plus c√©l√®bres qui soit) et que \"c'est rien, c'est passager\" . Il n'en est rien : Voici quelques t√©moignages sur Ted : Overcoming Dyslexia, Finding Passion The True Gifts of a Dyslexic Mind Free at last we are free at last Comme √† mon habitude, ce projet est libre et je ne serai pas contre un peu d'aide si vous vous y connaissez un peu avec : Django Rest Framework VueJS l'UX adapt√© aux dyslexiques (m√™me si vous n'y connaissez rien en dyslexie mais en UX je prends quand m√™me ; de nombreux sites expliquent ce qu'on ne doit pas faire dans une page pour eux) Et comme \"qui peut le plus peu le moins\", ce projet devrait √™tre utilisable pour tout le monde (par le biais de pr√©f√©rences / param√®trages) Checkpoint Les sources sont l√† En l'√©tat actuel le projet permet d'ajouter des notes, d'importer des notes Evernote, de les afficher avec un √©diteur Markdown (mais je pense le retirer parce que je ne m'imagine pas un enfant taper du markdown plus facilement que surligner le texte et s√©lectionner la mise en forme qui va bien, ou √† d√©faut de le retirer, permettre par un param√®trage, d'utiliser l'editeur Markdown ou CKEditor/TinyMCE par exemple) Quand le projet sera m√ªr pour une premi√®re version, je ne pourrai que vous proposer de l'installer chez vous, je ne pourrai pas l'h√©berger comme ce que je fais pour un autre projet. Mais aucune crainte √† avoir, la documentation sera l√† pour vous y aider :) End Cela sera mon 2nd projet qui vous permettra une nouvelle fois, de prendre le contr√¥le de vos donn√©es en les sortant des compagnies qui vous font payer pour ce service, Evernote s'√©tant illustr√©e en novembre dernier en s'occtroyant le prvil√®ge de lire nos notes (avant de se raviser apr√®s que de nombreux clients aient manifest√© leur m√©contentement) ... ca sera la reponse du berger √† la berg√®re du m√™me coup :)","tags":"Techno","url":"https://foxmask.net/post/2017/04/25/orotangi-pour-se-jouer-dyslexie/"},{"title":"Premi√®res fois","text":"Premieres Fois Un petit tour de mes premi√®res fois insolites Linux Installation Redhat 5 (la version libre du temps de debian 2 avant que Redhat ne devienne une boite), dans le manuel que je lisais page apres page je me suis farci la compilation du kernel de l'√©poque. Emacs au lancement je ne savais pas comment en sortir... j'ai reboot :P et plus jamais lanc√© ce truc Programmation Perl Pondre ce genre de truc : while ( <> ) print ; Adepte du \" Perlgolf \" avec une petite 21¬∞ place :) HTML 3 je d√©couvris la premiere \"interface graphique\" avec laquelle j'ai produit en perl, des trucs QQ comme g√©rer les resultats du championnat de france de foot... fallait bien commencer par quelquechose :D PHP 3 ! arriver √† gerer les sessions ! Oauth quand tu reussis √† l'utiliser du premier coup Python d√©couvrir Python, par le biais de Trac, et vite oublier (avant d'y venir 5ans +tard) Internet FAI - Hosting Pass√© du 3Ko/s avec son \"bippppppppp griiiii hiii ouiiichhhh\" au silencieux RNIS 7Ko messieurs dames √† la raie manta pour du 128K H√©berg√© sa page perso \"gratuitement\" sur http://pagesperso.free.fr/ avec DotClear ! utiliser dyndns pour chopper son PC √† la maison :) zero zocio twitter : \"mais √† quoi ca sert ce truc\" ? Communaut√© \"Libre\" et premiers pas/contacts avec l'opensource Premi√®re Linux Expo, tenir le stand DaLinuxFrenchPage aux cot√©s de GCU, croiser R. Stallman en chausettes jouer au pipo la FSF Song dans les all√©es du salon :) puis Miguel de Icaza (le p√®re de Gnome) IRC se faire kick ban en se pointant sur #linuxfr@ircnet en venant avec mIRC ! devoir se trouver un pseudo : vous voyez le r√©sultat ) :) Jeux en ligne D√©couverte de Doom, lors d'une journ√©e nationale de l'internet √† Boulogne Billancourt avec DaLinuxFrenchPage et Fabien Penso Quand vint l'ADSL, alors HL1 puis CS1.3 devint mon violon dingue Vomir Steam √† sa sortie","tags":"General","url":"https://foxmask.net/post/2017/04/07/premieres-fois/"},{"title":"Trigger Happy two weeks after a strong Storm...","text":"Two weeks ago, I told to myself, to try a last thing to get out the project of anonymity, before stopping publishing news about it. After all, I made the project for myself, If nobody needs it. It's Okkkkkkkkkay. But after some nice comments and exchanges on Linuxfr.org , a friend, that I had lost sight of, decided to post the project on HackNews . Then came the storm for the project. A lot of things suddenly awoke in the same times. First The stars on the github page reached the double in 2 days. But, as the link on hackernews pointed to the home of TriggerHappy website, they had to search on this one where to find the source of github. Yes the link is in the bottom, but how many people does not scroll down and leave before ? That signal told me hmm guys would seem to appreciate, as to reach that page, they come from the main page of the project, and the curiosity is awaken Second : The day after, a well known french website korben posted an article too. I thought \"God, heaven can wait\" :D the stats of the website exploded November the 14th: 30.000 hits in 2 days. Reminder, the project is unknown until then, so the visits are mine :) Third the day after, the project reachs the Python Github Trending : position 8. Behind were : Ansible, Django, Requests, not less ;) This, during a week. Consequences : Some nice mails (like one from an ex developper from ... IFTTT.com :) and github issues for nices requests like supporting new service, and encouragements on IRC and Twitter, essentially from people that do not come from the Python univers, or from non-French developpers fom the Python world. Here is a little part of the web, which spoke about Trigger Happy : 4 short links CronWeekly n0where with a rate of 50‚ÑÖ Forum peerlyst (en) Forum Domadoo (fr) Forum Producthunt Today The madness is fallen, I can continue to sleep well without being overloaded by many requests ;) But of course, do not hesitate to ask for them, or drop a message to exchange ideas. for example like here . May be one day I will post you an article about Taiga.io, not necessary about the product/project itself but about the guy , bameda, who helped me a lot about how to interact with Taiga with great kindness... This is for this kindness and this exchanges that I always love to make things here and there, for the Open Source, my way.","tags":"Techno","url":"https://foxmask.net/post/2016/11/26/trigger-happy-two-weeks-after-strong-storm/"},{"title":"UnitTest, Coverage and Mock","text":"Introduction When we write unittest, it comes the moment when we cross the road of some services that we can't test. So the moment comes when we have to use Mock In the following text, you should spot some evidence related to django ;) Function to mock here is the piece of code I will \"mock\" : def save_data ( self , trigger_id , ** data ): \"\"\" let's save the data :param trigger_id: trigger ID from which to save data :param data: the data to check to be used and save :type trigger_id: int :type data: dict :return: the status of the save statement :rtype: boolean \"\"\" status = False # set the title and content of the data title , content = super ( ServiceTwitter , self ) . save_data ( trigger_id , ** data ) if data . get ( 'link' ) and len ( data . get ( 'link' )) > 0 : content = str ( \"{title} {link}\" ) . format ( title = title , link = data . get ( 'link' )) content += self . get_tags ( trigger_id ) try : self . twitter_api . update_status ( status = content ) status = True except Exception as inst : logger . critical ( \"Twitter ERR {}\" . format ( inst )) update_result ( trigger_id , msg = inst ) status = False return status Mock a complet function the piece of unittest with the mock applied to save_data : from unittest.mock import patch def test_save_data ( self ): token = self . token trigger_id = self . trigger_id content = 'foobar #tag' self . data [ 'title' ] = 'a title' self . data [ 'link' ] = 'http://domain.ltd' self . assertTrue ( token ) self . assertTrue ( isinstance ( trigger_id , int )) self . assertIn ( 'text' , self . data ) self . assertNotEqual ( self . data [ 'text' ], '' ) with patch . object ( ServiceTwitter , 'save_data' ) as mock_save_data : se = ServiceTwitter ( self . token ) se . save_data ( trigger_id , ** self . data ) mock_save_data . assert_called_once_with ( trigger_id , ** self . data ) then the testing show us coverage run --source='.' manage.py test -v2 ... test_save_data (th_twitter.tests.ServiceTwitterTest) ... ok ... Fine ! But the coverage report (in html) shows us and the % [foxmask:~/DjangoVirtualEnv/django-trigger-happy/django-th] [django-trigger-happy] coverage report -m |grep twitter th_twitter/__init__.py 2 0 100% th_twitter/forms.py 12 0 100% th_twitter/models.py 21 0 100% th_twitter/my_twitter.py 117 56 52% 119-121, 138-173, 190-209, 219-231, 241-250, 256, 273-278 th_twitter/tests.py 80 0 100% Mock one FunctionB in a FunctionA It's fine, but in our quest of the perfect tests and to be sharper, we would like to test the content of save_data and only mock the function that makes the call to the Twitter API (named Twython). To do so we can use the manager like previously, or a decorator. Just have a look : from unittest.mock import patch @patch.object ( Twython , 'update_status' ) def test_save_data ( self , mock1 ): self . create_twitter () token = self . token trigger_id = self . trigger_id content = 'foobar #tag' self . data [ 'title' ] = 'a title' self . data [ 'link' ] = 'http://domain.ltd' self . assertTrue ( token ) self . assertTrue ( isinstance ( trigger_id , int )) self . assertIn ( 'text' , self . data ) self . assertNotEqual ( self . data [ 'text' ], '' ) se = ServiceTwitter ( self . token ) se . save_data ( trigger_id , ** self . data ) mock1 . assert_called_once_with ( status = content ) And this time the coverage report show us and the % [foxmask:~/DjangoVirtualEnv/django-trigger-happy/django-th] [django-trigger-happy] coverage report -m |grep twitter th_twitter/__init__.py 2 0 100% th_twitter/forms.py 12 0 100% th_twitter/models.py 21 0 100% th_twitter/my_twitter.py 117 40 66% 119-121, 138-173, 205-208, 241-250, 256, 273-278 th_twitter/tests.py 80 0 100% Mock (2 or more functions) FunctionB and FunctionC in a FunctionA Let's suppose you want to mock several functions in save_data , we will do something like this : from unittest.mock import patch # be careful with the order of the decorator @patch.object ( Twython , 'update_status' ) # will go to mock2 @patch.object ( AnotherService , 'other_method' ) # will go to mock1 def test_save_data ( self , mock1 , mock2 ): self . create_twitter () token = self . token trigger_id = self . trigger_id content = 'foobar #tag' self . data [ 'title' ] = 'a title' self . data [ 'link' ] = 'http://domain.ltd' self . assertTrue ( token ) self . assertTrue ( isinstance ( trigger_id , int )) self . assertIn ( 'text' , self . data ) self . assertNotEqual ( self . data [ 'text' ], '' ) se = ServiceTwitter ( self . token ) se . save_data ( trigger_id , ** self . data ) mock1 . assert_called_once_with () mock2 . assert_called_once_with ( status = content ) /!\\ Here, be really very carefull with the order of the decorator: if the parms for Twython.update_status and AnotherService.other_method are the same, we can write twice the same like mock1.assert_called_once(status=content) and mock2.assert_called_once(status=content) (for example) but if they don't, be sure to set the right parm to the right 'mock' End Hope this will be helpful like it was for me as I spent a lot of time to find and test that ;) If you want to dig that topic have a look at the doc","tags":"Techno","url":"https://foxmask.net/post/2016/10/21/test-coverage-mock/"},{"title":"Revue Technique de la semaine du 05/09/2016","text":"Cela faisait un bon moment que je ne m'etais pas pench√© sur une revue technique, depuis ma migration Wordpress => Pelican √† vrai dire :) Donc voici un petit tour de la technosphere des sujets, projets (et autre bidules machins trucs) crois√©s sur le chemin Wallabag 2.0.8 Wallabag nous gratifie d'une version 2.0.8 avant une potentielle 2.1 Sam et Max 'ils' sont de retour avec de nouveaux billets dont le dernier aborde UUID : V√©rifier qu'un UUID est valide en Python Django ... et une nouvelle release une version 1.10.1 contentant quelques bugfix ... et Docker Dockerizing a Python Django Web Application ... et le framework message Django Tips #14 Using the Messages Framework Django Tips #13 F() Expressions ... et sa config gunicorn Deploying Django with Gunicorn and Supervisor Billet que j'ai trouv√© trop trop trop court compar√© √† un de mes vieux billets Python La couverture de ce livre Python 201 , m'a fait penser √† un coaching culinaire par Ratatouille :) N'en demeure pas moins qu'il existe ... pour les dev intermediaires. 7 trucs pour ecrire du code plus meilleur ;) 7 Simple #Tricks to Write Better #Python Code https://t.co/uqEN50U7nI pic.twitter.com/dk2NDVVhZd ‚Äî Nicolas RAMY (@darkelda) 30 ao√ªt 2016 IndexError Comment pourquoi que ca marche-t-il (pas) mon code, S.O.S d'un codeur en d√©tresse : voici les 5 derniers sujets trait√©s ou en cours sur IndexError.net Facebook API Ajouter des donn√©es aux fields d'un form Architecture : faut-il limiter les methodes accessibles d'un objet ? Comment trier les logs de ses diff√©rentes applis ? decorateur async await vos types customis√©s utiles Meetup La rentr√©e scolaire annonce son lot de rencontres, dont une le 13/09 : Paris Devops Firefox On nous promettrait un Firefox 7x plus rapide que l'actuel gr√¢ce au multiprocessing, qui arriverait entre la version 49 et la 51. On pourrait d√©j√† test√© la fonction en l'activant depuis \"about:config\" en changeant le param√®tre \"browser.tabs.remote.autostart\" √† True. Un temps sur mobile, le multiprocessing a √©t√© retir√© car produisant un bottleneck, mais avec cette am√©lioration sur la version desktop, le mutliprocessing sur la version sur mobile pourrait faire son retour. Smartphone Cot√© smartphones, pendant que Samsumg met le feu , Apple se mouille 30minutes 'max' et nous fait des √©couteurs sans fils et Google rebaptise sa gamme Nexus en Pixel pour faire moins geek et plus grand publique. Ce n'est qu'un au revoir Un dinosaure qui disparait d'internet, Readability ferme ses portes le 30 de ce mois, √† vos API, √† vos migrations de service, de pr√©f√©rence vers Wallabag ;) C U A bient√¥t !","tags":"Techno","url":"https://foxmask.net/post/2016/09/08/revue-technique-de-la-semaine-du-05092016/"},{"title":"PyCharm Pro for Free","text":"Hi, Here is a very short short short post to explain how to get the PyCharm Pro edition and feel like at home. And ... this is completely legal I suppose you use PyCharm Community edition to write your code in Python / Django, but now it is not enough for you. Pre requisites : you participate to a opensource project as core dev or are a leader of one Project must be at least 3 months old Project is in active development Project does not provide commercial service if it's your case : download the pro version then request your licence by selecting apply under 'For Regular Projects' Once you get confirmation by mail, create an account on jetbrains to activate the licence. At the cherry on the cake : this licence works for ALL THE IDE of jetBrains, even RubyMine and PhpStorm if you want. for example, you download RubyMine, and at the licence request, fill it with your account and go ;)","tags":"Techno","url":"https://foxmask.net/post/2016/09/01/pycharm-pro-for-free/"},{"title":"Django et HTTPS","text":"Un rapide billet pour poser ici un retour de prise de t√™te :) Avec la venue de LetsEncrypt , il va fleurer bon les sites en HTTPS de ci de l√†. Par contre une fois mis en place en prod, cot√© dev il arrive qu'on fasse un hack vite fait pour pas passer 3 plombes sur sa conf nginx comme √ßa : export HTTPS = on ./manage.py runserver et roule ma poule ! Bon en prod par contre on ne va pas s'amuser √† ca quand on a un NGINX en frontal du Gunicorn par exemple. Et si on laisse en etat, au final tout acc√®s √† request.scheme vous retournera dans les dents un casse-burette 'http'. Donc en suivant la doc on modifie son settings en rajoutant SECURE_PROXY_SSL_HEADER = ( 'HTTP_X_FORWARDED_PROTO' , 'https' ) mais √ßa ne suffit toujours pas. Nginx renverra encore et toujours du HTTP... donc √† sa conf toute QQ location / { add_header Front-End-Https on; add_header Cache-Control \"public, must-revalidate\"; add_header Strict-Transport-Security \"max-age = 2592000; includeSubdomains\"; proxy_pass http://127.0.0.1:8080; # Pass to Gunicorn proxy_next_upstream error timeout invalid_header; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Host $host; } on rajoutera proxy_set_header X-Forwarded-Proto $scheme; pour obtenir : location / { add_header Front-End-Https on; add_header Cache-Control \"public, must-revalidate\"; add_header Strict-Transport-Security \"max-age = 2592000; includeSubdomains\"; proxy_pass http://127.0.0.1:8080; # Pass to Gunicorn proxy_next_upstream error timeout invalid_header; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Host $host; proxy_set_header X-Forwarded-Proto $scheme; } Et l√† au joie, on obtiendra bien un request.scheme vallant 'https'.","tags":"Techno","url":"https://foxmask.net/post/2016/07/03/django-et-https/"},{"title":"Evernote de pire en pire","text":"It's not a bug it's a feature Jusqu'alors avec evenote on pouvait, via l'interface web supprimer plusieurs notes √† la fois. Mais avec la nouvelle interface ce n'est plus possible.... c'est pas un bug c'est une feature ! Et sur l'application Android on ne pouvait pas supprimer plusieurs notes √† la fois, juste une par une. C'√©tait chiant √† souhait mais avec le coup de main c'√©tait supportable puisque un menu contextuel apparaissait tout mimi pour accomplir son office. √Ä pr√©sent les temps changent : on peut faire une suppression de plusieurs notes d'un coup ! C'est pas beau √ßa ? Eh bien non c'est pas beau mais alors pas du tout ! Pourquoi ?! Parce qu'il faut s'y reprendre √† plusieurs fois pour que la suppression soit effective ! c'est pas un bug c'est une feature ! Alors autant sur l'interface web on peut reprendre la vieille interface moins \"flat design\" que la nouvelle, mais qui fonctionne, autant sur Android on est cuit et l√† √ßa moi √ßa passe plus. Le comique de r√©p√©tition √ßa le fait pas. Quand j'ai 200 notes √† virer parce que lu ma veille techno du jour... Ils feraient bien de prendre des cours chez pocket qui fait √ßa les doigts dans le nez sur une quantit√© de notes illimit√©e, l√† o√π evenote n'en permet que 20 d'un coup. And so ? Et donc, du coup me revoil√† √† la recherche d'une application √©quivalente avec : - Client Android - Client Web - Le tout avec gestion des notes offline et optionnellement, possibilit√© de cr√©er des \"rappels\" Et tant pis pour l'OCR. Et pas de self-hosted, les projets test√©s sont pas glop ,ou trop lent ou sans API exploitable ou mal finie :-/","tags":"Techno","url":"https://foxmask.net/post/2016/06/02/evernote-de-pire-en-pire/"},{"title":"Apparition subliminiale de TriggerHappy au PHPTour 2016 avec Wallabag","text":"Le mois dernier s'est d√©roul√© le PHPTour 2016 √† Clermont Ferrand. Lors de cet √©v√®nement, TriggerHappy fit une apparation subliminale ;) lors de la pr√©sentation, par le project wallabag , de la migration version Symfony 3. La pr√©sentation de @nicosomb et de son bin√¥me @j0k est disponible ici . Et \"l'apparition\" ici . Mais ... je vous vois venir faire votre \"G√©ronte\" et me sortir \"Mais que diable allait il faire dans cette gal√®re\" (genre : \"m√©langer des projets PHP et Python mais quelle h√©r√©sie\") mais en fait, ce n'est pas du tout le cas. Wallabag dans sa mouture 2.0, pourvue de son API, laisse toute latitude et on a franchement plaisir √† y mettre ses d√©couvertes au gr√© du buttinage sur la toie ou √† faire sa veille techno en recup√©rant r√©guli√®rement les infos de ses sites favoris, sp√©cialis√©s. En plus, ce qui ne g√¢te rien, c'est l'existence de plugin pour Firefox et d'une application Android. Ca en fait un bon projet bien complet √† mon sens, qui surpasse le classique troll de PHP vs Python. Alors \"ayez confiaaaance\" et laissez vous tenter par les 2 :)","tags":"Techno","url":"https://foxmask.net/post/2016/06/01/trigger-happy-apparition-subliminale-phptour-2016-wallabag/"},{"title":"Panda, Le gros nounours noir et blanc est pass√©","text":"En lisant ma pile d'articles de veille techno dans mon instance wallabag , je suis tomb√© sur un article mesurant le temps pass√© sur ses projets. Rien de nouveau au soleil puisque tout √† chacun connait bien pandas :) Cependant, apr√®s un petit coup de pip install git-pandas et en ex√©cutant ce script panda on peut donc mesurer le temps pass√© directos sur ses d√©pots, et donc pour bibi, il en ressort ceci $ python hours_estimate.py | grep -v 0 .00000 committer hours repository 0 foxmask 2 .603889 django-th 3 Olivier Demah 134 .288056 django-th 4 FoxMaSk 3 .017500 django-th 0 Olivier Demah 3 .000000 django-th-ansible 0 Olivier Demah 3 .877222 wallabag_api 0 Olivier Demah 8 .882778 dj-diabetes 1 foxmask 1 .000000 dj-diabetes En tout 140heures pour Trigger Happy. Si je pars sur des journ√©es de 6heures ca fait 23jours ou 46jours en codant \"√† temps perdu\", en gros un bon mois et demi non stop quoi. 4hres pour l'API wallabag 9hres pour le projet de \" gestion de son diabete au quotidien \" Pas de quoi fouetter un chat, mais ca donne une id√©e du temps que j'ai d√©pens√© ;) Evidement la dedans on ne peut pas quantifier les dur√©es pour le temps pass√© √† tester moult techno pour arriver au resultat escompt√©. Mais √ßa donne un ordre de grandeur !","tags":"Techno","url":"https://foxmask.net/post/2016/05/14/le-gros-nounours-noir-et-blanc-est-passe/"},{"title":"A la recherche d'une alternative opensource d'Evernote","text":"En ce samedi (relativement) ensoleill√©, j'ai demand√© par ci par l√† si chacun connaissait une alternative opensource √† Evernote fournissant un client Android, et cerise sur le gateau avec une API (pour √©videmment passer les notes de Evernote √† la futures solutions choisies) Le but √©tant d'avoir l'appli √† port√©e de main facilement. Voici les r√©ponses obtenues : solution Langage API Client Android Laverna JavaScript non non Paperwork PHP oui oui ownCloud PHP n/a oui Turtl JavaScript oui oui Simplenote Voici mon retour : Laverna semble fun (facile √† installer, modulo le choix du \"storage\") mais pas de client android ni api ownCloud est \"too much\" pour juste un outil de prise de notes (entre autre) Turtl est sympa mais la doc de l'API ... se r√©sume √† une page qui me laisse sans voix https://turtl.it/docs/server/ simplenote n'est pas opensource Le choix ... mais : paperwork : J'ai facilement ( √† partir de cette page ) pu installer, mais quand j'ai mis PostgreSQL en guise de RDBMS ... boom Du coup je suis le bec dans l'eau :P C'est beau l'opensource hein √† se triturer les m√©ninges pour se lib√©rer de nos carcans ;) Au moins √ßa occupe :D","tags":"Techno","url":"https://foxmask.net/post/2016/05/07/evernote-opensource-alternative/"},{"title":"Wallabag API 1.0.1","text":"Intro This API is like a story of old friends for me, destinies that cross and intersect. Something like 10 years ago, I met @nicosomb on http://punbb.fr, a french community arround PunBB, where I was administrator. After all that years, Nicolas made the PHP opensource project named \"poche\" at first, which became Wallabag , when on my side, after years, I stopped participating on Jelix, a PHP5 framework , for Python. Then, when I started TriggerHappy and could integrate Pocket successfully, I asked to Nicolas If he planed to make an API that I then could integrate too... That was 2 years ago ;) Today, Wallabag is now in version 2 and the API is ready. Thanks to him and to his wonderful team. So I finally could finish the Python API on my side too. And now there is no more barrier to each of us to host our own Wallabag and TriggerHappy instance for our own pleasure ;) How to create a post in wallabag ? Here is a snipset to create a entry in your wallabag account : from wallabag_api.wallabag import Wallabag # settings params = { 'username' : 'foxmask' , 'password' : 'mypass' , 'client_id' : 'myid' , 'client_secret' : 'mysecret' } my_host = 'http://localhost:8080' # get token token = Wallabag . get_token ( host = my_host , ** params ) # create a post wall = Wallabag ( host = my_host , client_secret = 'mysecret' , client_id = 'myid' , token = token ) my_url = 'https://blog.trigger-happy.eu' my_title = 'Trigger Happy blog' my_tags = [ 'python' , 'wallabag' ] wall . post_entries ( url = my_url , title = my_title , tags = my_tags ) this will give you something like this","tags":"Techno","url":"https://foxmask.net/post/2016/04/22/wallabag-api-1.0.1/"},{"title":"Quand Les \"job queue\" et les amis \"brokers de messages\" sont mis au rancart par la stdlib","text":"Intro Ce post n'est autre qu'un simple retour d'XP sur l'utilisation et tests de diverses solutions (almost)ready-to-use de job queue et brokers de messages. Pr√©sentation de l'archi du projet Comme vous pouvez l'imaginer avec IFTTT si vous connaissez ce service, j'ai des triggers qui permettent de r√©cup√©rer des donn√©es pour √™tre publi√©es n'importe o√π. Des m√©caniques, il ne faut pas rouler Pour que cela ne soit pas fait par des traitements en s√©rie et bloquant, j'exploite le cache de Django √† coup de cache.set() et cache.get() avec 2 t√¢ches r√©currentes, une qui r√©cup√®re les donn√©es et fait donc le cache.set() et une qui publie les donn√©es √† partir des √©l√©ments r√©cup√©r√©s par cache.get() Les \"solutions\" utilis√©es pour le traitement des t√¢ches Depuis quelques semaines pour Trigger Happy, j'ai migr√© de \"Job Queue\", passant de Celery √† Python-rq . Celery cessant de fonctionner sans raison apparente (aucune info dans les logs ni dans la console), de guerrelasse, je suis pass√© √† RQ , plus l√©ger et facile √† manipuler. Mais il y a 10jours j'en ai eu marre de voir RQ prendre des fins de non recevoir du serveur redis √† coup de \"connections timeout\" pour des choses \"futiles\" (par exemple une pauvre t√¢che changeant version=2 √† version=1 de 3 ou 4 donn√©es seulement). Donc je suis parti creuser c√¥t√© RQ ce qui pouvait poser probl√®me, et, au hasard d'un ticket, je d√©couvre qu'en fait... RQ ne g√®re qu' un worker √† la fois et pas toute une batterie comme avec celery. Ce ticket datant de 2012 (ouais 4ans hein) d'autres se sont lanc√©s dans des projets parall√®les ( https://github.com/Koed00/django-q , https://github.com/pricingassistant/mrq ) pour rem√©dier au probl√®me. Je ne me suis pas amus√© √† tous les tester sinon j'y serai encore. Et surtout pour me faire installer mongodb en plus (le cas du projet mrq), j'ai trouv√© √ßa trop lourd pour moi et ceux qui s'installeraient mon projet pour eux. Je suis donc parti dans un (bad)road trip \"broker / job queue\" pour tenter de trouver mon bonheur. Road Trip Broker / Job Queue Ce n'est pas la route 66 mais vous allez voir que ya mati√®re... 1iere escale : activeMQ Pourquoi celui l√† ? Parce-que la lib python g√©rant ce dernier, nomm√©e stomp.py , √©tait limpide √† mes yeux, (et si je parvenais √† faire fonctionner la machinerie, ca permettrait que le code soit utilisable √©galement pour RabbitMQ et Appolo ), mais apr√®s avoir fini mon code et test√© avec succ√®s, comme pour mongodb , faire installer activeMQ et son giga de RAM √† consommer, je ne me voyais pas mettre ce pr√©requis √† installer pour le projet pour vous autres. 2ieme escale : beanstalk Pourquoi celui l√† ? Parce-que rapide, m'a-t-on rapport√©, et faisant exactement ce pour quoi il a √©t√© √©crit. Comme mon projet est en python 3, la batterie de libs existantes ne convenait pas. Je me suis orient√© sur https://github.com/jonasvp/django-beanstalkd , que j'ai fork√© pour switcher de beanstalkc √† pystalkd, histoire de faire ma sorcellerie dans mon coin sans g√™ner personne ;) Manque de bol chez moi apr√®s avoir arrang√© le code, m√™me si la rapidit√© √©tait au rendez-vous, au premier lancement : JOB_TOO_BIG Alors peut-√™tre que √ßa venait de la lib cliente pystalkd (en python 3 je rappelle), mais je n'ai plus eu l'envie de creuser celle-ci. Du coup, apr√®s tout √ßa, il ne me restait plus rien comme solution existante, que je ma√Ætrisais/connaissais ... Donc 3ieme escale : la stdlib ! Il y a quelques mois j'√©voquais sur s&m le multiprocessing . Donc c'est tout ce qu'il me restait, \"quand faut y aller faut y aller\" me dis-je. Et au final √ßa n'a pas mal r√©ussi puisque les temps de traitement sont pass√©s de un peu moins d'une minute les 40 triggers √†... 7sec (en moyenne haute ;) Tout cela gr√¢ce √† 9 lignes de code :) trigger = TriggerService . objects . filter ( status = True , user__is_active = True ) . select_related ( 'consumer__name' , 'provider__name' ) from multiprocessing import Pool , TimeoutError try : with Pool ( processes = settings . DJANGO_TH [ 'processes' ]) as pool : result = pool . map_async ( publishing , trigger ) result . get ( timeout = 360 ) except TimeoutError as e : logger . warn ( e ) chez moi settings.DJANGO_TH['processes'] vaut 5. Je vous fais gr√¢ce de la fonction publishing ;) Publication des donn√©es : j'ai voulu charger la mule (toute proportion gard√©e:) en rajoutant 21 triggers de plus (entre autre traquer #django sur twitter), h√© bien je suis pass√© √† 12 secondes pour publier les donn√©es de 61 consumers (quand ceux ci ont des donn√©es √† fournir √©videmment) (donc ca fait un coup de 305triggers/min) quand rien n'est √† faire, la liste est pass√©e au crible en 1/10¬∞ de seconde... c'est plut√¥t ... correct :D R√©cup√©ration des donn√©es : 10secondes pour les 61 triggers (ca fait un coup de 360triggers/min) Tentative d'am√©lioration des perfs Pour √©viter des acc√®s √† la base de donn√©es √† tout prix, j'ai tent√© de n'exploiter que le cache. Du coup j'ai d√ª m'orienter vers apply_async vs map_async , mais les temps de traitements √©taient pire que si je n'avais pas utilis√© multiprocessing.Pool.apply_async() . Ensuite j'ai rajout√© plus d'info dans le cache pour arriver √† ne passer que par map_async() mais encore une fois le r√©sultat n'√©tait pas terrible. Du coup j'en suis rest√© √† mes 9 lignes de code ci dessus. Nota Ici je n'ai pas cherch√© √† d√©zinguer un projet plus qu'un autre, chacun fonctionnant dans un univers, au final, tr√®s diff√©rent du mien, j'ai juste voulu souligner, qu'√† aller chercher des solutions toutes faites, ce n'√©tait pas forc√©ment le plus b√©n√©fique, si on prenait le temps de se pencher sur ce qu'offrait d√©j√† le langage. Par ailleurs, un truc qui ne transparait pas ici, c'est le temps que tout cela m'a pris pour tester et appr√©hender chaque solution de job queue / messages broker, de m√™me que se pencher sur apply_async et map_async . Ceci explique pourquoi, √† un moment donn√©, je n'approfondis plus mes investigations dans la recherche de bug dans pystakld par exemple sur le JOB_TOO_BIG pour continuer sur la voie beanstalkd . Last but not... toussa En l'√©tat, si on veut un rafraichissement des donn√©es assez correct (toutes les 15minutes) alors le serveur est capable de g√©rer un petit contingent de ~3600triggers repartis sur 60 utilisateurs chacun ayant 60 triggers, lesquels seront engloutis en 10min. Ni trop De plus il ne faut pas non plus \"publier\" trop souvent, les acc√®s aux API des services tiers comme Twitter, finiraient par vous envoyer aux pelotes avec un truc genre User Limit Reached . Ni trop peu A l'inverse il ne faut pas non plus publier trop \"rarement\" car l√† vous amassez une quantit√© de donn√©es importante dans le cache, que vous ne pourrez pas publier correctement, avec le m√™me genre d'erreur que pr√©c√©demment. Derni√®re analyse Sur les 60triggers que j'ai d√©fini, il y en a entre 3 et 11 qui sont utilis√©s de fa√ßon recurrente, par exemple ceux qui suivent des hashtags sur twitter ou suivent simplement un @compte_twitter, ou les gros sites de news. Du coup ca fait pas b√©zef sur les 60, mais 1) ca me suffit 2) ca marche parfaitement pour mon besoin. Voici tout de m√™me quelques logs √† se mettre sous la dent pour voir ce que donne les temps de r√©ponses. toutes les 15min, la publication a lieu toutes les 13min, la r√©cup√©ration des donn√©es a lieu ne sont pas affich√©es, les logs qui n'ont pas de donn√©es √† traiter, mais qui √©videment, consomme du temps. Ce qui explique que de 14:00:00 √† 14:00:06 il ne s'affiche rien. 2016 -04-13 13 :26:02,928 INFO tasks 3902 foxmask - ServiceRss - ServicePocket - Frandroid - pocket - 1 new data 2016 -04-13 13 :26:06,156 INFO tasks 3903 foxmask - ServiceRss - ServiceEvernote - LinuxFr - 1 new data 2016 -04-13 13 :26:06,802 INFO tasks 3902 foxmask - ServiceTwitter - ServicePocket - Django - 2 new data 2016 -04-13 13 :26:07,137 INFO tasks 3906 foxmask - ServiceTwitter - ServiceTrello - Django - 2 new data 2016 -04-13 13 :26:08,504 INFO tasks 3903 foxmask - ServiceTwitter - ServiceReadability - Django - 2 new data 2016 -04-13 13 :30:03,616 INFO tasks 3946 foxmask - ServiceRss - ServicePocket - Frandroid - pocket - 1 new data 2016 -04-13 13 :30:04,152 INFO tasks 3949 foxmask - ServiceTwitter - ServicePocket - Django - 2 new data 2016 -04-13 13 :30:04,931 INFO tasks 3947 foxmask - ServiceTwitter - ServiceReadability - Django - 2 new data 2016 -04-13 13 :30:07,977 INFO tasks 3948 foxmask - ServiceRss - ServiceEvernote - LinuxFr - 1 new data 2016 -04-13 13 :30:09,572 INFO tasks 3950 foxmask - ServiceTwitter - ServiceTrello - Django - 2 new data 2016 -04-13 13 :39:05,783 INFO tasks 4348 foxmask - ServiceRss - ServicePocket - TheVerge - 1 new data 2016 -04-13 13 :42:02,482 INFO tasks 4383 recycle of cache done ! 2016 -04-13 13 :52:03,933 INFO tasks 4462 foxmask - ServiceRss - ServicePocket - TheVerge - 1 new data 2016 -04-13 13 :52:06,910 INFO tasks 4462 foxmask - ServiceTwitter - ServiceTrello - Django - 2 new data 2016 -04-13 13 :52:07,632 INFO tasks 4461 foxmask - ServiceRss - ServiceReadability - Numerama - 1 new data 2016 -04-13 13 :52:07,993 INFO tasks 4463 foxmask - ServiceTwitter - ServicePocket - Django - 2 new data 2016 -04-13 13 :52:09,537 INFO tasks 4463 foxmask - ServiceTwitter - ServiceReadability - Django - 2 new data 2016 -04-13 14 :00:06,192 INFO tasks 4524 recycle of cache done ! 2016 -04-13 14 :00:06,309 INFO tasks 4539 foxmask - ServiceRss - ServicePocket - TheVerge - 1 new data 2016 -04-13 14 :00:06,788 INFO tasks 4540 foxmask - ServiceTwitter - ServicePocket - Django - 2 new data 2016 -04-13 14 :00:07,321 INFO tasks 4536 foxmask - ServiceRss - ServicePocket - TheVerge - 1 new data 2016 -04-13 14 :00:07,497 INFO tasks 4538 foxmask - ServiceRss - ServiceReadability - Numerama - 1 new data 2016 -04-13 14 :00:07,751 INFO tasks 4535 foxmask - ServiceTwitter - ServiceReadability - Django - 2 new data 2016 -04-13 14 :00:10,278 INFO tasks 4536 foxmask - ServiceTwitter - ServiceTrello - Django - 5 new data 2016 -04-13 14 :00:10,875 INFO tasks 4542 foxmask - ServiceRss - ServiceEvernote - Korben - 1 new data 2016 -04-13 14 :00:11,279 INFO tasks 4536 foxmask - ServiceRss - ServiceEvernote - BeGeek - 1 new data 2016 -04-13 14 :00:11,461 INFO tasks 4536 foxmask - ServiceRss - ServiceEvernote - Google high-tech - 2 new data 2016 -04-13 14 :00:11,717 INFO tasks 4543 foxmask - ServiceTwitter - ServiceTrello - Django - 2 new data 2016 -04-13 14 :00:11,793 INFO tasks 4542 foxmask - ServiceTwitter - ServicePocket - Django - 5 new data 2016 -04-13 14 :00:12,634 INFO tasks 4536 foxmask - ServiceTwitter - ServiceReadability - Django - 5 new data 2016 -04-13 14 :00:14,414 INFO tasks 4537 foxmask - ServiceRss - ServiceReadability - Korden - 1 new data 2016 -04-13 14 :00:15,533 INFO tasks 4534 foxmask - ServiceRss - ServiceReadability - Numerama - 1 new data 2016 -04-13 14 :00:16,498 INFO tasks 4543 foxmask - ServiceRss - ServiceEvernote - BeGeek - 1 new data 2016 -04-13 14 :00:17,206 INFO tasks 4542 foxmask - ServiceRss - ServiceReadability - BeGeek - 1 new data Conclusion Cette fois ci l'√©ternel insatisfait que je suis, se sent un peu mieux avec cette solution (... quoi que ya encore un truc √† gratter pour que ca soit 'encore mieux';)","tags":"Techno","url":"https://foxmask.net/post/2016/04/14/job-queue-and-messages-broker-out/"},{"title":"ActionForm Django √† la rescousse !","text":"Un besoin se fit ressentir today : Pouvoir, depuis la page d'administration de django, r√©affecter des donn√©es se trouvant dans un service et les mettre dans un autre. Comme le montre la doc , on peut effectuer des actions √† sa sauce comme ceci : from django.contrib import admin from myapp.models import Article def make_published ( modeladmin , request , queryset ): queryset . update ( status = 'p' ) make_published . short_description = \"Mark selected stories as published\" class ArticleAdmin ( admin . ModelAdmin ): list_display = [ 'title' , 'status' ] ordering = [ 'title' ] actions = [ make_published ] admin . site . register ( Article , ArticleAdmin ) Arrive le moment o√π c'est sympa, mais ceci ne suffit plus. Si j'ai √† ventiler des donn√©es √† partir de donn√©es se trouvant dans un autre mod√®le, je vais pas cr√©er 'n' make_published_x,y,z . Et le DRY l√† dedans, hmmm? :P Pour arriver √† ses fins, un helper existe tout de m√™me, il s'agit d' ActionForm . Dans mon module admin.py j'y mettrai donc un truc du genre class ServicesActivatedActionForm ( ActionForm ): provider = forms . ChoiceField ( choices = ServicesActivated . objects . values_list ( 'id' , 'name' )) consumer = forms . ChoiceField ( choices = ServicesActivated . objects . values_list ( 'id' , 'name' )) on notera en passant l'astuce pour fournir √† choices un tuple qui provient du mod√®le, gr√¢ce √† l'utilisation de values_list() Puis dans le ModelAdmin je glisse : class TriggerServiceAdmin ( admin . ModelAdmin ): action_form = ServicesActivatedActionForm Ce qui aura pour effet, d'afficher √† cot√© de la liste d√©roulante des actions, une liste d√©roulante des mes provider/consumer. En l'√©tat √ßa ne suffit pas pour fonctionner compl√®tement. Il faut √©videment g√©rer la validation du choix du provider/consumer comme suit : def change_service ( self , request , queryset ): provider = request . POST [ 'provider' ] consumer = request . POST [ 'consumer' ] queryset . update ( provider = provider , consumer = consumer ) change_service . short_description = 'Change of Service' A pr√©sent, ma liste d'actions contient 2 actions, la suppression (action par defaut proposer par l'admin) et la mienne. Tout √ßa √† gauche de ma liste d√©roulante des provider/consumer ! Le code complet √† pr√©sent donne : from django.contrib import admin from django.contrib.admin.helpers import ActionForm from django import forms from django_th.models import TriggerService class ServicesActivatedActionForm ( ActionForm ): provider = forms . ChoiceField ( choices = ServicesActivated . objects . values_list ( 'id' , 'name' )) consumer = forms . ChoiceField ( choices = ServicesActivated . objects . values_list ( 'id' , 'name' )) class TriggerServiceAdmin ( admin . ModelAdmin ): list_display = ( 'user' , 'provider' , 'consumer' , 'description' , 'date_created' , 'date_triggered' , 'status' ) list_filter = [ 'user' , 'provider' , 'consumer' , 'status' ] action_form = ServicesActivatedActionForm def change_service ( self , request , queryset ): provider = request . POST [ 'provider' ] consumer = request . POST [ 'consumer' ] queryset . update ( provider = provider , consumer = consumer ) change_service . short_description = 'Change of Service' actions = [ change_service ] admin . site . register ( TriggerService , TriggerServiceAdmin ) Voilou pour le tips du jour ;) Edit du 22/09/2016 : Avec ce form, on peut avoir un soucis qui ne saute pas aux yeux, de prime abord, quand les donn√©es ne varient pas souvent class ServicesActivatedActionForm ( ActionForm ): provider = forms . ChoiceField ( choices = ServicesActivated . objects . values_list ( 'id' , 'name' )) consumer = forms . ChoiceField ( choices = ServicesActivated . objects . values_list ( 'id' , 'name' )) Mais si votre liste d√©roulante contient des cat√©gories que vous mettez √† jour, ajoutez, retirez regulierement, on \"remarque\" que les donn√©es ne sont \"rafra√Æchies\" correctement dans la liste d√©roulante. Par exemple, si j'ajoute une cat√©gorie, elle ne s'affiche pas imm√©diatement dans la vue, et inversement si je retire une cat√©gorie de la base, elle reste encore pr√©sente dans la liste d√©roulante de ma vue. Pour corriger cela on passe par un form simple : class ServicesActivatedActionForm ( ActionForm ): provider = forms . ModelChoiceField ( queryset = ServicesActivated . objects . all ()) consumer = forms . ModelChoiceField ( queryset = ServicesActivated . objects . all ())","tags":"Techno","url":"https://foxmask.net/post/2016/03/23/actionform-django-a-la-rescousse/"},{"title":"Le developpeur, cet artiste qui s'ignore !","text":"Intro : ce billet se r√©sume bien en une r√©plique c√©l√®bre : \"N'y voyez pas le fantasme de l'homme, mais le d√©lire de l'artiste !\" And so : Avec TriggerHappy , je passe par plein de phases et de d√©couvertes techniques/technologiques. Derni√®rement, je me suis dit \"bon les tests unitaires c'est sympa, mais si je blindais un poil plus tout √ßa ? Et fais-je cela ca correctement ?\". Et me voil√† parti √† utiliser coverage.py , pas √©vident au d√©part mais rudement √©fficace √† la longue. J'avoue que j'aurai pu me contenter de ce que je fais d√©j√†, sans me d√©carcasser, mais je suis un peu comme ce 'dicton' : Vingt fois sur le m√©tier, remettez votre ouvrage D'ailleurs l' auteur , po√®te de son √©tat (au XVII¬∞/XVIII¬∞ si√®cle), a d√ª inspirer le sieur Guido, si on reprend ce 'dicton' dans son po√®me originel : Avant donc que d'√©crire, apprenez √† penser. Selon que notre id√©e est plus ou moins obscure, L'expression la suit, ou moins nette, ou plus pure. Ce que l'on con√ßoit bien s'√©nonce clairement, Et les mots pour le dire arrivent ais√©ment. tu le vois le \"The Zen Of Python\" l√† ? :) atta c'pas fini : H√¢tez-vous lentement, et sans perdre courage, Vingt fois sur le m√©tier remettez votre ouvrage, Polissez-le sans cesse, et le repolissez, Ajoutez quelquefois, et souvent effacez. Alors √ßa colle pas √† ce qu'on fait tous les jours ? :) Bon sur ces dr√¥les de loufoqueries, retournons au couvrage de mon ouvrage justement ! Bon weekend ;)","tags":"Techno","url":"https://foxmask.net/post/2016/03/18/le-dev-cet-artiste-qui-signore/"},{"title":"Int√©gration continue de Github √† Pypi via Travis-CI","text":"L'an pass√©, lors de la release 0.11.0 de TriggerHappy , je n'√©tais pas parvenu √† faire fonctionner Travis-CI comme je l'escomptais, pour qu'il publie tout seul cette version sur PyPi . Du coup je m'√©tais bien pris la t√™te pour pr√©parer le terrain pour la version suivante. Et cette nuit, lors de la sortie de la 0.12.0 j'√©tais zo zanges :) Donc \"Comment √ßa marche la fus√©e ariane ?\" dirait Michel Chevalet Tout simplement en 2 temps : 1) le fichier .travis.yml sur son repository github deploy : provider : pypi user : votre_login_pypi password : secure : le_mot_de_passe_crypte on : tags : true ici je ne vous ai mis que la t√¢che deploy charg√©e de s'occuper de l'installation de vos sources sur pypi sous la forme d'une archive, en respectant le nommage d√©fini dans votre setup.py 2) sur Travis-CI, d√©tection de l'application d'un tag sur le projet, via le d√©clencheur on: tags: true , et encha√Ænement de la t√¢che deploy C'est tout QQ et tout simple comme on aime et, √©videmment tr√®s efficace !","tags":"Techno","url":"https://foxmask.net/post/2016/03/04/integration-continue-de-github-a-pypi-via-travis-ci/"},{"title":"PyCharm running Flake8","text":"The Ugly As I like clean things, I like when python tells me that I made ugly things to be able to fix them. With this in mind, first of all, I used the service CodeClimate . This one permits to tell you where your code can be improved and how. But the service enters in the game, once the commits are done and pushed on the repository. As I try to keep the repository as clean as possible, I dont like that : test improvements, commit and push them, get the result from codeclimate, do anoither improvement and so on... The Beauty So I decide to stop that and ask python to tell me where the code need to be improved before any commit. To do so, as I use PyCharm 5.1 EAP , since a few days, I searched a way to make PyCharm detects and suggests improvements from the opened files. The code inspection works fine with PEP8, the result of the inspection is automatically displayed in the right margin of the opened file, but it seems there is nothing for Flake8 and McCabe. So here is what I did : in my virtualenv pip install flake8 flake -- version 2.5 . 4 ( pep8 : * 7.0 , pyflakes : * 0.0 , mccabe : 0.4 . 0 ) CPython 3.4 . 2 on Linux in PyCharm, go to File > Settings > External Tools > click on \"+\" and fill the fields as below : once it's done you now have an option in the menu External Tools \"Flake8\" then run it and see in the bottom of the PyCharm window with the \"console\" to see what's wrong (or not) with the module you've selected if you prefer to run flake8 on the entire folder, change : -- max - complexity 10 $ FileDir $ / $ FileName $ by -- max - complexity 10 $ FilePath $ Caveats : May be I went too far and something exists and is much better than this one. For example, now, if you switch of project, the previous settings remain with the path of the virtualenv we've setup. And if you change the path for the project B, and open project A, the modification from B will remain for A... As settings for Project do not include this parameter yet, but just \"interpreter\" and \"structure\", we are a little bit embarrassed. Conclusion : At least now I'm ready to (try to) make better things ;)","tags":"Techno","url":"https://foxmask.net/post/2016/02/17/pycharm-running-flake8/"},{"title":"Trigger Happy running softly with RQ","text":"TriggerHappy and Celery Actually, Trigger Happy works perlfectly with Celery , but.... there is a but. Sometimes, (once a week) celery stays stuck without any visible reason. No error logs occur, and even in DEBUG level, no log appear at all. The logfile remain as is (and yes the disk is not full:) As this is very annoying for me, I went on #celery@freenode to try to get some details about this behavior, before breaking everything ... Here, we told me that this behavior was also met with AMQ as broker (when I currently use REDIS). TriggerHappy and RQ So I decide to give a try to Python-RQ His (well known) author presents it as follow : Python RQ (Redis Queue) is a simple Python library for queueing jobs and processing them in the background with workers This project has been inspired by the good parts of Celery, So to integrate RQ with TriggerHappy here is what I should do : I installed django-rq that I added to INSTALLED_APPS in the settings.py file. to not break the existing way (with Celery) that (almost) works perfectly, I changed few details in the tasks.py module : before from celery import shared_task @shared_task def reading ( service ): [ ... ] @shared_task def publishing ( service ): [ ... ] after try : from django_rq import job except ImportError : from celery import shared_task [ ... ] @job ( 'default' ) @shared_task def reading ( service ): [ ... ] @job ( 'high' ) @shared_task def publishing ( service ): [ ... ] Those tasks are executed by celery with the decorator @shared_task (with its own scheduler) or by the RQ with the @job decorator, through some crontab tasks, with management commands. As RQ asole use my_tasks.delay(), I dont have to change anything else, other than just adding a @job decorator. I perfectly know that it's not satifying because if Celery or RQ is not installed, the decorator call with fail and the tasks wont happen. It's just for testing purpose :) That way, I'm able to compare performance between the two solutions, one weight and one very light. Surprisingly, the weight win by handling my reading tasks in less than a seconde for ~50triggers against 30sec for the light one. For the publishing tasks, they are neck and neck. But one thing hangs in the balance actually against celery, it is out of order once a week. The process are not dead, the log does not move, the query I made with celery inspect and so on, respond perfectly. As my project is not so overloaded I can say that the cursor between something a \"little bit slow\" and something \"out of order\" is quickly choosen :) So at least if you want to give a try to RQ with TriggerHappy, the stuff that will need to be handle, will continue to work. Here I provide the line I enter in my crontab : */12 * * * * . /my/env/bin/activate && cd /my/env/th/ && ./manage.py fire_read_data && ../bin/rqworker-default-burst.sh */15 * * * * . /my/env/bin/activate && cd /my/env/th/ && ./manage.py fire_publish_data && ../bin/rqworker-high-burst.sh */20 * * * * . /my/env/bin/activate && cd /my/env/th/ && ./manage.py fire_get_outside_data && ../bin/rqworker-low-burst.sh and the content of, for example, rqworker-default-burst.sh #!/bin/bash python manage.py rqworker default --burst & python manage.py rqworker default --burst & python manage.py rqworker default --burst & python manage.py rqworker default --burst & python manage.py rqworker default --burst & python manage.py rqworker default --burst & python manage.py rqworker default --burst & python manage.py rqworker default --burst & python manage.py rqworker default --burst & python manage.py rqworker default --burst & python manage.py rqworker default --burst & Yes I like to spawn a lot :) A Question to finish I take the opportunity of this post to ask you a question : If I want to support Celery and RQ for my tasks, one should I write a decorator that could handle each of them. Is there a way to write a generic decorator that will permit to be inherited to handle each of them ? Thus in my tasks.py I'll be able to just do from django_th.my_powerful_decorator import jobth [ ... ] @jobth def reading (): [ ... ] and jobth will check which of the two Queueing system is here and handled the right decorator","tags":"Techno","url":"https://foxmask.net/post/2016/02/15/trigger-happy-running-softly-with-rq/"},{"title":"History not to lose the thread : TrackingFields","text":"Introduction this post is an english version [of this post made on sam et max made last week. The goal of that post will be to show how, without changing anything in a form, we can track the modifications of the data made in the application the first part will set the scene by starting to show you how articulates an application with a form, additionally, composed by a sub form. I will explain when later. To do so, I takes you into the world of the 7th art, come, we will redo StarWars! One model, one form, a view, a template and that will be finished the models.py from django.db import models class Movie ( models . Model ): \"\"\" Movie \"\"\" name = models . CharField ( max_length = 200 , unique = True ) description = models . CharField ( max_length = 200 ) def __str__ ( self ): return \" %s \" % self . name class Episode ( models . Model ): \"\"\" Episode - for Trilogy and So on ;) \"\"\" name = models . CharField ( max_length = 200 ) scenario = models . TextField () movie = models . ForeignKey ( Movie ) def __str__ ( self ): return \" %s \" % self . name the forms.py, very mini mini from django import forms from django.forms.models import inlineformset_factory from starwars.models import Movie , Episode class MovieForm ( forms . ModelForm ): class Meta : \"\"\" As I have to use : \"exclude\" or \"fields\" As I'm very lazy, I dont want to fill the list in the \"fields\" so I say that I just want to exclude ... nothing :P \"\"\" model = Movie exclude = [] # a formeset based on the model of the Mother \"Movie\" and Child \"Episode\" + 1 new empty lines EpisodeFormSet = inlineformset_factory ( Movie , Episode , fields = ( 'name' , 'scenario' ), extra = 1 ) the views.py very very very DRY :) from django.http import HttpResponseRedirect from django.core.urlresolvers import reverse from django.views.generic import CreateView , UpdateView , ListView from starwars.models import Movie from starwars.forms import MovieForm , EpisodeFormSet class MovieMixin ( object ): model = Movie form_class = MovieForm def get_context_data ( self , ** kw ): context = super ( MovieMixin , self ) . get_context_data ( ** kw ) if self . request . POST : context [ 'episode_form' ] = EpisodeFormSet ( self . request . POST ) else : context [ 'episode_form' ] = EpisodeFormSet ( instance = self . object ) return context def get_success_url ( self ): return reverse ( \"home\" ) def form_valid ( self , form ): formset = EpisodeFormSet (( self . request . POST or None ), instance = self . object ) if formset . is_valid (): self . object = form . save () formset . instance = self . object formset . save () return HttpResponseRedirect ( reverse ( 'home' )) class Movies ( ListView ): model = Movie context_object_name = \"movies\" template_name = \"base.html\" class MovieCreate ( MovieMixin , CreateView ): \"\"\" MovieMixin manage everything for me ... \"\"\" pass class MovieUpdate ( MovieMixin , UpdateView ): \"\"\" ... and I'm DRY :D \"\"\" pass To finish to set the scene and the costumes : the templates base.html <!DOCTYPE html> < html lang = \"fr\" > < head > < title > Manage stories for StarWars </ title > </ head > < body > < h1 > Stories Manager for Starwars </ h1 > {% block content %} < a href = \"{% url 'movie_create' %}\" > Add a movie </ a >< br /> < h2 > Movie list </ h2 > < ul > {% for movie in movies %} < li >< a href = \"{% url 'movie_edit' movie.id %}\" > {{ movie.name }} </ a ></ li > {% endfor %} </ ul > {% endblock %} </ body > </ html > movie_form.htlm (the template used by UpdateView & CreateView) {% extends \"base.html\" %} {% block content %} < form method = \"post\" action = \"\" > {% csrf_token %} {{ formset.management_form }} < table > {{ form.as_table }} </ table > < table > {{ episode_form.as_table }} </ table > < button > Save </ button > </ form > {% endblock %} Update of the database this is necessary : ( starwars ) foxmask@foxmask:~/DjangoVirtualEnv/starwars/starwars $ ./manage.py migrate Operations to perform: Synchronize unmigrated apps: messages, starwars, staticfiles Apply all migrations: contenttypes, admin, sessions, auth Synchronizing apps without migrations: Creating tables... Creating table starwars_movie Creating table starwars_episode Running deferred SQL... Installing custom SQL... Here we are, ready, I can now create my double Trilogy like Georges Lucas Tracking the ungodly But a day comes when me, George Lucas, I sell StarWars to Walt Disney, but I want to miss what they will do my \"baby\", I add a \"tracker changes\" in my application, not to lose the \"field\" of history. Installation of Tracking Fields as a prerequisites, if you want to also track who change thing, and not what data have been whanged, you will need django-current-user, so the pip command to use will be this one ( starwars ) foxmask @foxmask : ~/ DjangoVirtualEnv / starwars / starwars $ pip install django - tracking - fields django - cuser Collecting django - tracking - fields Downloading django - tracking - fields - 1.0 . 6. tar . gz ( 58 kB ) 100 % | ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà | 61 kB 104 kB / s Collecting django - cuser Downloading django - cuser - 2014.9 . 28. tar . gz Requirement already satisfied ( use -- upgrade to upgrade ): Django >= 1.5 in / home / foxmask / DjangoVirtualEnv / starwars / lib / python3 . 5 / site - packages ( from django - cuser ) Installing collected packages : django - tracking - fields , django - cuser Running setup . py install for django - tracking - fields ... done Running setup . py install for django - cuser ... done Successfully installed django - cuser - 2014.9 . 28 django - tracking - fields - 1.0 . 6 the necessary changes in settings.py : INSTALLED_APPS = ( ... 'cuser' , 'tracking_fields' , ... ) MIDDLEWARE_CLASSES = ( 'django.contrib.sessions.middleware.SessionMiddleware' , 'django.middleware.common.CommonMiddleware' , 'django.middleware.csrf.CsrfViewMiddleware' , 'django.contrib.auth.middleware.AuthenticationMiddleware' , 'django.contrib.auth.middleware.SessionAuthenticationMiddleware' , 'django.contrib.messages.middleware.MessageMiddleware' , 'django.middleware.clickjacking.XFrameOptionsMiddleware' , 'django.middleware.security.SecurityMiddleware' , 'cuser.middleware.CuserMiddleware' , ## <=== do not forget to catch the badass who make change on my movies;) ) the little migrate that fit our needs, to add the tables for our modeles of django-tracking-fields ( starwars ) foxmask @foxmask : ~/ DjangoVirtualEnv / starwars / starwars $ ./ manage . py migrate Operations to perform : Synchronize unmigrated apps : staticfiles , messages , cuser , starwars Apply all migrations : auth , sessions , contenttypes , tracking_fields , admin Synchronizing apps without migrations : Creating tables ... Running deferred SQL ... Installing custom SQL ... Running migrations : Rendering model states ... DONE Applying tracking_fields . 0001 _initial ... OK Applying tracking_fields . 0002 _auto_20160203_1048 ... OK and here we are ready to play with the trackers Usage We cant dream a more simpler way to do, this can be summarize to a decorator on the model which identifies which data are changed, and on field ÃÄ histo which will link the model TrackingEvent of the application TrackingFields, to my tacle to watch. And here, even if my model has been changed with this new field, it's unecessary to do a new \"python manage.py migrate\", nothing will happen, because histo will be a GenericRelation() . Effectivly, TrackingEvent is based of ContenType aka En effet, TrackingEvent repose sur ContenType aka \"The contenttypes framework\". If you already played with the permission management, you should have already meet it before;) To make it short, this will give : models.py from django.db import models from django.contrib.contenttypes.fields import GenericRelation from tracking_fields.decorators import track from tracking_fields.models import TrackingEvent @track ( 'name' , 'description' ) class Movie ( models . Model ): \"\"\" Movie \"\"\" name = models . CharField ( max_length = 200 , unique = True ) description = models . CharField ( max_length = 200 ) histo = GenericRelation ( TrackingEvent , content_type_field = 'object_content_type' ) def episodes ( self ): return Episode . objects . filter ( movie = self ) def __str__ ( self ): return \" %s \" % self . name @track ( 'name' , 'scenario' ) class Episode ( models . Model ): \"\"\" Episode - for Trilogy and So on ;) \"\"\" name = models . CharField ( max_length = 200 ) scenario = models . TextField () movie = models . ForeignKey ( Movie ) histo = GenericRelation ( TrackingEvent , content_type_field = 'object_content_type' ) def __str__ ( self ): return \" %s \" % self . name so, here, it is very simple like a pancake recipe: 3 imports, the decorator, the GenericRelation, we mix all of them and that give what follow. I have, in the meantime, added a function episodes to my Movie class, I will explain it too later ;) the template of the expected DetailView < table > < caption > History of the modification of {{ object }} </ caption > < thead > < tr >< th > Old Value </ th >< th > New Value </ th >< th > By </ th >< th > at </ th ></ tr > </ thead > < tbody > {% for h in object.histo.all %} {% for f in h.fields.all %} < tr >< td > {{ f.old_value }} </ td >< td > {{ f.new_value }} </ td >< td > {{ h.user }} </ td >< td > {{ h.date }} </ td ></ tr > {% endfor %} {% endfor %} </ tbody > </ table > Now if I go the my page to modify the story of one episode, my template below, wont display thoses modifications ! But Why god ? Because until here, I just display the \"histo\" of Movie and not of the Episode. We now understand here my interest for the sub form. The issue Let's fix it this is here, that enter if the game, the function episodes of my Movie class to permit to loop on it and display of the needed stuff the template of the expected DetailView (again :) < table > < caption > History of the modifications of {{ object }} </ caption > < thead > < tr >< th > Old Value </ th >< th > New Value </ th >< th > By </ th >< th > at </ th ></ tr > </ thead > < tbody > {% for h in object.histo.all %} {% for f in h.fields.all %} < tr >< td > {{ f.old_value }} </ td >< td > {{ f.new_value }} </ td >< td > {{ h.user }} </ td >< td > {{ h.date }} </ td ></ tr > {% endfor %} {% endfor %} </ tbody > </ table > {% for ep in object.episodes %} {% if ep.histo.all %} < table > < caption > history of the modifications of Episode </ caption > < thead > < tr >< th > Old Value </ th >< th > New Value </ th >< th > By </ th >< th > at </ th ></ tr > </ thead > < tbody > {% for h in ep.histo.all %} {% for f in h.fields.all %} {% if f.old_value == f.new_value %} {# they are the same when the new value is created to avoid to display \"null\" #} {% else %} < tr >< td > {{ f.old_value }} </ td >< td > {{ f.new_value }} </ td >< td > {{ h.user }} </ td >< td > {{ h.date }} </ td ></ tr > {% endif %} {% endfor %} {% endfor %} </ tbody > </ table > {% endif %} {% endfor %} And voil√† ! Voili voilou ! As a bonus, if you're curious, of the admin side, you also have a list of all the changes if needed;) For the advanced users who would say: why have recoded the front side since this is already managed on the admin side without lifting a finger? Because George Lucas wants to show changes to his baby StarWars by Walt Disney, to the world of course Ho, and a last detail : in the admin, the view which displays the list of changes gives : \"Episode Object\" or \"Movie Object\". To avoid that, you shoud have notice that I have added the function str in my model which will return a more readable value of what have been changed Conclusion : IRL, I didnt see myself, create a History model linked physically by a FK on each model, I decide to search, arround the web, some ressources It's finally on #django-fr@freenode that I asked my question and got from Gagaro the gr√¢√¢l : one application named tracking-fields , his author. For once I do my lazy by not coding all by myself, it's nice to come across such an app ! If you want to play with the code of this Movie manager here is the tasty soup","tags":"Techno","url":"https://foxmask.net/post/2016/02/13/history-not-to-lose-the-thread-trackingFields/"},{"title":"PyCharm : raccourcis pour obtenir les comportements \"habituels\" comme SublimeText et FireFox","text":"Avec PyCharm : j'ai besoin de fermer des onglets ; les restaurer ; et naviguer entre eux. Par d√©faut les raccourcis de l'√©diteur qui m'interessent sont : ALT-DROITE = passer √† l'onglet suivant ALT-GAUCHE = passer √† l'onglet pr√©c√©dent CTRL-F4 = fermer un onglet n/a = r√©ouvrir un onglet ferm√© Donc pour ce faire on se rend dans le menu qui gere les raccourcis comme suit : File > Settings > Keymap Faire une recherche par raccourci (en cliquant sur la loupe au dessus de la pyramide de carr√©s) et appuyer sur la combinaison de touches ALT-DROITE . Le nom de l'action associ√©e s'affiche, on double clique sur l'action pour editer le raccourci et on tape CTRL-Page Down . On r√©p√®te l'action pour ALT-GAUCHE pour l'onglet pr√©c√©dent, et CTRL-F4 par CTRL-W pour fermer l'onglet. Pour finir, pour r√©ouvrir un onglet ferm√© pr√©c√©demment avec Firefox on fait CTRL-SHIFT-T . Pour trouver l'action qui permet cela, on fait une recherche de close pour retrouver reopened closed tab on double clique sur l'action, on tape CTRL-SHIFT-T et hop Il se peut qu'en cherchant √† affecter ces raccourcis, vous voyiez que vous allez √©craser un raccourci d√©j√† existant, √† vous de voir ;) Un dernier truc, pour que CTRL-SHIFT-T , marche quand tous les onglets sont ferm√©s, il faut au moins UN tab ouvert... Si vous etes sur la page vide d'o√π vous pouvez lire Search Everywhere ...Drop files here from file manager ; ca ne marchera pas.","tags":"Techno","url":"https://foxmask.net/post/2016/02/10/pycharm-raccourcis-pour-obtenir-les-comportements-sublimetext-firefox/"},{"title":"IFTTT se prend les pieds dans le SuperBowl","text":"Espionn√© la concurrence est un devoir quand on veut voir ce qu'on pourrait rater ;) Du coup je track le flux RSS du blog Engineering de IFTTT , et re√ßois ce matin dans mon carnet Evernote, une info \"IF Superbowl THEN\" Je ne suis pas fan du foot americain, je serai plus NBA ou NHL, mais depuis que le sieur Michael Jordan n'est plus sur les parquets, je ne suis plus du tout ;) Mais revenons √† nos moutons. Dans l'article du blog de IFTTT j'apprends qu'on peut s'amuser √† faire faire un feu d'artifice √† ses lampes Philips HUE quand le score du superbowl √©volue. IFTTT est tout content de nous dire le nombre de personnes utilisant ces \"triggers\", de part et d'autres des supporters des 2 equipes qui vont se rencontrer et surtout de nous dire que depuis les 2 derni√®res editions du superbowl, leur nombre √©tait croissant. Du coup je me mets en quete de l'api de Philips HUE pour Python que je trouve en 2 secondes, puis je me dis, me reste plus qu'√† chopper celle de ESPN qui est le \"trigger\" fournissant les infos sur les scores. Et l√† en 2secondes je d√©couvre : ESPN Public retirement Alors je me dis, \"tiens tiens, comment IFTTT s'y prend ? allons voir leur page de leur article pour le leur demander\" et l√† ... sous nos yeux √©bahis . Pour vous montrer que je n'ai pas la berlue voici l'article depuis mon carnet de notes \"According to our data\" comme ils disaient, je predis des lampes Philips Hue qui vont rester eteintes :D ESPN lutte pour l'economie d'energie je ne vois pas d'autres explications ;) Voil√† vouuuuuuuuu aaaaaaaaaaaa laaaaaaaaa ;)","tags":"Techno","url":"https://foxmask.net/post/2016/02/03/ifttt-se-prend-les-pieds-dans-le-superbowl/"},{"title":"Revue Technique de la semaine du 02/02/2016","text":"Ca vous manquait aussi un billet du renard masqu√© hein ? Bon qu'est-ce que je vais bien pouvoir vous racontrer ? Evernote de mieux en pire ? Je r√©sumerai bien ce qui arrive a Evernote par \"Qui trop √©treint, mal embrasse\" tant ce qui se passe le refl√®te. L'an pass√© on apprenait qu'Evernote se s√©parait d'une partie de ses equipes d'ing√©nierie, apr√®s que certains associ√©s fondateurs aient tir√©s leur r√©v√©rence, au point qu'on evoquait sa fin, ce qui m'a du coup fait prendre conscience, comme pour google, \"nom di diou si ca ferme demain que fais je de mon contenu?\", ou \"Le syndr√¥me des services gratos Google qui vous font perdre vos donn√©es √† vous m√™me rien √† vous\". Pour ma part j'ai rapidement repris le dessus puisque je peux facilement renvoyer tout ce que j'ai chez, eux ailleurs, via mon projet TriggerHappy . Mais revenons √† nos moutons, apr√®s ce premier √©v√®nement, suit un second depuis hier, Evernote annonce cesser son activit√© de vente de produits hype et quand m√™me cher pour ce que c'est. Donc fini les carnets moleskine, portefeuille et scanner, qui ne seront plus vendus que par leur partenaire. Evernote se recentrant (enfin?) sur le software. Ce qui m'a toujours paru bizarre c'est leur blog o√π il tente de \"louer\", via des personnes exterieures √† l'entreprise, la reussite de l'utilisation de l'outil, qui leur a chang√© la vie, qui les a rendu plus productifs etc. Comme s'ils avaient besoins de t√©moignages pour s'en convaincre eux m√™mes. Ca me fait trop penser aux vieilles \"pub t√©moignages\" moisies \"Weight Watchers\" o√π pour vous convaincre, il faut vous le dire... Pour ma part j'adore l'outil qui, techniquement, est incontournable (le moteur de recherche offline + l'OCR notamment + le plugin firefox de capture d'article) mais la comm marketing autour est une mis√®re. Donc pour l'heure, tant que le bateau ne chavire pas, je ne bougerai rien, sinon j'irai m'oriente vers une alternative libre d√©j√† existante mais pour l'heure sans API permettant d'ajouter des donn√©es autrement que manuellement. Celle ci se nommera paperwork ou laverna Django 1.9.2 security fix and 1.8.9 bug fix A vos mises √† jour si vous √™tes sur la 1.9.x ! Pour la 1.8.9 rien √† craindre, il s'agit que d'une release concernant peu de corrections de bugs. Extensions or not to be Il y a quelques jours j'√©voquais un besoin sur les forms django (je ne sais plus lequel :P) avec SpoutBe qui me disait que django crispy r√©pondait √† mon besoin. Mais je lui avais r√©pondu que j'√©tais tr√®s r√©ticent √† utiliser des \"projets satellites\" parce que le jour o√π plus maintenus, le code produit (n')√©volue (plus que) difficilement. Donc tant que c'est pas \"core\" je n'y toucherai pas. Il n'y a que les cas o√π des projets satellites \"naissent\" du core que je les emploie, comme par exemple django-formwizard . Et vous, comment g√©rez vous l'ajout de fonctionnalit√©s offertes par de tels projets pour Django ? Vous fiez vous √† la \"vivacit√©\" du projet pour le choisir et vous dire que c'est un gage d'√©volution ? Meetup - c'est reparti ! Des meetup (DevOps, Paris.py) ont repris mais j'ai pas l'envie l√† tout de suite, pourtant j'ai l'occasion d'y aller en bonne compagnie, mais non l√† non, j'ai encore un coup de \"mood\" l√† , ca attendra ! Paris DevOps, aujourd'hui Paris.Py, le 4 f√©vrier Arround the world Quelques bons billets √† se mettre sous la dent : Evolution de Python par Sam et Max Free Software activities par Anarc News de Crossbar par Sam et Max PyCharm 5.0.4 Le Pypi nouveau est sur les rails par la PSF A Tester / A Lire Ansible 2 , √† tester avant de switcher de 1.9, car ca p√®te pas mal de choses qui focntionnaient avant ou passent en d√©pr√©ci√©es comme les inclusions de playbook avec un tag ... ca ca me reste en travers ... ceci n'est plus possible : include: /path/to/foo/bar tag=foobar include: /path/to/bar/foo tag=barfoo du coup dans un main.yml, je ne peux plus conditionner l'inclusion (et donc l'execution de ce qui est inclus), merci ! Github Reviewer bien d√©marrer DRF - Partie 5 par Makina Corpus. ici j'ai pris le feuilleton en chemin, alors j'ai raccroch√© les vagons en m'envoyant les 4 premi√®res parties ;) IE 8,9,10, de l'histoire ancienne ? j'aime quand c'est microsoft qui le dit :) Oracle met √† mort le support de la java applet dans les browsers . Les boites qui sont encore avec du IE < 10 et avec des applet java (au pif Oracle Forms) ont du mouron √† se faire ... J'en fout pas une Depuis quelques semaines je commit que dalle sur TriggerHappy, je \"papillone\", je teste des trucs, je regarde des nouveaux langages, je glande, je joue, je procrastine, je fais de la bouffe ( genre ), la vie quoi ...","tags":"Techno","url":"https://foxmask.net/post/2016/02/02/revue-technique-de-la-semaine-du-02022016/"},{"title":"AIX fsck et demarrer des services","text":"Sur AIX, lors d'un reboot (malencontreux?) il peut arriver que des folders soient vides (a√Øe bobo partout) Bon du coup ca peut provenir du \"simple\" fait de \"dirty\" partitions qui ont besoin qu'on leur fasse faire un check fsck /opt/websphere on repondra oui s'il vous demander de \"FIX?\" et on pourra enfin faire le mount associ√© # mount /opt/websphere # ls /opt/websphere/ 5 .1 6 .1 IHS Dans la continuit√© du reboot, il peut arriver que des services ne se soient pas relanc√©s donc : # startsrc ftp 0513 -124 The ftp subserver has been started. et on respire !","tags":"Techno","url":"https://foxmask.net/post/2016/01/13/aix-fsck-demarrer-des-services/"},{"title":"Centos et la gal√®re gal√®re des installations recentes PostgresSQL 9.4 et du driver psycopg2","text":"Parfois il arrive qu'on croise des distributions qui nous rebutent... mais avec lesquelles il faut composer. Aussi voici un rapide retour d'XP sur l'installation de PostgreSQL 9.4 pour Centos et de son driver psycopg2 pour son virtualenv... Pour l'installation de PostgreSQL 9.4 je vous renvois √† la doc super bien faite que je ne vais pas vous remettre en int√©gralit√© ici Ensuite pour l'installation du driver dans son virtualenv, c'est pas de la tarte, voici : ( foxmask ) foxmask@localhost:~/icibase $ pip install psycopg2 Collecting psycopg2 Using cached psycopg2-2.6.1.tar.gz Complete output from command python setup.py egg_info: running egg_info creating pip-egg-info/psycopg2.egg-info writing pip-egg-info/psycopg2.egg-info/PKG-INFO writing top-level names to pip-egg-info/psycopg2.egg-info/top_level.txt writing dependency_links to pip-egg-info/psycopg2.egg-info/dependency_links.txt writing manifest file 'pip-egg-info/psycopg2.egg-info/SOURCES.txt' warning: manifest_maker: standard file '-c' not found Error: pg_config executable not found. Please add the directory containing pg_config to the PATH or specify the full executable path with the option: python setup.py build_ext --pg-config /path/to/pg_config build ... or with the pg_config option in 'setup.cfg' . c'est pas de la tarte, parce qu'evidement le setup.py du dossier courant concerne l'installtion de mon app et pas celle du driver Alors on fera une recherche sur son moteur de recherche favori pour tomber sur un post de stackoverflow qui nous explique qu'il \"suffit\" d'installer le package python-devel ... Seulement quand le package est d√©j√† l√†-bas, alors ne reste plus qu'une solution ... alt√©r√© le PATH ... Encore faut-il trouver o√π est planqu√©e postgresql avec l'installation pas \"ordinaire\" resultante de la doc ci dessus Comme chuis une trume pour m√©moriser les noms de packages √† rallonge de centos, je fais un : ( foxmask ) foxmask@localhost:~/icibase $ ps aux | grep post postgres 2274 0 .0 0 .1 324636 14452 ? S 08 :39 0 :00 /usr/pgsql-9.4/bin/postmaster -D /var/lib/pgsql/9.4/data donc plus qu'√† faire un petit export PATH ( foxmask ) foxmask@localhost:~/icibase $ export PATH = /usr/pgsql-9.4/bin/: $PATH puis ENFIN, de relancer l'installation du driver, ( foxmask ) foxmask@localhost:~/icibase $ pip install psycopg2 Collecting psycopg2 Using cached psycopg2-2.6.1.tar.gz Building wheels for collected packages: psycopg2 Running setup.py bdist_wheel for psycopg2 Stored in directory: /home/ekip/.cache/pip/wheels/e2/9a/5e/7b620848bbc7cfb9084aafea077be11618c2b5067bd532f329 Successfully built psycopg2 Installing collected packages: psycopg2 Successfully installed psycopg2-2.6.1 and Voil√† ! :)","tags":"Techno","url":"https://foxmask.net/post/2016/01/12/centos-galere-galere-postgresql-pyscopg2/"},{"title":"Dans la s√©rie, j'ai migr√© vers P√©lican","text":"Le Besoin Le besoin est le suivant, P√©lican c'est cool parce que statique mais le travers c'est qu'on ne dispose d'aucun outil \"web\" pour produire un billet. Certes, si je suis joueur je peux, via mon smartphone, me connecter sur le \"blog\", lancer vi et produire mon billet.md :-) On voit le cot√© pratique de la chose :) Petite digression Gordon, sur irc://irc.freenode.net/sametmax m'a parl√© de Lektor, un CMS √† base de fichiers plats, sans aucune base de donn√©es. Le projet semble cool. Ce qui m'a fait sourire dans l'explication de la cr√©ation de ce CMS c'est que l'auteur tire sur WordPress et balaye m√©chament de la main toutes les solutions de generation de pages statiques pour un blog en disant que c'est orient√© pour les developpeurs, soit ! Mais quand on regarde attentivement la doc, ce n'est pas tr√®s orient√© pour les \"non dev\" pour autant. Pourquoi ? Regardons le quickstart The best way to get started with Lektor is to use the quickstart command to let Lektor generate a basic project layout for you. Il faut taper une commande pour cr√©er un projet. Ca suppose que l'utilisateur sait utiliser la ligne de commandes et ... ait acc√®s √† un shell pour h√©berger son site. Or avec Wordpress, on d√©compresse l'archive, on transfert via FTP chez son h√©bergeur (sans acc√®s SSH) et on a d√©j√† acc√®s √† son blog. Bref passons :) Billets depuis GitHub via des issues Bob m'a parl√© d'une solution rigolote, √† base d' \"issues\" github, qui permet de produire directement des billets en utilisant du coup l'interface \"markdown\" de GitHub et des tags pour g√©rer le statut du billet. via des nouveaux fichiers Du coup ca m'a donn√© l'id√©e d'√©galement exploiter l'interface markdown de github, pour, ce coup-ci, cr√©er directement des fichiers dans le dossier content . Puis une fois fait, sur le serveur h√©bergeant le blog, d√©clencher, via une crontab , un git pull , et lancer la g√©n√©ration du nouveau billet. La t√¢che dans ma crontab donne ceci : 0 0 * * * . /foxhome/.keychain/ ${ HOSTNAME } -sh && . /foxblog/bin/activate && cd /foxblog/website && git pull && make html (on passera sur le fait que j'ai un venv dans /foxblog:) L'astuce ici consiste √† utiliser keychain , pour que le git pull ne reste pas stuck sur la demande de votre passphrase lors de l'ex√©cution de la t√¢che En effet, apr√®s l'installation de keychain, on lanche la commande keychain $HOME /.ssh/id_dsa ce qui produit $ keychain ~/.ssh/id_rsa * keychain 2 .7.1 ~ http://www.funtoo.org * Starting ssh-agent... * Starting gpg-agent... * Adding 1 ssh key ( s ) : /foxhome/.ssh/id_rsa Enter passphrase for /foxhome/.ssh/id_rsa: * ssh-add: Identities added: /foxhome/.ssh/id_rsa Cette commande n'est √† taper qu'une seule fois, par exemple apr√®s un reboot du serveur. Si vous la tapez une seconde fois il ne se passera rien :) il r√©affichera la liste des cl√©s d√©j√† charg√©es Vous avez dit Offline ? Enfin, s'il vous arrive d'√™tre d√©connect√© et ne pouvez exploiter github pour produire vos billets, ben un b√™te editeur texte fait l'affaire :) bon si vous avez PyCharm, vous avez un super editeur qui vous montre le rendu en live de votre texte;) Pour ma part je suis toujours fourr√© avec Evernote pour ce genre de chose, dans le bus et le train. Ca permet de relire plusieurs fois avant de commit 'n' fois pour rien le nouveau billet. Avec tout √ßa, on est par√© :)","tags":"Techno","url":"https://foxmask.net/post/2016/01/05/dans-la-serie-jai-migre-vers-pelican/"},{"title":"De wordpress √† pelican","text":"Ce billet est surement le beacoupdi√®me abordant le sujet ;-) J'irai donc faire court dans la mesure du possible pour expliciter le pourquoi , le comment , et une id√©e qui a germ√© lors de l'utilisation de pelican Pourquoi ? La r√©ponse est multiple, et un peu redondante avec le billet pr√©c√©dent. J'ai voulu mettre fin √† mon blog en wordpress parce que je ne vais pas continuer √† conserver le domaine et l'hebergement associ√©. Comme je n'ai tout de m√™me pas voulu tout mettre aux oubliettes, j'ai tout de m√™me conserver un peu de ces 11ans de blog. Le choix vers pelican s'est fait naturellement apr√®s l'avoir test√© pour 2 autres blogs, celui pour \" la communaut√© sam et max \" et celui du projet trigger-happy Comment ? Comme le dit la doc, en premier lieu il faut exporter son blog wordpress dans un fichier XML. Apr√®s, pour l'importer, on choisit le format d'import : reStructuredText, Markdown. pelican-import --wpfile foxmaskinfo.xml ainsi lanc√©e, la commande part pour me traduire 900 billets en .rst Mais l√† j'ai pris une s√©rieuse claque. A chaque lancement de la commande je me coltinais des erreurs de formatage, des retour √† la ligne inopin√©e, des urls tronqu√©es pour des carriage return line feed inopin√©es. Au bout de 2 jours, j'arrivais √† finir ma migration d'import en ayant pris soin de remplacer toutes les urls http://foxmask.info et http://foxmask.bzh en '/' purement. Mais un malencontreux et tardif (vu l'heure) rm -f content/* m'a coup√© les pattes , 2j partis en fum√©e j'en pouvais plus, j'√©tais sur le point de laisser tomber la migration. J'ai donc cherch√© une recette sur la toile, sur le best practice de cette migration et l√† je tombe sur ce post complet. Et surtout j'√©tais pass√© √† cot√© du format Markdown. Donc nouveau plan de bataille : utiliser le format markdown gerer le remplacement de foxmask.(bzh|info) avec PyCharm afin qu'il g√®re le remplacement r√©cursivement et tranquillement. pelican-import --wpfile -m markdown foxmaskinfo.xml Et l√†, miracle : PAS UNE SEULE erreur de formatage √† l'issue de cette migration, j'√©tais comme deux ronds de flan. Ensuite, avec PyCharm, j'acheve la mise √† jour des urls en 2min :P Le reste de la migration c'est : dans pelicanconf.py , g√©rer le chemin static de toutes les images que j'ai pu coller dans le blog Puis apr√®s quelques ajustements de themes et plugin pelican , voil√† le blog pr√™t. Une id√©e Maintenant une id√©e toute QQ. Pelican c'est cool parce que statique. Ya pas plus simple qu'une page HTML √† servir pour un serveur HTTP. Par contre niveau production de billet, pelican est tr√®s geek oriented. Je ne m'imagine pas un utilisateur lambda de wordpress, passer √† Pelican. D√©j√†, les th√®mes ne courrent pas les rues, et la saisie des billets n'est pas le plus fun. Du coup j'm'ai dizamoimeme : pourquoi ne pas faire une interface web qui permette de pondre ses billets ? Pas un truc aussi ambitieux que l'interface de Wordpress, mais au moins : une page pour cr√©er un article avec un editeur wysiwyg √† l'enregistrement de l'article, cr√©er le fichier .md g√©n√©rer la page html via la commande make html avant de me lancer dans ce truc j'ai demand√© sur #pelican@freenode si un tel projet existait, et j'ai eu droit √† une r√©ponse de normand... Donc bon je vois kiki va kor faire un truc con kwa.","tags":"General","url":"https://foxmask.net/post/2016/01/02/de-wordpress-a-pelican/"},{"title":"Une autre histoire","text":"Voici donc le d√©but de la continuit√© de l'histoire de ce blog de 11 ans d'√¢ge ;) Pour ne pas \"trop\" perdre en interactivit√© avec ceux qui me suivent tant bien que mal, j'ai coll√© disqus comme outil pour vous permettre de commenter mes billets. Comme je ne suis pas du genre √† imposer quoique ce soit, vous n'√™tes pas oblig√© d'√™tre connect√© √† g+, twitter, facebook, ou disqus. Pour commenter en tant que visiteur, cliquer dans le champ nom, puis sur la case √† cocher \"i'd rather post as guest\", ensuite mettez simplement votre email et le tour est jou√©. A noter que j'ai d√©sactiv√© les trackers de disqus, permettant de vous coller de la pub \"personnalis√©e\". On va pas d√©vi√© du leitmotiv du site hein ;) Voilou ;) Ici, je ne vous parlerai plus que de dev et rien d'autre. print ( \"Bonnes f√™tes de fin d'ann√©e 2015, attention √† 2016 et √† vos prochaines r√©solutions\" )","tags":"General","url":"https://foxmask.net/post/2015/12/29/une-autre-histoire/"},{"title":"Django TEST_RUNNER exploitant settings.INSTALLED_APPS","text":"Bon, √† un moment, √† force de faire des modifications sur son projet pour contenter \" son \" fan ;) Je ne pouvais pas rester √† me limiter √† faire tourner les tests sur 2 ou 3 applications django quand j'en fourni 10. Donc actuellement (pour faire court), Django lance les tests sur tout ce qui commence par test*.py √† partir du dossier courrant. Probl√®me : J'ai 10 applications, et seules 2 sont install√©es (pr√©sentes dans settings.INSTALLED_APPS ), et au lancement des tests on a droit √† une erreur d'absence de table li√©e au model de son application X. Pour que √ßa marche quand m√™me, on est oblig√© de faire ./ manage . py test - v2 app1 app2 app3 app4 ... Pas top du tout √† mon go√ªt. Je suis donc all√© √† la p√®che et je n'ai rien trouv√© que des besoins identiques Du coup ce soir je me suis fendu d'un test assez simple et qui rempli tout √† fait sa fonction. La doc dit qu'il suffit de d√©finir un TEST_RUNNER perso en fournissant la m√©thode run_tests() , et de l'indiquer dans le settings.py et ca donne ceci : settings.py : TEST_RUNNER = 'django_th.runner.DiscoverRunnerTriggerHappy' runner.py : from django.conf import settings from django.test.runner import DiscoverRunner class DiscoverRunnerTriggerHappy ( DiscoverRunner ): \"\"\" A Django test runner that uses unittest2 test discovery. \"\"\" def run_tests ( self , test_labels , extra_tests = None , ** kwargs ): \"\"\" Run the unit tests for all the test labels in the provided list. Test labels are taken from settings.INSTALLED_APPS A list of 'extra' tests may also be provided; these tests will be added to the test suite. Returns the number of tests that failed. \"\"\" self . setup_test_environment () for installed_app in settings . INSTALLED_APPS : test_labels = test_labels + ( installed_app ,) suite = self . build_suite ( test_labels , extra_tests ) old_config = self . setup_databases () result = self . run_suite ( suite ) self . teardown_databases ( old_config ) self . teardown_test_environment () return self . suite_result ( suite , result )","tags":"Techno","url":"https://foxmask.net/post/2015/11/30/django-test_runner-exploitant-settings-installed_apps/"},{"title":"Sam et Max Board Suivez l'actu de la communaut√©","text":"Hey ! Dans un billet d'il y a 2 semaines , j'exposais un nouveau projet que j'avais en t√™te et lanc√© (pas trop fort) et pas trop loin √† priori parce que personne n'a rebondi sur l'occasion pour nous faire un retour, du coup √ßa v√©g√®te ;) Donc je relance la question ici : Que pensez vous de \" Sam et Max board \" ? Le but du site, auto g√©n√©r√©, √† partir de flux RSS, des services \"Sam et Max\", est de fournir un point unique pour que plus personne ne rate une miette de ce qui se dit, entre autre, ci et l√† . Le site fourni √† son tour un flux RSS de tout ce qui a √©t√© r√©cup√©r√© sur chacun de ces services. N'h√©sitez donc pas √† glisser un commentaire pour nous dire si ca vous va ou si c'est pourri etc :) On verra o√π le mettre apr√®s ;)","tags":"Techno","url":"https://foxmask.net/post/2015/11/27/sam-max-board-suivez-lactu-de-la-communaute/"},{"title":"Trigger-Happy, stats, requ√™te et proposition","text":"Avec wordpress on dispose de stats par billet, et le fait de m'√™tre mis un coup de pompe au cul pour publier des billets in ze Shakespeare language a fait que dans le top 100 des billets les plus lus sur le blog, on trouve celui concernant la sortie de la v0.11.0 in English (en 87¬∞ position avec 1013 vues en 1mois et demi). L√† o√π la version francophone , n'a pas atteint la moiti√© de l'autre sur la m√™me p√©riode. L'heureuse cons√©quence tout de m√™me, c'est que le nombre de personnes s'int√©ressant au projet (qu'on d√©nombre avec les petites \"stars\" sur github) fini par atteindre 99 :) A cot√© de √ßa le nombre de t√©l√©chargements de l'appli est de 333/mois sur pypi. Pour un projet ne cherchant ni gloire ni fortune, et au d√©part juste pour mes propres besoins, c'est toujours plaisant m√™me si les chiffres sont ridicules comparativement √† des projets similaires. Une requ√™te Tout r√©cemment, hier en fait, un utilisateur a envoy√© un mail √† la mailbox que j'avais ouverte pour contacter le projet. Ouais c'est √† √ßa que √ßa sert les mails :) Le monsieur me demandait comment pouvoir utiliser TriggerHappy depuis le site. Bon voici ma r√©ponse : \"bonjour, le service n'est pas encore rendu accessible √† tout le monde, mais si vous n'avez pas les comp√©tences (en langage de programmation python) ou les moyens d'installer l'application, je peux vous cr√©er un compte pour que vous le testiez √† votre guise\" Donc depuis hier, un utilisateur fait joujou avec le service. Il a activ√© 2 services et cr√©√© un trigger (le minimum vital pour faire quelque chose) et hop roule ma poule. Une proposition Si vous voulez √©galement tester, faites p√©ter un mail avec login souhait√©, email √† utiliser, le tout √† \"service chez trigger-happy point eu\" et je vous fournirai le mot de passe et l'url de connexion en retour. Avant cela, v√©rifier que les services couverts par le projet sont √† votre go√ªt, histoire d'√©viter que vous ne pestiez parce que ca ne fait pas le caf√©. En plus c'est un projet libre, o√π j'ai document√© √† mort \" comment contribuer \" et fourni des outils pour en faire le moins possible ;) Si la demande est plus cons√©quente, je me botterai le train pour rajouter un module d'inscription plus vite que pr√©vu (j'attendais le retour du module django d√©di√© mais il semble que ca prenne bien plus de temps) et chacun ira s'inscrire. Comme cette proposition est tout √† fait informelle, je reviendrai en d√©tails sur ce que je fais avec \"vos donn√©es perso\", mais pour r√©sumer, c'est \"RIEN\". Vous √™tes ma√Ætre √† bord et d√©cider des recettes que vous voulez faire en faisant se parler les services de votre choix. Tout ce que je ferai, c'est avoir un oeil sur l'√©tat du projet pour savoir o√π am√©liorer les choses mais aucunement me servir de vos infos pour mon usage perso (tel que collecte de mail pour spam ou autre joyeusete qu'on \"affectionne\" tous) Je reviendrai l√† dessus au moment de l'ouverture \"publique\" du service. Pour l'heure, ca sera du test avec votre concours, bien que je m'en serve au quotidien pour mes propres besoins depuis le d√©but.","tags":"Techno","url":"https://foxmask.net/post/2015/10/02/trigger-happy-stats-requete-et-proposition/"},{"title":"Trigger Happy, de tout, de rien, la vie","text":"Depuis la sortie de la version 0.11.0, j'ai lanc√© quelques bidules p√©riph√©riques : un blog d√©di√© en pelican, que j'ai commenc√© √† remplir. J'essaierai de lui trouver un th√®me plus responsive que du rendu √† taille fixe. un compte @TriggerHappyEu d√©di√© qui relaiera les news du projet une inscription sur Alternativeto.net , pour voir sur quel cr√©neau se positionne le projet au milieu des plus \"lourds\" quelques posts sur r/selfhosted & r/django Quant √† l'√©volution du projet, j'ai pu ajouter √† son arc, 2 services, Trello , Un gestionnaire de projets et GitHub . Ce qui permet par exemple de pouvoir cr√©er des tickets sur github d√®s qu'on a cr√©√© une \"carte\" Trello dans un board de son choix. Dans le m√™me temps j'ai pris contact avec le projet WeKan , un Trello like opensource, en tout point identique √† l'UI originale, afin de leur proposer d'exploiter leur API, mais elle n'existe pas encore mais sera compl√©tement calqu√©e sur celle de Trello. Je vois bien d'ici l√† un yes.wekan.io poindre le bout de son nez tiens ;)","tags":"Techno","url":"https://foxmask.net/post/2015/09/08/trigger-happy-de-tout-de-rien-la-vie/"},{"title":"Entrevue en toute simplicit√© - Sam et Max","text":"Ce billet aura une \"autre saveur\" puisque, alors que je m'√©tais refus√© √† le faire, me disant que tout le monde les connaissait, j'ai fini par franchir le pas. Donc voici une entrevue avec Sam ET Max Bonjour Sam et Max, Pouvez vous vous pr√©senter en quelques mots ? Sam Ca va √™tre dur sans tomber dans les g√©n√©ralit√©s vu le c√¥t√© anonyme du blog. Disons que je suis un homme de moins de 40 ans, de plus de 20 ans, informaticien freelance avec une forte affinit√© pour le voyage et la p√©dagogie. Enfin, √ßa dit pas grand chose, je pense que si les gens voyaient √† quoi ressemblait ma vie, beaucoup serait surpris. Il y a √©norm√©ment de choses qu'on se garde de dire sur le blog. Mais franchement, ce n'est pas tr√®s important. Y a assez de status facebook inutiles pour pas que je vous raconte en plus ma marque de pomme pr√©f√©r√©e. Max : tomb√© dans la marmite informatique tout petit, j'ai commenc√© √† faire des petits progs en BASIC sur MO5, rien d'extraordinaire jusqu'aux ann√©es 2000, avec la fameuse bulle internet (iBazar, Aucland, etc) le net a commenc√© √† prendre une place dans ma vie, je programmais d√©j√† en PHP et je sortais mes premiers sites de divertissement pour adultes. Comme √ßa ne rapportait pas grand chose, en parall√®le je bossais dans des boites comme webdesigner la plupart du temps. Ensuite j'ai mont√© ma boite (affiliation sur du contenu adulte payant) et c'est l√† que j'ai rencontr√© Sam (il faisait un stage dans les bureaux d'√† c√¥t√©). Le reste vous le saurez en parcourant le blog ;) Comment √™tes vous venus √† python et que faisiez vous avant de faire du python, depuis quand faites vous du python ? Sam Mon premier ordi avec une disquette 5 pouces et un bouton turbo pour booster le proc √† 8Mhz. Pas Ghz. Mhz. Mais j'ai programm√© tr√®s tard, ayant commenc√© ma formation en tant qu'ergonome puis r√©dacteur sur une webzine d'info connu. Du coup j'ai vraiment attaqu√© la programmation avec Basic et PHP3, que j'ai laiss√© tomb√© pour Python 2.4. Un jour je me suis juste dit \"PHP c'est vraiment pourri\" et j'ai cherch√© quelque chose de sympas. Je suis tomb√© sur un post de forum \"Ruby VS Python\" (d√©j√† √† l'√©poque...). Les gars de Ruby vendaient le c√¥t√© 'styl√©' du langage. Les gars de Python vendaient le cot√© 'lisibilit√©'. Je pr√©f√®re le pratique √† l'esth√©tique, du coup j'ai choisit Python et j'ai t√©l√©charg√© le bouquin de Swinnen. Max c'est la faute de Sam, j'avais besoin de refaire des sites en PHP qui foiraient, il est arriv√© avec sa science et voulait tout reprendre √† z√©ro, comme il d√©testait PHP je lui ai fait confiance et on a tout pass√© en Django / python. Je ne le regrette pas. A quels projets opensource participez vous ? Sam On peut jeter √† coup d'oeil aux repos pour √ßa ( https://github.com/sametmax?tab=repositories ). Mais ca d√©pend de la p√©riode de l'ann√©e. En ce moment surtout path.py qui a gagn√© l'attribut app_dirs et la commutativit√© du /. Il y a aussi tout ce qui ne se voit pas : rapport de bugs, aide sur les forums, etc. Max Moi tr√®s peu, j'√©tais sur les d√©buts de 0bin et je crois que c'est tout, pas trop le temps faut dire. Utilisez vous Crossbar / Autobahn en prod aujourd'hui ? Sur quel type de projet ? Petit/Gros ? Avec une stack qui d√©chire/√† toute √©preuve ? Sam Absolument pas. A mon avis j'aurais un truc en prod utilisant crossbar en 2016 √† cause d'un projet dans les cartons, mais √ßa implique d√©velopper une surcouche autour. Crossbar m√©rite vraiment une abstraction. Je vends la techno clairement comme quelque chose en construction. Le jour o√π j'aurais un truc en prod, je ferai bien entendu un article dessus. Max Moi non j'y crois pas √† ce truc :) Mais bon j'attends que Sam me fasse une super d√©mo de son utilit√© en PROD !!!! Quelle(s) lib tierce(s) a/ont votre pr√©f√©rence ? Sam Au final on en revient toujours aux m√™mes modules : codecs collections csv datetime functools hashlib itertools json pprint random re subprocess sys threading uuid Ce sont les essentiels de Python. Avant il y en avait plus, mais beaucoup sont remplac√©s par des libs tierces parties. La stack que j'utilise le plus est encore et toujours l'√©cosyst√®me autour de Django. La raison est simple : il permet de faire le job pour 90% des missions. Je l'ai test√© dans des conditions de merde en Asie et en Afrique, je l'ai utilis√© par des trucs cleans et des trucs √† l'arrache, et √ßa passe. On peut faire des petits sites, des gros sites, et √ßa va marcher. C'est quelque chose d'extraordinaire avec Python : on a un socle de base, mais apr√®s, on a cette polyvalence du langage qui fait que d√®s qu'on a un besoin, il y aura quelque chose pour le faire. Jusqu'ici, je ne me suis jamais retrouv√© avec un truc o√π je me suis dis \"j'aurais pas du prendre python\". Par contre j'ai d√©j√† identifi√© des projets o√π je me suis dit \"ce sera mieux de ne pas prendre Python\". Le blog par exemple. Est-ce que j'utiliserais toujours Django dans le futur. Probablement pas. La raison pour laquelle j'emmerde tout le monde avec crossbar en ce moment, c'est parce que je pense qu'on peut cr√©er quelque chose de mieux avec cette techno. Mieux que ce qui existe en Python, mais surtout mieux que ce qui existe dans tous les autres langages. De toute fa√ßon si on ne le fait pas, Python dispara√Ætra du monde de la programmation Web et JS bouffera tout d'ici 10 ans du simple fait de son avantage comp√©titif injuste : le march√© captif des browsers. Donc m√™me si demain JS n'apporte rien sur la table, √† effort √©gal, il gagnera. Et JS apporte quelque chose sur la table avec des projets innovant comme Meteor. Pour cette raison, il faut faire mieux que les outils JS actuels si on veut rester pertinent en Web backend dans la prochaine d√©cennie. Max Requests, beautifullSoup, scrapy. Mais en g√©n√©ral je me bats avec Sam pour utiliser le moins de libs possible, √ßa foire toujours √† un moment donn√© (updates, r√©trocompatibilit√©). Quand on se retrouve avec 50 libs et qu'on met son Django √† jour par exemple, on prie √©norm√©ment et on prend son Prozac avant, √ßa foire √† 99%. Que faites vous aujourd'hui et quel avenir/quels projets envisagez vous ? Sam Aujourd'hui c'est beaucoup de formation et de dev, pas mal de taff autour du blog, et une avanc√©e lente sur les projets en parall√®le. Je crois qu'un de nos probl√®mes c'est qu'on a des vies trop confortables : on a r√©ussi √† d√©gager plus de revenus en travaillant moins que la moyenne, on vit dans des locaux souvent tr√®s chouettes, et on fait beaucoup d'activit√©s de loisir. Du coup on rogne sur les projets. C'est la d√©cadence :) Max Moi je g√®re toujours mes sites √† fort trafic, avec Sam on aimerait bien finir un projet qu'on a commenc√© ensemble (parmis tant d'autres) qui semble prometteur mais j'en dit pas plus :p J'ai toujours 3 / 4 id√©es de projets sous le coude, cette ann√©e je vais essayer de voir avec Sam pour en r√©aliser plusieurs ensemble, car on se marre bien. Depuis le d√©but de l'ann√©e vous avez ouverts des services tels indexerror.net et r√©cemment un subreddit sam&max , vous avez d'autres id√©es sous le sabot ? Sam Oui, mais on ne va pas faire une annonce ici pour √©viter le c√¥t√© vaporware. On sait jamais, les journ√©es sont courtes et la todo liste est longue. L'argent est aussi un probl√®me. Aujourd'hui le blog et ses d√©riv√©s me prennent 15% de mon temps de travail. Mais me rapporte 0 euros depuis 3 ans. Du coup si on veut continuer il va falloir qu'un des projets rapporte des sous (on est pas consum√©ristes, mais on est tr√®s d√©pensiers), mais sans affecter les autres projets ou d√©truire la bonne ambiance qu'il y a dans la communaut√©. C'est tr√®s difficile √† faire, la plupart des gens √©chouent et transforment leur succ√®s en supermarch√©, et c'est pour √ßa qu'on ne se presse pas. Mais du coup le nombre d'articles √† un peu diminu√©, avec en contrepartie une pr√©sence sur les autres plate-formes un peu plus forte. Je ne sais pas si c'est une bonne ou une mauvaise chose. Un truc qu'on peut dire, c'est que j'ai en t√™te un nouveau jeu avec lot sur le blog comme on avait fait les ann√©es pr√©c√©dentes. Comme d'hab se sera gratuit et le lot sera pay√© de notre poche. Mais la r√©a est vraiment beaucoup plus importante, donc √ßa va pas arriver demain. Il faut se souvenir que le S&M est une activit√©, qui bien quelle nous prenne beaucoup de temps, reste en marge de nos vies. Max L√† on va freiner je pense de ce c√¥t√©, car il faut penser √† nous, il y a le Multiboards customisable qu'il faut sortir (on a bien foir√© sa prod l'autre jour c'√©tait marrant) et √ßa ira pour le moment. IndexError a √©t√© sorti en 1 jour (car c'est un script gratoche) et il tourne tout seul, mais il b√©n√©ficie de la communaut√© S&M qui est vraiment super alors c'est pas vraiment du taf mais il a son petit succ√®s et √ßa motive quand m√™me pas mal pour envisager un nouveau projet similaire, mais pas pour le moment. En plus de l'aspect tr√®s technique et didactique, le ton d√©cal√© du blog a s√©duit beaucoup de monde, \"votre\" communaut√© √† grandi, et il me semble qu'une certaine interaction s'est cr√©√©e avec celle ci via les services cit√©s ci dessus. Sans d√©conner, Comment g√©rez vous cette \"notori√©t√©\" o√π vous √™tes cit√©s tant√¥t dans un billet d'un blog tant√¥t dans une conf Python, tant√¥t interpel√©s sur twitter ou irc ? C'est le mojo baby ?! ;) Sam L'anonymat aide beaucoup. Notre entourage n'a aucune id√©e de notre notori√©t√© (m√™me ceux/celles qui savent se font une id√©e vague), et quand je vais √† un event on parle souvent de nous √† c√¥t√© de l'un d'entre nous. Mais comme on a une esp√®ce de l√©gende cr√©√©e autour de nous, les gens s'attendent √† quelque chose de sp√©cial. Du coup quand on arrive √† l'arrache par la porte de derri√®re, personne ne nous remarque. Ca fait garder les pieds sur terre, mais √ßa aide √† une chose : avoir confiance en son jugement. Notre profession souffre √©norm√©ment du syndrome de l'imposteur, et la validation des pairs aide √† l'outrepasser. Il y a un autre point √† prendre en compte : Max et moi sommes pr√™ts √† voir tout disparaitre du jour au lendemain. Le blog ferme, plus personne n'entend parler de nous, tous nos business se p√®tent la gueule. Pas qu'on le souhaite, mais on y est pr√©par√©. Du coup on profite, mais pas avec autant d'attachement au r√©sultat qu'on pourrait imaginer. On a d√©j√† pas mal eu de \"hard reset\" av√©r√©s ou √©vit√©s de justesse dans nos vies, et √ßa forge le caract√®re. Max On le doit beaucoup √† Sam, il explique super bien les choses, c'est inn√© chez lui. Pour le c√¥t√© cul je pense que c'est mon job principal qui a d√©teint dessus :) Et il me semble qu'au d√©but on voulait se d√©marquer un peu alors on s'est dit pourquoi ne pas parler de cas concrets de foirages de code par rapport √† nos sites. Et comme les sites c'√©tait du cul ben les premiers tutos de code portaient sur du filtrage de commentaires de cul, de l'encodage de vid√©os avec ffmpeg et python, etc. Dans le couple sam&max : Comment sont r√©partis vos r√¥les ? L'un g√®re l'Infra, l'autre le code par exemple ? Dans vos projets communs qui fait le choix de la stack ? Sam Max s'occupe de la maintenance et du design, moi du code et de l'archi. Le reste, c'est de la co-d√©cision. Mais on ne travaille pas tout le temps ensemble. En fait, depuis que le blog a √©t√© cr√©√©, on a d√©j√† v√©cu plusieurs fois ensemble, puis chang√© de pays plusieurs fois travaillant, √† des milliers de bornes de distance, parfois sur des projets qui n'ont rien √† voir. Parfois on ne se donne pas de nouvelles pendant des semaines. C'est pour √ßa que c'est amusant quand les gens croient savoir o√π on est. Le o√π change tr√®s souvent. Max Moi je suis l'admin syst√®me parce que je suis le seul √† pouvoir rester plus de 48h sur un bug, Sam craque au bout d'une heure. C√¥t√© code, on code tous les deux mais moi c'est franchement d√©gueulasse alors il repasse souvent derri√®re pour lisser tout √ßa. Pour le choix de la Stack c'est Sam qui lance les propositions mais il veut toujours utiliser les derni√®res versions alpha.beta.planta, moi je suis tr√®s r√©fractaire aux nouvelles techno exotiques car la doc est toujours naze et √ßa plante sans qu'on sache pourquoi, ceci dit Sam a fini par s'en apercevoir sur nos projets et petit √† petit j'arrive √† le convaincre d'utiliser des technos plus vieilles mais plus robustes (je rappelle que je suis seul sur pas mal de projets en permanence et qu'on est que deux sur l'ensemble pour g√©rer du python, php, sql, postgres, ffmpeg, une 12aine de serveurs, celery, de l'upload, nginx, lua, jquery, redis, varnish, munin, bash, bottle, etc, etc ) alors les nouvelles technos avec 30 pages de doc incompl√®te qui bug de partout √† mettre en prod et √† rajouter √† cette stack, bof bof. Pour l'ergonomie de nos projets on aime bien en discuter ensemble, on finit en g√©n√©ral par tomber d'accord. En dehors du #NSFW, et du code, comment se passe une journ√©e loin du clavier pour sam & max ? Une vie de patachon, de fetard ? Ou simplement des \"monsieur tout le monde\" ? Sam Croyez-le ou non on est tr√®s sport (sports en plein air, salle de muscu...) et jeu (LOL, Dota, JDR, plateau, console). Perso je suis vieux jeu et je lis beaucoup, mais regarde beaucoup de films/s√©ries modernes, alors que Max est du genre √† regarder en boucle des vieux classiques et √† pouvoir citer chaque virgule de South Park. Max est le f√™tard, et pendant ses beuveries et nuits blanches, moi je marathonne Got. Il soul√®ve 90kg en d√©velopper-coucher, mais je lui mets la mis√®re en footing. On ne ressemble pas du tout √† l'id√©e que la plupart des lecteurs se font de nous dans les comments. Les plus gros points communs qu'on ait sont les voyages et la bouffe. On voyage tout le temps. D'o√π notre habitude √† m√©langer des sujets qui n'ont rien √† voir. C'est le monde qui est comme √ßa : un bordel mouvant dans lequel il faut trouver un moyen de passer une belle journ√©e. Et on se fait tous les restos sur la route. Apr√®s, le blog semble indiquer qu'on passe √©norm√©ment de temps uniquement ensemble, mais nous avons chacun une vie enti√®re compl√®tement distincte, des r√©seaux sociaux tr√®s s√©par√©s. Max J'ai deux passions dans la vie, les putes et la bouffe, le reste c'est superflue :) Donc quand je code pas je suis avec les biatches ou sinon √† faire des bouffes (ouais je cuisine). Une conclusion ? Sam La premi√®re fois que nous nous sommes rencontr√©s, on n'a pas pu se blairer. Comme quoi... Max A poil les putes! Merci pour votre participation √† tous 2! (re)Lire une Entrevue pr√©c√©dente Debnet Ashgan Spout","tags":"Entrevues","url":"https://foxmask.net/post/2015/08/31/entrevue-en-toute-simplicite-sam-max/"},{"title":"Shoot an Arrow with Ansible in the TriggerHappy target","text":"Create a module for participating to TriggerHappy is now so simple that I cant imagine to make a new one without this new little module named \"Trigger Happy Ansible\" What does it do ? Well, as anyone can imagine, when you start a django project you enter, python manage.py startproject when you start a new app you enter : python manage.py startapp thus you will have a new empty module with a lot a \"empty\" files. To speed up the creation of a Trigger Happy module, first I made a simple module django-th-dummy that provides a module ready to use , but that need to be customized to be used. So I went a little far away and now you can just enter ansible-playbook -i hosts site.yml and that's all ! a new TriggerHappy module is ready to be installed in the middle of all the others ones. Under the hood, what has been done ? You need to install ansible, then setup the site.yml file to change all the variables that fit your needs and once the playbook is played, a new folder will be created with everything needed by TriggerHappy Here is the site.yml file. The lines to be changed are those ones : vars : # to directory tree and class/module/name purpose module_name : johndoe service_name : johndoe class_name : Johndoe # for setup.py purpose author : John Doe author_email : john@doe.com description : this is a module that is fun details : when fun is higher than anything url : https://github.com/foxmask/django-th-johndoe download_url : https://github.com/foxmask/django-th-johndoe/archive/trigger-happy-johndoe- # for dependencies purpose external_api : foobar external_api_class : Foobar external_api_version : 1.2.3 as you can see, I separated variables by usage domain And here is the output of the running ansible playbook ansible-playbook -i hosts site.yml PLAY [ home-sweet-home ] ******************************************************** GATHERING FACTS *************************************************************** ok: [ localhost ] TASK: [ dummy | create folder of the module name ] ****************************** changed: [ localhost ] TASK: [ dummy | create tests folder of the module name ] ************************ changed: [ localhost ] TASK: [ dummy | travis.yml ] **************************************************** changed: [ localhost ] TASK: [ dummy | gitignore ] ***************************************************** changed: [ localhost ] TASK: [ dummy | copy of th_dummy/__init__.py ] ********************************** changed: [ localhost ] TASK: [ dummy | copy of th_dummy/tests/__init__.py ] **************************** changed: [ localhost ] TASK: [ dummy | copy of LICENSE ] *********************************************** changed: [ localhost ] TASK: [ dummy | copy of MANIFEST.in ] ******************************************* changed: [ localhost ] TASK: [ dummy | copy of setup.py ] ********************************************** changed: [ localhost ] TASK: [ dummy | copy of README.rst ] ******************************************** changed: [ localhost ] TASK: [ dummy | copy of requirements.txt ] ************************************** changed: [ localhost ] TASK: [ dummy | copy of my_dummy.py to my_ {{ module_name }} .py ] *************** changed: [ localhost ] TASK: [ dummy | copy of model.py ] ********************************************** changed: [ localhost ] TASK: [ dummy | copy of forms.py ] ********************************************** changed: [ localhost ] TASK: [ dummy | copy of test.py ] *********************************************** changed: [ localhost ] TASK: [ dummy | copy of the templates ] ***************************************** changed: [ localhost ] PLAY RECAP ******************************************************************** localhost : ok = 17 changed = 16 unreachable = 0 failed = 0 ( triggerhappy-bootstrap ) foxmask@zorro:~/Django-VirtualEnv/django-th-ansible$ ls -ltR django-th-johndoe/ django-th-johndoe/: total 24 drwxr-xr-x 4 foxmask foxmask 4096 ao√ªt 23 16 :28 th_johndoe -rw-r--r-- 1 foxmask foxmask 14 ao√ªt 23 16 :28 requirements.txt -rw-r--r-- 1 foxmask foxmask 1368 ao√ªt 23 16 :28 README.rst -rw-r--r-- 1 foxmask foxmask 1186 ao√ªt 23 16 :28 setup.py -rw-r--r-- 1 foxmask foxmask 194 ao√ªt 23 16 :28 MANIFEST.in -rw-r--r-- 1 foxmask foxmask 1484 ao√ªt 23 16 :28 LICENSE django-th-johndoe/th_johndoe: total 28 drwxr-xr-x 2 foxmask foxmask 4096 ao√ªt 23 16 :28 tests -rw-r--r-- 1 foxmask foxmask 471 ao√ªt 23 16 :28 forms.py -rw-r--r-- 1 foxmask foxmask 614 ao√ªt 23 16 :28 models.py -rw-r--r-- 1 foxmask foxmask 6424 ao√ªt 23 16 :28 my_johndoe.py -rw-r--r-- 1 foxmask foxmask 81 ao√ªt 23 16 :28 __init__.py drwxr-xr-x 3 foxmask foxmask 4096 ao√ªt 23 16 :28 templates django-th-johndoe/th_johndoe/tests: total 4 -rw-r--r-- 1 foxmask foxmask 3725 ao√ªt 23 16 :28 test.py -rw-r--r-- 1 foxmask foxmask 0 ao√ªt 23 16 :28 __init__.py django-th-johndoe/th_johndoe/templates: total 4 drwxr-xr-x 2 foxmask foxmask 4096 ao√ªt 23 16 :28 th_johndoe django-th-johndoe/th_johndoe/templates/th_johndoe: total 20 -rw-r--r-- 1 foxmask foxmask 1277 ao√ªt 23 16 :28 edit_provider.html -rw-r--r-- 1 foxmask foxmask 1277 ao√ªt 23 16 :28 edit_consumer.html -rw-r--r-- 1 foxmask foxmask 1513 ao√ªt 23 16 :28 wz-3-form.html -rw-r--r-- 1 foxmask foxmask 1513 ao√ªt 23 16 :28 wz-1-form.html -rw-r--r-- 1 foxmask foxmask 382 ao√ªt 23 16 :28 callback.html","tags":"Techno","url":"https://foxmask.net/post/2015/08/24/shoot-an-arrow-with-ansible-in-the-triggerhappy-target/"},{"title":"Django Trigger Happy 0.11.0 English Version","text":"Hi, Here is an English Version of my post I made Yesterday, that I couldnt forget to publish ;) So, Here comes a small update of my little project, micro ESB, allowing to orchestrate data retrieval and publishing, while exploiting your own Internet services (like Twitter to name one). Just to stay the master and crontrol your data without having to give your access permissions to anyone. In celebration program : New Functions Its now possible to produce RSS flux from the data, retrieved by another service we will installed. For example from the Twitter service. Typically we do a trigger for publishing on twitter, anything that comes from a site such as the week in chess, follow the news. Now you can do the opposite. Follow hashtag #chess, for example, and all that will be published on this subject, will eventually be generated in an RSS feed by TriggerHappy. I extend a hello to lonely friends of yahoo pipes to whom I did that, with a foot call from sam&max ;-) New service Integration : Trello . \"is the free, flexible, and visual way to organize anything with anyone.\" as it defines itself. You can then add card of things to do to organize your project. This adds a toy to the list of keys ring : Twitter, Evernote, RSS, Readability, Pocket Search engine (based on haystack & elasticsearch).It is not luxury when you ended up having a lot of triggers, existential questions arise \"well I had yet created a trigger that spoke of recipes Breton cuisine\" ;-) A function \" holidays \" which disables all the triggers, to enjoy his vacation for good ! Then, when you will come back from holidays, you disable the holidays mode which will reactivate the triggers that were enable before. Technical improvements No more Python2 anywhere. This force me to find solutions of other lib oauth2 authentication for the services like readability and Evernote. Blessing in disguise ! requests oauthlib is the solution like anyone can imagine :-) Django 1.8.x (naturally) Reorganisation of services modules in one application rather than having a repository for each module, I ended up all together in filing trigger-happy. Currently it's convenient for releasing and for unit testing, but my gut tells me that at one time I bite into fingers. Managing a limit on the number of publications to a service. Example : I publish on Twitter more than 30 websites that I follow. At a given moment, the news of each of them come too much, that I publish too quickly on Twitter, this has the side effect, to \"flood\" the timeline of my friends and followers, who, instead of having a heterogeneous timeline ending by hate me to plublish quicker than que Lucky Luke. Now, \"this\" is over. We define a limit and when it's reached, we publish the rest later. Performances As I'm never satisfied of what I produce, even when I finish a thing I tell myself I can do even better. From this perspective, therefore, I articulated the code based on the \" framework cache \" of django which permits to use the backend of your choice. Thus, all retrieving of data of all the service, is put in the cache. Then, at the publishing moment, TriggerHappy will pick the data in the cache. Before that, all was synchrone. Now Celery orchestrates this retrieving of data and their publishing. Documentation Updated everywhere. Do not hesitate a moment to read it To upgrade from the previoous release everything is here, a migration that took me time to finalize And tommorow ? some new service are planned, and some other ideas :) I also took the opportunity to rearrange tickets/labels/milestones on github, an easy way to find what one seeks to facilitate contributions . Thanks ! Thank to some interested , to some curious and finally to contributors who try to tiptoe ;) links : Trigger Happy home page Trigger Happy GitHub repository","tags":"Techno","url":"https://foxmask.net/post/2015/08/18/django-trigger-happy-0-11-0-english-version/"},{"title":"Django Trigger Happy 0.11.0","text":"Bonjour, Voici venue une petite mise √† jour de mon petit projet, de micro ESB, permettant d'orchestrer la r√©cup√©ration de donn√©es et leur publication, le tout en exploitant vos propres services internet (comme Twitter pour n'en citer qu'un). Juste histoire d'√™tre ma√Ætre de vos donn√©es sans devoir donner vos autorisations d'acc√®s √† n'importe qui. ( un rappel complet dispo √† partir d'un talk @ django Paris ) Au programme des r√©jouissances : **Nouveaut√©s Fonctionnelles** - Il est √† pr√©sent possible de **produire des flux RSS** √† partir de donn√©es, r√©cup√©r√©es par un autre service qu'on se sera install√©. [![Services Install√©s](/static/2015/08/service_installe.png)](/static/2015/08/service_installe.png) Par exemple √† partir du service twitter. Classiquement on fait un trigger publiant sur twitter, tout ce qui provient d'un site par exemple, europe-echecs, pour suivre l'actu √©chiqu√©enne. √Ä pr√©sent on peut faire l'inverse. Suivre un hashtag \\#chess, par exemple, et tout ce qui sera publi√© sur ce sujet, finira par √™tre g√©n√©r√© dans un flux RSS par TriggerHappy. J'adresse un petit coucou aux amis esseul√©s de **[yahoo pipes](https://pipes.yahoo.com/pipes/)** pour qui j'ai fait ceci, avec un appel du pied de sam&max; ;-) - **Int√©gration d'un nouveau service** : **[Trello](http://coreight.com/content/utiliser-trello-comme-un-pro)**. Ce service permet de g√©rer des projets en cr√©ant des tableaux de bord et pour chaque tableau de bord des listes de cartes. Cartes de \"trucs\" √† faire pour organiser son projet. Pour la petite histoire, lors de mes tests, j'ai suivi le hashtag \\#django en cr√©ant un trigger qui devait publier dans Trello, mais comme mon code ne marchait mais imm√©diatement, le trigger a accumul√© plus de 200 tweets qui sont arriv√©s dans un tableau de bord d√©di√© et je pouvais voir en live dans trello arriv√©s les tweets un par un :-). Ce qui ajoute un jouet de plus au trousseau de cl√©s : Twitter, Evernote, RSS, Readability, Pocket, Trello - **Un moteur de recherche** (bas√© sur haystack & elasticsearch). √áa n'est pas forc√©ment du luxe quand on fini par avoir un grand nombre de triggers, des questions existentielles surgissent \"j'avais pourtant bien cr√©√© un trigger qui parlait de recettes de cuisine Bretonne\" ;-) - Une fonction \"**vacances**\" qui d√©sactive tous les triggers, pour se mettre au vert pour de bon pendant ses vacances ! Ensuite quand vous revenez de vacantes vous d√©sactivez le mode \"vacances\" ce qui r√©activera que les triggers actifs avant le d√©part. **Am√©liorations Techniques** - Plus de python 2 nulle part. Ce qui m'a \"forc√©\" √† trouver des solutions d'authentification diff√©rentes de la librairie oauth2 pour les services tels readability et Evernote. Un mal pour un bien ! [requests oauthlib](https://requests-oauthlib.readthedocs.org/en/latest/) est la solution comme chacun s'en doutera :-) - Django 1.8.x (naturellement) - R√©organisation des modules par services dans une seule application Plut√¥t que d'avoir un d√©p√¥t par module, j'ai fini par tout regrouper dans le d√©p√¥t trigger-happy. Actuellement c'est pratique pour releaser et pour les tests unitaires, mais mon petit doigt me dit qu'√† un moment je m'en mordrai les doigts. - Gestion d'une limite du nombre de publications √† destination d'un service. Exemple : je publie sur twitter plus de 30 sites que je suis. √Ä un moment donn√© les news de chacun d'eux affluent tellement, que je publie trop vite des news sur twitter, ce qui a pour effet de bord, de \"pourrir\" la timeline de mes amis followers, qui au lieu d'avoir une timeline h√©t√©rog√®ne finisse par me ha√Ør de publier plus vite que Lucky Luke. √Ä pr√©sent \"√ßa\", c'est fini. On d√©fini une limite et quand elle est atteinte on publie le reste plus tard, tranquille p√©p√®re. **Performances** - je suis un √©ternel insatisfait de ce que je produis, m√™me quand je fini un truc je me dis que je peux largement encore mieux faire. Dans cette optique donc, j'ai articul√© le code en le basant sur le \"[framework cache](https://docs.djangoproject.com/en/1.8/topics/cache/)\" de django qui permet d'utiliser le backend de son choix. Ainsi, toute r√©cup√©ration de donn√©es des services est d√©pos√© dans le cache. Puis au moment de publier les donn√©es, TriggerHappy va le chercher dans le cache. Avant cela, tout √©tait synchrone. [A pr√©sent](/post/2015/06/19/supervisor-celery-django-orchestration/)[Celery](http://celery.readthedocs.org/) orchestre ces r√©cup√©rations de donn√©es et leurs publications . **[Documentation](http://trigger-happy.readthedocs.org/)** - mise √† jour en long en large et en travers. N'h√©sitez pas un instant √† la parcourir - Pour mettre √† jour depuis la version pr√©c√©dente [tout est ici, une migration qui m'a pris du temps √† finaliser](http://trigger-happy.readthedocs.org/en/latest/migration.html) Et demain ? de nouveaux services sont pr√©vus, et quelques id√©es :) J'en ai aussi profit√© pour r√©organiser les tickets/labels/milestones sur github, histoire de facilement trouver ce qu'on cherche, afin de faciliter les contributions . Merci ! merci √† quelques int√©ress√©s , √† quelques curieux et enfin aux contributeurs qui s'essayent sur la pointe des pieds ;) liens : Trigger Happy page d'accueil Trigger Happy GitHub repository","tags":"Techno","url":"https://foxmask.net/post/2015/08/17/django-trigger-happy-0-11-0/"},{"title":"Ansible : les variables d√©finies √† la vol√©e","text":"Ansible : comment d√©finir des variables √† la vol√©e dans son playbook Imaginons que j'ai besoin de d√©finir des variables au fur et √† mesure que le processus avance Cas concret d√©ployer des WAR issues d'une \"nightly build\" depuis des repo maven : je demarre par une t√¢che allant √† la p√™che aux SNAPSHOT - name : Find last snapshot command : ssh {{ server_repo }} ls -d {{ maven_repository }}/standard/{{ branch }}.*-SNAPSHOT | sort register : snapshot ici register va me permettre d'utiliser \"snapshot\" par la suite. Disons command m'a permit de trouver FOOBAR-1.2.3-SNAPSHOT - name : let's define \"war_path\" command : echo {{ path }}{{ snapshot.stdout | basename }}.war when : snapshot register : war_path ici 2 choses et une astuce : 1) j'utilise de nouveau register pour pouvoir t√©l√©charger le war plus tard 2) j'utilise when ce qui permet de ne faire la command que quand la tasks snapshot est register ed 3) l'astuce : utiliser command comme si on avait fait un simple export FOO=BAR, et sur la ligne de command on utilise snapshot.stdout parce qu'on a register snapshot pr√©c√©dement qui n'est qu'une chaine et pas une liste. Ce qui, avec les filtres \"basename\" et la concat√©nation avec \".war \", me donne grosso modo comme r√©sultat un tout QQ : echo /un/jolie/path/FOOBAR-1.2.3-SNAPSHOT.war t√¢che suivante : - name : war_path download from server_repo command : scp -pr {{ server_repo }}:{{ war_path.stdout }} /temp when : war_path ici un simple scp, on remarquera war_path qui est la tasks register juste au dessus et le when qui utilise war_path - name : war_path check is here stat : path=/temp/{{ war_path.stdout | basename}} register : war_path_exists ici v√©rification que le transfert a eu lieu - name : war_path fail to download fail : file /temp/{{ war_path.stdout | basename}} does not exists when : war_path_exists.stat.exists == False ici on peut v√©rifier que √ßa a foir√©, on se contente d'un message d'erreur mais on aurait pu faire p√©ter un mail au service IT :P - name : war_path Extract command : chdir={{ home }}/{{ target }}-tomcat/webapps/{{ foobar }} {{ java_home }}/bin/jar xf /temp/{{ war_path.stdout | basename }} when : war_path et on acheve par la d√©compression du war je vous fais gr√¢ce du restart tomcat :) Pour finir, un petit gist qui fait joujou avec uniquement des variables √† base de echo :)","tags":"Techno","url":"https://foxmask.net/post/2015/08/11/ansible-les-variables-definies-a-la-volee/"},{"title":"TODOIST vs Trello : rapidos prise en main","text":"TODOIST et TRELLO joue dans le m√™me cr√©do: celui de constituer des listes de trucs √† faire, avec un cot√© plus organistation de boulot en d'equipe du cot√© de TRELLO. Les 2 projets sont dispo aussi bien sur Android que Windows. Sur Windows: B√©moles : Trello ne s'installe qu'√† partir de windows 8 voire 10. Todoist: interface tr√®s minimaliste, la m√™me que celle du site web, une fen√™tre, au pif pas plus grande qu'une reso 640*480... du coup ca limite l'utilisation. Mais ya pire (si c'est possible) Sur Android: Trello passe impeccablement, interface propre et agr√©able, ca donne limite envie de le remplir dans tous les sens ;) Todoist: interface toute aussi minimaliste, voire trop, l√† c'est l'inverse, j'ai du mal √† m'y faire Point noire chez Todoist : on se mange quasiment constamment des popup \"abonnez vous √† Todoist premium\" pour : - Ajouter des pi√®ces jointes ... - utiliser des √©tiquettes - Ajouter une filtre Je ne sais plus quel ergonome disait qu'il valait mieux NE PAS MONTRER que ces features EXISTENT pour √©viter la frustration de ne pas pouvoir s'en servir et qu'on rejette au final l'outil tout entier, et par exemple d√©di√©e une page qui d√©taille \"version Free\" vs \"version Premium\" Quand un projet d√©marre, coller du \"vazy paye pour ca et ca et ca\" ; ca rebute. A c√¥t√© Trello, c'est tout propre, je n'ai pas encore vu de limitations et du coup ca m'a donn√© envie d'utiliser leur API pour l'int√©grer √† TriggerHappy Pour conclure, voici les liens pour t√©l√©charger pour votre plateforme : les plateformes chez Trello - les plateformes chez Todoist","tags":"Techno","url":"https://foxmask.net/post/2015/08/10/todoist-vs-trello-rapidos-prise-en-main/"},{"title":"Revue Technique semaine du 03/08/2015","text":"Tomb√© sur un truc qui m'a interpelationanon√© : https://twitter.com/amontalenti/status/629006798922608640?s=09 Ca cause apache mais pas que puisqu'aussi de python. Il s'agit de deux projets apache nomm√©s : storm qui fourni des \" tuples \" . Il a √©t√© utilis√© (je ne sais pas s'il l'est toujours) par twitter. kafka qui pour faire court est un syst√®me de pub/sub, qu'on peut manipuler avec python via https://pykafka.readthedocs.org/en/latest/ je ne sais pas si vous voyez des similitudes avec CROSSBAR et Autobahn mais je trouve que c'est frappant ;) Autobahn 0.10.5 Pendant qu'on y est voil√† quand m√™me une nouvelle version :-) Dans le genre \"j'ai pas quatre bras ducon\" Samsung sortirait une petite tablette de 18.4 \" Elle devrait sortir avec avec une cl√© allen de chez Ikea pour se fixer aux hanches, les 2bras fournis en kit pour pouvoir porter le bidule. Si c'est vrai c'est apple qui m'l'a dit. Le changement c'est maintenant disait je sais plus qui... Microsoft fait la manche en vous demandant une petite pi√®ce de monnaie, ou un ticket restaurant, ou un sourire pour le P-DG de windows 10. Si je d√©bloque ? H√¥ si peu . Cette petite pi√®ce me permettra de pouvoir utiliser un lecteur DVD ou jouer au solitaire puisque je n'ai pas d'ami . Pour finir par un truc pas tout neuf mais sOOoo Goude ! https://twitter.com/rit/status/549814266094551040","tags":"Techno","url":"https://foxmask.net/post/2015/08/07/revue-technique-semaine-du-03082015/"},{"title":"Tuto linux : trouver le process qui a ouvert un port","text":"A qui ca n'est pas arriv√© de voir un process se planter parce que \"port already bound\" ... Comment rep√©rer le process qui a ouvert le port dont on a besoin ? imaginons les ports 8009 et 8080 on commence par un $ netstat -an | grep 8009 tcp 0 0 0 .0.0.0:8009 0 .0.0.0:* LISTEN tcp 0 0 127 .0.0.1:8009 127 .0.0.1:15561 ESTABLISHED tcp 0 0 127 .0.0.1:15477 127 .0.0.1:8009 ESTABLISHED $ netstat -an | grep 8080 tcp 0 0 0 .0.0.0:8080 0 .0.0.0:* LISTEN tcp 0 0 127 .0.0.1:8080 127 .0.0.1:60159 ESTABLISHED tcp 0 0 127 .0.0.1:58230 127 .0.0.1:8080 TIME_WAIT pour s'assurer que ces ports soient bien ouverts, histoire de voir qu'on a bien les yeux en face des trous Ensuite je vais pour utiliser lsof : $ lsof -i | grep 8009 httpd 20944 apache 14u IPv4 48859942 0t0 TCP localhost:15588->localhost:8009 ( ESTABLISHED ) httpd 20945 apache 14u IPv4 48858055 0t0 TCP localhost:15478->localhost:8009 ( ESTABLISHED ) java 23193 jboss 283u IPv4 48833112 0t0 TCP *:8009 ( LISTEN ) java 23193 jboss 830u IPv4 48858029 0t0 TCP localhost:8009->localhost:15473 ( ESTABLISHED ) java 23193 jboss 833u IPv4 48858251 0t0 TCP localhost:8009->localhost:15487 ( ESTABLISHED ) Parfait je vois qui m'enquiquine sur ce port j'ai le pid 23193 :P puis la meme pour le port 8080 $ lsof -i | grep 8080 $ mais l√†, rien ne s'affiche, wtf ? c'est parce que lsof -i affiche les process ayant ouvert des ports dont les services sont \"connus\" de /etc/services donc d'abord il faut faire un $ grep 8080 /etc/services webcache 8080 /tcp http-alt # WWW caching service webcache 8080 /udp http-alt # WWW caching service pour localiser le NOM dudit service li√© au port 8008, puis on conclut par $ lsof -i | grep webcache java 23193 jboss 284u IPv4 48833113 0t0 TCP *:webcache ( LISTEN ) et voil√† j'ai trouv√© mes coupables ;)","tags":"Techno","url":"https://foxmask.net/post/2015/08/05/tuto-linux-trouver-le-process-qui-a-ouvert-un-port/"},{"title":"Entrevue en toute simplicit√© - Debnet","text":"Bonjour Debnet, Peux-tu te pr√©senter en quelques mots ? Alors, je m'appelle Marc, j'ai environ 30 ans et je vis dans le Nord. Je suis expert technique, architecte logiciel, libriste convaincu et activiste agile, je baigne dans les technologies depuis mon plus jeune √¢ge et j'adore √ßa ! Comment es-tu venu √† Python et/ou Django et que faisais-tu avant de faire du Python ? Depuis quand fais-tu du Python et/ou Django ? Quand j'ai fini mes √©tudes, j'avais un bon bagage de technologies \"grand public\" tels que Java ou .NET. La premi√®re chose que j'ai fait √©tait de pousser les portes d'une SSII locale et j'ai p√ª affiner encore plus mes comp√©tences. Jusqu'au jour o√π l'universit√© cherchait des intervenants ext√©rieurs pour enseigner des concepts techniques ou des langages de programmation aux universitaires, j'ai propos√© alors d'enseigner le Ruby (on Rails) et le Python (avec Django), que j'ai alors d√ª apprendre pour l'occasion parce que j'√©tais curieux et qu'ils commen√ßaient √† faire parler d'eux. R√©sultat : je n'en suis plus jamais revenu et je continue aujourd'hui de les enseigner √† l'universit√©. J'ai √©galement r√©alis√© √† l'√©poque un outil de gestion de projet agile pour le compte de ma SSII en Django. Du coup je fais du Python depuis plus de 5 ans maintenant. A quels projets open-source participes-tu ? C'est d√©licat, je n'ai pas de \"projet communautaire\" √† proprement parler, mais je participe beaucoup au suivi et √† l'am√©lioration des produits que j'utilise au quotidien. L'√©cosyst√®me dans le monde de l'open-source est tr√®s bien fichu quand on prend le temps de s'y int√©resser, et on se laisse vite emporter lorsqu'on est un minimum curieux. Les projets o√π ma participation est la plus active sont certainement \"django-rest-framework\" (surcouche REST par dessus Django, la pierre angulaire de beaucoup de nos projets professionnels) et \"celery\" (qui permet d'ex√©cuter des t√¢ches asynchrones dans un environnement Python/Django). J'ai fork√© quelques projets au seuil de l'abandon √©galement, mais principalement pour les besoins de nos projets. Et bien s√ªr, avec Sam & Max , on est vite amen√© √† participer aux communaut√©s francophones autour de Python. Je suis √©galement tr√®s pr√©sent sur Twitter o√π je collecte les trucs techniques utiles et j'en profite pour troller JavaScript. Quelles parties de Python et/ou Django et/ou stack utilises-tu le plus ? Loin devant les autres \"django-rest-framework\", ce truc a r√©volutionn√© notre fa√ßon de travailler avec Django, surtout que dans le web \"moderne\" (avec beaucoup de guillemets) la tendance est √† la s√©paration et l'abstraction des couches (avec AngularJS c√¥t√© front notamment). Ca fait finalement longtemps que j'ai pas cod√© une vraie vue avec des forms en Django, ces outils sont tr√®s bien mais ils ne s'inscrivent plus √† mon sens √† la vision actuelle du web. Ma curiosit√© me pousse √©galement de plus en plus vers \"asyncio\" et \"crossbar\", mais l√† c'est le manque de v√©ritable plus-value business qui freine mon investissement personnel, sans compter que ces technologies sont encore un peu jeunes et mal exploit√©es. Quelle(s) librairie(s) tierce(s) a/ont ta pr√©f√©rence ? Alors j'ai d√ª faire un petit tour dans les requirements de mes projets pour r√©pondre √† celle-l√†. En v√©rit√© je ne me suis jamais vraiment pos√© la question, j'ai souvent des automatismes et des habitudes concernant les d√©pendances, je ne m'en rends m√™me plus compte. Hormis les projets cit√©s pr√©c√©demment qui sont excellentissimes (\" django-rest-framework \" et \" celery \" pour rappel), il y a quelques noms qui reviennent : D√©j√† \" numpy \"/\" scipy \", on ne s'en sert vraiment pas tous les jours, mais quand c'est le cas c'est bougrement impressionnant. Python s'est fait une place de choix dans les laboratoires d'informatiques gr√¢ce √† √ßa, par contre je le ma√Ætrise encore assez mal car j'ai rarement de cas concrets qui n√©cessitent leur utilisation. Ensuite \" requests \", je ne peux plus faire sans et je ne me pose m√™me plus la question de l'utiliser syst√©matiquement. Ensuite pour Django uniquement, on a l'embarras du choix et la plupart sont de qualit√© : - Je ne citerai pas la fameuse \" django-debug-toolbar \" qui reste indispensable m√™me quand on fait du REST. - Le combo \" pytest \"/\" mommy \" pour les tests unitaires, √ßa fait gagner un temps dingue. - \" ipython \" dont je me sers tous les jours et qui se marie tr√®s bien avec Django. - \" raven \" avec \" sentry \" pour la surveillance et le monitoring des applications, un must-have. Que fais-tu aujourd'hui et quel avenir envisages-tu ? Aujourd'hui, je travaille chez un √©diteur qui s'est longtemps repos√© sur son unique progiciel et qui n'a pas su prendre le virage de la modernit√© √† temps. Je suis arriv√© l√† bas pour insuffler une nouvelle dynamique et apporte des propositions techniques pour concr√©tiser leurs nouvelles ambitions. J'y b√©n√©ficie d'une confiance absolue m'ayant permis de pousser des technologies comme Python et Django, travailler avec des m√©thodes agiles, apporter la notion d'int√©gration continue et les tests unitaires ainsi que l'open-source. En somme une vraie r√©volution, avec ses hauts et ses bas au quotidien mais surtout un vrai d√©fi ! Si l'avenir le permet, je voudrais continuer √† faire du coaching et du consulting dans les nouvelles technologies et accompagner comme je le fais les √©quipes sur les probl√©matiques techniques et sur l'architecture des projets. Question d√©lirium : demain tu trouves une id√©e de g√©nie qui gr√¢ce √† Python sauve la plan√®te, qu'est-ce que √ßa serait et comment ? Alors j'ai un peu adapt√© la question, tu m'en voudras pas, dans la version d'origine j'avais je crois le choix entre : - la sauver de la d√©sertification en transformant les d√©serts du Sahara et de Gobi, - la sauver de la connerie humaine en r√©initialisant le cerveau des humains, - tourner une suite √† l'√¢ge de glace nomm√© \"le python des neiges\" (√ßa peut sauver la plan√®te √ßa ?) - t'envoyer chez le psy parce que t'as fum√© et que je comprends rien √† tes questions ! Je t'avoue que je suis bien tent√© par la derni√®re proposition. Sinon, si l'humanit√© comptait sur moi pour la sauver, elle serait bien mal tomb√©e parce que des id√©es de g√©nie j'en ai, mais de l√† √† les appliquer √ßa serait plut√¥t un truc du genre \"on verra demain\". :D A bient√¥t ! o/ Restons en contact si vous souhaitez entrer en contact avec le sieur Debnet, faites moi le savoir via la page de contact , et je lui ferai suivre ;) (re)Lire une Entrevue pr√©c√©dente Ashgan Spout","tags":"Entrevues","url":"https://foxmask.net/post/2015/08/03/entrevue-en-tout-simplicite-debnet/"},{"title":"Revue Technique de la semaine du 27/07/2015","text":"OnePlus 2 Le nouvel appareil de OnePlus montre les crocs, mais ce dernier fait petite mine avec un proc moins bien lotis que ses concurrents, sinon une bonne grosse batterie comme le LG 4 qui va permettre de profiter de l'objet dans se dire \"oh p#@%& vite un c√¢ble USB !\" Pour rappel, cet appareil a produit sa propre ROM depuis janvier apr√®s s'√™tre copieusement pris la tete avec CyanogenMod pour non respect de l'exclusivit√© de l'expoitation de CM ... Voici donc les nouveaut√©s de OxygenOS tr√®s tr√®s tr√®s proche d'un Android Stock. Retrouver aussi le comparatif avec les autres \"gros\" du march√©. les prix : \\~340‚Ç¨ pour la version 16Go contre \\~400‚Ç¨ la version 64Go Google nous l√¢che la grappe avec Google+ ! Apr√®s nous avoir bien fait chier √† devoir absolument nous coltiner son r√©seau social de merde d√®s l'ouverture d'un compte sur Gmail ou √† l'ouverture d'un smartphone sur Android... Google fait son mea culpa et l√¢che l'affaire en commen√ßant par YouTube o√π on pourra commenter sans avoir un compte g+ Postgresql √† toutes les sauces et sur debian :) https://twitter.com/rodoq/status/609364038695407616?s=09 La couv' de la semaine (voire du mois ou de l'ann√©e) ! Allez voir Humanoide n¬∞5 , vous devriez comprendre comment ENFIN on nous √©coute depuis le temps que chaque parti prend des tartes √©lectorales et que chacun de ses dirigeants nous sort √† qui mieux mieux \"on a compris le message des Fran√ßais\". Ben l√† on va se faire une joie de leur brouiller la ligne :P IndexError Comment pourquoi que ca marche-t-il (pas) mon code, S.O.S d'un codeur en d√©tresse : voici les 10 derniers sujets trait√©s ou en cours sur IndexError.net Int√©grer Python Social Auth √† une app Django Ajouter de mani√®re r√©cursive des cl√©s service sms avec django un python dans le jardin Sanitize HTML, comment retirer des attributs via une wildcard ? Acc√©der √† une Foreign Key dans la classe d'un mod√®le marshall python Bottle + AutobahnPython + pcduino Pourquoi Python n'int√®gre pas un module natif pour faire de la crypto (AES, DES etc.) ? Requetes Django en parall√®le","tags":"Techno","url":"https://foxmask.net/post/2015/07/29/revue-technique-de-la-semaine-du-27072015/"},{"title":"Entrevue en toute simplicit√© - Ashgan","text":"Bonjour Ashgan, Peux tu te pr√©senter en quelques mots ? Ashgan Je suis expat' √† Dakar, au S√©n√©gal, depuis bient√¥t 10 ans. Actuellement sysadmin / dev ind√©pendant pendant le peu de temps libre qu'il me reste, je suis un autodidacte complet. Pour ceux qui sont assez vieux pour connaitre, j'ai jou√© comme tout le monde avec des MO5 pendant les cours, quelques fois le CPC464 noir/vert √† cassette piqu√© en douce au grand fr√®re ou les fameuses TI-8x au lyc√©e. Bref, essentiellement du Basic et d√©riv√©s au si√®cle dernier, puis plut√¥t du rien depuis, en fait. Traumatis√© par les goto? va savoir.... Ceci dit, √©tant sysadmin dans une petite structure, √† part commettre un script bash ou un truc web en HTML voire PHP de temps en temps, le dev ressemble plut√¥t √† du debug de formules excel chez Aminata (la Brigitte locale) √† la compta. Comment es tu venu √† python et que faisais tu avant de faire du python, depuis quand tu fais du python ? Ashgan Pour diverses raisons, √ßa fait maintenant 4-5 ans que mon infra tourne √† peu pr√®s ET que j'ai du temps pour me consacrer √† d'autres choses. A l'√©poque, j'√©tais tomb√© sur \"Learn Python The Hard Way\" ou un autre bouquin tout aussi recommandable. Je me suis sorti les doigts, consomm√© beaucoup de caf√©s+aspirines et j'ai commenc√© petit, script apr√®s script, histoire de s'approprier le truc sur des probl√®mes d'admin-sys, qui me prennent toujours une bonne partie de mon temps. Puis un jour, la boulette : j'en ai eu marre de voir mes users recopier √† la main 3-4 donn√©es d'un √©cran vert fa√ßon ann√©e 80 vers excel et aujourd'hui j'ai un intranet en Flask sur les bras. Mon c√¥t√© m√®re Theresa . J'arr√™te pas de rajouter brique apres brique. Un probl√®me ? \"y'a python pour √ßa.\". Depuis, mes users ont le poil vif et l'oeil humide. mon c√¥t√© marabout . J'ai pas vraiment l'envie ou la pr√©tention de remplacer l'ERP maison cod√© en RPG-LE mais √ßa donne un petit c√¥t√© 21eme si√®cle √† une infra des ann√©es 90, c'est rigolo. Mon c√¥t√© Denisot . Quelles parties de Django|Flask / python utilises tu le plus ? (et / ou ta stack utilis√©e) Ashgan Rien de tr√®s m√©chant. Je tourne essentiellement avec sur Flask (et 2-3 plugins, genre flask-login, flask-kvsession), pypyodbc, pygal. Ca couvre 99% de mes besoins. Pour le reste, classique: Debian stable, nginx, uwsgi. Quelle(s) lib tierce(s) a/ont ta pr√©f√©rence ? Ashgan j'aime beaucoup Flask pour son c√¥t√© tout terrain: m√™me si ton environnement est bizarre (pour pas dire pourri), tu arrives toujours √† faire un truc. Va faire pareil avec Django aussi facilement :) Il y a aussi requests et beautifulsoup sont tr√®s pratiques pour se sortir de la m\\&#94;panade d√®s que t'as un truc √† r√©cup√©rer online. j'ai une note tr√®s recente dans mes trucs √† voir rapidos : mailthon. √ßa a l'air tr√®s sympa pour envoyer du mail, coupl√© √† requests/bs, j'ai quelques scripts qui vont applaudir des 2 mains! Que fais tu aujourd'hui et quel avenir envisages tu ? Ashgan aujourd'hui, je suis partag√© entre l'admin-sys et le dev. je fais aussi quelques extras de temps en temps (en python, forcement) quand le probl√®me m'int√©resse. J'aime beaucoup r√©fl√©chir sur des probl√®mes plus ou moins bizarres, sur toute la stack: comment, sur quoi, quel chewing-gum coller sur quel trombone, etc... Mon c√¥t√© Mc Guyver . A ce propos, pardon √† ceux qui m'ont pas encore mute sur IRC, c'est mon c√¥t√© Calimero :) Si je peux trouver un poste de d√©veloppeur python, que demander de plus? Question d√©lirium : Demain t'as des super-pouvoirs en Python : √† quelles fins les mets tu √† profit ? Tu changes la version de ton python au boulot ? (faut pas d√©conner le cadre de travail ca compte :P) Tu transformes python en un autre langage ? Tu ponds un outil connect√© inutile & indispensable ? (lequel ? :) Ou comme dirait une certaine \"Miss\" de concours de beaut√© \"... Pour un monde en Paix !\" Ashgan t'es en panne de plan pour dominer le monde, c'est √ßa ? j'en ai un, je le garde ! Une conclusion ? Ashgan Je ne sais pas quel exemple mon interview va donner aux p'tits jeunes ou aux autres, mais l'exercice √©tait marrant. sinon...oubliez Django, Flask c'est le bien! :D Merci pour ta participation et √† bient√¥t sur #sametmax@freenode.net ;) Restons en contact si vous souhaitez entrer en contact avec le sieur Ashgan, faites moi le savoir via la page de contact , et je lui ferai suivre ;) (re)Lire une Entrevue pr√©c√©dente Spout","tags":"Entrevues","url":"https://foxmask.net/post/2015/07/27/entrevue-en-toute-simplicite-ashgan/"},{"title":"Entrevue en toute simplicit√© - Spout","text":"Voici une nouvelle s√©rie de billets qui d√©marre aujourd'hui : de petites entrevues en toute simplicit√© avec des dev de touzorizon. Le premier d'entre eux @Spout Bonjour Spout, Peux tu te pr√©senter en quelques mots ? Spout Geek passionn√© du Web et des nouvelles technologies, je joue souvent aux jeux vid√©os. Quand je suis pas sur le PC je vais √† la p√™che et fait du Revolution Kite quand le vent est au rendez-vous. Comment es tu venu √† python/django et que faisais tu avant de faire du python, depuis quand tu fais du python/Django ? Spout Quand j'ai commenc√© le d√©veloppement Web, c'est √©videmment vers le PHP que je me suis tourn√© (j'avais appris le C/C++ pendant mes √©tudes). Comme beaucoup de d√©veloppeurs j'en suis venu √† faire mon framework/CMS PHP. Ruby on Rails est sorti un peu plus tard, pr√©sent√© comme LE framework r√©volutionnaire, je m'y suis un peu int√©ress√©. Puis en r√©ponse √† RoR, il y a eu une √©mergence ph√©nom√©nale des frameworks PHP. Mon choix s'est vite port√© sur CakePHP qui reprenait les concepts de RoR, notamment le principe que j'appr√©cie \"Convention over configuration\". A mon premier emploi en tant que d√©veloppeur Web (avant c'√©tait juste en ind√©pendant compl√©mentaire o√π j'ai toujours eu le choix du tech stack), j'ai d√ª utiliser Zend Framework 1. Au fil du temps j'ai trouv√© ce framework assez contre-productif et je cherchais autre chose pour d√©velopper en apr√®s journ√©e. C'est √† ce moment l√† que Foxmask m'a parl√© de Django sur l'IRC #cakephp-fr. J'avais d√©j√† fait le tuto officiel (polls) 2 ans auparavant, et ne connaissant pas Python je ne m'y √©tais gu√®re attard√©. D√©but 2013 j'ai refait le tuto polls, sans jamais avoir tap√© la moindre ligne de Python auparavant et l√† j'ai beaucoup appr√©ci√© Django et Python. Le langage coh√©rent (needle/haystack ?), les conventions PEP8 (PSR est arriv√© tard en PHP) , la doc super compl√®te, batteries included, DRY, ... Et depuis je ne jure plus que par Python/Django, j'ai refait la plupart de mes projets perso avec et j'ai constat√© un gain de productivit√©. A Quels projets open source participes tu ? Spout J'ai un projet (non termin√©) de package pour Django qui reprend ce principe: https://djangosnippets.org/snippets/2309/ mais modifi√© pour utiliser les CBV. Quelles parties de Django / python utilises tu le plus ? (Et / Ou juste Quelle stack utilises tu le plus) Spout J'utilise tout le MVT de Django + Admin + Auth + Forms + I18n + Feeds + Sitemaps. En guise de Stack: Debian + Django + MySQL (migration vers PostgreSQL en cours) + Supervisor + Gunicorn + Nginx + Redis (cache backend) + Elasticsearch (Haystack) Quelle(s) lib tierce(s) a/ont ta pr√©f√©rence ? Spout Il y en a plusieurs que j'utilise r√©guli√®rement: django-braces: https://github.com/brack3t/django-braces django-crispy-forms: https://github.com/maraujop/django-crispy-forms django-haystack: http://haystacksearch.org django-allauth: https://github.com/pennersr/django-allauth easy-thumbnails: http://easy-thumbnails.readthedocs.org/en/2.1/ django-sekizai: https://github.com/ojii/django-sekizai django-compressor: https://github.com/django-compressor/django-compressor django-libsass: https://github.com/torchbox/django-libsass django-extra-views: https://github.com/AndrewIngram/django-extra-views django-modeltranslation: https://github.com/deschler/django-modeltranslation django-rosetta: https://github.com/mbi/django-rosetta micawber: http://micawber.readthedocs.org/en/latest/ django-countries: https://github.com/SmileyChris/django-countries Que fais tu aujourd'hui et quel avenir envisages tu avec toutes ces comp√©tences ? Spout Je recherche un emploi en tant que d√©veloppeur Web, en Python ce serait le r√™ve. Question d√©liruim : Demain tu croises un g√©nie, tu as 1 voeu √† exaucer, rencontrer l'une des ces 3 personnes : qui et pourquoi ? Guido Sam et Max Moi :-) Spout Foxmask pour aller boire une bi√®re (belge) et partager notre passion. Merci pour ta participation ! Restons en contact si vous souhaitez entrer en contact avec le sieur Spout, faites moi le savoir via la page de contact , et je lui ferai suivre ;) sinon vous avez aussi son @compte twitter","tags":"Entrevues","url":"https://foxmask.net/post/2015/07/20/entrevue-en-toute-simplicite-spout/"},{"title":"Revue Technique, Django Inside, semaine du 13/07/2015","text":"Pour ceux ce qui ne sont pas 'core zalaplage voici un petit bouquet fleuri estival ramass√© mon fid√®le destrier Tornado : Il y eu d'abord une teuf pour f√™ter les 10 piges de Django , si tu l'as pas vu, tu l'as rat√©e (hop la lapalissade:) Zensuite mon chemin a crois√© ces 3 billets du m√™me auteur Comment profiler ses middleware django : Comprendre comment produire les middleware django Debuter avec Celery et Redis Un petit The User is Dead par Sam et Max La prochaine DjangoCon sera aux USA le 6 septembre 2015 j'ai cherche un jeu de mots entre la ville o√π √ßa se passe et l'homme qui valait 3 milliard, ou, la ville et la bagnole, mais au final je me contenterai de vous dire que √ßa se passe √† Austin, Texas More infos ici Last but not least : des fixes en veux tu en voil√† Trigger Happy : Wazaaaaaa ??? un petit topo sur Trigger Happy vite fait pour dire que je suis sur le regroupement de tous les services existants dans une seule appli, qui avec tox/travis-ci sont en parfait accord ;) Ensuite je suis aussi sur une am√©lioration pour permettre de produire des flux rss √† partir de n'importe quel service, l'id√©e c'est de palier aux orphelins de Yahoo Pipelines qui ferme ses portes le mois prochain. Enfin j'ai crois√© de plus pr√®s Trello , ca avance . Si vous avez d'autres id√©es de services √† plugger au projet ; du genre je voudrai avoir un mail quand la m√©t√©o annonce une temp√™te de neige ; let me know, et je produirai un service \"Mail\" et un service \"Meteo\" et hop .","tags":"Techno","url":"https://foxmask.net/post/2015/07/17/revue-technique-django-inside-semaine-du-13-juillet-2015/"},{"title":"Supervisor Celery Django : Orchestration","text":"Dans ce billet je vais aborder un triplet que chacun connait surement et a d√©j√† d√ª le mettre en place, mais j'irai pos√© l√†, comme √† mon habitude, un retour d'xp qui m'est propre et pourrait servir √† de nouveaux venus sur django et l'administration de nos instances avec ce framework. une intro vite fait sur ces outils tout de m√™me au cas o√π je parlerai chinois ;) Celery est un syst√®me distribu√© simple, flexible et fiable pour traiter de grandes quantit√©s de messages, tout en fournissant des op√©rations avec les outils n√©cessaires pour maintenir un tel syst√®me. Supervisor est un syst√®me client / serveur qui permet √† ses utilisateurs de surveiller et de contr√¥ler un certain nombre de processus sur les syst√®mes d'exploitation de type UNIX. Comme tout √† chacun (d'entre nous) on cherche √† maintenir nos applications \"en vie\" en les faisant d√©marrer comme services et les anim√©es par des t√¢ches (r√©cursives ou non). C'est l√† le but de ces outils ! Celery Donc pour d√©marrer on aura besoin dans son projet django de cr√©er le fichier suivant permettant tout simplement d'aller √† la p√™che aux t√¢ches des applications django indiqu√©es dans le settings.INSTALLED_APPS. celery.py from __future__ import absolute_import import os from celery import Celery from celery.schedules import crontab from django.conf import settings os . environ . setdefault ( 'DJANGO_SETTINGS_MODULE' , 'mon_projet.settings' ) app = Celery ( 'mon_projet' ) app . config_from_object ( 'django.conf:settings' ) app . autodiscover_tasks ( lambda : settings . INSTALLED_APPS ) Ensuite on pourrait avoir besoin de t√¢ches r√©currentes qui doivent √™tre d√©finies dans le settings de son projet (et pas dans celery.py comme je l'ai cru en parcourant la doc celery) mon_projet/settings.py CELERYBEAT_SCHEDULE = { 'add-every-hour-cache' : { 'task' : 'mon_app.tasks.read_data' , 'schedule' : crontab ( minute = '27,54' ), }, 'add-every-hour-publish' : { 'task' : 'mon_app.tasks.publish_data' , 'schedule' : crontab ( minute = '59' ), }, } Bizarreries : Ici j'√©tais parti pour √©crire, telle une vraie crontab, CELERYBEAT_SCHEDULE = { 'every-hour-put-in-cache' : { 'task' : 'mon_app.tasks.read_data' , 'schedule' : crontab ( minute = '*/27' ), }, 'add-every-hour-publish' : { 'task' : 'mon_app.tasks.publish_data' , 'schedule' : crontab ( minute = '*/60' ), }, } Seulement au lancement du \"beat\" je me suis mang√© une erreur sur le contenu de minute qui doit √™tre compris en 1 et 59... Or dans une crontab je peux tout aussi bien √©crire */360 sur le range \" minutes \" si ca me chante :P Ensuite le */27 foire tout aussi bien. Le beat d√©marre √† 27 minutes, puis 54 minutes .... et 00 ... M√™me comportement avec */59 (√† la place de */60), il d√©marre bien √† 59 minutes .... puis √† 00 ... Enfin, ensuite voici un exemple de t√¢ches qui pourrait √™tre d√©clench√©es √† intervalle r√©gulier mon_app/tasks.py from __future__ import unicode_literals from __future__ import absolute_import from celery import shared_task @shared_task def read_data (): .... @shared_task def publish_data (): ... au lancement du beat (qui g√®re la crontab) on obtient donc : $ celery - A th beat - l debug celery beat v3 . 1.18 ( Cipater ) is starting . __ - ... __ - _ Configuration -> . broker -> redis : // localhost : 6379 / 10 . loader -> celery . loaders . app . AppLoader . scheduler -> celery . beat . PersistentScheduler . db -> celerybeat - schedule . logfile -> [ stderr ] @ % DEBUG . maxinterval -> now ( 0 s ) [ 2015 - 06 - 18 21 : 32 : 50 , 117 : DEBUG / MainProcess ] Setting default socket timeout to 30 [ 2015 - 06 - 18 21 : 32 : 50 , 117 : INFO / MainProcess ] beat : Starting ... [ 2015 - 06 - 18 21 : 32 : 50 , 134 : DEBUG / MainProcess ] Current schedule : [ 2015 - 06 - 18 21 : 32 : 50 , 134 : DEBUG / MainProcess ] beat : Ticking with max interval -> 5.00 minutes [ 2015 - 06 - 18 21 : 32 : 50 , 169 : DEBUG / MainProcess ] beat : Waking up in 5.00 minutes . le lancement du worker donne ceci √† son tour $ celery - A th worker -- autoscale = 10 , 3 - l debug [ 2015 - 06 - 18 21 : 36 : 40 , 087 : DEBUG / MainProcess ] | Worker : Preparing bootsteps . [ 2015 - 06 - 18 21 : 36 : 40 , 094 : DEBUG / MainProcess ] | Worker : Building graph ... [ 2015 - 06 - 18 21 : 36 : 40 , 095 : DEBUG / MainProcess ] | Worker : New boot order : { Beat , Timer , Hub , Queues ( intra ), Pool , Autoscaler , StateDB , Autoreloader , Consumer } [ 2015 - 06 - 18 21 : 36 : 40 , 116 : DEBUG / MainProcess ] | Consumer : Preparing bootsteps . [ 2015 - 06 - 18 21 : 36 : 40 , 117 : DEBUG / MainProcess ] | Consumer : Building graph ... [ 2015 - 06 - 18 21 : 36 : 40 , 136 : DEBUG / MainProcess ] | Consumer : New boot order : { Connection , Agent , Events , Mingle , Gossip , Tasks , Control , Heart , event loop } [ 2015 - 06 - 18 21 : 36 : 40 , 140 : WARNING / MainProcess ] / home / sites / trigger - happy . eu / local / lib / python2 . 7 / site - packages / celery / apps / worker . py : 161 : CDeprecationWarning : Starting from version 3.2 Celery will refuse to accept pickle by default . -------------- celery @monserver v3 . 1.18 ( Cipater ) ---- **** ----- --- * *** * -- Linux - 2.6 . 32 - 042 stab106 . 4 - x86_64 - with - debian - 8.1 -- * - **** --- - ** ---------- [ config ] - ** ---------- .> app : th : 0x7f85f6883b50 - ** ---------- .> transport : redis : // localhost : 6379 / 10 - ** ---------- .> results : disabled - *** --- * --- .> concurrency : 2 ( prefork ) -- ******* ---- --- ***** ----- [ queues ] -------------- .> celery exchange = celery ( direct ) key = celery [ tasks ] . celery . backend_cleanup . celery . chain . celery . chord . celery . chord_unlock . celery . chunks . celery . group . celery . map . celery . starmap . mon_app . tasks . publish_data . mon_app . tasks . put_in_cache . mon_app . tasks . read_data [ 2015 - 06 - 18 21 : 36 : 40 , 165 : DEBUG / MainProcess ] | Worker : Starting Hub [ 2015 - 06 - 18 21 : 36 : 40 , 165 : DEBUG / MainProcess ] &#94;-- substep ok [ 2015 - 06 - 18 21 : 36 : 40 , 165 : DEBUG / MainProcess ] | Worker : Starting Pool [ 2015 - 06 - 18 21 : 36 : 40 , 177 : DEBUG / MainProcess ] &#94;-- substep ok [ 2015 - 06 - 18 21 : 36 : 40 , 178 : DEBUG / MainProcess ] | Worker : Starting Consumer [ 2015 - 06 - 18 21 : 36 : 40 , 179 : DEBUG / MainProcess ] | Consumer : Starting Connection [ 2015 - 06 - 18 21 : 36 : 40 , 206 : INFO / MainProcess ] Connected to redis : // localhost : 6379 / 10 [ 2015 - 06 - 18 21 : 36 : 40 , 206 : DEBUG / MainProcess ] &#94;-- substep ok [ 2015 - 06 - 18 21 : 36 : 40 , 207 : DEBUG / MainProcess ] | Consumer : Starting Events [ 2015 - 06 - 18 21 : 36 : 40 , 238 : DEBUG / MainProcess ] &#94;-- substep ok [ 2015 - 06 - 18 21 : 36 : 40 , 238 : DEBUG / MainProcess ] | Consumer : Starting Mingle [ 2015 - 06 - 18 21 : 36 : 40 , 238 : INFO / MainProcess ] mingle : searching for neighbors [ 2015 - 06 - 18 21 : 36 : 41 , 246 : INFO / MainProcess ] mingle : all alone [ 2015 - 06 - 18 21 : 36 : 41 , 247 : DEBUG / MainProcess ] &#94;-- substep ok [ 2015 - 06 - 18 21 : 36 : 41 , 247 : DEBUG / MainProcess ] | Consumer : Starting Gossip [ 2015 - 06 - 18 21 : 36 : 41 , 251 : DEBUG / MainProcess ] &#94;-- substep ok [ 2015 - 06 - 18 21 : 36 : 41 , 251 : DEBUG / MainProcess ] | Consumer : Starting Tasks [ 2015 - 06 - 18 21 : 36 : 41 , 258 : DEBUG / MainProcess ] &#94;-- substep ok [ 2015 - 06 - 18 21 : 36 : 41 , 258 : DEBUG / MainProcess ] | Consumer : Starting Control [ 2015 - 06 - 18 21 : 36 : 41 , 261 : DEBUG / MainProcess ] &#94;-- substep ok [ 2015 - 06 - 18 21 : 36 : 41 , 261 : DEBUG / MainProcess ] | Consumer : Starting Heart [ 2015 - 06 - 18 21 : 36 : 41 , 262 : DEBUG / MainProcess ] &#94;-- substep ok [ 2015 - 06 - 18 21 : 36 : 41 , 262 : DEBUG / MainProcess ] | Consumer : Starting event loop [ 2015 - 06 - 18 21 : 36 : 41 , 263 : WARNING / MainProcess ] celery @monserver ready . [ 2015 - 06 - 18 21 : 36 : 41 , 263 : DEBUG / MainProcess ] | Worker : Hub . register Pool ... [ 2015 - 06 - 18 21 : 36 : 41 , 264 : DEBUG / MainProcess ] basic . qos : prefetch_count -> 8 si on est joueur comme moi, on peut rajouter au lancement du worker un petit coup de --autoscale=10,3 $ celery - A th worker -- autoscale = 10 , 3 - l info ce qui fera qu'au d√©marrage du beat, il demarrera 3 workers d'un coup et si les ressources systemes le permettent, pourra monter √† 10 workers d'un coup :) J'ai test√©, c'est tr√®s efficace. Dans la liste des tasks de \"mon_app\" on voit que j'ai pas, deux tasks comme je l'ai montr√©, mais trois. En effet read_data lance put_in_cache , et c'est l√† que les 10 workers font la teuf parce que j'ai ecrit ce qui suit : @shared_task def read_data (): data = UnModele . objects . all () for stuff in data : put_in_cache . delay ( stuff ) C'est une task ( read_data ) qui en enchaine d'autres Ici, grosso modo ici je r√©cup√®re tous les flux RSS de UnModele et pour chaque flux j'enclenche la mise en cache en rafale puisque 10 workers bossent pour moi. Pour finir l'histoire, du coup par la suite, publish_data recupere les donn√©es dans le cache (un Redis bien √©videment) et les envoie √† travers les services Twitter, Pocket, Evernote etc... Je vous laisse imaginer le gain de temps de traitement par rapport √† un traitement sans cache et en s√©rie. Supervisor je n'aborderai pas ici toutes les possibilit√©s de la b√™te mais juste comment int√©grer Supervisor √† des projets Django voici √† quoi ca ressemble dans le fichier /etc/supervisor/conf.d/mon_projet.conf [ program : mon_projet_gunicorn ] user = foxmask ; User to run as directory = / home / sites / mon - projet / mon_projet command = / home / sites / mon - projet / bin / gunicorn_start ; Command to start app autostart = true autorestart = true redirect_stderr = true stdout_logfile = / home / sites / mon - projet / logs / gunicorn - start . log ; Where to write log messages stderr_logfile = / home / sites / mon - projet / logs / gunicorn - start - err . log ; Where to write log messages [ program : mon_projet_worker ] user = foxmask ; User to run as directory =/ home / sites / mon - projet / mon_projet command =/ home / sites / mon - projet / bin / celery - A th worker -- autoscale = 10 , 3 - l info autostart = true autorestart = true redirect_stderr = true stdout_logfile =/ home / sites / mon - projet / logs / mon_projet - worker . log stderr_logfile =/ home / sites / mon - projet / logs / mon_projet - worker - err . log [ program : mon_projet_beat ] user = foxmask ; User to run as directory =/ home / sites / mon - projet / mon_projet command =/ home / sites / mon - projet / bin / celery - A th beat - l info autostart = true autorestart = true redirect_stderr = true stdout_logfile =/ home / sites / mon - projet / logs / trigger - happy - beat . log stderr_logfile =/ home / sites / mon - projet / logs / trigger - happy - beat - err . log command gere le lancement du process cible directory est le dossier o√π on a mis le projet django autostart et autorestart permettent de lancer automatiquement la command quand supervisor d√©marre comme par exemple au demarrage du serveur, quant √† autorestart, il lance aussi command apr√®s un plantage ou un kill du process pour Celery j'ai defini 2 program (un pour les workers un pour le beat) afin de s√©parer les logs et les process plutot que de lancer celery comme ceci : celery worker - B Ce qui n'est pas recommand√© par la doc de Celery. un autre exemple de conf o√π j'ai utilis√© supervisor : sentry : [ program : sentry - web ] user = foxmask directory =/ home / sites / sentry / command =/ home / sites / sentry / bin / sentry -- config =/ home / sites / sentry / conf / sentry . conf . py start autostart = true autorestart = true redirect_stderr = true stdout_logfile =/ home / sites / sentry / sentry . log stderr_logfile =/ home / sites / sentry / sentry - err . log [ program : sentry - worker ] user = foxmask directory =/ home / sites / sentry / command =/ home / sites / sentry / bin / sentry -- config =/ home / sites / sentry / conf / sentry . conf . py celery worker - B autostart = true autorestart = true redirect_stderr = true stdout_logfile =/ home / sites / sentry / sentry . log stderr_logfile =/ home / sites / sentry / sentry - err . log la fa√ßon de lancer le worker n'est pas recommand√©e mais utilise une version de celery plus ancienne. Alternatives √† Celery Il existe bien d'autres alternatives √† celery On peut aussi s'orienter vers des syst√®mes de queueing alternatifs list√©s ici Dont RQ: Simple job queues for Python par l' auteur du fameux git worklow Voire carr√©ment exploiter redis directement Alternative √† Supervisor On trouve Circus mais je n'ai pas r√©ussi √† le faire fonctionner (ca remonte √† des mois)","tags":"Techno","url":"https://foxmask.net/post/2015/06/19/supervisor-celery-django-orchestration/"},{"title":"Revue Technique du 15/06/2015 : Django (again)","text":"Django arround ze world \" J'ai dix ans Si tu m'crois pas , tartagueule √† la r√©cr√© \" Donc Django a(ura) 10 ans (cet √©t√©) !?! L'occasion d'une teuf ! Django asynchrone ? Un sujet lanc√© par ici . Cela dit avec Wamp/Crossbar on a d√©j√† mati√®re pour s'√©clater avec l'asynchrone et le temps r√©el ;) Mais sujet √† surveiller de pr√®s From twitterLand Python inspire des tigres blancs et d'un tas de monstres tout gentils https://twitter.com/beaucouplus/status/611477044740915200 SnakeLand Une interview : Le dev de la semaine \"cocorico\" : Tarek Ziad√© qui fut aussi le pr√©sident de l'AFUP en passant ;) Dans la s√©rie \"pydev of the week\" \" dans les √©pisodes pr√©c√©dents \" vous trouverez tous les autres interviews avec les liens dans le pied de l'article. Un projet : LFU impl√©ment√© en python Least frequently used cache eviction scheme with complexity O(1) in Python ou 2 ;) Des closures pour un python + rapide ou tout du moins plus optimis√© : Optimise Python with closures | Wrong Side of Memphis Snake Tips Pourquoi utilis√© des namedtuple plutot que des tuple Monitoring Moniiiiiitooooooooooring ! Tant qu'√† rester sur le monitoring, un article dans la lign√©e de Supervisor Celery Django : Orchestration , donc un article tr√®s int√©ressant sur le service Check my website par Nicolargo (l'article pas le service ;)","tags":"Techno","url":"https://foxmask.net/post/2015/06/19/revue-technique-du-15062015-django-again/"},{"title":"Revue Technique de la semaine du 25/05/2015","text":"S√©cu https://twitter.com/newsycombinator/status/603712716814057473 Dev World TDD Django Tuto PyPyJs un ovni ? Asynchronous Python and Databases Django Interview ... Questions ... and some answers gerer des fichiers de configuration en python sortie d'angularJS 1.4 Et toutes les erreurs commises √† ce sujet : https://twitter.com/morlhon/status/603801656145371136 En est-ce une de ne m'y √™tre toujours pas mis ? Je vous le dirai quand j'aurai commenc√© :-) WordPress avec un plugin Microsoft oneNote c'est possible ! TriggerHappy en python 3 only on ze road, J'en reparlerai plus en d√©tails dans un billet d√©di√©.","tags":"Techno","url":"https://foxmask.net/post/2015/05/29/revue-technique-de-la-semaine-du-25052015/"},{"title":"Revue Technique de la semaine du 18/05/2015","text":"Au menu ici, un tuto sur Python, Twisted, MAT, Django Python Le tuto de Sam et Max https://twitter.com/sam_et_max/status/599840755734175744 Si le portage de Twisted sur Python 3 avance, il faut garder √† l'esprit que \"derri√®re\" ces avanc√©es, se cache des dev de Autobahn/WAMP/Crossbar qui use et abuse de Twisted pour ce projet ;) https://twitter.com/sam_et_max/status/600568610768162816 Et n'oublions pas une correction de s√©curit√© de Django qui n'affecte que les versions 1.8 et sup√©rieure https://twitter.com/djangoproject/status/601100599569027072 MAT \"Metadata Anonymisation Toolkit\", un projet, libre & √©crit en python, qui se charge de rendre vos donn√©es anonymes, histoire de faire la nique aux dispositifs sens√©s filtrer et rep√©rer vos donn√©es avec \" les fameuses sondes \" poser chez nos FAI et autres h√©bergeurs de contenus","tags":"Techno","url":"https://foxmask.net/post/2015/05/21/revue-technique-de-la-semaine-du-1805/"},{"title":"Debian 8 sans systemD mais avec le syst√®me D !","text":"Debian 8 install√© apr√®s un upgrade foir√© , me voici sur XFCE4 ;) apr√®s avoir shoot√© systemd , on redecouvre les joies de la ligne de commandes pour certaines choses aussi QQ que se connecter en VPN :) aptitude install openvpn suivi d'un coup de sudo openvpn foobar.ovpn Sat May 16 14 :06:56 2015 OpenVPN 2 .3.4 x86_64-pc-linux-gnu [ SSL ( OpenSSL )] [ LZO ] [ EPOLL ] [ PKCS11 ] [ MH ] [ IPv6 ] built on Dec 1 2014 Sat May 16 14 :06:56 2015 library versions: OpenSSL 1 .0.1k 8 Jan 2015 , LZO 2 .08 Enter Auth Username: Enter Auth Password: Sat May 16 14 :07:05 2015 UDPv4 link local: [ undef ] Sat May 16 14 :07:05 2015 UDPv4 link remote: [ AF_INET ] aaa.bbb.ccc.ddd:eee Sat May 16 14 :07:05 2015 WARNING: this configuration may cache passwords in memory -- use the auth-nocache option to prevent this Sat May 16 14 :07:06 2015 [ VPN ] Peer Connection Initiated with [ AF_INET ] aaa.bbb.ccc.ddd:eee Sat May 16 14 :07:09 2015 TUN/TAP device tun0 opened Sat May 16 14 :07:09 2015 do_ifconfig, tt->ipv6 = 0 , tt->did_ifconfig_ipv6_setup = 0 Sat May 16 14 :07:09 2015 /sbin/ip link set dev tun0 up mtu 1500 Sat May 16 14 :07:09 2015 /sbin/ip addr add dev tun0 local fff.ggg.hhh.iii peer fff.ggg.hhh.iii Sat May 16 14 :07:09 2015 Initialization Sequence Completed Un coup sur http://whatismyipaddress.com/ et on peut v√©rifier qu'on est bien ailleurs :P Un truc sympa avec XFCE4, les applications par d√©faut \"Navigateur Web\" et \"Client de messagerie\" sont li√©es √† vos propres outils tel FireFox ou Thunderbird m√™me s'ils sont dans votre \\$HOME/thunderbird \\$HOME/firefox. En quoi c'est sympa ? ben pas besoin de d√©finir des shortcuts √† la con ... comme avec Gnome 3 :P Par ailleurs quand on d√©fini un nouveau lanceur, taper le d√©but du nom du programme et il vous trouvera tout ce qui est dans \\$HOME, genre SublimeText pour ma part. XCFE4 c'est ZE syst√®me D(√©brouille|√©merde) je reviendrai sur ce billet vous livrer le reste de quelques trucs sympas","tags":"Techno","url":"https://foxmask.net/post/2015/05/16/debian-8-sans-systemd-mais-avec-le-systeme-d/"},{"title":"Debian Update Wheezy √† Jessie : quand votre grub fait boom","text":"La mise √† jour de Debian Wheezy √† Jessie s'est pass√© comme le titre vous le laisse √† penser, explosif. Au reboot, grub √©tait vide... Le pied ! Etat des lieux avant avec Wheezy : PC en dualboot Win7/Debian, chacun son HDD le MBR est pris par le bootloader de Windows, l√† avant :P Debian d√©marre sur le boot de son propre disque Apr√®s l'installation, grub affichait simplement le prompt \"grub>\", et plus rien. Lors de l'installation j'ai refus√© que GRUB se place sur le MBR sur 1¬∞ disque parce que je ne voulais absolument pas que Windows disparaisse. Actions entreprises pour tenter de retrouver le grub comme avant : R√©sultat KO : J'ai donc mis √† jour (quand meme) win32-loader qui permet de booter linux depuis windows R√©sultat KO : J'ai r√©install√© Debian uniquement sur la partition root sans toucher √† /home R√©sultat KO : depuis le menu \"grub>\", la commande ls m'affiche ... le dossiers systeme de WINDOWS ! Trop beau ! R√©sultat KO : boot en mode rescue pour r√©parer grub en tapant update-grub Action qui a empir√© les choses : boot en mode rescue pour r√©parer, et taper la commande : shell grub-install /dev/sda qui a flingue le MBR de mon windows ... au lieu de le faire pointer sur /dev/sdb J'ai reboot√© et bien evidement, plus d'acc√®s √† windows dans le menu Donc retour au mode rescue j'ai cr√©√© un fichier /etc/grub.d/42_win contenant : menuentry \"Windows 7\" { insmod ntfs search --set = root --label WINDOWS_7 --hint hd0,msdos2 ntldr /bootmgr } ce qui m'a permit de cette fois ci rajouter windows au menu de grub apres un update-grub ! Cr√©ation du fichier de configuration GRUB‚Ä¶ Found background image: /usr/share/images/desktop-base/desktop-grub.png Image Linux trouv√©e : /boot/vmlinuz-3.16.0-4-amd64 Image m√©moire initiale trouv√©e : /boot/initrd.img-3.16.0-4-amd64 Image Linux trouv√©e : /boot/vmlinuz-3.2.0-4-amd64 Image m√©moire initiale trouv√©e : /boot/initrd.img-3.2.0-4-amd64 Windows 7 (loader) trouv√© sur /dev/sda1 Windows Recovery Environment (loader) trouv√© sur /dev/sda4 fait La doc que j'ai pu suivre Grub Multiboot , ainsi que GrubRecover Encore une mise √† jour comme on les aime... edit @ 23h : HHAHAHAHAAAAAAAAAAAAAAAAAAaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa firefox et sublimtext qui petent .... l'installation avec un kernel 32bits sur un proc 64bits Ahaaaaaaaaaaaaaaaaaaaaaa le mode rescue ahaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa","tags":"Techno","url":"https://foxmask.net/post/2015/05/15/debian-update-wheezy-a-jessie-quand-votre-grub-fait-boom/"},{"title":"Qu√™te WampWS et Autobahn - Episode 3 - Crossbar config","text":"Dans les √©pisodes pr√©c√©dants je vous ai montr√© qu'il √©tait possible de d√©buter un projet from scratch rapidement, et comment 2 composants se parlaient. Donc dans la continuit√©, de ces 2 √©pisodes, ici nous allons aborder comment on configure crossbar, pour qu'il ait connaissance de nos components, d√®s son d√©marrage. Jusqu'√† maintenant ( √©pisode 1 ) on a pu voir que les composants pouvaient √™tre d√©marr√©s ind√©pendemment et manuellement. A pr√©sent on va voir comment on les d√©marre au boot de crossbar. En intro √† la \"configuration\" voici d'abord une version de l'√©pisode 1 \"am√©lior√©\" qui va vous introduire des notions que l'on reportera dans la config de crossbar ensuite. dans chacun des 2 composants on avait : def onJoin ( self , details ): pool = txpostgres . ConnectionPool ( None , port = 5432 , database = 'th' , user = 'th' , password = 'th' ) yield pool . start () print ( 'DB Connection pool started' ) self . db = pool Or, mettre en dur des info de config dans le code, c'est sale. La version proprette donne plut√¥t ceci : def onJoin ( self , details ): dbconfig = self . config . extra [ 'database' ] self . db = txpostgres . Connection () try : yield self . db . connect ( ** dbconfig ) except Exception as e : print ( \"could not connect to database: {0}\" . format ( e )) self . leave () return else : print ( \"PostgreSQL adapter connected to database\" ) [ ... ] if __name__ == '__main__' : config = { 'database' : { 'port' : 5432 , 'database' : 'foobar' , 'user' : 'foobar' , 'password' : 'foobar' }, 'TIME_ZONE' : 'America/Chicago' , } log . startLogging ( sys . stdout ) from autobahn.twisted.wamp import ApplicationRunner runner = ApplicationRunner ( url = \"ws://127.0.0.1:8080/ws\" , realm = \"realm1\" , extra = config ) # app-level debugging runner . run ( RssComponent ) Et voilou. Dans le d√©tails cela donne : dans le onJoin , on r√©cup√®re self.config.extra qui provient du parm \"extra\" qu'on voit √† la fin du code, qui est disponible gr√¢ce √† crossbar. def onJoin ( self , details ): ... dbconfig = self . config . extra [ 'database' ] ... ensuite on passe dbconfig √† la connexion yield self . db . connect ( ** dbconfig ) ce qui donne pour le compoent Rss de l'√©pisode 1 # -*- coding: utf-8 -*- import arrow import sys import time from datetime import datetime # postgresql driver from txpostgres import txpostgres # autobahn from twisted.python import log from autobahn import wamp from twisted.internet.defer import inlineCallbacks , returnValue from autobahn.twisted.util import sleep from autobahn.twisted.wamp import ApplicationSession # th_rss lib from lib.feedsservice import Feeds class RssComponent ( ApplicationSession ): \"\"\" An application component that publishes an event \"\"\" @inlineCallbacks def onJoin ( self , details ): # registering print ( \"RSS session attached\" ) self . register ( self ) dbconfig = self . config . extra [ 'database' ] self . db = txpostgres . Connection () try : yield self . db . connect ( ** dbconfig ) except Exception as e : print ( \"could not connect to database: {0}\" . format ( e )) self . leave () return else : print ( \"[th_rss] PostgreSQL adapter connected to database\" ) # publishing while True : feeds = yield self . call ( u 'eu.trigger-happy.rss.feeds_url' ) for data in feeds : for item in data [ 'data' ]: self . publish ( u 'eu.trigger-happy.pushit' , { 'trigger_id' : data [ 'trigger_id' ], 'user_id' : data [ 'user_id' ], 'item' : item }) yield sleep ( 120 ) @wamp.register ( u 'eu.trigger-happy.rss.feeds_url' ) @inlineCallbacks def get_feeds_url ( self ): \"\"\" get the URL stored in the database \"\"\" query = \"SELECT date_triggered, name, url, trigger_id, user_id FROM \" query += \"django_th_rss AS R, \" query += \"django_th_triggerservice AS TS \" query += \" WHERE R.trigger_id=TS.id AND TS.id=1 \" query += \" AND TS.consumer_id = \" # subquery to get only the RSS provider query += \" (SELECT id FROM django_th_servicesactivated WHERE \" query += \"name = 'ServiceRss' AND status = True) \" query += \" AND TS.status = True \" # get only the activated triggers query += \" ORDER BY TS.date_triggered DESC \" rows = yield self . db . runQuery ( query ) feeds = [] print ( 'get the feeds url...' ) for feed in rows : print ( 'get feeds from {0} => {1}' . format ( feed [ 1 ], feed [ 2 ])) data_parms = { 'url' : feed [ 2 ], 'date_triggered' : feed [ 0 ]} if feed [ 0 ] <= self . right_now (): feeds . append ({ 'trigger_id' : feed [ 3 ], 'user_id' : feed [ 4 ], 'data' : self . reworked_feeds ( ** data_parms )}) returnValue ( feeds ) def right_now ( self ): \"\"\" :return: \"\"\" return arrow . utcnow () . replace ( hour = 0 , minute = 0 , second = 0 ) . to ( self . config . extra [ 'TIME_ZONE' ]) def reworked_feeds ( self , ** parms ): \"\"\" get the feeds and \"translate\" the time.struct_time() from Feedparser to a classical timestamp \"\"\" data = Feeds ( ** { 'url_to_parse' : parms [ 'url' ]}) . datas () what = None my_date_time = datetime . fromtimestamp ( time . mktime ( ( 1980 , 1 , 1 , 0 , 0 , 0 , 0 , 1 , 0 )) ) published = datetime . now () for feed in data : date_triggered = arrow . get ( str ( parms [ 'date_triggered' ]), 'YYYY-MM-DD HH:mm:ss' ) . to ( self . config . extra [ 'TIME_ZONE' ]) if 'published_parsed' in feed : what = 'published_parsed' published = feed [ 'published_parsed' ] my_date_time = datetime . utcfromtimestamp ( time . mktime ( feed [ 'published_parsed' ])) elif 'updated_parsed' in feed : what = 'updated_parsed' published = feed [ 'updated_parsed' ] my_date_time = datetime . utcfromtimestamp ( time . mktime ( feed [ 'updated_parsed' ])) if my_date_time >= date_triggered . naive : # this is this property that cant be serialize # so we have to translate it to a timestamp and # replace the actual value with the new one if what is not None : feed [ what ] = time . mktime ( published ) else : # drop that old data data . pop () return data if __name__ == '__main__' : config = { 'database' : { 'port' : 5432 , 'database' : 'foobar' , 'user' : 'foobar' , 'password' : 'foobar' }, 'TIME_ZONE' : 'America/Chicago' , } log . startLogging ( sys . stdout ) from autobahn.twisted.wamp import ApplicationRunner runner = ApplicationRunner ( url = \"ws://127.0.0.1:8080/ws\" , realm = \"realm1\" , extra = config ) # app-level debugging runner . run ( RssComponent ) A pr√©sent, je peux ex√©cuter mon script en ligne de commande, il utilisera ce qui est d√©fini apr√®s le if __name__ . Par rapport √† la version de l'√©pisode 1 ca ne change pas grand chose au fait d'avoir mis en dur la conf dans le code, sauf, sauf que maintenant, je peux plugger mon component √† crossbar, et c'est la conf d√©finie dans crossbar qui pr√©vaudra. Ce qui me permet du coup d'avoir toute libert√© pour ex√©cuter mon composant dans son coin avec sa conf de test et l'utiliser avec crossbar avec une conf de prod par exemple. Voyons maintenant comment ca se goupille dans crossbar Dans l'√©pisode 2 on en √©tait rest√© √† une configuration d√©finissant l'acc√®s √† un simple composant Hello. Voyons ce que ca donne avec mon composant en plus : { \"controller\" : {}, \"workers\" : [ { \"type\" : \"router\" , \"realms\" : [ { \"name\" : \"realm1\" , \"roles\" : [ { \"name\" : \"anonymous\" , \"permissions\" : [ { \"uri\" : \"*\" , \"publish\" : true , \"subscribe\" : true , \"call\" : true , \"register\" : true } ] } ] } ], \"transports\" : [ { \"type\" : \"web\" , \"endpoint\" : { \"type\" : \"tcp\" , \"port\" : 8080 }, \"paths\" : { \"/\" : { \"type\" : \"static\" , \"directory\" : \"../web\" }, \"ws\" : { \"type\" : \"websocket\" } } } ] }, { \"type\" : \"container\" , \"options\" : { \"pythonpath\" : [ \"..\" ] }, \"components\" : [ { \"type\" : \"class\" , \"classname\" : \"components.th_rss.back.RssComponent\" , \"realm\" : \"realm1\" , \"transport\" : { \"type\" : \"websocket\" , \"endpoint\" : { \"type\" : \"tcp\" , \"host\" : \"127.0.0.1\" , \"port\" : 8080 }, \"url\" : \"ws://127.0.0.1:8080/ws\" }, \"extra\" : { \"database\" : { \"host\" : \"127.0.0.1\" , \"port\" : 5432 , \"database\" : \"foobar\" , \"user\" : \"foobar\" , \"password\" : \"foobar\" } } }, { \"type\" : \"class\" , \"classname\" : \"components.th_evernote.front.EvernoteComponent\" , \"realm\" : \"realm1\" , \"transport\" : { \"type\" : \"websocket\" , \"endpoint\" : { \"type\" : \"tcp\" , \"host\" : \"127.0.0.1\" , \"port\" : 8080 }, \"url\" : \"ws://127.0.0.1:8080/ws\" }, \"extra\" : { \"database\" : { \"host\" : \"127.0.0.1\" , \"port\" : 5432 , \"database\" : \"foobar\" , \"user\" : \"foobar\" , \"password\" : \"foobar\" } } } ] } ] } avec cette configuration, d√®s le lancement de crossbar, il chargera les 2 composants qui demarreront respectivement le code se trouvant dans le onJoin la valeur de classname est √† rallonge et est un classique chemin python. Cette config crossbar tient compte d'un fait important : mes composants sont dans le path de crossbar et donc sont en python 2.7 ceci m'est r√©v√©l√© par le param√®tre \"options\" : { \"pythonpath\" : [ \"..\" ] } , Par contre, ce n'est pas parceque Crossbar n'est pas en python 3, que Autobahn|Python ne l'est pas, donc je peux tout √† fait avoir des composants python 3 ailleurs, et si je veux que crossbar me charge mes composants, je lui fourni le path vers ceux ci comme suit (par exemple) : \"options\" : { \"pythonpath\" : [ \"..\" , \"/home/foxmask/Django-Virtualenv/wamp-th/wamp-th/\" ] } , et √ßa ne d√©rangera pas Crossbar pour un sou (au contraire:) un goodies en plus, on peut nommer le process qui se charge de gerer mes components, pour cela j'ajoute √† mon parm \"options\", \"title\" comme suit : \"options\" : { \"title\" : \"triggerhappy\" , \"pythonpath\" : [ \"..\" , \"/home/foxmask/Django-Virtualenv/wamp-th/wamp-th/\" ] } , enfin on trouve bien √©videment les m√™mes noeuds \"config/extras\" qu'indiqu√©s dans le if __name__ de chacun des composants pour d√©finir une base de donn√©es diff√©rente (si besoin). Voici donc qui clos cet √©pisode 3. Je n'ai pas abord√© toutes les options cette fois ci, je vous avouerai que je vous livre ici ce que j'ai d√©couvert, qui est tout frais, mais je n'h√©siterai pas √† faire un billet de plus sur les nouveaut√©s que j'aurai pu exploiter. L'√©pisode 4 sera sur le mode debug de crossbar","tags":"Techno","url":"https://foxmask.net/post/2015/05/12/quete-wampws-et-autobahn-episode-3-crossbar-config/"},{"title":"OpenBSD : configurer le wifi","text":"Hey ! Comme √† mon habitude, je mets l√† mes d√©boires/r√©solutions de probl√®mes de noob, pour les prochains noob passant par l√† ... Etat des lieux D√©couvrant OpenBSD, mis sur un laptop depuis 1 semaine, le besoin premier : acc√®der au net via le wifi. Par defaut j'avais pu configurer l'interface ethernet, mais se trimbaler le fil rj45 ... Donc bon... La config de d√©part sur BSD il s'avere que la partie gerant la config r√©seau se trouve comme chacun le sait (sauf moi depuis 5min :) dans /etc/hostname. Donc ayant d√©j√† /etc/hostname.bge0 contenant la seule ligne dhcp, je l'ai copi√© en /etc/hostname.iwi0, qui est mon interface wifi. Ensuite il faut faire : ifconfig iwi0 down ifconfig iwi0 nwid \"Livebox-xxxx\" wpakey \"xxxxxxxxx\" ifconfig iwi0 up dhclient iwi0 et voil√† :)","tags":"Techno","url":"https://foxmask.net/post/2015/05/08/openbsd-configurer-le-wifi/"},{"title":"Qu√™te WampWS et Autobahn : √âpisode 2 - d√©marrage en trombe","text":"Voici la suite de la qu√™te WampWS et Autobahn (relire l'√©pisode 1) , dans cet √©pisode 2, une pr√©sentation permettant de d√©marrer, en deux coups les gros, un projet crossbar pour autobahn|python foxmask @foxmask : ~ $ virtualenv crossbar New python executable in crossbar / bin / python Installing distribute ............................................................................................................................................................................................. done . Installing pip ............... done . foxmask @foxmask : ~ $ cd crossbar / foxmask @foxmask : ~/ crossbar $ ls bin include lib local foxmask @foxmask : ~/ crossbar $ source bin / activate ( crossbar ) foxmask @foxmask : ~/ crossbar $ pip install crossbar Downloading / unpacking crossbar Downloading crossbar - 0.10 . 4. tar . gz ( 171 Kb ): 171 Kb downloaded Running setup . py egg_info for package crossbar [ ... ] r√©sultat (non des moindres ;) ( crossbar ) foxmask @foxmask : ~/ crossbar $ pip freeze -- local Jinja2 == 2.7 . 3 MarkupSafe == 0.23 PyTrie == 0.2 PyYAML == 3.11 Pygments == 2.0 . 2 Twisted == 15.1 . 0 autobahn == 0.10 . 3 cffi == 1.0 . 0 b2 characteristic == 14.3 . 0 crossbar == 0.10 . 4 cryptography == 0.8 . 2 distribute == 0.6 . 24 enum34 == 1.0 . 4 mistune == 0.5 . 1 netaddr == 0.7 . 14 pyOpenSSL == 0.15 . 1 pyasn1 == 0.1 . 7 pyasn1 - modules == 0.0 . 5 pycparser == 2.12 requests == 2.7 . 0 service - identity == 14.0 . 0 shutilwhich == 1.1 . 0 six == 1.9 . 0 treq == 15.0 . 0 txaio == 1.0 . 0 zope . interface == 4.1 . 2 √† pr√©sent on demarre un projet comme on le ferait avec django-admin.py de Django: ( crossbar ) foxmask @foxmask : ~/ crossbar $ crossbar init -- template hello : python -- app $ PWD / letsgodancing Crossbar . io application directory '/home/foxmask/crossbar/letsgodancing' created Initializing application template 'hello:python' in directory '/home/foxmask/crossbar/letsgodancing' Using template from '/home/foxmask/crossbar/local/lib/python2.7/site-packages/crossbar/templates/hello/python' Creating directory / home / foxmask / crossbar / letsgodancing / hello Creating directory / home / foxmask / crossbar / letsgodancing /. crossbar Creating file / home / foxmask / crossbar / letsgodancing / README . md Creating file / home / foxmask / crossbar / letsgodancing / setup . py Creating file / home / foxmask / crossbar / letsgodancing / MANIFEST . in Creating directory / home / foxmask / crossbar / letsgodancing / hello / web Creating file / home / foxmask / crossbar / letsgodancing / hello / hello . py Creating file / home / foxmask / crossbar / letsgodancing / hello / __init__ . py Creating file / home / foxmask / crossbar / letsgodancing / hello / web / index . html Creating file / home / foxmask / crossbar / letsgodancing /. crossbar / config . json Application template initialized To start your node , run 'crossbar start --cbdir /home/foxmask/crossbar/letsgodancing/.crossbar' Et donc on n'a plus qu'√† s'ex√©cuter comme le sugg√®re la derni√®re ligne ci dessus ( crossbar ) foxmask @foxmask : ~/ crossbar $ crossbar start -- cbdir / home / foxmask / crossbar / letsgodancing /. crossbar 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] Log opened . 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] ==================== Crossbar . io ==================== 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] Crossbar . io 0.10 . 4 starting 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] Running on CPython using EPollReactor reactor 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] Starting from node directory / home / foxmask / crossbar / letsgodancing /. crossbar 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] Starting from local configuration '/home/foxmask/crossbar/letsgodancing/.crossbar/config.json' 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] Warning , could not set process title ( setproctitle not installed ) 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] Warning : process utilities not available 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] Router created for realm 'crossbar' 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] No WAMPlets detected in enviroment . 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] Starting Router with ID 'worker1' .. 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Controller 4481 ] Entering reactor event loop ... 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Router 4484 ] Log opened . 2015 - 05 - 07 22 : 08 : 42 + 0200 [ Router 4484 ] Warning : could not set worker process title ( setproctitle not installed ) 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Router 4484 ] Running under CPython using EPollReactor reactor 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Router 4484 ] Entering event loop .. 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Router 4484 ] Warning : process utilities not available 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Controller 4481 ] Router with ID 'worker1' and PID 4484 started 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Controller 4481 ] Router 'worker1' : PYTHONPATH extended 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Controller 4481 ] Router 'worker1' : realm 'realm1' ( named 'realm1' ) started 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Controller 4481 ] Router 'worker1' : role 'role1' ( named 'anonymous' ) started on realm 'realm1' 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Router 4484 ] Site starting on 8080 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Controller 4481 ] Router 'worker1' : transport 'transport1' started 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Controller 4481 ] Starting Container with ID 'worker2' .. 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Container 4493 ] Log opened . 2015 - 05 - 07 22 : 08 : 43 + 0200 [ Container 4493 ] Warning : could not set worker process title ( setproctitle not installed ) 2015 - 05 - 07 22 : 08 : 44 + 0200 [ Container 4493 ] Running under CPython using EPollReactor reactor 2015 - 05 - 07 22 : 08 : 44 + 0200 [ Container 4493 ] Entering event loop .. 2015 - 05 - 07 22 : 08 : 44 + 0200 [ Container 4493 ] Warning : process utilities not available 2015 - 05 - 07 22 : 08 : 44 + 0200 [ Controller 4481 ] Container with ID 'worker2' and PID 4493 started 2015 - 05 - 07 22 : 08 : 44 + 0200 [ Controller 4481 ] Container 'worker2' : PYTHONPATH extended 2015 - 05 - 07 22 : 08 : 44 + 0200 [ Controller 4481 ] Container 'worker2' : component 'component1' started 2015 - 05 - 07 22 : 08 : 44 + 0200 [ Container 4493 ] subscribed to topic 'onhello' : Subscription ( id = 400001378 , is_active = True ) 2015 - 05 - 07 22 : 08 : 44 + 0200 [ Container 4493 ] procedure add2 () registered : 2015 - 05 - 07 22 : 08 : 44 + 0200 [ Container 4493 ] published to 'oncounter' with counter 0 2015 - 05 - 07 22 : 08 : 45 + 0200 [ Container 4493 ] published to 'oncounter' with counter 1 2015 - 05 - 07 22 : 08 : 46 + 0200 [ Container 4493 ] published to 'oncounter' with counter 2 2015 - 05 - 07 22 : 08 : 47 + 0200 [ Container 4493 ] published to 'oncounter' with counter 3 2015 - 05 - 07 22 : 08 : 48 + 0200 [ Container 4493 ] published to 'oncounter' with counter 4 Petite explication de texte ici ! On a d√©marr√© le \"projet\" sans voir une ligne de code: wtf ? la ligne crossbar init -- template hello : python nous a produit, comme je le disais √† la mani√®re de django-admin.py, une arbo \"type\", avec une appli toute simple ( crossbar ) foxmask @foxmask : ~/ crossbar $ ls - lR letsgodancing / letsgodancing / : total 16 drwxr - xr - x 3 foxmask foxmask 4096 mai 7 22 : 08 hello - rw - r -- r -- 1 foxmask foxmask 30 mai 7 22 : 07 MANIFEST . in - rw - r -- r -- 1 foxmask foxmask 136 mai 7 22 : 07 README . md - rw - r -- r -- 1 foxmask foxmask 1859 mai 7 22 : 07 setup . py letsgodancing / hello : total 20 - rw - r -- r -- 1 foxmask foxmask 3205 mai 7 22 : 07 hello . py - rw - r -- r -- 1 foxmask foxmask 1913 mai 7 22 : 08 hello . pyc - rw - r -- r -- 1 foxmask foxmask 1569 mai 7 22 : 07 __init__ . py - rw - r -- r -- 1 foxmask foxmask 141 mai 7 22 : 08 __init__ . pyc drwxr - xr - x 2 foxmask foxmask 4096 mai 7 22 : 07 web letsgodancing / hello / web : total 8 - rw - r -- r -- 1 foxmask foxmask 5085 mai 7 22 : 07 index . html dans letsgodancing/hello/hello.py on trouve notre application autobahn qui comme on le voit √† la fin des logs ci dessus, affiche un compteur qui s'incr√©mente toutes les secondes : class AppSession ( ApplicationSession ): @inlineCallbacks def onJoin ( self , details ): # SUBSCRIBE to a topic and receive events # def onhello ( msg ): print ( \"event for 'onhello' received: {}\" . format ( msg )) sub = yield self . subscribe ( onhello , 'com.example.onhello' ) print ( \"subscribed to topic 'onhello': {}\" . format ( sub )) # REGISTER a procedure for remote calling # def add2 ( x , y ): print ( \"add2() called with {} and {}\" . format ( x , y )) return x + y reg = yield self . register ( add2 , 'com.example.add2' ) print ( \"procedure add2() registered: {}\" . format ( reg )) # PUBLISH and CALL every second .. forever # counter = 0 while True : # PUBLISH an event # yield self . publish ( 'com.example.oncounter' , counter ) print ( \"published to 'oncounter' with counter {}\" . format ( counter )) counter += 1 # CALL a remote procedure # try : res = yield self . call ( 'com.example.mul2' , counter , 3 ) print ( \"mul2() called with result: {}\" . format ( res )) except ApplicationError as e : # ignore errors due to the frontend not yet having # registered the procedure we would like to call if e . error != 'wamp.error.no_such_procedure' : raise e yield sleep ( 1 ) je ne vais pas vous faire peur tout de suite (krkrkrkrkr), juste vous la faire courte. comment ce code est lanc√© par crossbar ? lors du lancement de crossbar start --cbdir /home/foxmask/crossbar/letsgodancing/.crossbar crossbar lit le fichier config.json de ce dossier, config.json qui contient la config de l'application hello ci dessus. le voici : { \"controller\" : { }, \"workers\" : [ { \"type\" : \"router\" , \"options\" : { \"pythonpath\" : [ \"..\" ] }, \"realms\" : [ { \"name\" : \"realm1\" , \"roles\" : [ { \"name\" : \"anonymous\" , \"permissions\" : [ { \"uri\" : \"*\" , \"publish\" : true , \"subscribe\" : true , \"call\" : true , \"register\" : true } ] } ] } ], \"transports\" : [ { \"type\" : \"web\" , \"endpoint\" : { \"type\" : \"tcp\" , \"port\" : 8080 }, \"paths\" : { \"/\" : { \"type\" : \"static\" , \"directory\" : \"../hello/web\" }, \"ws\" : { \"type\" : \"websocket\" } } } ] }, { \"type\" : \"container\" , \"options\" : { \"pythonpath\" : [ \"..\" ] }, \"components\" : [ { \"type\" : \"class\" , \"classname\" : \"hello.hello.AppSession\" , \"realm\" : \"realm1\" , \"transport\" : { \"type\" : \"websocket\" , \"endpoint\" : { \"type\" : \"tcp\" , \"host\" : \"127.0.0.1\" , \"port\" : 8080 }, \"url\" : \"ws://127.0.0.1:8080/ws\" } } ] } ] } Une fois crossbar d√©marr√©, l'application d√©marre sur onJoin et ex√©cute le tout (que je vous d√©crirai dans un prochain billet) pour arriver au while true qui affiche le fameux compteur. Ainsi par√© on est fin pr√™t √† broder pour attaquer de nouvelles applications autobahn, aussi appel√© \"component\". Dans le prochain √©pisode je vous parlerai du fameux config.json o√π on verra ce qu'on y mettre de plus et comment ! Si vous tr√©pigner d'impatience ou avez des questions plus vaste (ou carr√©ment sp√©cifique) viendez me rejoindre avec quelques centaines d'autres ;)","tags":"Techno","url":"https://foxmask.net/post/2015/05/07/quete-wampws-et-autobahn-episode-2-demarrage-en-trombe/"},{"title":"Gnome SystemD, Debian 8, *BSD","text":"Il √©tait une fois une distrib que j'utilise depuis plus de 10ans ... et qui, comme elle prend un chemin de traverse qui ne me sied gu√®re, va d√©gager de mes ordinateurs... Comme je ne suis qu'une poussi√®re l'ocean, les dev de debian s'en foutent bien largement de mon avis puisque leur choix est fait. C'est bien justement parce qu'ils s'en foutent que je m'en vais vous dire tout le bien que j'en pense. Le chemin de traverse est systemd, le super g√©nialissime \"administrateur de syst√®me et de services\" Qu'est-ce qui me d√©plait tant dans ce truc ? ) il provient de RedHat ... ) il a √©t√© pouss√© par Gnome ... ) Debian n'a pas daign√© conserver la compatibilit√© avec SysV ) les logs en binaires : ca pu ) Linus Torvalds n'aime pas ca non plus , m√™me s'il dit que ce n'est pas un si gros probl√®me... ) le pauvre petite canard veut nous faire pleurer... ) Google inside ) le fait que systemd apparaisse sur Freedesktop.org, d√©note d'un fait ind√©niable, tous les window manager qui passeraient par le projet Freedesktop adh√©reraient √† l'utilisation de Systemd... Et j'en passe et des meilleures. Donc j'ai pass√© un moment ce weekend √† faire des tests d'installations : Mettre √† jour Debian 7.8 √† 8 puis virer systemd Installer Debian 8 \"KDE\" Installer FreeBSD 10 Installer OpenBSD 5.7 Dans le premier cas : virer systemd d√©sinstalle gnome int√©gralement. Youpi ! ... Ca rend le desktop dans un √©tat ... Dans le second cas : virer systemd ok mais remettre KDE .... pffff FreeBSD ne detecte pas mon firmware wifi du portable... J'ai quand meme pu finir par faire mon installation avec un cable ethernet, et d√©marrer GDM, DBUS et je ne sais plus quel service, mais une fois sur le GDM, impossible de r√©cup√©rer une console par CTRL-ALT-1 ou 2 ou 3, la carte graphique par en sucette. Quand je me connecte \"normalement\" depuis GDM, le desktop freeze par intermitence... Ca rend le portable inutilisable... OpenBSD, apr√®s des heures de t√©l√©chargement pour installer gnome, puis xorg, pas moyen de lancer GDM ou gnome-session. J'ai juste eu droit au window manager par defaut : fvwm2. Comme je gal√®re pour passer de Linux √† BSD, et comme la communaut√© Linux, n'est pas tendre en vous sortant des RTFM √† tirelarigot, je ne me suis m√™me pas essay√© √† demander de l'aide sur BSD. Du coup j'ai remis une debian 7.8 en attendant un jour meilleur pour peut-etre tenter une nouvelle installation BSD. J'ai un an avant la fin du support de Wheezy :P Cela dit comme systemd est fortement li√© au window manager, j'ai l'impression que les BSD et Linux sont mal partis. Si un window manager veut perdurer dans une distrib, il va lui falloir passer √† systemd pour exister. Et si des OS ne s'y mettent pas qu'est ce qu'il leur arrivera ? Je ne suis pas un famillier de BSD mais si Gnome&KDE utilise systemd, comment les BSD vont ils g√©rer ? Le desktop sous fvwm2 et xfce ... Probable que les BSD ne sont pas pour le desktop apr√®s tout, que c'est pas pour les non adminsys. Mais la console ca va 5min hein, lire ses mails avec mutt, en passant par procmail/fetchmail, sendmail/postfix un moment ca lasse, thunderbird c'est pratique :P Mon utilisation est simple: je produis des appli web ou pas avec python et un IDE. Je veux pouvoir utiliser sur mes pc @ home ce que j'aurai en prod. √ätre \"iso-conf\", de sorte que si ca merde quelque part, que je n'ai pas √† remettre en question l'OS et la version des services en place. C'est peut-√™tre une d√©formation professionnelle mais au moins √ßa permet de ne pas se poser de question lors de la mise en prod. Et vous que pensez vous de tout √ßa ? Debian toujours ? BSD > Debian/Linux ? BSD est fait pour le desktop ? si oui lequel et avec quel window manager p√©rin ? En gros je me pose un tas de questions... et c'est pas fini","tags":"Techno","url":"https://foxmask.net/post/2015/05/03/gnome-systemd-debian-8-bsd/"},{"title":"Django Trigger Happy 0.10.x and his friends","text":"I released a version 0.10.1 of the Trigger Happy project with : News : Search engine based on Haystack (when we have more than 30 triggers that begins to be useful:) a Holidays mode, permits to pause all the triggers until you return, thus you will be really \"disconnected\" during your holidays :) Improvments : support Django 1.8 support python 3 support of some not well handled accented characters now fixed with a html_entities php like contribution from Adrihein on the layout of the application His friends too : module Twitter : /!\\ a column changed of type : bigint vs int module Evernote : nothing special module Pocket : nothing special module RSS : nothing special module Readability : nothing special module Dummy : nothing special Next : I was not very productive on the version because in the meantime, I have lingered over Crossbar.io / WAMP.WS / Autobahn to produce a sandbox wamp-th . This one works great ! Some details need to be fixed and that should be ok ;) Once it's done, that should replace the \"managment commands\" which are actually put in a crontab. This should permit to speed up Trigger Happy again and make all funs interactions :) Have Fun ! where to find the project where to find the sources where to find the doc ps : I told myself there was no reason to not publish a post in English, as the majority of you on github dont come from France ;)","tags":"Techno","url":"https://foxmask.net/post/2015/04/23/django-trigger-happy-0-10-x-and-his-friends/"},{"title":"Django Trigger Happy 0.10.x et ses amis","text":"Le projet Triger Happy sort en version 0.10.1 avec au programme : Nouveaut√©s : Moteur de recherche bas√© sur haystack (quand on a plus de 30 triggers ca commence √† en faire ;) Un mode vacances , permettant de mettre en pause tous les triggers jusqu'√† votre retour de cong√©s, histoire de vivre vraiment d√©connect√© ses vacances ;) Am√©liorations : support de Django 1.8 support python 3 support des caract√®res accentu√©s mal affich√©s avec un html_entities php like contribution de Adrihein sur le layout de l'application Ses amis √† jour aussi : module Twitter : /!\\ ici une colonne change de type : bigint vs int module Evernote : ras module Pocket : ras module RSS : ras module Readability : ras module Dummy : ras La suite : je n'ai pas √©t√© hyper productif sur cette version parce que dans le m√™me temps, je me suis longuement attard√© sur Crossbar.io / WAMP.WS / Autobahn pour faire un bac √† sable wamp-th . Ce dernier marche parfaitement ! Encore des d√©tails mais apres ca devrait etre au point. In fine ca devrait remplacer les \"managment commands\" qui sont actuellement mises dans une crontab. Ca devrait permettre d'encore booster Trigger Happy et rendre toutes les interactions fun ;) Amusez vous bien ! O√π trouver le projet O√π trouver les sources O√π trouver la doc","tags":"Techno","url":"https://foxmask.net/post/2015/04/21/django-trigger-happy-0-10-x-et-ses-amis/"},{"title":"pypi nous saoule avec son erreur 400","text":"Bon alors un truc bien p√©nible avec PYPI ; l'erreur 400 Upload failed ( 400 ) : This filename has previously been used, you should use a different version. Je pense qu'ils n'ont pas r√©fl√©chi √† l'impact tr√®s n√©faste. Je maintiens tout juste 8 modules python ; dont 7 d√©pendent de django-th. Si je me goure d'une virgule dans ma doc et renvoie la m√™me version je suis blackboul√© et dois faire une version n+1 J'ai bien √©videmment supprimer la version qui √©tait concern√©e par ma coquille mais ca ne suffit pas, j'ai du coup supprim√© le projet entier pour le renvoyer ; RIEN Y FAIT ! Or : cette mani√®re de faire est r√©cente, car lors de mes publications de novembre, je n'ai pas eu ce probl√®me. imposer cette fa√ßon de g√©rer m'impose de reprendre 8 modules, de changer la version de chacun ... POUR RIEN ! Il n'y a eu AUCUNE COMMUNICATION sur le sujet de cette mesure... Je n'ose pas imaginer ceux qui en g√®rent bien plus que moi... A quoi ca encourage √† part se passer de pypi ?","tags":"Techno","url":"https://foxmask.net/post/2015/04/19/pypi-nous-saoule-avec-son-erreur-400/"},{"title":"Django Migration 1.7 √† 1.8, FormWizard, InlineFormSet, Url from Future","text":"M√™me si la la doc est superbement compl√®te, je m'en vais vous narrer ci et l√† les surprises qui ont jonch√© le chemin de ma migration Comme tout √† chacun j'ai donc fait : pip install - U django ... ./ manage . py test Je suis tomb√© sur des erreurs sur django-debug-toolbar parce que rest√© en 0.9.5, donc estomp√©es d√®s la 1.3.0 mise √† jour. Puis vint des su√©es : Traceback ( most recent call last ): File \"./manage.py\" , line 10 , in execute_from_command_line ( sys . argv ) File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/django/core/management/__init__.py\" , line 338 , in execute_from_command_line utility . execute () File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/django/core/management/__init__.py\" , line 312 , in execute django . setup () File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/django/__init__.py\" , line 18 , in setup apps . populate ( settings . INSTALLED_APPS ) File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/django/apps/registry.py\" , line 115 , in populate app_config . ready () File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/debug_toolbar/apps.py\" , line 15 , in ready dt_settings . patch_all () File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/debug_toolbar/settings.py\" , line 232 , in patch_all patch_root_urlconf () File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/debug_toolbar/settings.py\" , line 220 , in patch_root_urlconf reverse ( 'djdt:render_panel' ) File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/django/core/urlresolvers.py\" , line 550 , in reverse app_list = resolver . app_dict [ ns ] File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/django/core/urlresolvers.py\" , line 352 , in app_dict self . _populate () File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/django/core/urlresolvers.py\" , line 285 , in _populate for pattern in reversed ( self . url_patterns ): File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/django/core/urlresolvers.py\" , line 402 , in url_patterns patterns = getattr ( self . urlconf_module , \"urlpatterns\" , self . urlconf_module ) File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/local/lib/python2.7/site-packages/django/core/urlresolvers.py\" , line 396 , in urlconf_module self . _urlconf_module = import_module ( self . urlconf_name ) File \"/usr/lib/python2.7/importlib/__init__.py\" , line 37 , in import_module __import__ ( name ) File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/django_th/django_th/urls.py\" , line 9 , in from django_th.views import TriggerListView , TriggerDeleteView , File \"/home/foxmask/Django-VirtualEnv/django-trigger-happy/django_th/django_th/views.py\" , line 13 , in from django.contrib.formtools.wizard.views import SessionWizardView ImportError : No module named formtools . wizard . views Alors l√†, le d√©sagr√©ment majeure pour bibi et \" Trigger Happy \", c'est que toutes mes pages permettant de cr√©er des services, reposent entierement sur le Wizard... En creusant la doc on apprend que les wizard sont sortis des contrib pour devenir une app √† part : Formtools Il faut donc ajouter \"formtools\" au INSTALLED_APPS apr√®s avoir fait un pip install django - formtools Puis on relance les tests : ./ manage . py test Creating test database for alias 'default' ... ........................................ ---------------------------------------------------------------------- Ran 40 tests in 1.998 s OK Destroying test database for alias 'default' ... ou avec un petit coup de Creating test database for alias 'default' ( ':memory:' ) ... Operations to perform : Synchronize unmigrated apps : staticfiles , django_th , messages , pocket , th_rss , django_js_reverse , th_pocket , debug_toolbar , formtools Apply all migrations : admin , contenttypes , auth , sessions Synchronizing apps without migrations : Creating tables ... Creating table django_th_servicesactivated Creating table django_th_userprofile Creating table django_th_userservice Creating table django_th_triggerservice Creating table django_th_rss Creating table django_th_pocket Running deferred SQL ... Installing custom SQL ... Running migrations : Rendering model states ... DONE Applying contenttypes . 0001 _initial ... OK Applying auth . 0001 _initial ... OK Applying admin . 0001 _initial ... OK Applying contenttypes . 0002 _remove_content_type_name ... OK Applying auth . 0002 _alter_permission_name_max_length ... OK Applying auth . 0003 _alter_user_email_max_length ... OK Applying auth . 0004 _alter_user_username_opts ... OK Applying auth . 0005 _alter_user_last_login_null ... OK Applying auth . 0006 _require_contenttypes_0002 ... OK Applying sessions . 0001 _initial ... OK test_servicesactivated ( django_th . tests . test_models_and_services . ServicesActivatedTest ) ... ok test_invalid_form ( django_th . tests . test_models_and_services . TriggerServiceTest ) ... ok test_triggerservice ( django_th . tests . test_models_and_services . TriggerServiceTest ) ... ok test_valid_form ( django_th . tests . test_models_and_services . TriggerServiceTest ) ... ok test_userprofile ( django_th . tests . test_models_and_services . UserProfileTest ) ... ok test_invalid_form ( django_th . tests . test_models_and_services . UserServiceTest ) ... ok test_userservice ( django_th . tests . test_models_and_services . UserServiceTest ) ... ok test_valid_form ( django_th . tests . test_models_and_services . UserServiceTest ) ... ok test_get ( django_th . tests . test_views . TriggerDeletedTemplateViewTestCase ) ... ok test_get ( django_th . tests . test_views . TriggerEditedTemplateViewTestCase ) ... ok test_context_data ( django_th . tests . test_views . TriggerListViewTestCase ) ... ok test_get ( django_th . tests . test_views . UserServiceAddedTemplateViewTestCase ) ... ok test_get ( django_th . tests . test_views . UserServiceDeletedTemplateViewTestCase ) ... ok test_context_data ( django_th . tests . test_views . UserServiceListViewTestCase ) ... ok ---------------------------------------------------------------------- Ran 14 tests in 0.889 s OK Destroying test database for alias 'default' ( ':memory:' ) ... si vous voulez voir la politique de d√©pr√©ciation de Django . Bon je n'y ai pas trouv√© le \"pourquoi\" cette \"contrib\", √† l'origine, avait √©t√© retir√©e √† pr√©sent. Le billet √©voluera probablement plus tard selon mes aventures sur le sujet ;) Edit du 10/04 (minuit:) les inlineformset_factory ayant √©volu√©s, il n'est √† pr√©sent plus possible de sp√©cifier ET form_class ET fields dans la vue, c'est l'un ou l'autre voire m√™me que dalle si dans le inlineformset_factory on colle le nom des fields qui nous interessent. tout dans la doc ;) De m√™me en 1.7 on pouvait se contenter d'√©crire : from django.db import models class Author ( models . Model ): name = models . CharField ( max_length = 100 ) class Book ( models . Model ): author = models . ForeignKey ( Author ) title = models . CharField ( max_length = 100 ) >>> from django.forms.models import inlineformset_factory >>> BookFormSet = inlineformset_factory ( Author , Book ) mais ceci ne va plus du tout, il faut bien sp√©cifier une liste de fields pleine ou vide (si ca vous chante:) >>> from django.forms.models import inlineformset_factory >>> BookFormSet = inlineformset_factory ( Author , Book , fields = ( 'title' ,)) edit du 12/04 une nouvelle erreur qui saute aux yeux : / home / foxmask / Django - VirtualEnv / django - trigger - happy / local / lib / python2 . 7 / site - packages / django / templatetags / future . py : 25 : RemovedInDjango19Warning : Loading the `url` tag from the `future` library is deprecated and will be removed in Django 1.9 . Use the default `url` tag instead . RemovedInDjango19Warning ) celle ci est d√ªe √† un { % load url from future % } dans les templates","tags":"Techno","url":"https://foxmask.net/post/2015/04/03/django-migration-1-7-a-1-8-formwizard/"},{"title":"Qu√™te  WampWS et Autobahn - √©pisode 1","text":"Une contr√© fort fort lointaine L'√©tait une fois ... des druides, des gueux, des recettes magiques et un gentilhomme En chemin pour une contr√© fort fort lointaine, un gentilhomme (qu'on appellera DaveLooper ), passa par maintes tribulations et turpitudes tant√¥t arm√© de son lance pierres Perl , tant√¥t de son arbal√®te PHP , tant√¥t de son √©p√©e Python . Il se fraya un chemin √† travers bois parce que les grands routes n'avait gu√®re gr√¢ce √† ses yeux. C'est ainsi que gr√¢ce √† son √©p√©e, il parvint √† se tailler des outils, tel TriggerHappy, un tireur toujours content, n√© √† partir d'une partition entonn√©e par un troubadour nomm√© Django, qui lui servirent √† se forger de nouvelles armes plus ou moins aff√ªt√©es. La derni√®re arme en date fut WampWS un projet foufoufou, qui fait r√™ver √† l'arme absolue. Si vous voulez d√©couvrir, en langage profane, ce qu'un gueux peut attendre de ce projet, ruez vous chez sam et max Comme DaveLooper n'en est m√™me pas √† se forger le pommeau de cette derni√®re, il est loin de l'extase, mais il aime ripailler, et partager, du coup, il s'en va vous narrer comment il a d√©j√† pu d√©buter ce morceau. Le socle de base de cette nouvelle arme est encore TriggerHappy. Il reste fid√®le √† son outil f√©tiche. - Il s'en va l'am√©liorer. L'id√©e est donc de reprendre le MCD existant, et de b√¢tir autour, une arme qui utiliserait le maillage de c√¥te de crossbar / WampWS via autobahn . Pour ce faire DaveLooper a beaucoup √©change de pigeons voyageur avec le druide d√©tenant la recette de wampws, et ce dernier lui fourni les jarres qu'il juge√¢t les plus √† m√™me de remplir l'office. Ces derniers sont : Polymer + autobahnJS \\<=> crossbar => autobahnjs + twisted + txpostgres => postgresql. Le choix √©voqu√© par l'√©rudit se justifie par la scalabilit√©. √áa fait un paquet de jattes √† connaitre avant d'arriver √† un r√©sultat honorable diriez vous √† DaveLooper . mais tout de m√™me : Crossbar s'installe ais√©ment, reste √† creuser la doc pour obtenir une configuration digne de nom. Polymer+Autobahn sera l'√©tape suivante pour voir comment √ßa se goupille en r√©cup√©rant les donn√©es de la base et en les affichant avec Polymer Autobahn+twisted+txpostgres : c'est cet ensemble que DaveLooper s'en va vous d√©crire. Il a pr√©f√©r√© t√¢ter le back-end avant le front au cas o√π le back-end aurait √©t√© un d√©sastre, le front aurait √©t√© oubli√©. Donc, le principe est le suivant avec cette stack : crossbar oriente les requ√™tes entre des composants applicatifs, et ceux ci se parlent en temps r√©el et de fa√ßon asynchrone En 2 lignes voil√† crossbar pr√™t crossbar init √† ne faire que la premi√®re fois que vous installez crossbar crossbar start pour chaque lancement de l'outil Une fois fait, on peut √† son tour d√©marrer les composants qui tr√©pignent √† se faire des causeries. On en lance un : python frontend.py session attached Got event: 0 Got event: 1 Got event: 2 Got event: 3 Got event: 4 Got event: 5 disconnected puis 2 : python backend.py session attached . . . . . . . . . . . et hoooo √ßa se cause vindiou. Simple efficace. What else ? Ben on se le demande ? allez on se le demande :D Pour partir sur du plus concret et proche de ce que DaveLooper a mis en branle avec l'heureux tireur \"TriggerHappy\", il se dit bien, quand le projet a d√©marr√©, seul Evernote causait avec des flux RSS. Repartons donc sur ces traces 'pour voir' ce que ces jarres recommand√©s par le druide peuvent r√©aliser Le pattern utilis√© sera donc publisher/subscriber. O√π Evernote sera le composant subscriber du composant RSS, le publisher. D√©roulement : Pour obtenir les items des flux RSS, on r√©cup√®re de la table qui les contient d'abord les URL de ces flux, puis on parcourt les flux eux-m√™mes, et pour chaque item on \"publish\" le contenu de l'article au subscriber. Quand les donn√©es parviennent au composant subscriber, il n'a plus qu'√† les enregistrer. On va donc voir ci dessous tout cette machinerie, puis comment on requ√™te une base postgresql de fa√ßon asynchrone . le backend, the RSS Component # -*- coding: utf-8 -*- import arrow import sys from components.lib.feedsservice import Feeds from txpostgres import txpostgres from twisted.internet.defer import inlineCallbacks , returnValue from autobahn import wamp from twisted.python import log from autobahn.twisted.util import sleep from autobahn.twisted.wamp import ApplicationSession class RssComponent ( ApplicationSession ): \"\"\" An application component that publishes an event \"\"\" @inlineCallbacks def onJoin ( self , details ): print ( \"session attached\" ) pool = txpostgres . ConnectionPool ( None , port = 5432 , database = 'th' , user = 'th' , password = 'th' ) yield pool . start () print ( 'DB Connection pool started' ) self . db = pool # register all procedures on this class which have been # decorated to register them for remoting regs = yield self . register ( self ) print ( 'registered {} procedures' . format ( len ( regs ))) while True : feeds = yield self . call ( 'eu.trigger-happy.rss.feeds_url' ) for data in feeds : for item in data [ 'data' ]: print ( 'publishing {}' . format ( item )) self . publish ( u 'eu.trigger-happy.rss' , { 'trigger_id' : data [ 'trigger_id' ], 'user_id' : data [ 'user_id' ], 'item' : item }) yield sleep ( 120 ) @wamp.register ( u 'eu.trigger-happy.rss.feeds_url' ) @inlineCallbacks def get_feeds_url ( self ): \"\"\" get the URL stored in the database \"\"\" query = \"SELECT date_triggered, name, url, trigger_id, user_id FROM \" query += \"django_th_rss AS R, \" query += \"django_th_triggerservice AS TS \" query += \" WHERE R.trigger_id=TS.id \" query += \" AND TS.status = True \" # get only the activated triggers query += \" ORDER BY TS.date_triggered DESC \" rows = yield self . db . runQuery ( query ) feeds = [] print ( 'get the feeds url...' ) for feed in rows : print ( 'get feeds from {0} => {1}' . format ( feed [ 1 ], feed [ 2 ])) if feed [ 0 ] <= self . right_now (): feeds . append ({ 'trigger_id' : feed [ 3 ], \"user_id\" : feed [ 4 ], 'data' : Feeds ( ** { 'url_to_parse' : feed [ 2 ]}) . datas ()}) returnValue ( feeds ) def right_now ( self ): \"\"\" TODO import settings from a file or smth to get the TZ details :return: \"\"\" return arrow . utcnow () . replace ( hour = 0 , minute = 0 , second = 0 ) . to ( 'Europe/Paris' ) if __name__ == '__main__' : log . startLogging ( sys . stdout ) from autobahn.twisted.wamp import ApplicationRunner runner = ApplicationRunner ( url = \"ws://127.0.0.1:8080/ws\" , realm = \"realm1\" ) runner . run ( RssComponent ) le frontend - the Evernote Component from __future__ import unicode_literals import arrow import sys import json # evernote API from evernote.api.client import EvernoteClient from evernote.edam.notestore import NoteStore import evernote.edam.type.ttypes as Types from evernote.edam.error.ttypes import EDAMUserException # postgresql driver from txpostgres import txpostgres # autobahn from autobahn import wamp from twisted.python import log from twisted.internet import reactor from twisted.internet.defer import inlineCallbacks , returnValue from autobahn.twisted.wamp import ApplicationSession from sanitize import sanitize class EvernoteComponent ( ApplicationSession ): \"\"\" An application component that subscribes and receives events \"\"\" @inlineCallbacks def onJoin ( self , details ): print ( \"session attached\" ) pool = txpostgres . ConnectionPool ( None , port = 5432 , database = 'th' , user = 'th' , password = 'th' ) yield pool . start () print ( 'DB Connection pool started' ) self . db = pool # register all procedures on this class which have been # decorated to register them for remoting regs = yield self . register ( self ) print ( 'registered {} procedures' . format ( len ( regs ))) @inlineCallbacks def on_event ( data ): print ( json . dumps ( data , indent = 4 )) yield self . call ( 'eu.trigger-happy.evernote.save' , data ) try : yield self . subscribe ( on_event , u 'eu.trigger-happy.rss' ) print ( \"subscribe topic\" ) except Exception as e : print ( \"could not subscribe to topic: {0}\" . format ( e )) #yield self.subscribe(on_event, u'eu.trigger-happy.pocket') #yield self.subscribe(on_event, u'eu.trigger-happy.twitter') def onDisconnect ( self ): print ( \"disconnected\" ) reactor . stop () @wamp.register ( u 'eu.trigger-happy.evernote.token' ) @inlineCallbacks def get_token ( self , user_id ): \"\"\" get the token of the user that owns the trigger need to link the table with django_th_triggerservice to get the user id :param user_id: :return: a generator \"\"\" query = \"SELECT token FROM django_th_userservice \" query += \" WHERE name_id='ServiceEvernote' \" query += \" AND user_id={0}\" . format ( user_id ) rows = yield self . db . runQuery ( query ) for row in rows : token = row returnValue ( token ) @wamp.register ( u 'eu.trigger-happy.evernote.trigger' ) @inlineCallbacks def get_trigger ( self , trigger_id ): \"\"\" get information for the current trigger such as notebook, tag, description :param trigger_id: :return: a generator \"\"\" query = \"SELECT notebook, tag, TS.description FROM django_th_evernote AS E, \" query += \" django_th_triggerservice AS TS \" query += \" WHERE E.trigger_id=TS.id \" query += \" AND trigger_id='{0}'\" . format ( trigger_id ) print ( query ) rows = yield self . db . runQuery ( query ) for notebook , tag , description in rows : print ( notebook , tag , description ) data = { 'notebook' : notebook , 'tag' : tag , 'description' : description } returnValue ( data ) @wamp.register ( u 'eu.trigger-happy.evernote.save' ) @inlineCallbacks def save_data ( self , stuff ): \"\"\" save the data coming from the subscribed service :param stuff: contain a table of : user_id, trigger_id, item (the main content) :return: nothing \"\"\" user_id = stuff [ 'user_id' ] trigger_id = stuff [ 'trigger_id' ] token = yield self . call ( 'eu.trigger-happy.evernote.token' , user_id ) token = token [ 0 ] content = '' status = False data = stuff [ 'item' ] \"\"\" .... ici .... le long traitement pour exploiter les data et les envoyer sur son compte evernote \"\"\" if __name__ == '__main__' : log . startLogging ( sys . stdout ) from autobahn.twisted.wamp import ApplicationRunner runner = ApplicationRunner ( url = \"ws://127.0.0.1:8080/ws\" , realm = \"realm1\" ) runner . run ( EvernoteComponent ) Donc on lance le subscriber puis le publisher et quand le RssComponent trouve des √©l√©ments √† publier il les envoie directement au EvernoteComponent Tout cela se lit dans les consoles respectives instantan√©ment. Voici pour le cot√© \"bout de code concret qui marche\" √âcueils : Comme √† chaque fois qu'on d√©bute avec de nouveaux outils, on se tape sur les doigts en se ratant/pensant enfoncer le clou. √âcueil 1 : erreur 111, la fameuse erreur 111... $ python frontend.py Traceback ( most recent call last ) : File \"frontend.py\" , line 62 , in runner.run ( Component ) File \"...ocal/lib/python2.7/site-packages/autobahn/twisted/wamp.py\" , line 199 , in run raise connect_error.exception twisted.internet.error.ConnectionRefusedError: Connection was refused by other side: 111 : Connection refused. ca veut dire que le composant ne parvient pas √† contacter ... crossbar ... Ouais ouais ouais crossbar. Comme DaveLooper avait d√©j√† vu cette erreur par le pass√© en des temps recul√©s, il se dit comme √† l'√©poque, \"bon la base est pas joignable\" Mais √† tord Donc 2 choses √† checker : le port ouvert par crossbar dans .crossbar/config.json \"transports\" : [ { \"type\" : \"web\" , \"endpoint\" : { \"type\" : \"tcp\" , \"port\" : 8090 }, \"paths\" : { \"/\" : { \"type\" : \"static\" , \"directory\" : \"..\" }, \"ws\" : { \"type\" : \"websocket\" } } } ] et celui qu'on a d√©fini dans le script : runner = ApplicationRunner ( url = \"ws://127.0.0.1:8090/ws\" , ... ) s'ils sont identiques, alors crossbar n'est pas d√©marr√© √âcueil 2 : debug Il est trop trop souvent arriv√© √† DaveLooper de voir ses petites cailloux, les print, retra√ßant le cheminement de l'enchainement des √©tapes ... S'arr√™ter sans rien dire du tout. Aussi est il all√© se rendre dans quelques √©choppes qu√©rir de l'aide sur sans en trouver... Et comme Sam pourrait encore le dire en rigolant : chaque fois que DaveLooper pose une question, il fini par trouver la r√©ponse de lui m√™me Ba oui DaveLooper est born√© et cherche toujours jusqu'√† la solution quand les r√©ponses se font rares. Donc il a fini par trouver ceci : runner = ApplicationRunner ( url = \"ws://127.0.0.1:8090/ws\" , realm = \"realm1\" , debug = False , # low-level WebSocket debugging debug_wamp = False , # WAMP protocol-level debugging debug_app = False ) # app-level debugging Je vous dispenserai les logs, ils sont s'y verbeux qu'on croirait qu'on compile le kernel linux ;) Du coup quand les print s'arr√™tent DaveLooper est content de savoir enfin pourquoi. √âcueil 3 : leS elf ;) Quand utiliser ces 4 l√† et comment. yield self . subscriber () yield self . publish () De ce que DaveLooper a pu tester, les 2 premiers yield sont assez explicites d'eux m√™me. yield self . call () self . method () Par contre pour savoir quand faire self.call ou sel.method c'est une autre histoire. Le self.call cot√© publisher aura permis de r√©cup√©rer les donn√©es pour le subscriber Cote subscriber self.call ne convient pas pour sauvegarder les donn√©es. Pourquoi ? Parce qu'il fallait \"d√©corer\" la methode d√©clench√©e lors du subscribe, ici on_event() et donc rajouter yield devant. Sinon, si on n'a pas besoin d'appels RPC, on utilisera self.method() DaveLooper , n'utilisant ces jarres que depuis samedi dernier, a eu mal √† comprendre tout √ßa sans des explications fournies sur indexerror To be continued Nous voici donc arriv√© au terme de ce petit voyage, de DaveLooper toujours en qu√™te de nouveaut√©, o√π en m√™me temps, tr√®s peu et beaucoup de choses ont √©t√© abord√©es. Dans les prochains √©pisodes, DaveLooper a en t√™te quelques sujets comme : d√©marrer un projet de z√©ro proprement, ou tout du moins pr√™t √† l'emploi la configuration de crossbar, pour all√©ger le code ci dessus et retirer les appels fait en dur √† une base donn√©e par exemple le \"mode debug\" de crossbar/wamp wamplet nota : si vous avez r√©per√© des coquille(tte)s dans le code, faites en part en commentaire, comme ca fait que 5jours que DaveLooper utilise le tout Crossbar/wamp/autobahn, il y a forcement beaucoup √† am√©liorer, et ca sera fait avec les prochains billets ;)","tags":"Techno","url":"https://foxmask.net/post/2015/02/27/quete-wampws-et-autobahn-episode-1/"},{"title":"Trigger Happy : Cr√©er un module - la doc","text":"Hello, Lors du Meetup Django Paris , le sieur Linovia m'avait demand√© s'il existait une doc pour produire un plugin/module, et j'avais r√©pondu que non, \"un peu trop vite\". En effet j'avais d√©j√† abord√© le sujet dans un pr√©c√©dant billet , mais plut√¥t que de le laisser v√©g√©ter dans un coin je l'ai rajout√© √† la doc \" readthedocs \" du projet. Ainsi donc dans cette doc, vous trouverez : comment est constitu√© un module Trigger Happy son forms.py son models.py et sa classe centrale avec ce qu'elle doit contenir pour lui permettre de r√©cup√©rer des informations provenant d'autres sources de donn√©es pour lui d'une part et en fournir pour les autres. Je ne m'√©talerai pas plus dans le billet pour √©viter un redit de la doc. Par contre, comme √† l'accoutum√©, je prends tout commentaire sur le sujet. Maintenant, vous n'avez plus d'excuses pour ne pas vous zamuser √† spread ze web avec vos zou√©ts. Un peu No√´l avant l'heure non ? ;)","tags":"Techno","url":"https://foxmask.net/post/2014/12/01/trigger-happy-creer-un-module/"},{"title":"Django Paris - Novembre 2014 - Numa : Demo Live","text":"Voici un cours billet qui devrait tomber rapidement sur mon compte Twitter , juste pour la forme ;) Et illustrant l'utilisation de Trigger Happy, avec le talk en live dispo ici Aussi... la petite image qui va bien (ouais ya pas que des chats sur l'net), pour illustrer qu'avec Evernote tout est repris puisque ce billet tombe aussi par ici","tags":"Techno","url":"https://foxmask.net/post/2014/11/27/django-paris-numa-novembre-2014-demo-live/"},{"title":"Django Tutorial, une App T√©l√©chargeable ?","text":"\"Hey J'ai une id√©e\" (dans la veine des id√©es que j'aurais pas le temps de faire ), je m'en mordrais surement les doigts apr√®s, mais lan√ßons nous :) En √©changeant sur divers sujets avec Mr Linovia (dont un truc zarbi avec makemigration), je lui dis grosso modo : Tiens j'ai pas encore vu de version t√©l√©chargeable du code des tuto django pour que tout √† chacun, d√©couvrant le framework, puisse les ex√©cuter simplement, ou juste voir comment le code est fait √† titre d'exemple. Et vous √ßa vous int√©resserait d'avoir le code des tutos √† disposition ? Il peut arriver quand on d√©bute, de ne pas comprendre une erreur qui n'est d√ªe qu'√† une salet√© de typo. Du coup comparer le code qu'on a soigneusement r√©diger √† partir des tuto de la doc, avec celui t√©l√©chargeable, peut vite permettre de comprendre o√π on a rat√© une marche (entre autre). Je pensais faire un d√©p√¥t par tutorial (qui en compte 6 + 2 \"advanced\"), sur github par exemple, plus un final qui soit l'appli \"Poll\" tout enti√®re. Ainsi elle sera aussi utilisable dans la vraie vie r√©elle. [poll id=\"4\"] Si vous vous en tapez le coquillard avec des tibias de gast√©ropodes ; just let me know ;)","tags":"Techno","url":"https://foxmask.net/post/2014/11/06/django-tutorial-app-telechargeable/"},{"title":"Django Trigger Happy - d√©clenche une heureuse rafale de mises √† jour","text":"Apr√®s quelques mois de tests et tergiversations, j'ai fini par me fendre d'une nouvelle version du projet \"Trigger Happy\" et de tous ses modules. Si vous d√©couvrez tout juste le projet, follow ici de quoi obtenir un aper√ßu ( et en images ) Voici la listes des nouveaut√©s & am√©liorations produites. A- Mises √† jour A tout seigneur tout honneur donc, on commence par le coeur du projet : django-th : le Core Partie Backend suppression des doctest pour des tests unitaires mise √† jour Django 1.7 migration des 2 batches fire.py et fire_as.py en management command ce qui permet, comme chacun doit savoir, de lancer les commandes ais√©ment depuis manage.py . La 2nde commande exploite asyncio et donc peut-√™tre lanc√©e depuis python 3.4 Doc au format Sphinx en cas de besoin ;) am√©lioration des perfs en r√©duisant les requ√™tes SQL via Queryset.select_related() Partie Front : int√©gration de BootStrap 3 (vs version 2) am√©lioration de l'interface √† laquelle est ajout√©e de l'Ajax (pour les urls est utilisent django-js-reverse ) permettant d'activer ou non un trigger (sans recharger la page √©videmment) Packaging : ajout d'un fichier MODULES.rst permettant de recenser les modules existants et dispo sur pypi Modules \"Trigger Happy\" Ensuite tous les modules \"Trigger Happy\" ont subit (quasiment) les m√™mes mises √† jour : Partie Backend : mise √† jour Django 1.7 Doc au format Sphinx en cas de besoin ;) suppression des doctest pour des tests unitaires Partie Front : int√©gration de BootStrap 3 (vs version 2) Celles-ci concernent : django-th-dummy : module pour se bootstrap son propre module Trigger Happy, django-th-evernote : module pour g√©rer les donn√©es de son compte Evernote, django-th-pocket : module pour g√©rer les donn√©es de son compte Pocket, django-th-rss : module pour g√©rer les donn√©es de flux RSS, django-th-readability : module pour g√©rer les donn√©es de son compte Readability B - Nouveaut√© nouveau module flambant neuf pour encore plus de libert√©, django-th-twitter : Avec ce dernier vous pouvez envoyer des donn√©es d'un des services ci dessus sur votre compte Twitter, ou r√©cup√©rer des infos depuis Twitter (via un Tag ou le compte d'un Twittos) pour les exp√©dier vers l'un des services ci dessus. Genre une news tombe chez nos amis de Sam et Max et vous voulez la publier cache sur Twitter, ou √† l'inverse vous suivez leur compte Twitter et voulez ne rien rater de leur Tweets pour les balancer sur votre compte Pocket, ce module est l√† pour √ßa. C- Ze Stuff O√π trouver toute la clic ? sur le classique Pypi : Django Trigger Happy Evernote Pocket Readability RSS Twitter ou sur les d√©p√¥ts GitHub : Django Trigger Happy Evernote Pocket Readability RSS Twitter A venir Qu'est-il pr√©vu pour la suite ? Un petit tour sur la liste des tickets & milestones vous en dira plus What's about you ? Si une question vous taraude sur le projet, ou envie de laisser un petit mot, n'h√©sitez pas.","tags":"Techno","url":"https://foxmask.net/post/2014/10/22/django-trigger-happy-declenche-heureuse-rafale-maj/"},{"title":"CentOs Oracle Could not open/read file:///etc/pki/rpm-gpg/RPM-GPG-KEY-oracle","text":"Quand on a besoin de faire un yum update suivi d'un yum install foobar il peut arriver que sur votre CentOS vous ayez un probl√®me avec vos packages Oracle : warning: rpmts_HdrFromFdno: Header V3 RSA/SHA256 Signature, key ID ec551f03: NOKEY Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-oracle GPG key retrieval failed: [ Errno 14 ] Could not open/read file:///etc/pki/rpm-gpg/RPM-GPG-KEY-oracle Pour y rem√©dier 2 commandes et puis s'en va [ root@localhost ~ ] # rpm --import http://oss.oracle.com/ol6/RPM-GPG-KEY-oracle [ root@localhost ~ ] # rpm -q gpg-pubkey-ec551f03-4c2d256a et au yum install suivant tout glisse. source","tags":"Techno","url":"https://foxmask.net/post/2014/10/17/centos-oracle-could-not-openread-fileetcpkirpm-gpgrpm-gpg-key-oracle/"},{"title":"Installation Oracle 10G en mode sp√©l√©o","text":"Bon, j'avais un wiki, au temps jadis, que j'avais basard√© parce que je m'√©tais dit \"Oracle 10 n'est plus support√©, je n'aurai plus √† me faire suer pour l'installer\" ... Et c'est toujours dans ces cas de figure qu'on se maudit quand le moment poindre le bout du nez. Voil√† donc un billet qui part en sp√©l√©o vous narrez quelques trucs qui depuis le temps sont surement d√©j√† acquises (j'ose esp√©rer ;) Donc pour installer Oracle 10g, je vous souhaite d'avoir les archives dans un coin car √ßa n'est plus dispo chez Oracle via la manager qui va bien. Apr√®s les avoir d√©compress√©es, temps il est de lancer l'installeur : cd database ./runInstaller La plupart du temps on n'installe pas Oracle sur une workstation ou sur un serveur disposant d'un √©cran et d'un clavier. Or l'installeur Oracle utilise \"OUI\" (Oracle Universal Installer), qui lance une GUI ! Donc avant m√™me de lancer cet installeur, on est bon pour : installer la machinerie pour compiler installer des lib X11 configurer le forwarding X11 1- la machinerie pour compiler yum install binutils gcc glibc glibc-headers glibc-kernheaders glibc-devel compat-libstdc++ cpp compat-gcc make compat-db compat-gcc-c++ compat-libstdc++-devel openmotif openmotif21 setarch pdksh libaio libaio-devel libXt.i686 libXt-devel.x86_64 libXt-devel.i686 libXtst.i686 libXtst-devel.i686 libXtst-devel.x86_64 2- installer des lib X11 ceci vous evitera de rencontrer ce genre d'erreur : java.lang.UnsatisfiedLinkError: /tmp/OraInstall../jre/1.4.2/lib/i386/libawt.so: libXtst.so.6: cannot open shared object file: No such file or directory 3- configurer le forwarding X11 pour faire du X11 forwarding, tout le monde sait qu'on fait ssh -X login@server mais si on regarde de plus pr√®s, √ßa ne suffit souvent pas : ssh -v -X login@server ... debug1: Remote: No xauth program ; cannot forward with spoofing. X11 forwarding request failed on channel 0 comme l'avant derni√®re ligne l'indique, il n'y a pas xauth de dispo, donc let's go yum install xauth Loaded plugins: fastestmirror Loading mirror speeds from cached hostfile * base: centos.quelquesmots.fr * extras: centos.mirror.fr.planethoster.net * updates: centos.crazyfrogs.org base | 1 .1 kB 00 :00 extras | 2 .1 kB 00 :00 updates | 1 .9 kB 00 :00 Setting up Install Process Resolving Dependencies --> Running transaction check ---> Package xorg-x11-xauth.i386 1 :1.0.1-2.1 set to be updated --> Finished Dependency Resolution Dependencies Resolved ================================================================================================================================================================================ Package Arch Version Repository Size ================================================================================================================================================================================ Installing: xorg-x11-xauth i386 1 :1.0.1-2.1 base 31 k Transaction Summary ================================================================================================================================================================================ Install 1 Package ( s ) Upgrade 0 Package ( s ) Total download size: 31 k Is this ok [ y/N ] : Y Downloading Packages: xorg-x11-xauth-1.0.1-2.1.i386.rpm | 31 kB 00 :00 Running rpm_check_debug Running Transaction Test Finished Transaction Test Transaction Test Succeeded Running Transaction Installing : xorg-x11-xauth 1 /1 Installed: xorg-x11-xauth.i386 1 :1.0.1-2.1 Complete! Ensuite il se peut que ca ne suffise toujours pas, il faut donc editer le fichier pour mettre ces parametres : X11Forwarding yes X11UseLocalhost no puis relancer sshd. Testons √† pr√©sent ssh -v -X oracle@server debug1: Requesting X11 forwarding with authentication spoofing. debug1: Sending environment. debug1: Sending env LANG = fr_FR.utf8 Last login: Thu Oct 9 09 :40:29 2014 from /usr/bin/xauth: creating new authority file /u01/app/oracle/.Xauthority [ oracle@server ~ ] $ xclock debug1: client_input_channel_open: ctype x11 rchan 2 win 65536 max 16384 debug1: client_request_x11: request from 127 .0.0.1 41557 debug1: channel 1 : new [ x11 ] debug1: confirm x11 debug1: channel 1 : FORCE input drain ouais vous la voyez pas sur cette page l'horloge, faut pas pousser non plus ;) Si √ßa ne marchait toujours pas chez vous, v√©rifiez bien que X11Forwarding est activ√© sur le serveur : grep X11Forwarding /etc/ssh/sshd_config #X11Forwarding no X11Forwarding yes Maintenant zont n'est pr√™t pour lancer l'installeur. cd /u01/app/oracle/binaires/database/ ./runInstaller -ignoreSysPrereqs et le GUI d√©marre, zavez plus qu'√† vous faire plaisir. le -ignoreSysPrereqs indique √† Oracle de me l√¢cher la grappe sur les pr√©requis syst√®me, notamment sur l'OS qui n'est pas RedHat. Et c'est pas fini ¬© Je n'ai volontairement pas abord√© les pr√©requis techniques sur les s√©maphores et tout le bataclan, le net en regorge, ce billet est un ni√®me noeud √† mon mouchoir pour pouvoir lancer le GUI :P Une solution existe pour lancer l'installer sans le GUI avec l'option -silent et avec un fichier de r√©ponses ( -reponseFile /full/path/to/responsefile.rsp ) contenant d√©j√† tout le param√©trage qui va bien. Mais souvent les fichiers de r√©ponse ne sont pas √† jour. Ne serait-ce que la structure du fichier d'une version mineure √† l'autre de Oracle. Je l'ai juste cit√©e en cas de besoin ;)","tags":"Techno","url":"https://foxmask.net/post/2014/10/09/installation-oracle-10g-gui/"},{"title":"Django, Le Magic System T'y Es Fou !","text":"Voici viendu la billet django de la rentr√©e, zenfin ! Comme on n'en fini jamais de faire le tour de django, apr√®s avoir pouss√© jusqu'au bout du bout la gestion des forms , me voici parti sur une nouvelle aventure, celle de la Management Commands . Dans la suite nous verrons comment, avant de tomber sur ces \"Management Commands\", je m'y prenais (pas parfaitement) pour packager des batches avec mes applications, puis nous verrons ensuite comment on produit un batch √† la sauce Django, sans effort. Avant : Pas de Magie, juste un truc qui marche, mais archa√Øque & rigide. Le batch se nomme \" fire.py \" et fait 100 lignes √† tout casser. Comment est-il lanc√© ? Ce script est appel√© depuis un virtualenv. j'ai besoin que python trouve le settings.py de mon appli d'o√π python os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"django_th.settings\") et pour les besoins de la v 1.7 de Django il m'a fallu rajouter python import django django.setup() Ce qui donne #!/usr/bin/env python # -*- coding: utf-8 -*- from __future__ import unicode_literals import os import datetime import time import arrow os . environ . setdefault ( \"DJANGO_SETTINGS_MODULE\" , \"django_th.settings\" ) import django django . setup () from django.conf import settings from django_th.services import default_provider from django_th.models import TriggerService from django.utils.log import getLogger # create logger logger = getLogger ( 'django_th.trigger_happy' ) def go (): \"\"\" run the main process \"\"\" trigger = TriggerService . objects . filter ( status = True ) if trigger : for service in trigger : # flag to know if we have to update to_update = False # flag to get the status of a service status = False # counting the new data to store to display them in the log count_new_data = 0 # provider - the service that offer datas service_name = str ( service . provider . name . name ) service_provider = default_provider . get_service ( service_name ) # consumer - the service which uses the data service_name = str ( service . consumer . name . name ) service_consumer = default_provider . get_service ( service_name ) # check if the service has already been triggered if service . date_triggered is None : logger . debug ( \"first run for %s => %s \" % ( str ( service . provider . name ), str ( service . consumer . name . name ))) to_update = True # run run run else : # 1) get the datas from the provider service # get a timestamp of the last triggered of the service datas = getattr ( service_provider , 'process_data' )( service . provider . token , service . id , service . date_triggered ) #consumer = getattr(service_consumer, 'save_data') published = '' which_date = '' # flag to know if we can push data to the consumer proceed = False # 2) for each one for data in datas : # if in a pool of data once of them does not have # a date, will take the previous date for this one # if it's the first one, set it to 00:00:00 # let's try to determine the date contained in the data... published = to_datetime ( data ) if published is not None : # get the published date of the provider published = arrow . get ( str ( published ), 'YYYY-MM-DD HH:mm:ss' ) . to ( settings . TIME_ZONE ) # store the date for the next loop # if published became 'None' which_date = published #... otherwise set it to 00:00:00 of the current date if which_date == '' : # current date which_date = arrow . utcnow () . replace ( hour = 0 , minute = 0 , second = 0 ) published = which_date if published is None and which_date != '' : published = which_date # 3) check if the previous trigger is older than the # date of the data we retreived # if yes , process the consumer # add the TIME_ZONE settings date_triggered = arrow . get ( str ( service . date_triggered ), 'YYYY-MM-DD HH:mm:ss' ) . to ( settings . TIME_ZONE ) # if the published date if greater or equal to the last # triggered event ... : if date_triggered is not None and published is not None and published . date () >= date_triggered . date (): # if date are the same ... if published . date () == date_triggered . date (): # ... compare time and proceed if needed if published . time () >= date_triggered . time (): proceed = True # not same date so proceed ! else : proceed = True if proceed : if 'title' in data : logger . info ( \"date {} >= date triggered {} title {}\" . format ( published , date_triggered , data [ 'title' ])) else : logger . info ( \"date {} >= date triggered {} \" . format ( published , date_triggered )) #status = consumer( # service.consumer.token, service.id, **data) to_update = True count_new_data += 1 # otherwise do nothing else : if 'title' in data : logger . debug ( \"data outdated skiped : [{}] {}\" . format ( published , data [ 'title' ])) else : logger . debug ( \"data outdated skiped : [{}] \" . format ( published )) # update the date of the trigger at the end of the loop sentance = \"user: {} - provider: {} - consumer: {} - {}\" if to_update : if status : logger . info (( sentance + \" new data\" ) . format ( service . user , service . provider . name . name , service . consumer . name . name , service . description , count_new_data )) update_trigger ( service ) else : logger . info (( sentance + \" AN ERROR OCCURS \" ) . format ( service . user , service . provider . name . name , service . consumer . name . name , service . description )) else : logger . info (( sentance + \" nothing new\" ) . format ( service . user , service . provider . name . name , service . consumer . name . name , service . description )) else : print ( \"No trigger set by any user\" ) def update_trigger ( service ): \"\"\" update the date when occurs the trigger \"\"\" now = arrow . utcnow () . to ( settings . TIME_ZONE ) . format ( 'YYYY-MM-DD HH:mm:ss' ) TriggerService . objects . filter ( id = service . id ) . update ( date_triggered = now ) def to_datetime ( data ): \"\"\" convert Datetime 9-tuple to the date and time format feedparser provides this 9-tuple \"\"\" my_date_time = None if 'published_parsed' in data : my_date_time = datetime . datetime . fromtimestamp ( time . mktime ( data . published_parsed )) elif 'updated_parsed' in data : my_date_time = datetime . datetime . fromtimestamp ( time . mktime ( data . updated_parsed )) elif 'my_date' in data : my_date_time = arrow . get ( str ( data [ 'my_date' ]), 'YYYY-MM-DD HH:mm:ss' ) return my_date_time def main (): default_provider . load_services () # let's go go () if __name__ == \"__main__\" : main () Avantage(s) La commande √† taper est un simple ./fire.py d√®s lors que le fichiers settings est trouv√© par le script tout passe tout seul Inconv√©nient(s) Le packaging est empirique, il faut rajouter au setup.py la prise en compte de ce batch par : entry_points = { 'console_scripts' : [ 'trigger-happy = django_th.fire:go' , ], } afin que la commande soit disponible sous la main d√®s l'installation via un pip install django_th Point noir que tout le monde aura vu, le script appelle en dur le fichier de settings de django_th. Ce qui emp√™che une int√©gration parfaite avec une autre application Django voisine d√©j√† install√©e. Ou alors il faut retoucher au batch une fois installer pour changer le nom du settings √† utiliser. Apr√®s Le \"Magic System\" : Comme j'en ai eu marre de me coltiner le gros point noir au milieu de la tronche, j'ai voulu trouv√© Ze moyen de ne plus me prendre la t√™te avec ce settings √† d√©finir dans mon batch. Et c'est √† ce moment l√† que j'ai crois√© les Management Commands. Au d√©but le terme et leur d√©finition dans la doc m'a fait penser que c'√©tait d√©di√© √† la partie backend de l'appli. Mais en rererererelisant attentivement, je me suis aper√ßu que √ßa collait parfaitement √† mon besoin, qui est de faire du traitement de donn√©es, autrement que via l'interface web. J'ai donc appliqu√©, au pied de la lettre, l'archi de la doc, pour donc d√©placer mon fire.py dans un sous-sous-dossier management/commands de mon appli django_th, sous le nom fire_th.py Avantage(s): Plus d'appel en dur d'un settings qui n'est pas celui de mon application courante. La commande est dispo de facto, d√®s lors que l'application est pr√©sente dans INSTALLED_APPS dans le settings.py. pas de modification du setup.py n√©cessaire Pour s'en assurer on tapera python manage.py help pour trouver la commande ;) Ce script a donc √©t√© modifi√© en : supprimant l'appel du settings supprimant \"def main\" jusqu'√† la fin du script rempla√ßant la fonction go() par handle() requise par BaseCommand d√©pla√ßant les 2 fonctions update_trigger() et to_datetime() au debut de la class Command rempla√ßant print() par self.stdout.write() Ce qui donne : #!/usr/bin/env python # -*- coding: utf-8 -*- from __future__ import unicode_literals import datetime import time import arrow from django.core.management.base import BaseCommand , CommandError from django.conf import settings from django_th.services import default_provider from django_th.models import TriggerService from django.utils.log import getLogger # create logger logger = getLogger ( 'django_th.trigger_happy' ) class Command ( BaseCommand ): help = 'Trigger all the services' def update_trigger ( self , service ): \"\"\" update the date when occurs the trigger \"\"\" now = arrow . utcnow () . to ( settings . TIME_ZONE ) . format ( 'YYYY-MM-DD HH:mm:ss' ) TriggerService . objects . filter ( id = service . id ) . update ( date_triggered = now ) def to_datetime ( self , data ): \"\"\" convert Datetime 9-tuple to the date and time format feedparser provides this 9-tuple \"\"\" my_date_time = None if 'published_parsed' in data : my_date_time = datetime . datetime . fromtimestamp ( time . mktime ( data . published_parsed )) elif 'updated_parsed' in data : my_date_time = datetime . datetime . fromtimestamp ( time . mktime ( data . updated_parsed )) elif 'my_date' in data : my_date_time = arrow . get ( str ( data [ 'my_date' ]), 'YYYY-MM-DD HH:mm:ss' ) return my_date_time def handle ( self , * args , ** options ): \"\"\" run the main process \"\"\" trigger = TriggerService . objects . filter ( status = True ) if trigger : for service in trigger : # flag to know if we have to update to_update = False # flag to get the status of a service status = False # counting the new data to store to display them in the log count_new_data = 0 # provider - the service that offer datas service_name = str ( service . provider . name . name ) service_provider = default_provider . get_service ( service_name ) # consumer - the service which uses the data service_name = str ( service . consumer . name . name ) service_consumer = default_provider . get_service ( service_name ) # check if the service has already been triggered if service . date_triggered is None : logger . debug ( \"first run for %s => %s \" % ( str ( service . provider . name ), str ( service . consumer . name . name ))) to_update = True # run run run else : # 1) get the datas from the provider service # get a timestamp of the last triggered of the service datas = getattr ( service_provider , 'process_data' )( service . provider . token , service . id , service . date_triggered ) consumer = getattr ( service_consumer , 'save_data' ) published = '' which_date = '' # flag to know if we can push data to the consumer proceed = False # 2) for each one for data in datas : # if in a pool of data once of them does not have # a date, will take the previous date for this one # if it's the first one, set it to 00:00:00 # let's try to determine the date contained in the data... published = self . to_datetime ( data ) if published is not None : # get the published date of the provider published = arrow . get ( str ( published ), 'YYYY-MM-DD HH:mm:ss' ) . to ( settings . TIME_ZONE ) # store the date for the next loop # if published became 'None' which_date = published #... otherwise set it to 00:00:00 of the current date if which_date == '' : # current date which_date = arrow . utcnow () . replace ( hour = 0 , minute = 0 , second = 0 ) published = which_date if published is None and which_date != '' : published = which_date # 3) check if the previous trigger is older than the # date of the data we retreived # if yes , process the consumer # add the TIME_ZONE settings date_triggered = arrow . get ( str ( service . date_triggered ), 'YYYY-MM-DD HH:mm:ss' ) . to ( settings . TIME_ZONE ) # if the published date if greater or equal to the last # triggered event ... : if date_triggered is not None and published is not None and published . date () >= date_triggered . date (): # if date are the same ... if published . date () == date_triggered . date (): # ... compare time and proceed if needed if published . time () >= date_triggered . time (): proceed = True # not same date so proceed ! else : proceed = True if proceed : if 'title' in data : logger . info ( \"date {} >= date triggered {} title {}\" . format ( published , date_triggered , data [ 'title' ])) else : logger . info ( \"date {} >= date triggered {} \" . format ( published , date_triggered )) status = consumer ( service . consumer . token , service . id , ** data ) to_update = True count_new_data += 1 # otherwise do nothing else : if 'title' in data : logger . debug ( \"data outdated skiped : [{}] {}\" . format ( published , data [ 'title' ])) else : logger . debug ( \"data outdated skiped : [{}] \" . format ( published )) # update the date of the trigger at the end of the loop sentance = \"user: {} - provider: {} - consumer: {} - {}\" if to_update : if status : logger . info (( sentance + \" new data\" ) . format ( service . user , service . provider . name . name , service . consumer . name . name , service . description , count_new_data )) self . update_trigger ( service ) else : logger . info (( sentance + \" AN ERROR OCCURS \" ) . format ( service . user , service . provider . name . name , service . consumer . name . name , service . description )) else : logger . info (( sentance + \" nothing new\" ) . format ( service . user , service . provider . name . name , service . consumer . name . name , service . description )) else : self . stdout . write ( \"No trigger set by any user\" ) Le script est plus long de (vraiment) quelques lignes, mais le jeu en vaut la chandelle. Enfin : Reste plus qu'√† taper sa commande python manage . py fire_th And Just in case Une fois que vous aurez fini votre script, pour le tester, si vous tapez comme, votre serviteur, la commande ./ fire_th . py depuis le dossier management/commands, vous aurez une surprise au premier import mon_appli.whatelse pr√©sent dans votre script, vous indiquant que le module n'existe pas. Et effectivement, en se remettant les neurones √† leur place, on se rendra compte qu'on se devra de taper python manage . py fire_th depuis le folder contenant manage.py :P Conclusion: Une nouvelle fonctionnalit√© tout simple mais c'est de la simplicit√© que s'exprime toute la puissance de la chose ;) Hey pssssssssssttttttttt : Tous les commentaires sont les bienvenus.","tags":"Techno","url":"https://foxmask.net/post/2014/09/23/django-le-magic-system-ty-es-fou/"},{"title":"Debian et le \"Menu Principal\" perdu","text":"Je mets √ßa l√† au cas o√π ... Pour une raison qui m'√©chappe, je n'ai plus eu de menu \"Menu Principal\", accessible en principe depuis le menu \"Activit√©s\" > \"Applications\" Or sans ce dernier, pour rajouter des applications qui ne sont pas issues de package debian, au hasard, un √©diteur particulier, c'est peine perdue, obliger d'en passer par la ligne de commandes. Le S√©same vient du package debian \" alacarte \" apt-get install alacarte zavourez comme nom de package, c'est mn√©motechnique √† ... mourir... pas loin de nom √† la ik√©a :P et donc revoil√† le menu On est fin pr√™t pour remettre les applications de son choix dans le menu et via les Extensions , on retrouve son application dans le menu en haut de votre desktop","tags":"Techno","url":"https://foxmask.net/post/2014/09/07/debian-et-le-menu-principal-perdu/"},{"title":"Django Form sous ses plus beaux atours","text":"Les forms django sont vraiment ind√©niablement tr√®s bien foutus. Par contre si on aime l'aspect brute on est servie ;) La mouvance √©tant √† ~~la fain√©antise~~ Twitter Bootstrap3, je rev√™ts les plus beaux atours pour mes formulaires. Pour l'exemple, voici une liste d√©roulante customis√©e L√† je me la joue cool parce que pas de donn√©es d'une table li√©e √† rajouter :P un bout du forms.py breakfast_lunch_diner = forms . ChoiceField ( widget = forms . Select ( attrs = { 'class' : 'form-control' })) Partout dans les forms on peut rajouter une classe qui sera g√©r√©e par Bootstrap3 ais√©ment comme par exemple rajouter un type email pour que les mobiles switchent directement le clavier quand votre petit doigt s√©lectionnera le champ de saisie \"courriel\". customer_mail = forms . EmailField ( widget = forms . TextInput ( { 'class' : 'form-control' , 'type' : 'email' })) Tout va bien dans le meilleurs des mondes tant que je n'ai pas √† me farcir l'habillage des listes d√©roulantes issues de tables li√©es par une FK. L√† c'est une autre histoire... ou pas ;) J'ai creus√© la toile, cette in√©puisable ressource, (merci les arraign√©es ;) √† la recherche du truc qui ferait la diff√©rence. On m'avait sugger√© form-crispy et autre joyeuset√© un peu too much pour le peu que j'avais √† en tirer, et la solution est viendu de StackOverFlow Dans l'init du Form on rajoute tout simplement : def __init__ ( self , * args , ** kwargs ): super ( JeSuisSupperEnForm , self ) . __init__ ( * args , ** kwargs ) self . fields [ 'mon_field_cette_fk' ] . widget . attrs [ 'class' ] = 'form-control' Et hop roule ma poule","tags":"Techno","url":"https://foxmask.net/post/2014/07/15/django-form-sous-ses-plus-beaux-atours/"},{"title":"Importer un dump Oracle sans l'exporter physiquement avant","text":"Donc s'il vous arrive (comme bibi) d'√™tre short en place disque pour faire vos backups oracle pour ensuite importer le(s) sch√©ma(s), une solution ultime subsiste, quand m√™me, pour nous autre \"pauvres\" petits \"exportateurs\" de donn√©es :P Comment √ßa ? La subtilit√© r√©side dans la possibilit√© d'Oracle √† importer les donn√©es dans le sch√©ma cible, via un DBLink . Pas croyable hein ? let's voyons this right maintenant: Creation du DBLink sur le serveur \"cible\" : CREATE DATABASE LINK chicago CONNECT TO admin1 IDENTIFIED BY windy USING 'CHI' ; Ici, le nom du schema \"source\" est admin1 , le nom du DBLink chicago. Ensuite vient l'import lui m√™me sur le serveur \"cible\" impdp admin2 / market TABLES = customers , sales DIRECTORY = dpump1 NETWORK_LINK = chicago ici l'import (la commande impdp) demande √† oracle de se connecter avec le user admin2, d'importer 2 tables, provenant du sch√©ma se cachant derri√®re le DBLink \"chicago\" Oracle exportera donc admin1, sans stocker le dump dans un fichier physique , depuis le serveur nomm√© \"CHI\" (ou l'alias qui est d√©fini dans le tnsnames.ora de votre serveur oracle), puis l'importera localement dans le schema admin2 et le tour est jou√© ;) L'int√©ret est que je n'aurai pas √† exporter mes centaines de giga sur un serveur sans place disque (ou pas assez) pour stocker le dump puis le transferer sur le serveur cible et l'importer. L√†, tout se fait d'une traite. Si on a plusieurs sch√©mas, il faut que le user du dblink ait les droits d'y acc√©der sur la source. Si c'est le cas, ensuite on peut faire : impdp admin2 / market SCHEMAS = schema1 , schema2 REMAP_SCHEMA = schema1 : mon_nouveau_schema1 , schema2 : mon_nouveau_schema2 DIRECTORY = dpump1 NETWORK_LINK = chicago et roule ma poule","tags":"Techno","url":"https://foxmask.net/post/2014/07/02/importer-un-dump-oracle-sans-lexporter-physiquement-avant/"},{"title":"Django Jeu, FormSet et match","text":"Le FormSets k√©zako ? Une extension d'un formulaire standard, d'un Forms quoi Il a plusieurs buts : il permet d'afficher dans un formulaire \"parent\", les donn√©es dans un (ou plusieurs) formulaire(s) enfant il permet d'enregistrer les donn√©es enfants ajout√©es, en m√™me temps que les donn√©es parentes Exemple concret : Des ent√™tes de facture et des lignes de facture, peuvent √™tre manipul√©es conjointement Je vais illustrer le pr√©sent sujet avec un bout de code tir√© tout droit d'un projet tout neuf dont j'ai parl√© par ici . L'exemple consistera √† afficher un \"Examen\" et les \"d√©tails\" qui l'ont compos√©. Dans un premier temps les models & formulaire parent Examinations & ExamensForm seuls se composent : du models.py class Examinations ( models . Model ): \"\"\" Examinations \"\"\" user = models . ForeignKey ( User ) examination_types = models . ForeignKey ( ExaminationTypes ) comments = models . TextField () date_examination = models . DateField () hour_examination = models . TimeField ( null = True ) created = models . DateTimeField ( auto_now_add = True ) modified = models . DateTimeField ( auto_now = True ) et du forms.py : class ExamsForm ( forms . ModelForm ): \"\"\" Exams Form \"\"\" # to \" suit \" the HTML textearea comments = forms . CharField ( widget = forms . Textarea ( { 'class' : 'form-control' , 'rows' : '3' })) date_examination = forms . DateField ( widget = forms . TextInput ( attrs = { 'class' : 'form-control' })) hour_examination = forms . TimeField ( widget = forms . TextInput ( attrs = { 'class' : 'form-control' })) def save ( self , user = None ): self . myobject = super ( ExamsForm , self ) . save ( commit = False ) self . myobject . user = user self . myobject . save () class Meta : model = Examinations fields = [ 'examination_types' , 'comments' , 'date_examination' , 'hour_examination' ] exclude = ( 'user' ,) C'est un formulaire tout ce qu'il y a de plus classique qui sera affich√©, je vous dispense donc de la CBV pour le g√©rer. S'ajoute alors les models & formulaire \"enfant\" ExaminationDetails & ExamDetailsForm suivants : models.py : class ExaminationDetails ( models . Model ): \"\"\" ExaminationDetails \"\"\" examination = models . ForeignKey ( Examinations ) title = models . CharField ( max_length = 255 ) value = models . DecimalField ( max_digits = 15 , decimal_places = 5 ) created = models . DateTimeField ( auto_now_add = True ) modified = models . DateTimeField ( auto_now = True ) class Meta : verbose_name = 'Examination Details' verbose_name_plural = 'Examination Details' def show ( self ): return \"Examination Details %s %s %s %s %s \" % ( self . examination_id , self . title , self . value , self . created , self . modified ) def __unicode__ ( self ): return \" %s \" % ( self . title ) Et son petit forms.py : class ExamDetailsForm ( forms . ModelForm ): \"\"\" Details of Exams Form \"\"\" title = forms . CharField ( widget = forms . TextInput ( attrs = { 'class' : 'form-control' })) value = forms . DecimalField ( widget = forms . TextInput ( attrs = { 'class' : 'form-control' , 'type' : 'number' })) class Meta : model = ExaminationDetails fields = [ 'title' , 'value' ] Encore une fois, rien de transcendant l√† dedans, c'est bateau. Cot√© doc, sur formset , django nous montre comment on produit des formsets d'un form unique. Me voil√† frais avec mes 2 forms distincts :P D'autant que pour corser le tout, j'utilise des ModelForms, pas de simple Forms. En creusant d'avantage, on trouve le s√©same via django.forms.models.inlineformset_factory qui traite de ModelForms. Ce qui ceci donne dans mon forms.py : # a formset based on the model of the Parent and Child + 2 new empty extra lines ExamDetailsFormSet = inlineformset_factory ( Examinations , ExaminationDetails , extra = 2 ) Et oui mon bon monsieur, ma bonne dame, ca tient bien en UNE ligne. Ici j'indique √† la factory inlineformset, les 2 models qui m'interessent en commen√ßant par le parent et continuant par l'enfant (tout deux finalement li√©s par ma FK qu'on a vu dans le model plus haut) A pr√©sent je dispose d'un FormSet avec Parent et Enfant. Toute la smala va se retrouver dans le m√™me formulaire sous vos yeux √©bahis. Maintenant que sont li√©s les models et que sont d√©finis les forms , cot√© views.py reste √† exploiter le ExamDetailsFormSet . Mais comme je suis \"jusqueboutiste\", je ne me contenterai pas d'une simple fonction pour g√©rer celui-ci, j'utilise une CreateView , cette CBV donne ceci (explications de texte plus bas): class ExamsCreateView ( CreateView ): \"\"\" to Create Exams \"\"\" form_class = ExamsForm template_name = \"dj_diabetes/exams_form.html\" def form_valid ( self , form ): if self . request . POST : formset = ExamDetailsFormSet ( self . request . POST , instance = self . object ) if formset . is_valid (): self . object = form . save ( user = self . request . user ) formset . instance = self . object formset . save () else : formset = ExamDetailsFormSet ( instance = self . object ) return HttpResponseRedirect ( reverse ( 'exams' )) def get_context_data ( self , ** kw ): data = Examinations . objects . all () . order_by ( '-created' ) #paginator vars record_per_page = 15 page = self . request . GET . get ( 'page' ) # paginator call data = page_it ( data , record_per_page , page ) context = super ( ExamsCreateView , self ) . get_context_data ( ** kw ) context [ 'action' ] = 'add_exam' context [ 'data' ] = data if self . request . POST : context [ 'examsdetails_form' ] = ExamDetailsFormSet ( self . request . POST ) else : context [ 'examsdetails_form' ] = ExamDetailsFormSet ( instance = self . object ) return context dans le template on obtient enfin ceci (attention c'est verbeux, mais zavez un snapshot plus bas ;) : { % extends \"base.html\" % } { % load url from future % } { % load i18n % } { % block title % }{ % trans \"My Glucose Manager\" % }{ % endblock % } { % block content % } { % csrf_token % } {{ form . non_field_errors }} { % if action = 'add_exam' % } { % trans \"Exams\" % } { % else % } { % trans 'Edition of the examination' % } { % endif % } { % if form . examination_types . errors % } {{ form . examination_types . errors }} { % endif % } { % trans \"Type\" % } {{ form . examination_types }} { % if form . comments . errors % } {{ form . comments . errors }} { % endif % } { % trans \"Comments\" % } {{ form . comments }} { % if form . date_examination . errors % } {{ form . date_examination . errors }} { % endif % } { % trans \"Date\" % } {{ form . date_examination }} { % if form . hour_examination . errors % } {{ form . hour_examination . errors }} { % endif % } { % trans \"Hour\" % } {{ form . hour_examination }} { % trans \"Examinations details\" % } {{ examsdetails_form . management_form }} { % trans \"Title\" % } { % trans \"Value\" % } { % for form in examsdetails_form % } {{ form . id }} { % if form . title . errors % } {{ form . title . errors }} { % endif % } {{ form . title }} { % if form . value . errors % } {{ form . value . errors }} { % endif % } {{ form . value }} { % endfor % } { % if action = 'add_exam' % } { % trans \"Add it\" % } { % else % } { % trans \"Edit it\" % } { % endif % } { % trans \"Last examinations\" % } { % trans \"Date\" % } { % trans \"Type\" % } { % trans \"Comments\" % } { % trans \"Actions\" % } { % for line in data % } {{ line . date_examination }} {{ line . examination_types . title }} {{ line . comments }} { % endfor % } { % if data . has_previous % } { % trans \"previous\" % } { % endif % } { % blocktrans with page_number = data . number total_of_pages = data . paginator . num_pages % } Page {{ page_number }} of {{ total_of_pages }} { % endblocktrans % } { % if data . has_next % } { % trans \"next\" % } { % endif % } { % endblock % } { % block extrajs % } //< ! [ CDATA [ $ ( function (){ $ ( '#id_date_examination' ) . datepicker ({ format : 'yyyy-mm-dd' }); }); // ]] > { % endblock % } Explications de texte : Le lecteur averti aura remarqu√© que ma CBV ne se contente pas que d'afficher un formulaire, puisque dans le \"context\" (modifi√© dans la methode get_context_data), j'ai rajout√© la liste de tous les examens (en les paginant par dessus le march√©, je vous ai dit \"jusqueboutiste\"). La page contient donc un formulaire de saisie + la liste compl√®te des examens. Tout cela donne ce rendu : Voil√† j'esp√®re que le triplet FormSet de ModelForm et CBV ne sera plus un secret pour vous ;) Edit le 2/7 @ 10:30: on m'a gentiment sugg√©r√© un truc pour all√©ger le code des forms. Faire un form(self.request.POST or None) ce qui transforme ceci def form_valid ( self , form ): if self . request . POST : formset = ExamDetailsFormSet ( self . request . POST , instance = self . object ) if formset . is_valid (): self . object = form . save ( user = self . request . user ) formset . instance = self . object formset . save () else : formset = ExamDetailsFormSet ( instance = self . object ) return HttpResponseRedirect ( reverse ( 'exams' )) en cela def form_valid ( self , form ): formset = ExamDetailsFormSet (( self . request . POST or None ), instance = self . object ) if formset . is_valid (): self . object = form . save ( user = self . request . user ) formset . instance = self . object formset . save () return HttpResponseRedirect ( reverse ( 'exams' )) ca evite tous les tests sur if self.request.POST et instancie le form une fois quelque soit le cas de figure.","tags":"Techno","url":"https://foxmask.net/post/2014/07/01/django-formset-et-match/"},{"title":"G√©rer son Diab√®te, il y a une appli web pour √ßa","text":"En ce weekend de merde (pourri pluvieux) et envie de faire l'ermite, je me suis occup√© en rendant un service sur une migration WordPress, et ai produit une application pour g√©rer son quotidien de diab√©tique. Non que je ne le sois, mais je m'ennuyais et ai demand√© √† un pote : \"si tu avais du temps, quelles applications d√©velopperais tu ?\" Les r√©ponses furent : un client IRC web avec des fonctions que je tairais pour l'heure, une application pour enregistrer des m√©triques du quotidien de diab√©tiques A partir du MCD qu'il m'a fourni j'ai produis \" dj-diabetes \" avec Django et bootstrap3 . Le but √©tant de savoir, pour le pote, √† quel moment il est le \"mieux\". Que √ßa soit apr√®s un exercice, apr√®s ou avant un repas etc. Avec ces informations, il peut voir le doc' avec des infos pr√©cises et affiner le traitement. En image √ßa donne √ßa Apart√© : Techniquement, aux amis poneys, j'ai d√ª m'√©clater la t√™te contre les inlineformset_factory dans des CBV avec des ModelForm. Je referai un billet sur les formset plus tard, l√† c'√©tait juste pour pr√©senter l'appli elle m√™me ;) ps : l'appli est en constante √©volution puisque tout fraiche. Si vous l'utilisez/testez et trouvez des soucis ouvrez un ticket afin que je regarde ce qu'il en est.","tags":"Techno","url":"https://foxmask.net/post/2014/06/29/gerer-son-diabete-il-y-a-une-appli-web-pour-ca/"},{"title":"Debian Network Manager et Eth0 non g√©r√©e","text":"Quand on est une faignasse qui n'a pas envie de se plonger dans les arcanes des fichiers de config pour g√©rer l'acc√®s r√©seau et qu'on n'a pas envie de faire √ßa sur sa workstation, on a un truc qui r√©pond au besoin avec le NetworkManager disponible sous gnome. En g√©n√©ral ce dernier est install√© mais ne permet pas de configurer sa carte r√©seau depuis gnome. On a g√©n√©ralement ceci : ](/static/2014/06/lan_ko.png) Du coup on est dans l'incapacit√© de g√©rer l'interface r√©seau de son choix ... En cherchant tr√®s tr√®s loin dans la doc on trouve une ligne de configuration √† switcher de valeur. On editera donc le fichier /etc/NetworkManager/NetworkManager.conf dans lequel on changera le false en true [ifupdown] managed = true Ensuite on relance : # /etc/init.d/network-manager restart [ ok ] Stopping network connection manager: NetworkManager. [ ok ] Starting network connection manager: NetworkManager. Et on obtient enfin ceci : Ce qui nous permet √† pr√©sent d'ouvrir la config de l'interface elle-m√™me ! Un dernier tips en passant, si vous tripotez votre config r√©seau via l'interface graphique, mettez de cot√© le fichier /etc/resolv.conf , afin de ne pas perdre votre r√©solution DNS au cas o√π vous vous tromperiez dans votre conf r√©seau. D√®s que vous appliquez vos param√®tres, le fichier /etc/resolv.conf est dynamiquement reg√©n√©r√© . Dans un prochain billet, la config d'un acc√®s avec OpenVPN (o√π j'aborderai de nouveau ces subtilit√©s) par exemple si √ßa vous botte.","tags":"Techno","url":"https://foxmask.net/post/2014/06/03/debian-network-manager-et-eth0-non-geree/"},{"title":"Django Trigger Happy 0.9.0 is l√† et Python 3.4.0","text":"this article is also available in english here Intro : Trigger Happy est un project (ecrit en python avec django ) opensource qui a pour but d'√™tre une alternative libre de IFTTT.com . Trigger Happy peut √™tre d√©fini comme un micro ESB . And here we go (again:) : Il y a 2 mois je publiais la derni√®re version \"uniquement\" compatible python 2.7.x Depuis la sortie de Python 3.4.0 et quelques int√©ressantes fonctionnalit√©s (que j'essaye encore d'exploiter pour am√©liorer Trigger Happy), j'ai d√©cid√© que le moment de sauter le pas vers Python 3 √©tait venu avec Django Trigger Happy. C'est maintenant chose faite. Apr√®s 2 mois √† creuser si tous les services que j'utilisais √©taient compatibles, j'ai fini par publier la version 0.9.0 . Donc dans cette version, peu de chose du core ont chang√© (quasiment rien en fait). J'ai essentiellement consolid√© le code existant pour qu'il soit utilisable avec Python 3.4.x et les lib tierces pour chaque service que nous souhaitons utiliser comme Evernote , Pocket , Readability . Actuellement, seul Pocket fourni une version installable pour Python 3 version depuis la command pip Evernote fourni aussi une version pour Python 3 mais seulement depuis github , car aucune version finale et officielle n'existe sur Pypi, on doit donc l'installer √† la main ce qui n'est pas super pratique comparer √† pip. Pour readability ca devrait √™tre dispo assez vite . Tout ceci justifie le choix de permuter (de Evernote √† Pocket) le service par d√©faut utilis√© par Trigger Happy pour stocker vos news (par exemple ou tout autre chose). Pour ce qui est de la partie front/web, j'ai migr√© de Bootstrap 2 √† 3 et ajout√© quelques petites choses pour que l'appli soit plus facile d'utilisation. Enfin tout n'a donc pas √©t√© sans mal mais √ßa marche bien √† pr√©sent. Read the docs : J'ai enfin publi√© la doc sur readthedocs . Au cas o√π ;) Roadmap : Et pour la suite ? Am√©liorer Trigger Happy pour qu'il soit plus rapide en utilisant asyncio ou un √©quivalent Am√©liorer l'UI de Trigger Happy. Quand vous regardez IFTTT et Trigger Happy, vous pouvez facilement imaginer la somme de travail √† accomplir pour atteindre le m√™me r√©sultat. Mais comme je ne suis un designer je fais des choses simple, mais des choses qui marchent Nouveau(x) service(s) ? : Il y a quelque mois j'avais √©mis un sondage pour savoir quel service vous aimeriez le plus utilisez avec Trigger Happy, et le gagnant fut Twitter, mais je n'√©tais pas tr√®s motiv√© pour m'y mettre. Je pense qu'√† pr√©sent je vais pouvoir y retourner ;) D'autres id√©es dans votre propre liste ? Vous pouvez aussi forker le projet , contribuer, reporter des bugs edit: dans le pipe j'ai d√©but√© une lib pour traiter des imports/exports OPML","tags":"Techno","url":"https://foxmask.net/post/2014/05/14/django-trigger-happy-0-9-0-is-la-python-3-4-0/"},{"title":"Django Trigger Happy 0.9.0 is out and Python 3.4.0","text":"cet article est aussi dispo en fran√ßais ici Intro : Trigger Happy is a project (written in python with django ) which aims to be a free and opensource alternative to IFTTT.com . Trigger Happy can be defined as a micro ESB . And here we go (again:) : 2 months ago I published the version 0.8.3 which was the last release working only with Python 2.7.x. Since the release of Python 3.4.0 and some very interesting features (that I still try to exploit to improve Trigger Happy), I decided that was the moment to dive into Python 3 with Django Trigger Happy. It's now a thing done. After 2 month to dig if all the existing services I used were compatible, I finished by releasing a 0.9.0 . So in the version, a few things changed in the core (almost nothing in fact). I just consolidated the most part of the code to be able to be used with python 3.4.x and third party lib for each service we would like to use like Evernote , Pocket , Readability . Actually just Pocket provides a Python 3 version installable from pip command. Evernote provides also a Python 3 version but only from github , as no final official release from Pypi exists yet, we have to install it by hand, which is not very pretty simple compared to pip. For readability It should be Ok for python 3 too, soon . All of this justify the choice to switch from Evernote to Pocket as the default service used by Trigger Happy to store your news/stuff/whatever. About the Front part, I migrated from Bootstrap 2 to 3 and add some little things to be easier to use. All was not painless but now everything works fine (again;) Read the docs : I also pushed the doc on readthedocs . Roadmap : What Do I plan now ? Improving Trigger Happy to be faster by using asyncio or equivalent Improving the UI of Trigger Happy. When you see IFTTT and Trigger Happy, you can imagine the work to do to reach the same UX. But as i'm not a designer I do simple things, but things that work New service(s) ? : Some months ago I did a poll to know which website/service you will use with Trigger Happy, the winner was Twitter, but I was not motivated enough to do it. I think the time has come to try again to manage it Some ideas from your wishlist ? feel free to fork it , contribute, report bug","tags":"Techno","url":"https://foxmask.net/post/2014/05/14/django-trigger-happy-0-9-0-is-out-python-3-4-0/"},{"title":"Django filtrer les donn√©es d'une ListView avec Q()","text":"J'√©tais parti pour vous faire un article funny avec James Bond, Monneypenny, et Q, mais restons soft ;) Donc dans cet article je vais aborder une fonction toute \"simple\" et ultra pratique : Lookup with Q Objects . Le but de cette fonction est de g√©rer des requ√™tes SQL pour produire quelque chose du genre : SELECT col1 , col2 FROM table1 WHERE user = 'foobar' AND ( col1 = '2' OR col2 = '2' ); C'est la partie apr√®s le AND qui est g√©r√©e par Q() Ca serait simple si on se contentait d'utiliser cela dans une FBV en r√©cup√©rant le param√®tre nomm√© dans urls.py, mais l√†, chez bibi, c'est dans une CBV ListView que √ßa va servir, donc un poil plus subtile que √ßa. Dans la version pr√©c√©dente ma ListView avait cette t√™te : class TriggerListView ( ListView ): context_object_name = \"triggers_list\" queryset = TriggerService . objects . all () template_name = \"home.html\" paginate_by = 7 def get_queryset ( self ): # get the Trigger of the connected user if self . request . user . is_authenticated (): return self . queryset . filter ( user = self . request . user ) . order_by ( '-date_created' ) # otherwise return nothing return TriggerService . objects . none () L√†, aucun filtrage des donn√©es depuis le template, affichage pour et simple de toutes les donn√©es de l'utilisateur connect√©. L'ajout du filtrage va donc toucher les √©l√©ments suivants : views.py pour l'ajout des donn√©es peuplant la liste depuis get_context_data de la ListView le template pour afficher la liste des valeurs permettant le filtrage urls.py pour ajouter le mapping url/views views.py pour ajouter la logique de traitement de filtrage dans la methode get_queryset de la ListView 1 - Ajout des donn√©es peuplant la liste du point 1 class TriggerListView ( ListView ): \"\"\" list of Triggers the list can be filtered by service \"\"\" context_object_name = \"triggers_list\" queryset = TriggerService . objects . all () template_name = \"home.html\" paginate_by = 7 def get_context_data ( self , ** kw ): \"\"\" List of triggers activated by the user \"\"\" if self . request . user . is_authenticated (): context [ 'trigger_filter_by' ] = UserService . objects . filter ( user = self . request . user ) return context 2 - Template, affichage de la liste pour filtrage { % for trigger_filter in trigger_filter_by % } {{ trigger_filter . name | service_readable }} { % endfor % } 3 - urls.py url ( r '&#94;th/$' , TriggerListView . as_view (), name = 'base' ), #ajout√© pour gerer le filtrage url ( r '&#94;th/trigger/by/(?P[a-zA-Z]+)$' , TriggerListView . as_view (), name = 'trigger_filter_by' ), 4 - Logique de traitement du filtrage class TriggerListView ( ListView ): \"\"\" list of Triggers the list can be filtered by service \"\"\" context_object_name = \"triggers_list\" queryset = TriggerService . objects . all () template_name = \"home.html\" paginate_by = 7 def get_queryset ( self ): trigger_filter_by = None # get the Trigger of the connected user if self . request . user . is_authenticated (): # if the user selected a filter, get its ID if 'trigger_filter_by' in self . kwargs : user_service = UserService . objects . filter ( user = self . request . user , name = self . kwargs [ 'trigger_filter_by' ]) trigger_filter_by = user_service [ 0 ] . id # no filter selected : display all if trigger_filter_by is None : return self . queryset . filter ( user = self . request . user ) . order_by ( '-date_created' ) # filter selected : display all related trigger else : # here the queryset will do : # 1) get trigger of the connected user AND # 2) get the triggers where the provider OR the consumer match # the selected service return self . queryset . filter ( user = self . request . user ) . filter ( Q ( provider = trigger_filter_by ) | Q ( consumer = trigger_filter_by )) . order_by ( '-date_created' ) # otherwise return nothing when user is not connected return TriggerService . objects . none () Ainsi donc ici on voit o√π entre en compte le Q objects : . filter ( Q ( provider = trigger_filter_by ) | Q ( consumer = trigger_filter_by ) ceci produit le \"OR\" attendu puisque je souhaite bel et bien TOUS les triggers de l'utilisateur connect√© ET soit les provider soit les consumer contenant la valeur recherch√©e dans la liste d√©roulante. Avant d'arriver √† cette solution, je cherchais √† ajouter un Form √† ListView pour produire une dropdown (un select html)... mais vu la complexit√© du code pour g√©rer l'ajout du form au context ou pas, je me suis rabattu sur une simple liste html, et hop Q() √† la rescousse ;) Tout est dans la \"Simplicity, Efficiency, Beauty\" ;) si besoin, pour les curieux, Le code source original de cette Views.py sur Github","tags":"Techno","url":"https://foxmask.net/post/2014/05/06/django-filtrer-listview/"},{"title":"export DISPLAY from a VMWare virtual machine","text":"I have to install an Oracle server on a remote machine. And ... It's not my first time :P As we need to use a GUI Wizard, usually we do an export of the DISPLAY to a computer which can handle the X session and then everything works great... Until now. I have 2 virtual machine, one with VMWare one with another VM system (KVM or XEN ; i dont remember ;) both with a CentOS 6.5 with SELinux disable and no firewalling setup Both have a role of oracle server. My installation on the \"non-VMWare\" worked fine with the usual process : xhost + new_server ssh -X -Y login@new_server export DISPLAY = workstation_ip:0.0 cd /u01/app/oracle/database ./runInstaller and I received the wizard on my workstation. Now, with the VMWare Virtual machine, the same process fails when starting anything that require a X, even xclock for example. So I compared the ssh config of the both server, to check if the forwarding is set to on, but are the same. So I am asking myself if there is no config to set up on the VMWare virtual machine to permit the X session ?","tags":"Techno","url":"https://foxmask.net/post/2014/04/17/export-display-from-vmware/"},{"title":"Trigger Happy, l'avenir en bleu","text":"Hey ! Suite √† la publication de mon projet Trigger Happy , permettant √† tout √† chacun de se g√©rer l'agr√©gation des flux d'informations avec son client favori (Evernote, Pocket, ReadItLater, Feedly, Wallabag ), un g√©ant du web m'a contact√© pour que je le rejoigne et permette d'inclure cette fonctionnalit√© √† plus grand √©chelle, pour ses clients/utilisateurs. Ainsi ces derniers pourront peupler de news, leur mur, sans lever le petit doigt. Pour le coup, Feedly va prendre un grand coup en pleine t√™te et Facebook va pouvoir grapiller les utilisateurs de Google Reader rest√©s sur le carreau ou d√©√ßus des alternatives existantes. Dans le m√™me temps je vais rejoindre Nicosomb , parti vers ces m√™mes cieux ! En effet nous avions d√©j√† √©chang√© sur nos projets respectifs qui s'interconnecteraient parfaitement avec l'API de la v2 . Ca sera l'occasion de concr√©tiser tout cela ensemble. Trigger Happy works with @Pocket . Next step: the same thing with #poche http://t.co/Xju8WGOuA8 /cc @foxmask ‚Äî wallabag (@wallabagapp) 3 D√©cembre 2013","tags":"Techno","url":"https://foxmask.net/post/2014/04/01/trigger-happy-avenir-en-bleu/"},{"title":"DjangoCong.euh 2014 rencontrez Sam et Max","text":"Intro: Apr√®s m'√™tre lanc√© dans l'univers Python et Django r√©cemment, comme j'appr√©cie √©norm√©ment la communaut√©, et afin de lui rendre tout ce qu'elle m'apporte, voici le premier √©v√®nement que j'organise. En d√©tails : Devenez Ludovisiens pour la DjangoCong.euh 2014.4.1 qui se tiendra √† \" Mon Vieil Ami \" ( M√©tro Pont Marie ) le 31 avril 2014. Dans un cadre tr√®s touristique o√π tout √† chacun pourra √† loisir se laisser allez √† √©couter parler de poneys dans un programme des plus dense . Et last but not least, en Guest Star Sam et Max nous parleront de leur exp√©rience avec notre Poney favori. Tarif ? Gratuit ! Sponsors ? plein ! : l√† , l√† , l√† , l√† , et enfin l√†","tags":"Techno","url":"https://foxmask.net/post/2014/04/01/djangocong-euh-2014-rencontrez-sametmax/"},{"title":"extraire une portion d'une archive distante sans la t√©l√©charger","text":"Bon c'est certes pas nouveau mais √† force de la chercher, alors que je m'en servais √† un temps que les moins de 20 ans ne peuvent pas connaitre, je la mets l√†, c'est pas pour emporter c'est pour manger tout de suite. Le truc ici va consister √† √™tre une partie d'une archive sans avoir √† la t√©l√©charger. On fait comme ca : wget -O - url | tar -xvzf - [ dossier | path/vers/fichier ] je vous laisse jouer sur les options de tar mais l'id√©e est l√† ;) genre √ßa fait quelques ann√©es lumi√®res que je n'ai pas vu la t√™te d'une archive du kernel linux de pr√®s, let's go dancing : wget -O - ftp://ftp.kernel.org/pub/linux/kernel/v3.x/testing/linux-3.11-rc6.tar.gz | tar tvzf - --2014-03-25 01 :42:05-- ftp://ftp.kernel.org/pub/linux/kernel/v3.x/testing/linux-3.11-rc6.tar.gz = > ¬´-¬ª R√©solution de ftp.kernel.org ( ftp.kernel.org ) ... 198 .145.20.140, 149 .20.4.69, 199 .204.44.194 Connexion vers ftp.kernel.org ( ftp.kernel.org ) | 198 .145.20.140 | :21...connect√©. Ouverture de session en anonymous...Session √©tablie! == > SYST ... compl√©t√©. == > PWD ... compl√©t√©. == > TYPE I ... compl√©t√©. == > CWD ( 1 ) /pub/linux/kernel/v3.x/testing ... compl√©t√©. == > SIZE linux-3.11-rc6.tar.gz ... 113162100 == > PASV ... compl√©t√©. == > RETR linux-3.11-rc6.tar.gz ... compl√©t√©. Taille: 113162100 ( 108M ) ( non certifi√©e ) 0 % [ ] 37 648 183K/s drwxrwxr-x root/root 0 2013 -08-18 23 :36 linux-3.11-rc6/ -rw-rw-r-- root/root 1097 2013 -08-18 23 :36 linux-3.11-rc6/.gitignore -rw-rw-r-- root/root 4465 2013 -08-18 23 :36 linux-3.11-rc6/.mailmap -rw-rw-r-- root/root 18693 2013 -08-18 23 :36 linux-3.11-rc6/COPYING -rw-rw-r-- root/root 95317 2013 -08-18 23 :36 linux-3.11-rc6/CREDITS drwxrwxr-x root/root 0 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ -rw-rw-r-- root/root 107 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/.gitignore -rw-rw-r-- root/root 16957 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/00-INDEX drwxrwxr-x root/root 0 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/ -rw-rw-r-- root/root 3284 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/README drwxrwxr-x root/root 0 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/obsolete/ -rw-rw-r-- root/root 248 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/obsolete/proc-sys-vm-nr_pdflush_threads -rw-rw-r-- root/root 1296 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/obsolete/sysfs-bus-usb -rw-rw-r-- root/root 1063 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/obsolete/sysfs-class-rfkill -rw-rw-r-- root/root 2820 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/obsolete/sysfs-driver-hid-roccat-koneplus -rw-rw-r-- root/root 3657 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/obsolete/sysfs-driver-hid-roccat-kovaplus -rw-rw-r-- root/root 3767 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/obsolete/sysfs-driver-hid-roccat-pyra 0 % [ ] 79 640 183K/s drwxrwxr-x root/root 0 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/removed/ -rw-rw-r-- root/root 471 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/removed/devfs -rw-rw-r-- root/root 664 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/removed/dv1394 -rw-rw-r-- root/root 310 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/removed/ip_queue -rw-rw-r-- root/root 449 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/removed/o2cb -rw-rw-r-- root/root 663 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/removed/raw1394 -rw-rw-r-- root/root 751 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/removed/video1394 drwxrwxr-x root/root 0 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/stable/ -rw-rw-r-- root/root 4140 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/stable/firewire-cdev Vous pouvez faire varier les plaisirs avec un grep au bout evidement, genre je ne veux que ce qui cause crypto : wget -O - ftp://ftp.kernel.org/pub/linux/kernel/v3.x/testing/linux-3.11-rc6.tar.gz | tar tvzf - | grep crypto --2014-03-25 01 :50:56-- ftp://ftp.kernel.org/pub/linux/kernel/v3.x/testing/linux-3.11-rc6.tar.gz = > ¬´-¬ª R√©solution de ftp.kernel.org ( ftp.kernel.org ) ... 199 .204.44.194, 198 .145.20.140, 149 .20.4.69 Connexion vers ftp.kernel.org ( ftp.kernel.org ) | 199 .204.44.194 | :21...connect√©. Ouverture de session en anonymous...Session √©tablie! == > SYST ... compl√©t√©. == > PWD ... compl√©t√©. == > TYPE I ... compl√©t√©. == > CWD ( 1 ) /pub/linux/kernel/v3.x/testing ... compl√©t√©. == > SIZE linux-3.11-rc6.tar.gz ... 113162100 == > PASV ... compl√©t√©. == > RETR linux-3.11-rc6.tar.gz ... compl√©t√©. Taille: 113162100 ( 108M ) ( non certifi√©e ) 0 % [ ] 41 992 166K/s -rw-rw-r-- root/root 1188 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/ABI/testing/debugfs-pfo-nx-crypto 1 % [ > ] 1 369 808 828K/s drwxrwxr-x root/root 0 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/crypto/ -rw-rw-r-- root/root 6569 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/crypto/api-intro.txt -rw-rw-r-- root/root 11244 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/crypto/asymmetric-keys.txt -rw-rw-r-- root/root 9347 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/crypto/async-tx-api.txt -rw-rw-r-- root/root 17200 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/crypto/descore-readme.txt drwxrwxr-x root/root 0 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/devicetree/bindings/crypto/ -rw-rw-r-- root/root 399 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/devicetree/bindings/crypto/fsl-imx-sahara.txt -rw-rw-r-- root/root 2784 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/devicetree/bindings/crypto/fsl-sec2.txt -rw-rw-r-- root/root 14202 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/devicetree/bindings/crypto/fsl-sec4.txt -rw-rw-r-- root/root 544 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/devicetree/bindings/crypto/mv_cesa.txt -rw-rw-r-- root/root 789 2013 -08-18 23 :36 linux-3.11-rc6/Documentation/devicetree/bindings/crypto/picochip-spacc.txt 2 % [== > ] 3 075 552 1 ,31M/s L'int√©r√™t est de ne pas encombrer son HDD de saloperies \"temporaires\" qui finissent toujours par durer. Voilou, je n'ai plus √† me demander \"boudiou c'est comment que je faisais dans l'ancien temps avec mes doigts\"","tags":"Techno","url":"https://foxmask.net/post/2014/03/27/extraire-une-portion-dune-archive-distante-sans-la-telecharger/"},{"title":"Trigger Happy, lire plus tard avec agilit√©","text":"En cette nouvelle ann√©e, voici venu un nouveau service g√©r√© par Trigger Happy , qu'est Readability apr√®s avoir int√©gr√©s Evernote et Pocket voici un extrait depuis Readability : et les donn√©es re√ßues de Readability dans Pocket : L'inverse fonctionne √©galement ;) Les Sources du projets sont par ici Les services existants : Ainsi donc cela fait 4 services g√©r√©s : RSS , Evernote , Pocket , Readability . Chacun d'eux pouvant √©changer des informations entre eux, 2 √† 2. Dans la foul√©e j'en ai profit√© pour sortir une nouvelle version de tous les services existants. Vous pouvez tous les retrouver sur Pypi En cadeau bonusque ; j'ai produit un module django-th-dummy que vous pouvez simplement cloner pour produire un nouveau module pour Trigger Happy les doigts dans le nez (atchoum!) :P Ce petit module vient en compl√©ment du billet pr√©c√©dant \" comment pondre son propre module \". Vous n'avez √† pr√©sent plus aucune excuse pour ne pas produire votre propre module et enfin prendre en main votre trousseau d'autorisation d'acc√®s entre vos services. (merci prism :P) Apart√© En passant je suis all√© voir Feedly.com (par curiosit√© pour trouver l'inspiration :) donc si vous utilisez feedly.com, il vous en coutera 5\\$/mois pour obtenir vos nouvelles automatiquement envoy√©es dans vos compte Evernote et Pocket ... Ca laisse songeur hein ? cloudWord et autres services similaires se r√©galent. 2014 le changement (si vous voulez vous en donner la peine/plaisir de l'installer pour le tester... c'est mon cadeau de ce nouvel an) ;)","tags":"Techno","url":"https://foxmask.net/post/2014/01/06/trigger-happy-lire-plus-tard-avec-agitilite/"},{"title":"Trigger Happy met un √©l√©phant dans sa poche","text":"Voil√† voil√†... Si vous d√©couvrez tout juste \"Trigger Happy\", en voici une introduction pr√©alable ;) Apr√®s avoir bien int√©gr√©s Evernote et RSS ensemble avec Trigger Happy , j'ai √©tendu le noyau du service afin de pouvoir √† pr√©sent int√©grer n'importe quel service. Le nouveau venu est Pocket . A pr√©sent donc tout ce qui vient des flux RSS de votre choix et/ou de votre compte Evernote se retrouvera dans votre Pocket et inversement tout ce qui est mis dans Pocket tombera dans le carnet de notes de votre choix dans Evernote. Voici en images le r√©sultat du passage de l'un √† l'autre dans les 2 sens. De Pocket √† Evernote ... depuis Pocket : Via la console ... ... arriv√©e dans Evernote l'inverse se produit √©galement bien √©videment.","tags":"Techno","url":"https://foxmask.net/post/2013/12/17/trigger-happy-met-un-elephant-dans-sa-poche/"},{"title":"Trigger Happy comment pondre son propre module","text":"Intro: Tout comme vous avez des outils pour produire vos sites avec des CMS ou Blogs, Trigger Happy entre dans une nouvelle cat√©gorie d'outils vous permettant de g√©rer cette fois ci l'interconnexion de services internet, en fonction d'√©v√®nements : sur la toile sur vos propres comptes \"internet\". Exemples : Quand une nouvelle est publi√©e sur un site web, je souhaite qu'elle soit stock√©e dans mon compte Evernote ou Pocket, publi√©e sur Twitter, son mur Facebook, etc... Quand j'ajoute une note dans mon compte Evernote, je souhaite l'envoyer dans mon compte Pocket Quand un tweet sur un sujet tombe, l'envoyer dans mon compte Pocket/Evernote/Whatever etc... Tout ceci est tr√®s largement inspir√© du tr√®s bon service IFTTT permettant ces √©changes. Ce qui va suivre va donc vous montrer (avec du code \"oui-oui\"), comment (vous) \"brancher\" un service de plus avec Trigger Happy et (presque) ne plus vous en pr√©occuper ;) Pr√©-requis: Ce qu'il vous faut poss√©der en premier lieu pour produire votre module Trigger-Happy : Connaitre Django un compte sur le service \"cible\" (c'est possible sans, mais c'est mieux avec, on va dire hein) et ... de l'huile de coude (encore que √ßa ne soit pas la mer √† boire apr√®s ce qui suit) Quick start: si vous √™tes press√©, le plus simple est encore de voir le README du module Trigger Happy : Pocket , de cloner le module et de changer partout \"pocket\" par \"montrucquidechireduponey\" partout ;) Architecturationesse: Le service que vous produirez se compose comme un module python. Pour bien visualiser les explications ci dessous je prendrai comme exemple django-th-pocket . L'architecturationnesseeee en elle-m√™me est identique √† celle d'un dossier d'un module django. Exemple : th_pocket / : forms . py __init__ . py models . py my_pocket . py th_pocket / templates / pocketform : wz - 1 - form . html wz - 3 - form . html th_pocket / templates / pocketprovider : edit_provider . html En d√©tails, fichier par fichier Pas de panique c'est court ! En premier le mod√®le : models.py # -*- coding: utf-8 -*- from django.db import models from django_th.models.services import Services class Pocket ( Services ): tag = models . CharField ( max_length = 80 , blank = True ) url = models . URLField ( max_length = 255 ) title = models . CharField ( max_length = 80 , blank = True ) tweet_id = models . CharField ( max_length = 80 , blank = True ) trigger = models . ForeignKey ( 'TriggerService' ) class Meta : app_label = 'django_th' ici 2 imp√©ratifs, 1) appeler le mod√®le service de Trigger Happy pour en h√©riter, soit : from django_th.models.services import Services class Pocket ( Services ): ... 2) pour la lisibilite de votre base mettre un app_label coh√©rent, soit : class Meta : app_label = 'django_th' En second, le formulaire : forms.py C'est un simple formulaire Django, un ModelForm banal, qui appellera le mod√®le susmentionn√© # -*- coding: utf-8 -*- from django import forms from th_pocket.models import Pocket class PocketForm ( forms . ModelForm ): \"\"\" for to handle Pocket service \"\"\" class Meta : model = Pocket fields = ( 'tag' ,) class PocketProviderForm ( PocketForm ): pass class PocketConsummerForm ( PocketForm ): pass Ici en sus, on fournit 2 classes suppl√©mentaires PocketProviderForm et PocketConsummerForm pour permettre lors de la cr√©ation d'un Trigger, de disposer du formulaire de Pocket, soit quand on d√©cide que Pocket est la source de donn√©es (donc le Provider) soit la cible (le Consummer) les Templates Ensuite arrive les templates situ√©s dans th_pocket/templates/pocketform. Ceux ci sont curieusement nomm√© wz-1-form.html et wz-3-form.html Explications : Trigger Happy cr√©√© ses triggers avec un Wizard constitu√© de 5 √©tapes. Etape 1 je choisi le service source (wz-0-form.html) Etape 2 j'indique o√π sont les informations du service choisi √©tape 1 (wz-1-form.html) Etape 3 je choisi le service cible (wz-2-form.html) Etape 4 je saisie les infos de stockage du service choisi √©tape 3 (wz-3-form.html) Etape 5 je nomme mon Trigger ;) (wz-4-form.html) Les 2 formulaires ici sont donc pour les √©tapes 2 et 4. Quasiment tous les services peuvent servir de source ou cible, d'o√π la pr√©sence de ces 2 formulaires. Ainsi en utilisant comme source de donn√©es Evernote j'appellerai le form th_evernote/templates/evernoteform/wz-1-form.html puis pour Pocket comme \"cible\" th_pocket/templates/pocketform/wz-3-form.html. Le dernier formulaire th_pocket/templates/pocketprovider/edit_provider.html permet quant √† lui de modifier des informations relatives √† Pocket pour le Trigger voulu. Chaque service disposant de son propre template pour la m√™me fonction. la Glue Tout ceci permet d'indiquer, via les formulaires du wizard, d'o√π vient l'information et o√π je la stocke. Mais il manque le plus important, la glue entre tout ceci. C'est l√† le le r√¥le du module my_pocket.py Avant d'√©ventuellement vous faire mal aux yeux, je vais vous √©crire en fran√ßais dans le texte, le but du module : Celui ci permet 3 choses : ) authentifier \"son\" Trigger Happy aupres de Pocket (via la methode auth) ) r√©cup√©rer les donn√©es depuis son compte Pocket, en l'occurence, les URL qu'on y aura mises (via la m√©thode process_data) ) enregistrer les donn√©es provenant d'un service 'Provider' (via la m√©thode save_data) # -*- coding: utf-8 -*- # django_th classes from django_th.services.services import ServicesMgr from django_th.models import UserService , ServicesActivated # django classes from django.conf import settings from django.core.urlresolvers import reverse from django.utils.log import getLogger # pocket API import pocket from pocket import Pocket import datetime import time \"\"\" handle process with pocket put the following in settings.py TH_POCKET = { 'consummer_key': 'abcdefghijklmnopqrstuvwxyz', } \"\"\" logger = getLogger ( 'django_th.trigger_happy' ) class ServicePocket ( ServicesMgr ): def process_data ( self , token , trigger_id , date_triggered ): \"\"\" get the data from the service \"\"\" datas = list () # pocket uses a timestamp date format date_triggered = int ( time . mktime ( datetime . datetime . timetuple ( date_triggered ))) if token is not None : pocket_instance = pocket . Pocket ( settings . TH_POCKET [ 'consummer_key' ], token ) # get the data from the last time the trigger have been started # timestamp form pockets = pocket_instance . get ( since = date_triggered ) if len ( pockets [ 0 ][ 'list' ]) > 0 : for pocket in pockets [ 0 ][ 'list' ] . values (): datas . append ({ 'tag' : '' , 'link' : pocket [ 'resolved_url' ], 'title' : pocket [ 'resolved_title' ], 'tweet_id' : 0 }) return datas def save_data ( self , token , trigger_id , ** data ): \"\"\" let's save the data \"\"\" from th_pocket.models import Pocket if token and len ( data [ 'link' ]) > 0 : # get the pocket data of this trigger trigger = Pocket . objects . get ( trigger_id = trigger_id ) pocket_instance = pocket . Pocket ( settings . TH_POCKET [ 'consummer_key' ], token ) title = '' title = ( data [ 'title' ] if 'title' in data else '' ) item_id = pocket_instance . add ( url = data [ 'link' ], title = title , tags = ( trigger . tag . lower ())) sentance = str ( 'pocket {} created' ) . format ( data [ 'link' ]) logger . debug ( sentance ) else : logger . critical ( \"no token provided for trigger ID %s and link %s \" , trigger_id , data [ 'link' ]) def auth ( self , request ): \"\"\" let's auth the user to the Service \"\"\" callbackUrl = 'http:// %s%s ' % ( request . get_host (), reverse ( 'pocket_callback' )) request_token = Pocket . get_request_token ( consumer_key = settings . TH_POCKET [ 'consummer_key' ], redirect_uri = callbackUrl ) # Save the request token information for later request . session [ 'request_token' ] = request_token # URL to redirect user to, to authorize your app auth_url = Pocket . get_auth_url ( code = request_token , redirect_uri = callbackUrl ) return auth_url def callback ( self , request ): \"\"\" Called from the Service when the user accept to activate it \"\"\" try : # finally we save the user auth token # As we already stored the object ServicesActivated # from the UserServiceCreateView now we update the same # object to the database so : # 1) we get the previous objet us = UserService . objects . get ( user = request . user , name = ServicesActivated . objects . get ( name = 'ServicePocket' )) # 2) then get the token access_token = Pocket . get_access_token ( consumer_key = settings . TH_POCKET [ 'consummer_key' ], code = request . session [ 'request_token' ]) us . token = access_token # 3) and save everything us . save () except KeyError : return '/' return 'pocket/callback.html' enfin comme on peut l'apercevoir dans le code, des appels √† la configuration du module ont lieu, voici donc √† quoi elle ressemblerait pour le module Trigger Happy Pocket: settings.py TH_SERVICES = ( ... 'th_pocket.my_pocket.ServicePocket' , ... ) INSTALLED_APPS = ( .... 'th_pocket' , ... ) # votre cl√© perso fournie par le service POCKET TH_POCKET = { 'consumer_key' : 'abcdefghijklmnopqrstuvwxyz' , } Si vous ne connaissez pas IFTTT et/ou pour les plus courageux qui se sont donn√©s la peine de lire jusque l√† et/ou les curieux de comprendre comme la machinerie tourne : Sous le capot : mais comment √ßa marche-t-il-tu-c'truc ? Il y a 2 parties: la premi√®re visible, vous permet de \"brancher\" vos services entre eux via un wizard de 5 pages et de voir quand tel ou tel service a fourni des nouvelles neuves ;) la seconde est un batch qui tourne √† intervalle r√©gulier qui va s'occuper d'aller r√©cup√©rer ses fameuses \"nouvelles neuves\" et les exp√©dier l√† o√π vous l'avez d√©cid√© Comment ce batch s'en sort, alors que je ne sais pas d'avance quels sont les services existants ? Ceci est g√©r√© par le biais de la variable TH_SERVICES, indiquant les services que VOUS avez ajout√© (tout comme vous mettez le nom de l'application \"django\" dans INSTALLED_APPS). Ensuite \"Trigger Happy\" va utiliser cette variable pour vous permettre de vous en servir dans le Wizard mentionn√© plus t√¥t. Ensuite le batch r√©cup√®re ces services activ√©s par vos soins, et utilise les \"Glues\" de chaque service existant my_pocket, my_evernote, etc, et joue son sc√©nario ! Voil√† ! A pr√©sent vous √™tes devenu maitre de vos donn√©es persos !","tags":"Techno","url":"https://foxmask.net/post/2013/12/09/trigger-happy-comment-pondre-son-propre-module/"},{"title":"Trigger Happy in ze Pocket","text":"Il y a peu, je lan√ßais un sondage , pour savoir, vers quel outil orient√© mes prochains d√©veloppements de \"Trigger Happy\" (le \"machin bidule truc chouette\" pour agr√©ger soit m√™me des news qui vous sied, de toute la toile, dans l'outil de votre choix, un truc comme le service IFTTT \"If This Then That\"). Malgr√© le r√©sultat √©crasant pour Twitter, que j'ai commenc√© √† traiter, je me suis occup√© de Pocket , un autre \"machin chose\" qui vous permet de stocker des URLs pour, plus tard, aller lire ce que vous avez glan√© dans le journ√©e et mis de cot√© parce que pas le temps de lire. Et l√†..., j'ai pu le tester avec (un certain) succ√®s (jouissif sisi:). A pr√©sent \"Trigger Happy\" sait : Lire un flux RSS et envoyer ce qu'il ramasse aussi bien sur votre compte Pocket que sur votre compte Evernote . Je vais tester que je puisse faire communiquer mes comptes Pocket et Evernote entre eux. Genre quand une URL tombe sur Pocket, l'ajouter √† son compte Evernote, ou quand une note est cr√©√©e, AVEC une URL, qu'elle soit ajout√©e √† son compte Pocket. Pocket ne g√©rant que des URLs, si on en n'a pas ; pas de bras pas de chocolat. Enfin vu l'√©tonnante facilit√© d'int√©gration de l'api Pocket, c'est le pied int√©gral, de voir le truc fonctionner du 1ier coup. (surtout quand on doit d√©clencher une demande d'autorisation de connexion √† son compte Pocket/Evernote depuis Trigger Happy et que _√ßa_ marche). Ceci est de bon augure pour int√©grer Poche , une version libre du sieur @nico_somb quand la v2 poindra le bout de son tarin ;)","tags":"Techno","url":"https://foxmask.net/post/2013/12/03/trigger-happy-in-ze-pocket/"},{"title":"SQL Full Table Scan vs Index - The Usual Suspects","text":"Hello, Voici un condens√© sur ma semaine de formation au Tuning Oracle ;) Un condens√© de conneries √† proscrire pour avoir un RDBMS qui marche mieux du point de vue du dev, tout du moins, parce que je n'irai pas saouler le dev avec des noms barbares sur la ram et tout le bataclan :) Ainsi voici une liste de requ√™tes SQL √† √©viter √† tout prix au risque de vous retrouver √† faire faire des full scan sur vos \"petites\" tables. Requ√™te moisie n¬∞1 SELECT * FROM salarie WHERE salaire * 12 > 6000 ici on voudrait les salari√©s ayant un salaire mensuel sup√©rieur √† 60000 par an. Or, quand bien m√™me salaire serait un index, Oracle partirait bel et bien en Full Scan. La preuve avec l'ex√©cution du \"plan d'ex√©cution\" aka \"explain plan\" qui vous le sortira la preuve par neuf ;) Pour que cette requ√™te fasse son effet avec l'index il faut l'√©crire ainsi : SELECT * FROM salarie WHERE salaire > 60000 / 12 Requ√™te moisie n¬∞2 Un autre exemple avec celle-ci SELECT * FROM table WHERE upper ( name ) = 'FOXMASK' les fonctions sur les index partent en full scan syst√©matiquement. Si vous tenez √† faire cela, il faut explicitement pondre un \"function index\" avec, lui aussi upper(name) dessus. CREATE INDEX func_upper ON TABLE ( UPPER ( name )); Requ√™te moisie n¬∞3 sur index non discriminant Autre cas de figure avec des index inutiles : Les tables avec des donn√©es dans une colonne insuffisamment discriminante provoquera un full scan car le moteur du RDBMS consid√©rera moins co√ªteux le full scan que l'index qui n'est pas assez discriminant. Par exemple une colonne \"sexe\" pour une table \"profil\". Encore une fois si vous tenez √† cet index, il faudra alors le d√©finir diff√©remment : en BITMAP et l√† √ßa \"d√©chirera\" :) Cadeau Bonusque en cadeau bonusque pour ceux ce que ca nain t√©reeserrait, 2 trucs : 1) Cas d'une requ√™te entre grosses tables : postulat : j'ai 2 tables une A, de quelques millions de lignes, une B de quelque milliers de lignes SELECT * FROM A , B where A . id = B . id AND B . status = 1 L√†, la requ√™te c'est de la bonne daube puisqu'on se farcie l'inner join pour chaque ID de B et A . Or l'ordre dans la clause where compte. Donc pour limiter le co√ªt de la requ√™te il faudrait la faire comme suit : SELECT * FROM A , B where B . status = 1 AND A . id = B . id √âvidemment, le moteur du RDBMS devrait trouver le plan d'ex√©cution le plus adapt√© mais des fois ce n'est pas le cas, et il faut en passer par des HINT. 2) Cas des requ√™tes retournant les m√™mes r√©sultats mais identifi√©es diff√©rentes : comment est-ce possible ? Ceci : SELECT * FROM A , B WHERE A . id = B . id AND B . status = 1 et Cela (nota j'ai d√ª shooter la coloration syntaxique qui corrigeait tout seul ma prose ;) select * from A, B where A.id=B.id and B.status = 1 donneront le m√™me r√©sultat c'est s√ªr mais consommera de la m√©moire 2 fois au lieu d'une car elles ne sont pas √©crites de la m√™me fa√ßon... le m√™me cas de figure arrivera avec des espaces en trop entre les verbes/instructions/tables/colonnes. Ok, √ßa sera le m√™me r√©sultat mais l'optimisation pour le moteur du RDBMS au lieu de chopper la requ√™te dans le cache, ira en coller une de plus dans le cache. Donc le co√ªt peut s'av√©rer monstrueux si chacun code comme il le veut dans son coin sa requ√™te SQL. Conclusion : alors oui j'ai parl√© de Oracle mais cot√© PostGreSQL et vraie RDBMS opensource, il y a fort √† parier que de tels comportements se produisent au d√©triment de l'application bien s√ªr.","tags":"Techno","url":"https://foxmask.net/post/2013/11/15/sql-full-table-scan-vs-index/"},{"title":"Incontournables Pythonerie : ImportError: No module named 'xxx' dans un virtualenv","text":"√áa pourrait s'intituler \"C'est l'histoire d'un mec... qu'est su' l'pont de l'Alma pi qui regarde dans l'eau et qui dit *j'ai fait tomber mes lunettes dans la Loire*\" Une histoire d'un biglotron quoi. Donc voil√† . On se fait un script python qui marche au quart de poil et pour le coller sur un serveur en prod on se dit que quand m√™me si on l'int√©grait dans un virtualenv √ßa serait 'ach'ment mieux √† g√©rer. je m'en vais donc me faire ce virtualenv tout QQ foxmask @localhost : ~/ virtualenv / apps / $ virtualenv toto New python executable in toto / bin / python Installing distribute ............................................................................................................................................................................................. done . Installing pip ............... done . foxmask @localhost : ~/ virtualenv / apps / $ cd $ _ foxmask @localhost : ~/ virtualenv / apps / toto $ ( toto ) foxmask @localhost : ~/ virtualenv / apps / toto $ source bin / activate ( toto ) foxmask @localhost : ~/ virtualenv / apps / toto $ mkdir tata ( toto ) foxmask @localhost : ~/ virtualenv / apps / toto $ cd $ _ ( toto ) foxmask @localhost : ~/ virtualenv / apps / toto / tata $ cp ~/ monscriptdelamort . py . ( toto ) foxmask @localhost : ~/ virtualenv / apps / toto / tata $ cp ~/ requirements . txt . ( toto ) foxmask @localhost : ~/ virtualenv / apps / toto / tata $ cat requirements . txt Genshi == 0.7 distribute == 0.6 . 24 lxml == 3.2 . 3 relatorio == 0.6 . 0 ( toto ) foxmask @localhost : ~/ virtualenv / apps / toto / tata $ pip install - r requirements . txt je vous passe la compilation de lxml ... ( toto ) foxmask @localhost : ~/ virtualenv / apps / toto / tata $ pip freeze -- local Genshi == 0.7 distribute == 0.6 . 24 lxml == 3.2 . 3 relatorio == 0.6 . 0 et l√† o√π √ßa devient int√©ressant c'est quand je lance monscriptdelamort.py et qu'il me sort la superbe erreur : from relatorio.templates.opendocument import Template ImportError : No module named relatorio . templates . opendocument or comme on le voit au dessus il est bien l√† ce module de m√™me que ( toto ) foxmask @localhost : ~/ virtualenv / apps / toto / tata $ python >>> import relatorio.templates.opendocument >>> print ( relatorio . templates . opendocument ) >>> √ßa t'en bouche un coin public hein ? Au bout d'un long moment √† tourner en rond autour de la poubelle de la machine √† caf√© en panne (elle aussi) je rouvre mon script et vois la lumi√®re sur la ligne 1 : #!/usr/bin/python h√© ou√© public t'as tout compris . Comme dis au d√©but ; j'ai fait le script avant de l'int√©grer dans un virtualenv donc quand je le lancais, j'appelais le binaire python outside of ze Virtualenv ... A bient√¥t pour une nouvelle bourde \"inside\".","tags":"Techno","url":"https://foxmask.net/post/2013/11/05/incontournables-pythonerie-importerror-no-module-named-dans-un-virtualenv/"},{"title":"fabric ImportError: No module named main","text":"Voici peut-√™tre une nouvelle s√©rie de billets sur Fabric cette fois ci avec des retours d'xp des plus couillons au moins balot ;) Donc comme chaque nouveau sujet que je d√©couvre je \"partage\" les aneries de d√©butant, histoire de bien faire marrer la grand majorit√© des pro du Python mais rassurer les autres d√©butants comme m√©zigues ;) Ainsi donc, avec Fabric , me voil√† √† la d√©couverte d'un nouveau monde. Ce billet sera rikiki pouce-pouce puisque ne concernera qu'un probl√®me con comme l√† lune : ImportError : No module named main Ce dernier se produit au lancement de fabric .. pratique ... √† d√©buger comme √ßa ... m√™me avec la stacktrace plus bas ;) J'ai install√© un virtualenv qui a cette allure : ( install_release ) foxmask@localhost:~/apps/install_release$ ls -l total 52 drwxr-xr-x 3 foxmask foxmask 4096 oct. 24 16 :15 autodeploy drwxr-xr-x 2 foxmask foxmask 4096 oct. 24 16 :02 bin drwxr-xr-x 2 foxmask foxmask 4096 oct. 24 16 :04 fabric drwxr-xr-x 2 foxmask foxmask 4096 oct. 23 14 :43 include -rw-r--r-- 1 foxmask foxmask 93 oct. 24 16 :17 __init__.py -rw-r--r-- 1 foxmask foxmask 118 oct. 23 14 :56 install_release.sublime-project -rw-r--r-- 1 foxmask foxmask 19863 oct. 23 17 :03 install_release.sublime-workspace drwxr-xr-x 3 foxmask foxmask 4096 oct. 23 14 :43 lib drwxr-xr-x 2 foxmask foxmask 4096 oct. 23 14 :43 local en me rendant dans mon dossier fabric et en tapant une commande fab foobar je me mange syst√©matiquement Traceback ( most recent call last ): File \"/home/foxmask/apps/install_release/bin/fab\" , line 9 , in load_entry_point ( 'Fabric==1.8.0' , 'console_scripts' , 'fab' )() File \"/home/foxmask/apps/install_release/local/lib/python2.7/site-packages/distribute-0.6.24-py2.7.egg/pkg_resources.py\" , line 337 , in load_entry_point return get_distribution ( dist ) . load_entry_point ( group , name ) File \"/home/foxmask/apps/install_release/local/lib/python2.7/site-packages/distribute-0.6.24-py2.7.egg/pkg_resources.py\" , line 2279 , in load_entry_point return ep . load () File \"/home/foxmask/apps/install_release/local/lib/python2.7/site-packages/distribute-0.6.24-py2.7.egg/pkg_resources.py\" , line 1989 , in load entry = __import__ ( self . module_name , globals (), globals (), [ '__name__' ]) ImportError : No module named main Mais en y regardant de plus pr√®s... ma structure de folders, qu'on voit 2 paragraphes plus haut, ne colle pas du tout ... alors qu'ici ( install_release ) foxmask@localhost:~/apps/install_release$ ls -l total 44 drwxr-xr-x 2 foxmask foxmask 4096 oct. 24 16 :02 bin drwxr-xr-x 2 foxmask foxmask 4096 oct. 23 14 :43 include drwxr-xr-x 4 foxmask foxmask 4096 oct. 24 16 :18 install_release -rw-r--r-- 1 foxmask foxmask 118 oct. 23 14 :56 install_release.sublime-project -rw-r--r-- 1 foxmask foxmask 19863 oct. 23 17 :03 install_release.sublime-workspace drwxr-xr-x 3 foxmask foxmask 4096 oct. 23 14 :43 lib drwxr-xr-x 2 foxmask foxmask 4096 oct. 23 14 :43 local ( install_release ) foxmask@localhost:~/apps/install_release$ ls -l install_release total 12 drwxr-xr-x 3 foxmask foxmask 4096 oct. 24 16 :15 autodeploy drwxr-xr-x 2 foxmask foxmask 4096 oct. 24 16 :18 fabric -rw-r--r-- 1 foxmask foxmask 93 oct. 24 16 :17 __init__.py elle convient bien mieux et fab est content avec son pitit message \"done\" final qui me sied tout autant. :)","tags":"Techno","url":"https://foxmask.net/post/2013/10/24/fabric-importerror-no-module-named-main/"},{"title":"Django FormWizard Dynamique, encore plus loin","text":"Le FormWizard encore plus loin Dans le billet pr√©c√©dent traitant en d√©tail de comment afficher un formulaire en fonction d'un choix fait dans un formulaire pr√©c√©dent, j'ai pouss√© le bouchon encore plus loin. En effet, dans mon workflow des 5 formulaires, les formulaires 1 et 3 listent les services disponibles. Or bien √©videment, quand j'en ai pris un sur le formulaire 1, inutile de le r√©afficher dans ma liste sur le formulaire 3. Ainsi donc le code suivant qui fonctionne, ne convient plus √† ce \"nouveau\" pr√©requis : def get_form ( self , step = None , data = None , files = None ): \"\"\" change the form instance dynamically from the data we entered at the previous step \"\"\" if step is None : step = self . steps . current if step == '1' : # change the form prev_data = self . get_cleaned_data_for_step ( '0' ) service_name = str ( prev_data [ 'provider' ]) . split ( 'Service' )[ 1 ] class_name = 'th_' + service_name . lower () + '.forms' form_name = service_name + 'ProviderForm' form_class = class_for_name ( class_name , form_name ) form = form_class ( data ) elif step == '3' : # change the form prev_data = self . get_cleaned_data_for_step ( '2' ) service_name = str ( prev_data [ 'consummer' ]) . split ( 'Service' )[ 1 ] class_name = 'th_' + service_name . lower () + '.forms' form_name = service_name + 'ConsummerForm' form_class = class_for_name ( class_name , form_name ) form = form_class ( data ) else : # get the default form form = super ( UserServiceWizard , self ) . get_form ( step , data , files ) return form Il faut intervenir lors de l'affichage du formulaire 3, correspondant au \"step2\", ce qui donne : def get_form ( self , step = None , data = None , files = None ): \"\"\" change the form instance dynamically from the data we entered at the previous step \"\"\" if step is None : step = self . steps . current if step == '1' : # change the form prev_data = self . get_cleaned_data_for_step ( '0' ) service_name = str ( prev_data [ 'provider' ]) . split ( 'Service' )[ 1 ] class_name = 'th_' + service_name . lower () + '.forms' form_name = service_name + 'ProviderForm' form_class = class_for_name ( class_name , form_name ) form = form_class ( data ) elif step == '2' : # je veux recuperer les donn√©es du premier formulaire data = self . get_cleaned_data_for_step ( '0' ) # initialisation du form avec la liste deroulante sans la valeur saisie au step 0 form = ConsummerForm ( initial = { 'provider' : data [ 'provider' ]}) elif step == '3' : # change the form prev_data = self . get_cleaned_data_for_step ( '2' ) service_name = str ( prev_data [ 'consummer' ]) . split ( 'Service' )[ 1 ] class_name = 'th_' + service_name . lower () + '.forms' form_name = service_name + 'ConsummerForm' form_class = class_for_name ( class_name , form_name ) form = form_class ( data ) else : # get the default form form = super ( UserServiceWizard , self ) . get_form ( step , data , files ) return form et dans mon forms.py ca donne : from django import forms from django_th.models import ServicesActivated from django.utils.translation import ugettext as _ class ServiceChoiceForm ( forms . Form ): def activated_services ( self , provider = None ): \"\"\" get the activated services added from the administrator \"\"\" services = ServicesActivated . objects . filter ( status = 1 ) choices = [] datas = () if provider is not None : services = services . exclude ( name__exact = provider ) for class_name in services : datas = ( class_name , class_name . name . rsplit ( 'Service' , 1 )[ 1 ]) choices . append ( datas ) return choices class ProviderForm ( ServiceChoiceForm ): provider = forms . ChoiceField () def __init__ ( self , * args , ** kwargs ): super ( ProviderForm , self ) . __init__ ( * args , ** kwargs ) self . fields [ 'provider' ] . choices = self . activated_services () class ConsummerForm ( ServiceChoiceForm ): consummer = forms . ChoiceField () def __init__ ( self , * args , ** kwargs ): super ( ConsummerForm , self ) . __init__ ( * args , ** kwargs ) # get the list of service without the one selected in # the provider form self . fields [ 'consummer' ] . choices = self . activated_services ( self . initial [ 'provider' ]) class ServicesDescriptionForm ( forms . Form ): description = forms . CharField ( widget = forms . TextInput ( attrs = { 'placeholder' : _ ( 'A description for your new service' )}) ) class DummyForm ( forms . Form ): pass ... et le Fail ! Ainsi au formulaire 1 (step 0) j'utilise ProviderForm qui r√©cup√®re tous les services activ√©s. Au formulaire 3 (step 2) j'utilise ConsummerForm qui r√©cup√®re tous les services en excluant celui saisi dans le formulaire 1 C'est le but du bout de code suivante de ma views.py : elif step == '2' : # je veux recuperer les donn√©es du premier formulaire data = self . get_cleaned_data_for_step ( '0' ) # initialisation du form avec la liste deroulante \"moins\" la valeur saisi au step 0 form = ConsummerForm ( initial = { 'provider' : data [ 'provider' ]}) Tout √ßa est super et ... ne marche pas ! Nan nan nan ca marche pas ! Ca fait une boucle infinie ... A chaque submit du formulaire 3 je retourne dessus quoique je fasse... Pourtant c'est tout beau tout propre hein ? Apr√®s avoir bien creus√© 2jours ; enquiquin√© StackOverflow (pour rien puisque pas eu de r√©ponse :) et #django-fr @ freenode (merci magopian pour PDB :) j'ai entrevu la lumi√®re que je vous montre √† pr√©sent : And ze Winner iz La solution est dans la views.py... pour changer ;) elif step == '2' : step0_data = self . get_cleaned_data_for_step ( '0' ) form = ConsummerForm ( data , initial = { 'provider' : step0_data [ 'provider' ]}) tadaaaa !!! Qu'est-ce qui change ? avant : \"data\" contenait les donn√©es saisies du formulaire 0. Donc en validant le formulaire, django pensait que j'avais √† faire √† ProviderForm (pour sch√©matiser) et me sortait en background une erreur \"champ obligatoire\" sur le field provider au lieu consummer. (un vrai sac de noeuds √† d√©buger) apr√®s : je r√©cup√®re les donn√©es du formulaire 0, non pas dans ma variable \"data\", mais dans une autre variable \"step0_data\", et √©vite de toucher √† \"data\" pass√©e √† get_form() pour ensuite les refiler proprement √† mon form \"ConsummerForm()\" qui exclue les donn√©es non souhait√©es et le tour est jou√©. voici la m√©thode compl√®te de get_form dans views.py : def get_form ( self , step = None , data = None , files = None ): \"\"\" change the form instance dynamically from the data we entered at the previous step \"\"\" if step is None : step = self . steps . current if step == '1' : # change the form prev_data = self . get_cleaned_data_for_step ( '0' ) service_name = str ( prev_data [ 'provider' ]) . split ( 'Service' )[ 1 ] class_name = 'th_' + service_name . lower () + '.forms' form_name = service_name + 'ProviderForm' form_class = class_for_name ( class_name , form_name ) form = form_class ( data ) elif step == '2' : step0_data = self . get_cleaned_data_for_step ( '0' ) form = ConsummerForm ( data , initial = { 'provider' : step0_data [ 'provider' ]}) elif step == '3' : # change the form prev_data = self . get_cleaned_data_for_step ( '2' ) service_name = str ( prev_data [ 'consummer' ]) . split ( 'Service' )[ 1 ] class_name = 'th_' + service_name . lower () + '.forms' form_name = service_name + 'ConsummerForm' form_class = class_for_name ( class_name , form_name ) form = form_class ( data ) else : # get the default form form = super ( UserServiceWizard , self ) . get_form ( step , data , files ) return form et cette fois ci tout glisse jusqu'au bout ! Cheminements menant √† la solution Ce qui m'a mis la puce √† l'oreille c'est en comparant le code des autres \"step\" (1 et 3) avec le step2 : form = form_class ( data ) en effet ici j'appelle la class \"form_class\" d'un formulaire lambda tout en lui passant les donn√©es de la variable \"data\". la diff√©rence avec le step2 c'est qu'en plus il me fallait fournir une valeur initiale via initial={} . J'avais bien capt√© ce qu'il fallait faire pour passer une valeur initiale mais m'√©tais trou√© en passant au travers du passage de data au form ConsummerForm() Vala qui clot un nouveau chapitre sur mes p√©r√©grinations FormWizard ;)","tags":"Techno","url":"https://foxmask.net/post/2013/10/16/django-formwizard-dynamique-encore-plus-loin/"},{"title":"Django FormWizard Dynamique","text":"Intro Ce billet aura pour but d'illustrer une fonctionnalit√© de Django qu'est le FormWizard . La particularit√© de ce dernier est qu'on ne se contente pas d'un formulaire, mais qu'on veut en enchainer plusieurs comme par exemple pour passer une commande sur un site de e-commerce. √áa, √ßa se passe bien quand le sc√©nario est fig√© dans le marbre et qu'aucune d√©viance n'est possible, c'est √† dire quand les √©tapes sont connues d'avance. Seulement arrive le moment o√π ce chemin tout trac√© ne peut plus coller √† son besoin car les √©tapes qui suivent sont conditionn√©es par les √©tapes courantes, comme dans la vie courante;) Ainsi dans ce qui va suivre, je vais de nouveau aborder Trigger Happy , ce petit projet, fait en Django, permettant de grabber des info d'une source d'info de son choix pour les envoy√©es vers un service tiers de son choix. Actuellement pour rappel tout ce que le projet sait faire c'est r√©cup√©rer des flux RSS et envoy√©s ce qu'il a trouv√© dans un carnet de note Evernote. Le sc√©nario √©tait fig√© dans le marbre, il fallait bien commenc√© par un embryon de bidule qui me permette d'√©prouver la solution et d'appr√©hender le framework ;) J'avais donc 3 pauvres pages : une pour le nom du site qui fournissait l'url du flux RSS et le flux RSS itself ;) une seconde pour indiquer dans quel carnet stocker le flux dans Evernote et la derni√®re, une description du \"trigger\" pour √™tre en mesure de le modifier √† posteriori. A pr√©sent que c'est fait, suite √† un sondage , j'ai d√ª m'atteler √† revoir le code, pour cette fois-ci le faire voler en √©clat et g√©rer le FormWizard, dynamiquement ! Mon sc√©nario initial change de 2 pages de plus, mais restera √† 5 pages quoiqu'il arrive. Par ailleurs je connais 3 des 5 √©tapes d'avance : choisir un service qui fourni l'information (*) nommer le service d'origine puis s√©lectionner l'information √† utiliser choisir un service qui stocke l'information (*)indiquer o√π stocker l'information dans le service choisi √† l'√©tape pr√©c√©dente donner une description au trigger les informations statiques sont celles qui n'ont pas de (*). Ceci √©tant dit, ne vous attendez donc pas dans la suite de ce billet √† voir le code traiter d'une quantit√© de formulaires fluctuant √† votre gr√©. Non, l√† on restera √† 5 pages, toutes obligatoires. D'o√π je partais voici en peu de lignes, le r√©sum√© du wizard statique \"avant\" que je ne le remanie: views.py from th_rss.forms import RssForm from th_evernote.forms import EvernoteForm from django_th.forms.base import ServicesDescriptionForm FORMS = [( \"rss\" , RssForm ), ( \"evernote\" , EvernoteForm ), ( \"services\" , ServicesDescriptionForm ), ] TEMPLATES = { '0' : 'rss/wz-rss-form.html' , '1' : 'evernote/wz-evernote-form.html' , '2' : 'services_wizard/wz-description.html' } class UserServiceWizard ( SessionWizardView ): instance = None def get_form_instance ( self , step ): \"\"\" Provides us with an instance of the Project Model to save on completion \"\"\" if self . instance is None : self . instance = TriggerService () return self . instance def done ( self , form_list , ** kwargs ): \"\"\" Save info to the DB \"\"\" trigger = self . instance trigger . provider = UserService . objects . get ( name = 'ServiceRss' , user = self . request . user ) trigger . consummer = UserService . objects . get ( name = 'ServiceEvernote' , user = self . request . user ) trigger . user = self . request . user trigger . status = True # save the trigger trigger . save () #...then create the related services from the wizard for form in form_list : if form . cleaned_data [ 'my_form_is' ] == 'rss' : from th_rss.models import Rss Rss . objects . create ( name = form . cleaned_data [ 'name' ], url = form . cleaned_data [ 'url' ], status = 1 , trigger = trigger ) if form . cleaned_data [ 'my_form_is' ] == 'evernote' : from th_evernote.models import Evernote Evernote . objects . create ( tag = form . cleaned_data [ 'tag' ], notebook = form . cleaned_data [ 'notebook' ], status = 1 , trigger = trigger ) return HttpResponseRedirect ( '/' ) Comme on le voit ici, tout est purement statique, √ßa marche pour ce que √ßa fait mais il n'est pas du tout possible d'√©tendre les fonctionnalit√©s de l'application en pluggant un pauvre module de plus. O√π je suis parti Ce qui suit m'a permit de modifier le FormWizard √† la vol√©e en interceptant les donn√©es saisies dans la page de choix des services. urls.py tout d'abord j'ai mis les formulaires de mon wizard dans urls.py comme ceci: url ( r '&#94;service/create/$' , UserServiceWizard . as_view ([ ProviderForm , DummyForm , ConsummerForm , DummyForm , ServicesDescriptionForm ]), si ca vous botte vous pouvez aussi la jouer comme ceci : url ( r '&#94;service/create/$' , UserServiceWizard . as_view ( 'django_th.views.get_my_form_list' ), et d√©finir une methode get_my_form_list() dans votre views.py et l'appeler dans l'__init__ de votre FormWizard. Ici on notera que j'ai not√© sciemment 2 fois DummyForm. L'int√©ret est tout con, quand le wizard se d√©roule il vous indique en haut de chaque page: etape 1/5 etape 2/5 etape 3/5 etape 4/5 etape 5/5 Donc si je ne mets pas des \"faux\" Form je vais avoir mon wizard qui m'affichera 1/3,2/3,3/3,3/3,3/3, et ca sera le bordel dans le traitement qui s'en suivra. On notera aussi que je n'ai pas mis DummyForm 2 fois au pifom√®tre, non ! C'est √† ces endroits que je les remplacerai par les form des services choisis dans ProviderForm et ConsummerForm. Voici √† pr√©sent le FormWizard : views.py import importlib def class_for_name ( module_name , class_name ): \"\"\" import the class from the given module and class \"\"\" m = importlib . import_module ( module_name ) c = getattr ( m , class_name ) return c class UserServiceWizard ( SessionWizardView ): def __init__ ( self , ** kwargs ): self . form_list = kwargs . pop ( 'form_list' ) return super ( UserServiceWizard , self ) . __init__ ( ** kwargs ) def get_form_instance ( self , step ): if self . instance is None : self . instance = UserService () return self . instance def get_context_data ( self , form , ** kwargs ): data = self . get_cleaned_data_for_step ( self . get_prev_step ( self . steps . current )) if self . steps . current == '1' : service_name = str ( data [ 'provider' ]) . split ( 'Service' )[ 1 ] #services are named th_ #call of the dedicated ProviderForm form = class_for_name ( 'th_' + service_name . lower () + '.forms' , service_name + 'ProviderForm' ) elif self . steps . current == '3' : service_name = str ( data [ 'consummer' ]) . split ( 'Service' )[ 1 ] #services are named th_ #call of the dedicated ConsummerForm form = class_for_name ( 'th_' + service_name . lower () + '.forms' , service_name + 'ConsummerForm' ) context = super ( UserServiceWizard , self ) . get_context_data ( form = form , ** kwargs ) return context √áa marche super bien... j'ai bien √©cras√© le form DumyForm par celui que me fourni le service que j'ai choisi dans la page pr√©c√©dente. C'est ce que r√©cupere service_name, puis j'appelle le form de mon service via class_for_name. Donc tout va bien... tant qu'on n'arrive pas √† la m√©thode done() qui g√®re elle, la validation de tous les formulaires saisis. L√† j'ai eu beau me farcir (pendant des semaines de tests) toutes les m√©thodes du FormWizard pour creuser dans laquelle je pouvais mettre la \"bonne liste\" de Formulaire que je g√©n√©rai dynamiquement, rien y faisait, self.form_list restait immuable, impossible √† changer... sauf une, celle de la solution ... The Right way to do it ! A force de creuser pleins de solutions j'en suis arriv√© √† ne plus avoir les id√©es claires pour un truc pourtant simplissime. J'ai donc demand√© de l'aide via une barre chocolat√©e (aka un bounty) sur StackOverFlow, ce qui m'a permit de trouver la voie ! Plut√¥t que tripatouiller self.form_list du FormWizard puisqu'il √©tait tout le temps remis aux valeurs indiqu√©es dans mon urls.py , il fallait laisser choir get_context_data() pour le simplissime get_form() comme suit : def get_form ( self , step = None , data = None , files = None ): \"\"\" change the form instance dynamically from the data we entered at the previous step \"\"\" if step is None : step = self . steps . current if step == '1' : # change the form prev_data = self . get_cleaned_data_for_step ( '0' ) service_name = str ( prev_data [ 'provider' ]) . split ( 'Service' )[ 1 ] class_name = 'th_' + service_name . lower () + '.forms' form_name = service_name + 'ProviderForm' form_class = class_for_name ( class_name , form_name ) form = form_class ( data ) #edition du billet le 16/10 elif step == '2' : step0_data = self . get_cleaned_data_for_step ( '0' ) form = ConsummerForm ( data , initial = { 'provider' : step0_data [ 'provider' ]}) elif step == '3' : # change the form prev_data = self . get_cleaned_data_for_step ( '2' ) service_name = str ( prev_data [ 'consummer' ]) . split ( 'Service' )[ 1 ] class_name = 'th_' + service_name . lower () + '.forms' form_name = service_name + 'ConsummerForm' form_class = class_for_name ( class_name , form_name ) form = form_class ( data ) else : # get the default form form = super ( UserServiceWizard , self ) . get_form ( step , data , files ) return form c'est un peu verbeux et aurait p√ª √™tre plus court pour tenir sur une ligne mais en fait pep8 me faisait un caca nerveu alors j'ai allou√© mes vars service_name , class_name , form_name tranquillou Bon avec tout √ßa, l√†, on arrive au m√™me point que ce que j'ai fait plus haut avec le get_context_data() . Ici, le \"plus\" est que je r√©cup√®re l'instance de ma classe avec les donn√©es saisies du form ! (m√™me si j'avais faire un form class_for_name(...)(data) ca passait pas ) la m√©thode La F√©e Reste ensuite √† traiter toutes ces donn√©es dans la m√©thode done() . La m√©thode done dans le FormWizard est la seule obligatoire √† fournir syst√©matiquement. Toutes les autres ne sont pas n√©cessaire √† son fonctionnement, sauf celle ci qui si elle n'est pas d√©finie p√™tera une erreur, recta. Et pour cause, c'est avec elle que vous vous chargerez de v√©rifier la validit√© de vos donn√©es avant de les enregistrer. La gymnastique ici, va consister √† enregistrer les donn√©es sans connaitre la moindre property des mod√®les correspondant aux services s√©lectionn√©s. Enfin, quand je dis que je ne les connais pas, je ne les connais pas au moment o√π je code. Je ne peux pas me permettre ici aussi, de hardcoder le nom d'une seule d'entre elles, puisque tout est dynamique ici. Comme dit plus t√¥t, je connais exactement 3 des 5 pages que je remplis, donc je grabbe ces infos pour les stocker dans un premier mod√®le TriggerService . Ensuite je grabbe les info saisies pour le formulaire que je nomme \"provider\" puis celui de \"consummer\" et je donne √† chacun de ces 2 mod√®les le lien vers le mod√®le TriggerService (c'est dans mon MCD pour pouvoir revenir modifier mon trigger) Now, follow me ;) import importlib def class_for_name ( module_name , class_name ): # load the module, will raise ImportError if module cannot be loaded m = importlib . import_module ( module_name ) # get the class, will raise AttributeError if class cannot be found c = getattr ( m , class_name ) return c def get_service_model ( what , data ): \"\"\" get the service name then load the model \"\"\" service_name = str ( data [ what ]) . split ( 'Service' )[ 1 ] return class_for_name ( 'th_' + service_name . lower () + '.models' , service_name ) def done ( self , form_list , ** kwargs ): \"\"\" Save info to the DB The process is : 1) get the infos for the Trigger from step 0, 2, 4 2) save it to TriggerService 3) get the infos from the \"Provider\" and \"Consummer\" services at step 1 and 3 4) save all of them \"\"\" # get the datas from the form for TriggerService i = 0 for form in form_list : # cleaning data = form . cleaned_data # get the service we selected at step 0 : provider if i == 0 : trigger_provider = UserService . objects . get ( name = data [ 'provider' ], user = self . request . user ) model_provider = get_service_model ( 'provider' , data ) # get the service we selected at step 2 : consummer elif i == 2 : trigger_consummer = UserService . objects . get ( name = data [ 'consummer' ], user = self . request . user ) model_consummer = get_service_model ( 'consummer' , data ) # get the description we gave for the trigger elif i == 4 : trigger_description = data [ 'description' ] i += 1 # save the trigger trigger = TriggerService ( provider = trigger_provider , consummer = trigger_consummer , user = self . request . user , status = True , description = trigger_description ) trigger . save () model_fields = {} # get the datas from the form for Service related # save the related models to provider and consummer i = 0 for form in form_list : model_fields = {} data = form . cleaned_data # get the data for the provider service if i == 1 : for field in data : model_fields . update ({ field : data [ field ]}) # additionnal properties model_fields . update ({ 'trigger_id' : trigger . id , 'status' : True }) model_provider . objects . create ( ** model_fields ) # get the data for the consummer service elif i == 3 : for field in data : model_fields . update ({ field : data [ field ]}) # additionnal properties model_fields . update ({ 'trigger_id' : trigger . id , 'status' : True }) model_consummer . objects . create ( ** model_fields ) i += 1 return HttpResponseRedirect ( '/' ) le d√©but est surtout de la tambouille interne √† mon workflow ; ce qui import ici c'est l'usage de : model_provider . objects . create ( ** model_fields ) model_consummer . objects . create ( ** model_fields ) qui permet pour un mod√®le inconnu d'y stocker des properties via un kwargs dont le contenu est tout aussi inconnu, mais valide ! Voil√† ; le code peut all√®grement √™tre am√©lior√© sans aucun doute ;) Conclusion: Ainsi, comme on peut le voir √† pr√©sent, il n'y a aucune limite possible, autre que de ne pas avoir acc√®s √† l'API d'un service tiers ;) Tout ce qui fourni de l'information et peut en stocker peut √™tre utiliser dans les 2 sens, que ca soit comme provider ou consummer. A pr√©sent je vais pouvoir passer √† pondre de nouveaux services comme ceux indiqu√©s dans le sondage :D J'aurai mis le temps mais le r√©sultat en vaut la peine. D'autres liens traitant du sujets Ci dessous, une liste de sujets sur le FormWizard par lesquels je suis pass√© pour tenter de trouver mon bonheur qui pourraient quand m√™me vous servir, just in case : Dynamic number of step using Django Wizard changer les formulaires de questionnaires √† la vol√©e How to pass previous form data to the constructor of a DynamicForm in FormWizard How do you dynamically create a formset based on previous step edit J'adresse un petit merci pour l'√©coute de chacun que j'ai pu enquiquiner sur le sujet sur django-fr et les pistes fournies par un certain Spoutnik ;)","tags":"Techno","url":"https://foxmask.net/post/2013/10/07/django-formwizard-dynamique/"},{"title":"Django Aptana gestion du PYTHONPATH avec un VirtualEnv","text":"Avec l'√©diteur Aptana, comme dit dans un pr√©c√©dant billet , on peut faire joujou avec le manager.py de django. Ici, je vais montrer comment g√©rer le PYTHONPATH d'un projet Django qu'on a mis dans un virtualenv de surcroit. Le but de ce PYTHONPATH avec Aptana va √™tre de nous affranchir d'avoir en rouge tous les imports django comme par exemple : from django import forms et dans le m√™me temps cela permettra d'avoir une completion du code des classes les doigts dans le nez. Pour arriver au but on fera un click droit sur le nom du projet dans la perspective PyDev puis \"Propri√©t√©s\" ce qui nous donnera cette image : on va proc√©der ici en 2 √©tapes : \"Pydev - interpreter/grammar\" \"PyDev - PYTHONPATH\" Etape 1 : On s√©lectionne la ligne de gauche \"Pydev - interpreter/grammar\" Puis on s√©lectionne le lien \"click to configure an interpreter not listed\" Ici vous allez aller chercher \"python\" dans le dossier \"bin\" de votre virtualenv en cliquant sur \"new\" Une fois fait on clique sur \"apply\" (en bas √† droite de la popup) et Aptana nous charge tout le contenu de \"lib\". Avec cette √©tape les \"import django.xxx\" ne seront plus rouge ;) Etape 2 : On s√©lectionne la ligne de gauche \"PyDev - PYTHONPATH\" Sur l'onglet \"Sources folder\" on doit d√©j√† trouver le path vers django dans la liste, suite √† la manipulation pr√©c√©dante On va √† pr√©sent ajouter ici le path vers le dossier de son application Django. Pour le localiser, ce dernier est au m√™me niveau que le folder \"bin\" de votre virtualenv. Voil√† :) Pour en voir les effets, un petit click droit sur projet puis \"PyDev\" > \"Code analasis\"","tags":"Techno","url":"https://foxmask.net/post/2013/09/26/django-aptana-pythonpath-virtualenv/"},{"title":"Relatorio et la Secret Release Story","text":"Il y a 6 mois tout pile je testais relatorio avec succ√®s sur un petit script pour un besoin pr√©cis et n'avait plus le temps d'approfondir le sujet pour le boulot. Les choses avan√ßant (enfin), j'ai pu finir de faire le script python qui me permet √† pr√©sent de produire des documents openoffice automatiquement √† partir : d'un mod√®le openoffice (comme on en ferait un pour word en utilisant la \"fusion & publipostage\" pour ceux √† qui √ßa parle plus) et d'une source de donn√©es au format XML provenant de Autodeploy . Autodeploy servant √† manager pas moins de 160 environnements jEE pour les installations et mises √† jour. Une fois les release produites, install√©es et test√©es il faut les livrer aux clients. Et qui trouve-t-on au bout de la chaine pour tout cela ? ouais ouais vous avez compris :) Pendant longtemps d√©j√† je me coltinais la cr√©ation des livraisons aux clients √† la mimine (avec un mkdir -p des dossiers requis + wget des 'n' archives dans chaque folder, vous voyez le patacaisse) jusqu'au moment o√π la quantit√© de livraisons √† effectuer d√©passait 1j/homme et ai fini par produire Make delivery , un script python parcourant le fichier XML d'Autodeploy. Ce dernier en extrait les tarball avec le nom du package et les colle dans une arborescence de folders d√©finie avant de tout compresser pour l'envoyer au client. Temps pass√© avant make delivery : 1heure par livraison Temps pass√© depuis make delivery : 15min par livraison et je suis large Seulement dans le process de livraison, on fourni quand m√™me une @#*! de release note faite ... MAIN ! release note qu'on faisait v√©rifier par le consultant afin de s'assurer que le contenu du document collait parfaitement au livrable. Je vous laisse imaginer le temps perdu, les rat√©s potentiels, et la suite chez le client qui installe tout le toutim. A pr√©sent tout √ßa c'est FINI ! Bibi a fait l'(comic) script ! Le script \"MakeDelivery\" sera donc suivi par un second \"MakeRelease\" pour la cr√©ation de la doc, et aucune erreur de num√©ro de version ne sera plus possible ! Gr√¢ce aux gars de la prod et du build process bas√© sur maven, on dispose des numeros de version dans les urls de chaque package, d'o√π j'en extrais le nom et la version que je refile dans un beau \"dict()\" lequel \"dict\" est aval√© par relatorio qui pond le \"document s√©same\" sans erreur possible ! Tout cela est tout beau mais attention quand m√™me aux surprises de derni√®res minutes. Comme je l'ai dit au d√©but de ce billet j'avais commenc√© mon script en f√©vrier et mon pip install relatorio ne m'a pas chatouill√© √† l'√©poque. Entre temps une release majeure debian est pass√©e sur ma machine et surtout une mise √† jour relatorio ! En reprenant donc le cours de mon installation je me refais un virtualenv je lance sereinement le pip install pr√©c√©dent. Une fois tout install√© (enfin dirai-je) je fini mes devs sur mon script make_release.py et me dit \"bon ce coup ci tout est pr√™t pour produire enfin un doc Ooo\" et au premier lancement zboing la fin des haricots ! Traceback ( most recent call last ): File \"run.py\" , line 172 , in main () File \"run.py\" , line 166 , in main generate_doc ( customer_release ) File \"run.py\" , line 130 , in generate_doc basic = Template ( source = None , filepath = 'Foo_bar.odt' ) File \"[...]/lib/python2.7/dist-packages/relatorio/templates/opendocument.py\" , line 245 , in __init__ encoding , lookup , allow_exec ) File \"[...]/lib/python2.7/dist-packages/genshi/template/markup.py\" , line 67 , in __init__ allow_exec = allow_exec ) File \"[...]/lib/python2.7/dist-packages/genshi/template/base.py\" , line 417 , in __init__ source = BytesIO ( source ) TypeError : expected read buffer , NoneType found Un truc aurait d√ª me mettre la puce √† l'oreille, la flop√©e de modules python suppl√©mentaires √† compiler/installer, me dis-je, incriminant d'embl√©e relatorio et sa v 0.6.0 puisque m√™me les exemples fournis sur le wiki ne passaient pas. Comme je me farcie pas mal de probl√®mes rev√™ches quotidiennement, je proc√®de avec dichotomie afin de trouver qui de relatorio ou de genshi me casse vraiment les pieds. Je laisse la 0.6.0 de relatorio et supprime genshi 0.7.0 et mets une 0.6.0 √† la place en me disant si cela ne passe pas, au pire, je me ferai un nouveau virtualenv tout neuf avec un relatorio 0.5.0. je relance mon script et l√† ! √¥ joie, plus d'erreur et ma release note est l√† toute belle ! Gain de temps final ? : je ne vous en parle m√™me pas ! plus de besoin de faire 'n' validations \"humaines\" inutiles ! plus besoin de lancer OpenOffice pour produire le document. Tout va √™tre script√© mon bon m√¥sieur ! edit : la solution pour utiliser la derni√®re version de genshi est en commentaire et tout rentre dans l'ordre ;)","tags":"Techno","url":"https://foxmask.net/post/2013/08/29/relatorio-secret-release-story/"},{"title":"Trigger-Happy.eu s'ouvr.eu","text":"Hello, A ceux qui suivent mes derni√®res exp√©riences pythono-djanguesques vous ne serez pas √©tonn√©s d'apprendre ce qui suit, aux nouveaux venus, welcome et bonne lecture ;). Pr√©sentation Ainsi je me suis lanc√© dans un projet nomm√© Django Trigger Happy permettant depuis une source de donn√©es depuis l'autre cot√© de la toile, d'alimenter un autre service tel Evernote, Facebook, Twitter, Readability, Pocket, Feedly et j'en passe et des meilleurs. Pour le moment le projet ne sait faire que 2 choses : lire des flux RSS/ATOM depuis ces derniers, √©crire des notes dans Evernote, et en fonction de chacun des flux on peut d√©cider de dispatcher dans un carnet plut√¥t qu'un autre. Pourquoi Comment ? Tout comme il existe des logiciels pour h√©berger son blog, ou d'autres pour produire son site web avec Drupal, Magento, ou encore d'autre pour des forums, ... Django Trigger Happy se veut √™tre une solution personnelle de gestion de services depuis des sources √©parses comme cit√©es plus haut. je ne d√©taillerai pas plus pour en avoir longuement parl√© en long en large et en travers dans ces billets ;) Le but principal de ce billet est juste de vous annoncer que j'ai ouvert Trigger-Happy.eu afin que vous puissiez l'essayer si vous disposez d'un jeu de flux RSS et bien s√ªr surtout, d'un compte Evernote. Ainsi si c'est le cas, apr√®s vous √™tes enregistr√© sur Trigger-Happy.eu , activez les 2 services ... Cr√©ation d'un trigger ... pour les utiliser avec le wizard que vous trouverez √† cet effet, vous demandant le nom et l'url du flux RSS/ATOM \"source\" et le carnet evernote \"cible\" o√π stocker les infos comme suit : ce qui vous donnera quelque chose comme ceci : Une fois tout ceci effectu√©, toutes les 10 minutes, tous les flux RSS/ATOM seront pass√©s en revu et une note sera cr√©√©e dans les carnets que vous aurez d√©cid√© le cas √©ch√©ant. Le mot de la fin Pour finir, la roadmap concernant les prochains services qui seront int√©gr√©s seront ceux-ci apr√®s que la vox populi se soit exprim√©e (et je l'en remercie ;) Si vos tests sont concluant, n'h√©sitez pas √† vous installer votre propre \"Trigger Happy\" sur votre serveur/h√©bergement en suivant cette proc√©dure . Si vous ne pouvez pas installer \"Trigger Happy\" sur un serveur personnel, libre √† vous d'utiliser le site Trigger-Happy.eu pour vos propres besoins, mais sachez qu'aucune (vile) exploitation de vos donn√©es personnelles avec ce projet ne sera faite, tant mercantile que statistiques :P English version here is a short version of the announcement Today we can host our own blog website with dedicated software like Wordpress, or build our own website with soft like Magento, Drupal. Now Django Trigger Happy, an opensource project, offers the possibility to host your own service to manage all datas from all around the web. Today, Django Trigger Happy can do only 2 things : read RSS/ATOM Feeds and from this data, create notes in Evernote So i opened Trigger-Happy.eu , to let you try to play with your sets of RSS/ATOM. You just need to register and then once it's done, go to the services pages and activate each of them. Once it's done you are able to create a trigger and fill the expected informations. Then once everything is ready, each 10 minutes, the RSS/ATOM Feeds will be read and notes Evernote will be create at the right moment at the right place. notice : none of the data you will provide will be used for mercantile purpose nor statistics.","tags":"Techno","url":"https://foxmask.net/post/2013/08/13/trigger-happy-eu-souvr-eu/"},{"title":"Incontournables Pythonerie : le fichier requirements.txt","text":"pour faire √©cho au billet de Sam et Max sur requirements.txt , voici un tout petit billet encore sur distutils :) Mon application d√©pend de plein d'autres, c'est pour cette raison qu'on a produit requirements.txt. Mais il n'est pas juste l√† pour faire joli, ou dire \"les mecs faites pip install -r de mon fichier\"... Il faut bien l'exploiter d'une mani√®re ou d'une autre pour que le moment venu, notamment lors de l'installation de son application via pip install , que ces pr√©requis soient install√©s automatiquement tant qu'√† faire. Pour cela on va retourcher le setup.py comme ceci (snipset recup√©r√© d'un des setup.py du sieur David Larlet:) : import os def strip_comments ( l ): return l . split ( '#' , 1 )[ 0 ] . strip () def reqs ( * f ): return list ( filter ( None , [ strip_comments ( l ) for l in open ( os . path . join ( os . getcwd (), * f )) . readlines ()])) install_requires = reqs ( 'requirements.txt' ) setup ( ... install_requires = install_requires , ) ce qui aura pour effet que lors de l'installation, le fichier requirements.txt soit lu puis que chaque ligne de ce fichier soit appel√©e pour √™tre install√©e. Ensuite quand vous testez (j'espere) que votre packaging fonctionne via un pip install , si vous rencontrez ce probl√®me : Downloading / unpacking django - th Running setup . py egg_info for package django - th Traceback ( most recent call last ): File \"\" , line 14 , in File \"/home/foxmask/Django-VirtualEnv/foobar/build/django-th/setup.py\" , line 12 , in install_requires = reqs ( 'requirements.txt' ) File \"/home/foxmask/Django-VirtualEnv/foobar/build/django-th/setup.py\" , line 10 , in reqs os . path . join ( os . getcwd (), * f )) . readlines ()])) IOError : [ Errno 2 ] No such file or directory : '/home/foxmask/Django-VirtualEnv/foobar/build/django-th/requirements.txt' Complete output from command python setup.py egg_info : Traceback ( most recent call last ): File \"\" , line 14 , in File \"/home/foxmask/Django-VirtualEnv/foobar/build/django-th/setup.py\" , line 12 , in install_requires = reqs ( 'requirements.txt' ) File \"/home/foxmask/Django-VirtualEnv/foobar/build/django-th/setup.py\" , line 10 , in reqs os . path . join ( os . getcwd (), * f )) . readlines ()])) IOError : [ Errno 2 ] No such file or directory : '/home/foxmask/Django-VirtualEnv/foobar/build/django-th/requirements.txt' c'est que votre package ne contient pas ledit requirements.txt Si vous utilisez un MANIFEST.in il faut ajouter une ligne : include *. txt qui permettra √† la commande python setup . py sdist d'ajouter tout fichier txt, et l√† ca ira tout de suite mieux Downloading/unpacking django-th Downloading django_th-0.3.0.tar.gz Running setup.py egg_info for package django-th warning: no previously-included files found matching 'django_th/local_settings.py' Downloading/unpacking Django == 1 .4.3 ( from django-th ) Downloading Django-1.4.3.tar.gz ( 7 .7Mb ) : 7 .7Mb downloaded Running setup.py egg_info for package Django Downloading/unpacking batbelt == 0 .4 ( from django-th ) Downloading batbelt-0.4.tar.gz Running setup.py egg_info for package batbelt Downloading/unpacking django-profiles == 0 .2 ( from django-th ) Downloading django-profiles-0.2.tar.gz Running setup.py egg_info for package django-profiles Downloading/unpacking django-registration == 0 .8 ( from django-th ) Downloading django-registration-0.8.tar.gz ( 284Kb ) : 284Kb downloaded Running setup.py egg_info for package django-registration Downloading/unpacking evernote == 1 .23.2 ( from django-th ) Downloading evernote-1.23.2.tar.gz ( 132Kb ) : 132Kb downloaded Running setup.py egg_info for package evernote Downloading/unpacking feedparser == 5 .1.3 ( from django-th ) Downloading feedparser-5.1.3.tar.gz ( 283Kb ) : 283Kb downloaded Running setup.py egg_info for package feedparser Downloading/unpacking httplib2 == 0 .8 ( from django-th ) Downloading httplib2-0.8.tar.gz ( 110Kb ) : 110Kb downloaded Running setup.py egg_info for package httplib2 Downloading/unpacking oauth2 == 1 .5.211 ( from django-th ) Downloading oauth2-1.5.211.tar.gz Running setup.py egg_info for package oauth2 Downloading/unpacking ordereddict == 1 .1 ( from django-th ) Downloading ordereddict-1.1.tar.gz Running setup.py egg_info for package ordereddict Downloading/unpacking South == 0 .7.6 ( from django-th ) Downloading South-0.7.6.tar.gz ( 91Kb ) : 91Kb downloaded Running setup.py egg_info for package South Downloading/unpacking pytidylib == 0 .2.1 ( from django-th ) Downloading pytidylib-0.2.1.tar.gz ( 157Kb ) : 157Kb downloaded Running setup.py egg_info for package pytidylib Installing collected packages: django-th, Django, batbelt, django-profiles, django-registration, evernote, feedparser, httplib2, oauth2, ordereddict, South, pytidylib Running setup.py install for django-th warning: no previously-included files found matching 'django_th/local_settings.py' Running setup.py install for Django changing mode of build/scripts-2.7/django-admin.py from 644 to 755 changing mode of /home/foxmask/Django-VirtualEnv/toto/bin/django-admin.py to 755 Running setup.py install for batbelt Running setup.py install for django-profiles Running setup.py install for django-registration Running setup.py install for evernote Running setup.py install for feedparser Running setup.py install for httplib2 Running setup.py install for oauth2 Running setup.py install for ordereddict Running setup.py install for South Running setup.py install for pytidylib Successfully installed django-th Django batbelt django-profiles django-registration evernote feedparser httplib2 oauth2 ordereddict South pytidylib Cleaning up...","tags":"Techno","url":"https://foxmask.net/post/2013/07/01/incontournables-pythonerie-le-fichier-requirements-txt/"},{"title":"Django CBV qui donne mal au crane","text":"Toujours dans la veine des bouts de code qu'un n00b produit et se tend en pi√®ge, voici une erreur √† laquelle j'ai eu droit et qui pour autant, sans attirer mon attention, en prod fini en erreur 500 ... et l√† arrive le mal de crane... parce que debugger sans le DEBUG √† True en prod ... walou ... TypeError at / int () argument must be a string or a number , not 'SimpleLazyObject' le code incrimin√© est celui ci : class TriggerListView ( ListView ): def get_context_data ( self , ** kw ): context = super ( TriggerListView , self ) . get_context_data ( ** kw ) enabled = TriggerService . objects . filter ( user = self . request . user , status = 1 ) disabled = TriggerService . objects . filter ( user = self . request . user , status = 0 ) context [ 'nb_triggers' ] = { 'enabled' : len ( enabled ), 'disabled' : len ( disabled )} return context la ligne enable = ... ne convient pas quand on n'est pas connect√©. j'imaginais que user= prendrait rien puisque la session n'existait pas. erreuuuuuuuuuuuuuuuuuur ! pour r√©soudre le probl√®me de cette ListView il faut donc la faire proprement : def get_context_data ( self , ** kw ): enabled = disabled = () if self . request . user . is_authenticated (): enabled = TriggerService . objects . filter ( user = self . request . user , status = 1 ) disabled = TriggerService . objects . filter ( user = self . request . user , status = 0 ) context = super ( TriggerListView , self ) . get_context_data ( ** kw ) context [ 'nb_triggers' ] = { 'enabled' : len ( enabled ), 'disabled' : len ( disabled )} return context et l√† enfin quand on acc√®de √† la ListView sans √™tre connect√© tout sera en ordre","tags":"Techno","url":"https://foxmask.net/post/2013/06/30/django-cbv-qui-donne-mal-au-crane/"},{"title":"Incontournables Pythonerie : publier son appli Django sans la config perso","text":"Voici donc une nouvel √©pisode des Incontournable Pythonerie que vous auriez pu oublier ;) Imaginons que vous ayez pondu la plus belle lib python jamais vu et que vous ayez besoin de la publier sur le d√©p√¥t Pypi . Vous me direz c'est \"QQ la praline (coucou christian;) ton histoire on fait juste python setup.py sdist et byebye\" Alors oui vous avez raison ! A pr√©sent imaginons un truc plus √©labor√© par exemple une application django. Avec django on dispose d'un fichier de configuration nomm√© comme chacun sait, settings.py Souvent, on y colle des trucs propres √† notre environnement et au moment de commiter ce fichier sur github ou autre, on est fort bien emmerdouiller √† retirer de ce fichier, notre config perso. Du coup, on en vient √† une bidouille toute b√™te permettant de conserver le settings.py d'origine et d'y importer sa config perso comme ceci : # local settings management try : from .local_settings import * except ImportError : pass c'est 5 lignes vont en fin de votre settings.py et vous pouvez mettre tout ce que vous voulez dedans il aura la m√™me fonction que l'original Ne vous reste plus ensuite qu'√† mettre dans votre fichier .gitignore local_settings.py pour ne pas l'exp√©dier dans les sources de votre projet Maintenant je suis tout joie, mon appli marche parfaitement et je vais de ce pas la publier sur pypi pour faire partager ma liesse : je tape python setup . py register r√©ponds aux questions demand√©es et enchaine avec python setup . py sdist pour cr√©er une archive suivi de python setup . py sdist upload pour envoyer ladite archive sur pypi. le r√©sultat de sdist donne ceci : $ python setup.py sdist running sdist running egg_info creating django_th.egg-info writing requirements to django_th.egg-info/requires.txt writing django_th.egg-info/PKG-INFO writing top-level names to django_th.egg-info/top_level.txt writing dependency_links to django_th.egg-info/dependency_links.txt writing manifest file 'django_th.egg-info/SOURCES.txt' reading manifest file 'django_th.egg-info/SOURCES.txt' writing manifest file 'django_th.egg-info/SOURCES.txt' warning: sdist: standard file not found: should have one of README, README.txt ... creating django_th-0.3.0 creating django_th-0.3.0/django_th creating django_th-0.3.0/django_th.egg-info ... creating django_th-0.3.0/django_th/models creating django_th-0.3.0/django_th/services creating django_th-0.3.0/django_th/templatetags making hard links in django_th-0.3.0... hard linking setup.py -> django_th-0.3.0 hard linking django_th/__init__.py -> django_th-0.3.0/django_th hard linking django_th/admin.py -> django_th-0.3.0/django_th hard linking django_th/context_processors.py -> django_th-0.3.0/django_th hard linking django_th/service_provider.py -> django_th-0.3.0/django_th hard linking django_th/local_settings.py -> django_th-0.3.0/django_th hard linking django_th/settings.py -> django_th-0.3.0/django_th hard linking django_th/urls.py -> django_th-0.3.0/django_th hard linking django_th/views.py -> django_th-0.3.0/django_th hard linking django_th/wsgi.py -> django_th-0.3.0/django_th si vous avez pr√™t√© attention aux logs vous voyez un truc que je ne voulais pas mettre dans mon archive hard linking django_th/local_settings.py -> django_th-0.3.0/django_th l√† c'est la cata ... ma config part sur pypi avec potentiellement des cl√©s de services tiers... vous voyez le basard :P Donc en retournant √† la doc de distutils , on voit qu'on dispose d'une option permettant d'exclure du packaging une partie de son projet. On cr√©√© un fichier MANIFEST.in contenant : include *. txt recursive - include examples *. txt *. py prune examples / sample ? / build ici on n'a aucun cas d'exclusion explicite, elles sont plut√¥t implicites, puisqu'on dit ce qu'on veut mais pas ce qu'on ne veut pas. Dans mon cas je ne souhaite pas mettre local_settings.py c'est tout. Donc dans le MANIFEST.in on mettra exclude django_th / local_settings . py Je supprime le dossier \"dist\" cr√©√© via la commande python setup.py sdist pr√©c√©dente et relance pour obtenir : $ python setup.py sdist running sdist running egg_info creating django_th.egg-info writing requirements to django_th.egg-info/requires.txt writing django_th.egg-info/PKG-INFO writing top-level names to django_th.egg-info/top_level.txt writing dependency_links to django_th.egg-info/dependency_links.txt writing manifest file 'django_th.egg-info/SOURCES.txt' reading manifest file 'django_th.egg-info/SOURCES.txt' reading manifest template 'MANIFEST.in' writing manifest file 'django_th.egg-info/SOURCES.txt' warning: sdist: standard file not found: should have one of README, README.txt ... creating django_th-0.3.0 creating django_th-0.3.0/django_th creating django_th-0.3.0/django_th.egg-info creating django_th-0.3.0/django_th/forms creating django_th-0.3.0/django_th/lib creating django_th-0.3.0/django_th/lib/conditionchecker creating django_th-0.3.0/django_th/lib/feedsservice creating django_th-0.3.0/django_th/migrations creating django_th-0.3.0/django_th/models creating django_th-0.3.0/django_th/services creating django_th-0.3.0/django_th/templatetags making hard links in django_th-0.3.0... hard linking MANIFEST.in -> django_th-0.3.0 hard linking setup.py -> django_th-0.3.0 hard linking django_th/__init__.py -> django_th-0.3.0/django_th hard linking django_th/admin.py -> django_th-0.3.0/django_th hard linking django_th/context_processors.py -> django_th-0.3.0/django_th hard linking django_th/service_provider.py -> django_th-0.3.0/django_th hard linking django_th/settings.py -> django_th-0.3.0/django_th hard linking django_th/urls.py -> django_th-0.3.0/django_th hard linking django_th/views.py -> django_th-0.3.0/django_th hard linking django_th/wsgi.py -> django_th-0.3.0/django_th cette fois ci le fichier MANIFEST.in est pris en compte et on ne trouve plus le fichier de config perso. on pourra s'envoyer de nouveau un coup de python setup . py sdist upload pour envoyer les sources sur pypi. Si vous √™tes arriv√© au bout de ce billet bravo ;) pour la peine un cadeau \"bonusque\" (comme disait Coluche) : Je me suis pris la t√™te une bonne heure avec python setup . py build qui n'excluait pas le local_settings.py avec le fichier MANIFEST.in alors qu'en fait c'est sdist qui le g√©rait ...","tags":"Techno","url":"https://foxmask.net/post/2013/06/24/incontournables-pythonerie-publier-son-appli-django-sans-la-config-perso/"},{"title":"Django Trigger Happy 0.3","text":"Hey ! H√© oui d√©j√† une version 0.3.0 apr√®s la 0.2.0 la m√©thode des petits pas ; ya rien de tel pour d√©buter :) Alors rien de transcendant mais du confort pour suivre ce qui se trame dans la r√©cup√©ration des informations de la toile. J'ai ajout√© un compteur de news ainsi que le nom du compte de l'utilisateur √† qui appartient le trigger qui tourne ce qui donne par exemple: user: foxmask - provider: ServiceRss - consummer: ServiceEvernote - News de Sam et Max = 12 new data j'ai mis un coup de bootstrap sur la liste des services activ√©s et c'est tout. installation pour l'installer je vous recommande de ne pas utiliser pip ... pypi m'a pourri les urls du projet ; le md5 est faux l'url est fausse bref rien de mieux que \" la source \", d√©compressez et faire python setup install et basta. J'esp√®re que √ßa s'arrangera pour les prochaines release; c'est la mis√®re depuis que pypi veut h√©berger les archives. no Future ? A pr√©sent que cette version semble tenir la route, pour l'utiliser √† titre perso en prod avec pr√®s de 30 flux RSS suivis, je vais pouvoir m'atteler √† int√©grer de nouveaux services. Pocket Readability Ceux ci seront assez facilement mis en place puisque peu d'information leur sont demand√©es de stocker et tr√®s similaires √† g√©rer. Mais au del√† de ces derniers, si vous √™tes utilisateurs de IFTTT.com, quels services utilisez vous abondamment que vous voudriez bien me voir ajouter √† \"DTH\" (Django Trigger Happy) ? L√¢chez vous c'est openbar ;) rappel : si vous n'avez pas suivi ce qu'est DTH ; en revoici les contours , et en images edit concernant le process d'installation via pypi: aller, j'ai bott√© le train de pypi :) et tout est rentr√© dans l'ordre ( foobar ) foxmask@:~/Django-VirtualEnv/foobar$ pip install django_th Downloading/unpacking django-th Downloading django_th-0.3.0.tar.gz Running setup.py egg_info for package django-th warning: no previously-included files found matching 'django_th/local_settings.py' Downloading/unpacking Django == 1 .4.3 ( from django-th ) Downloading Django-1.4.3.tar.gz ( 7 .7Mb ) : 7 .7Mb downloaded Running setup.py egg_info for package Django Downloading/unpacking batbelt == 0 .4 ( from django-th ) Downloading batbelt-0.4.tar.gz Running setup.py egg_info for package batbelt Downloading/unpacking django-profiles == 0 .2 ( from django-th ) Downloading django-profiles-0.2.tar.gz Running setup.py egg_info for package django-profiles Downloading/unpacking django-registration == 0 .8 ( from django-th ) Downloading django-registration-0.8.tar.gz ( 284Kb ) : 284Kb downloaded Running setup.py egg_info for package django-registration Downloading/unpacking evernote == 1 .23.2 ( from django-th ) Downloading evernote-1.23.2.tar.gz ( 132Kb ) : 132Kb downloaded Running setup.py egg_info for package evernote Downloading/unpacking feedparser == 5 .1.3 ( from django-th ) Downloading feedparser-5.1.3.tar.gz ( 283Kb ) : 283Kb downloaded Running setup.py egg_info for package feedparser Downloading/unpacking httplib2 == 0 .8 ( from django-th ) Downloading httplib2-0.8.tar.gz ( 110Kb ) : 110Kb downloaded Running setup.py egg_info for package httplib2 Downloading/unpacking oauth2 == 1 .5.211 ( from django-th ) Downloading oauth2-1.5.211.tar.gz Running setup.py egg_info for package oauth2 Downloading/unpacking ordereddict == 1 .1 ( from django-th ) Downloading ordereddict-1.1.tar.gz Running setup.py egg_info for package ordereddict Downloading/unpacking South == 0 .7.6 ( from django-th ) Downloading South-0.7.6.tar.gz ( 91Kb ) : 91Kb downloaded Running setup.py egg_info for package South Downloading/unpacking pytidylib == 0 .2.1 ( from django-th ) Downloading pytidylib-0.2.1.tar.gz ( 157Kb ) : 157Kb downloaded Running setup.py egg_info for package pytidylib Installing collected packages: django-th, Django, batbelt, django-profiles, django-registration, evernote, feedparser, httplib2, oauth2, ordereddict, South, pytidylib Running setup.py install for django-th warning: no previously-included files found matching 'django_th/local_settings.py' Running setup.py install for Django changing mode of build/scripts-2.7/django-admin.py from 644 to 755 changing mode of /home/foxmask/Django-VirtualEnv/foobar/bin/django-admin.py to 755 Running setup.py install for batbelt Running setup.py install for django-profiles Running setup.py install for django-registration Running setup.py install for evernote Running setup.py install for feedparser Running setup.py install for httplib2 Running setup.py install for oauth2 Running setup.py install for ordereddict Running setup.py install for South Running setup.py install for pytidylib Successfully installed django-th Django batbelt django-profiles django-registration evernote feedparser httplib2 oauth2 ordereddict South pytidylib Cleaning up... Les d√©pendances sont enfin respect√©es.","tags":"Techno","url":"https://foxmask.net/post/2013/06/21/djngo-trigger-happy-0-3/"},{"title":"Django Trigger Happy 0.2","text":"Hop une nouvelle version ! Celle ci se voit agr√©menter de : Nouveaut√©s : Dans une note Evernote, ajout dans l'url de la note, du lien du flux, ceci permet d'utiliser la fonction \"aller √† la source\" Ajout d'un \"statut\" √† son trigger permettant de l'activer ou non sans pour autant avoir √† le supprimer si on n'en veut plus, temporairement Ajout d'une pagination sur la liste des triggers Am√©liorations: Dans le pied de page de la note, remplacement du lien par l'affichage de l'origine de la source des donn√©es + le lien vers celle-ci Corrections de bugs: L'imposition d'un tag, pour la cr√©ation des notes, n'est plus :) Le traitement des flux Atom faisait planter le traitement batch Edition d'un trigger rendu possible √† pr√©sent Edit si vous vouliez l'installer via pip install django_th oubliez ! pour cette version ca ne fonctionne pas ; balot que je suis je n'ai pas mis le setup.py l√† o√π pypi l'attendait. Donc en attendant 2 solutions, l'archive est dispo depuis Pypi depuis GitHub (le lien zip :)","tags":"Techno","url":"https://foxmask.net/post/2013/06/17/django-trigger-happy-0-2/"},{"title":"Django Trigger Happy un IFTTT like , en images","text":"BonjEllo ! Je ne vous referai par \"l'article\" j'ai d√©j√† longuement d√©taill√© ce petit projet ici , je vous montre juste ce √† quoi il ressemble pour le moment, dans une version tr√®s \"toute neuve\" ;) Les services activ√©s par l'utilisateur : Wizard de cr√©ation d'un trigger en 3 petites pages : Les des triggers pr√™ts √† l'emploi Une fois le wizard utilis√© pour d√©finir ce qu'on veut \"grabber\", on a notre jolie page d'accueil qui ressemble √† ceci : fire ! √† pr√©sent que tout est pr√™t il nous reste un petit script python qui va nous faire notre tambouille et qui au lancement vous donne le cours des op√©rations : ./fire.py INFO PROVIDER ServiceRss CONSUMMER ServiceEvernote : News Sam et Max INFO PROVIDER ServiceRss CONSUMMER ServiceEvernote : News de Numerama INFO PROVIDER ServiceRss CONSUMMER ServiceEvernote : Python Package Index INFO PROVIDER ServiceRss CONSUMMER ServiceEvernote : mes news pourries : ) ce script est coll√© dans une crontab toutes les 10minutes R√©sultat dans Evernote ah oui tout de m√™me last but not least, il est bien beau avec son script mais zoukil√© le r√©sultat de toutes ces pages remplies ? c'est l√† √ßa vient ;) Comme on le voit, comme dans le wizard ci dessus, sur la partie droite de l'√©cran sous le titre \"Nexus 10\", on lit bien les noms des notebook et tags, correctement repris et bien cr√©√©s √† la vol√©e. Si ce petit bidule vous plait, libre √† vous de l'essayer, contribuer, critiquer. C'est open bar ! Le projet ne risque pas de pourrir dans un coin, j'en suis le premier client et est moult id√©es ;) ps: si vous l'essayer, utiliser plutot le d√©p√¥t github que pypi qui n'est pas uptodate avec les derni√®res corrections Edit : je vous rajoute 2 captures pour illustrer le rendu ... 1) re√ßu directement par mail en s'abonnant √† la ml de sam&max 2) re√ßu via DTH","tags":"Techno","url":"https://foxmask.net/post/2013/06/04/django-trigger-happy-un-ifttt-like-en-images/"},{"title":"Django Trigger Happy - une premi√®re","text":"Voici le premier projet un peu plus cons√©quent que les petits modules que je faisais de ci de l√†. Ce dernier est enti√®rement inspir√© du service IFTTT \"If This Then That\" . Description Le principe du service est d'effectuer une action (souvent, stocker une information, ou la relayer) en fonction d'un √©v√©nement se produisant n'importe o√π sur internet √† partir d'une source donn√©e. Ce projet peut √™tre utiliser pour vos besoins propres tout comme votre blog, ou vous pouvez √©galement d√©cider \" d'h√©berger \" les Triggers de vos potes. Pourquoi ce projet ? Comme √† chaque fois que je me lance dans un truc c'est par r√©action (√©pidermique ?) d'une solution qui ne fonctionne pas comme j'escomptais. Ici IFTTT marche bien, mais pas assez √† mon go√ªt, j'ai des probl√®me d'encoding UTF8 tr√®s tr√®s d√©sagr√©able ;) genre \"cet √©t√© je pars en loz√®re\" devient \"cet t je pars en lozre\"... Donc apr√®s avoir test√© d'autres solutions genre CloudWork, j'√©tais ravi ... mais estomaqu√© du co√ªt ! l'offre fonctionne au nombre de triggers √† journ√©e. Or un trigger chez CloudWork ce n'est pas un trigger chez IFTTT. Chez CloudWork un trigger c'est UN d√©clenchement, et non pas la programmation d'un d√©clenchement. Donc quand on est limit√© √† 100 triggers √† raison d'un toutes les 10min ... bonjour la facture :P Exemple d'utilisation Par exemple, vous suivez les billets d'un blog r√©guli√®rement, et vous ne souhaitez pas en perdre une miette. Vous d√©finissez alors un \"trigger\" qui se d√©clenchera quand un nouveau billet para√Ætra, alors ensuite vous d√©ciderez d'en faire ce que bon vous semble, comme le publier sur vos r√©seaux sociaux favoris ou encore stocker le billet dans Evernote ou ailleurs. C'est tr√®s pratique car vous ne d√©pendez plus d'aucune solution de lecteur de flux RSS par exemple comme Feedly, GoogleReader ou autre. Aujourd'hui Actuellement \"Trigger Happy\" ne sait faire que 2 choses : lire des flux RSS, et stocker ceux ci dans Evernote, dans le carnet de votre choix avec le tag de votre choix. Mise en route 1) On proc√©dera comme pour tout projet django avec un python manage . py syncdb suivi du lancement du serveur. On mettra dans une crontab (ou tout autre service de gestion de t√¢ches pr√©programm√©es) le script fire.py √† intervalle r√©gulier, genre tous les 10min (mais en prenant bien garde de ne pas avoir des \"pas\" trop courts afin de ne pas saturer le service cible qui pourrait vous bloquer l'acc√®s √† leur service). Le script se chargera de collecter les \"nouvelles fra√Æches\" pour vous les propager sur le(s) service(s) cible(s). 2) L'administrateur (ou m√™me vous;) peut d√©cider que tel ou tel service soit mis √† disposition ou non. Ceci permettant une modularit√© la plus flexible possible. Donc, de l√†, la premi√®re chose √† faire est d'aller dans l'admin et activer les 2 services RSS et Evernote, en cochant la case \"auth required\" pour d'Evernote. (cf explication ci dessous) 3) Ensuite l'utilisateur, disposera des services qu'il devra √† son tour activer. Pour le service Evernote, comme l'administrateur aura coch√© la case \"auth required\", l'utilisateur sera envoy√© vers le service Evernote pour demander que l'utilisateur autorise \"Django Trigger Happy\" de cr√©er des notes dans ses carnets. 4) Une fois les services activ√©s, il ne reste plus qu'√† cr√©er un trigger avec le wizard existant, d'o√π on indiquera depuis quel flux RSS on veut lire les sources de donn√©es, puis vers quel service on souhaite stocker/publier ces donn√©es. Si vous √™tes accoutum√© √† IFTTT, vous vous rendez compte qu'il s'agit du m√™me processus ;) Demain J'ai d√©j√† pr√©vu de pouvoir filtrer les flux RSS en fonction de contenu que je ne veux pas . Imaginons un blog ou tout n'est pas SFW :P ou plus simplement, sur le site de Pypi , √©norm√©ment de projets publi√©s arrivent avec une description \"UNKNOWN\" qui √† mon go√ªt ne m√©rite pas qu'on s'y attarde puisque l'auteur n'a pas pris le temps de mettre une description, il semblerait. Donc ce filtre permet d'√©viter d'avoir un contenu pollu√© vous l'aurez compris. Avenir L'architecture produite me permet d'ajouter facilement un service tels Twitter, Facebook, etc. et l'API Pour le moment le projet d√©bute tout juste mais je publierai un prochain billet (et une page wiki) pour expliquer comment on s'ajoute un service de plus, le plus ais√©ment possible. Quelques Liens Django Trigger Happy sur Pypi version 0.1 Django Trigger Happy sur GitHub Last but not Least : Greetings ! Un petit mot de remerciements pour Sam et Max que j'ai longuement sollicit√© et m'ont aid√© sur l'archi √† tenir ;)","tags":"Techno","url":"https://foxmask.net/post/2013/05/27/django-trigger-happy/"},{"title":"Debian 7 Wheezy - re mise √† jour du driver NVIDIA","text":"Je viens de finir d'installer cette mise √† jour de Debian Wheezy sur 2 PC ; un portable Dell Latitude sans aucun soucis mais comme d'hab mon PC de bureau n'en fait qu'√† sa t√™te... Le soucis se situe √† plusieurs endroits : GRUB Carte Graphique GRUB : La mise √† jour m'a flingu√© grub sans que j'ai eu le temps de voir ce qu'il s'√©tait pass√©... au reboot j'√©tais stuck \"dans le noir\"... condamn√© √† refaire une installation from scratch ... NVIDIA GT 220 Comme on change de release Debian, on change de kernel, donc on est \"bon\" pour se retaper l'installation du driver NVIDIA en version 304.64 pour 64Bits ; toutes autres versions anti√©rieures ne compilera tout bonnement pas ne trouvant pas le fichier version.h dans les sources du kernel ; rien que √ßa. Donc pour ce faire : arreter X /etc/init.d/gdm3 stop lancer ./NVIDIA-Linux-x86_64-304.64.run A l'invite il peut vous dire que vous utilisez un GCC 4.7 et que le module √©tait pr√©vu pour compiler avec GCC 4.6 vous lui dites donc \"non\" et √ßa passera. La compilation se passe les doigts dans le nez ! L'installeur vous demandera s'il peut vous exectuer nvidia-xconfig pour pondre le fichier /etc/X11/xorg.conf Dites lui oui ! finissez par un petit modprobe nvidia lancer gdm3 /etc/init.d/gdm3 start Et l√† comme par enchantement on retrouve un environnement graphique paisible. Par paisible j'entends que l'installation pr√©c√©dente allait tr√®s bien mais que le ventilo du proc de la CG tournait comme un d√©bile √† qui l'on aurait demander de faire du traitement vid√©o... Alors qu'une fois le module NVIDIA charg√© tout redevenait clamos. Voilou ! Edit 16/5 : un truc qui m'a quand m√™me fortement d√©plu avec ces mises √† jour. (j'en ai fait 3), il n'y a aucun avertissement sur le non support du driver NVIDIA lors de l'upgrade. On est dans le noir si le driver ne passe pas ... et pour retrouver ses billes, \"interroger\" la \"toile\" ; si on n'est pas familier de links ou w3m c'est la mort","tags":"Techno","url":"https://foxmask.net/post/2013/05/06/debian-7-wheezy-re-mise-a-jour-du-driver-nvidia/"},{"title":"HaveFnuBB les archives  sont de retour du futur","text":"Avec mon d√©m√©nagement de site web du projet HaveFnuBB (le forum sous GPL produit avec Jelix ), j'ai malencontreusement oubli√© de r√©cup√©rer mes archives du forum que je vous proposais au t√©l√©chargement. Rien que √ßa :-) Fort heureusement on me l'a fait remarquer et j'ai donc remis en ligne les versions 1.3.6 pour jelix 1.1 1.4.0 pour jelix 1.2 1.5.0 pour jelix 1.2 (aussi) Tout est l√†","tags":"Techno","url":"https://foxmask.net/post/2013/05/01/havefnubb-les-archives-sont-de-retour-du-futur/"},{"title":"Django - think twice - another day for you and me in paradise","text":"thought one Intro : Parfois √ßa cr√™ve les yeux mais quand on n'est pas r√©veill√© ; on a justement les yeux crev√©s :) Voil√† ce qui m'aveuglait : En tapant un python manage.py syncdb J'obtenais : django . core . exceptions . ImproperlyConfigured : '/home/foxmask/Django-Virtualenv/django-trigger-happy/django_th/django_th/sqlite3' isn 't an available database backend. Try using django . db . backends . XXX , where XXX is one of : 'dummy' , 'mysql' , 'oracle' , 'postgresql_psycopg2' , 'sqlite3' Error was : Import by filename is not supported . Evident non ? bon, mon settings.py contenait : DATABASES = { 'default' : { # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'. 'ENGINE' : '' , 'NAME' : '' , # Or path to database file if using sqlite3. 'USER' : '' , # Not used with sqlite3. 'PASSWORD' : '' , # Not used with sqlite3. 'HOST' : '' , # Set to empty string for localhost. Not used with sqlite3 'PORT' : '' , # Set to empty string for default. Not used with sqlite3. } } j'ai juste rajout√© 'ENGINE':'sqlite3' et patatra alors que le message complet et explicite me dit \"using django.db.backends.XXX where XXX is one of ...\" c'etait tellement evident ;) Pourquoi comment ? dans mon process de dev j'utilise un settings.py que je ne modifie pas du tout pour la config DATABASES qui est elle dans un local_settings.py charg√©e √† la fin de settings.py. Du coup en committant mon settings.py j'ai vir√© tout simplement \"django.db.backend.\" de 'ENGINE': de ce dernier puisque pr√©sent dans local_settings. Comment se faire des noeuds au cerveau ? Aahhhhhhhhhhhh je vous jure ;) thought two A cot√© de ce sujet qui a bien fait marrer #django-fr @ freenode ;)), un moins \"QQ La praline\" : splitter models.py en petit bout en fonction d'un p√©rim√®tre fonctionnel Pour arriver √† s√©parer les classes de son models.py on doit cr√©er un dossier models contenant : myapp / models / __init__ . py truc . py muche . py et dans __init__.py mettre simplement : from truc import Machin from muche import Chose o√π Machin et Chose sont des classes dans truc.py et muche.py Seulement tout ceci ne suffit pas... quand on va lancer python manage.py syncdb, aucune des 2 tables ne sera cr√©√©e. La solution, subtilit√© est cach√©e par l√† : class Machin ( models . Model ): class Meta : app_label = 'myapp' si app_label n'est pas d√©fini django ne saura pas que la classe split√©e appartient √† cette application ( si j'ai tout bien suivi les explications ici )","tags":"Techno","url":"https://foxmask.net/post/2013/04/11/django-think-twice-another-day-for-you-and-me-in-paradise/"},{"title":"Pythonthon c'est r√©gl√© : Python et la PSF sont sauf !","text":"Comme relat√© pr√©c√©demment, la PSF demandait l'aide de tout √† chacun pour son diff√©rend avec PO Box Hosting qui avait d√©pos√© la marque Python. Heureux d√©nouement Python Software Foundation Reaches Settlement, Ends Trademark Dispute , mais qui en doutait ? La marque Python n'√©tant d√©pos√©e qu'aux \"States\" la PSF s'inqui√©tait de ce qui allait \"lui\" arriver en Europe o√π la marque n'√©tait pas d√©pos√©e. La soci√©t√© PO Box Hosting a donc retir√© le d√©pot de la marque et tout est rentr√© dans l'ordre. La communaut√© s'en voit remercier pour sa mobilisation !","tags":"Techno","url":"https://foxmask.net/post/2013/03/20/pythonthon-cest-regle-python-la-psf-sont-sauf/"},{"title":"Incontournables Pythonerie : un pack de 12 s'il te plait !","text":"Avec ce billet nous allons voir comment produire un package comme on en voit partout dans le monde opensource (ou pas d'ailleurs) pour livrer une \"suite logicielle\" √† ses clients/utilisateurs. Br√®ve pr√©sentation du script : Ce script extrait d'un fichier XML (produit par Autodeploy ) les targz install√©s sur les environnements. Puis lit un fichier de configuration pour d√©cider dans quel r√©pertoire va √™tre t√©l√©charger chaque archive. C'est tout ! On mappe ni plus ni moins un targz dans un dossier. Pr√©requis √† la lecture de cet article la lecture des mes billets pr√©c√©dents, vous donnera l'aper√ßu de ce qui va suivre, puisque chacun d'eux est une partie du script complet qui suivra comme je vous l'ai pr√©sent√© depuis ces derniers jours, notamment : r√©cup√©ration des arguments entr√©s sur la ligne de commande soit avec optparse ou argpase la lecture de fichier XML la lecture de fichier de configuration la cr√©ation de fichier de journalisation La nouveaut√© dans cet article est le pseudo \"wget\" √† la sauce Python pour r√©cup√©rer les archives Tout ceci ressemble bien au d√©roulement d'un script, √ßa tombe bien le voici :) Pour utiliser ce script, on tape python make_delivery -r RELEASE -e ENV -c CONFIG le script traitera ceux ci comme suit : usage = \"%prog -e environment name -r release name. \\n for example : \\n python make_delivery -e envname -r 20130101\" parser = OptionParser ( usage ) parser . add_option ( \"-e\" , \"--env\" , dest = \"environment\" , help = \"the environment name to use to build the delivery\" , metavar = \"ENV\" ) parser . add_option ( \"-r\" , \"--rel\" , dest = \"release\" , help = \"the release name of this delivery (used to name the final package like release-RELEASE-yyyymmdd)\" , metavar = \"RELEASE\" ) parser . add_option ( \"-c\" , \"--conf\" , dest = \"configfile\" , help = \"the path where the config file is located. This file should contain the name of the environment from which to download the archives. By Default the script will search in ./env_dirs.conf\" , default = \"./env_dirs.conf\" , metavar = \"CONFIG\" ) parser . add_option ( \"-l\" , \"--log\" , dest = \"configlogfile\" , help = \"the path where the config file for the loggging is located. By Default the script will search in ~/MakeDelivery/logging.conf\" , default = os . path . expanduser ( '~/MakeDelivery/logging.conf' ), metavar = \"LOGGING_CONFIG\" ) ( options , args ) = parser . parse_args () if options . environment == None or options . release == None : parser . error ( \"options -e and -r are mandatory\" ) else : [ ... ] #lets concat release name + date to have a name to use for logfile and directory release_name = release_name_main ( options . release ) [ ... ] release_name_dir = release_name_create ( release_name ) D√®s lors make_delivery va faire quelques v√©rifications d'existence du dossier que j'escompte cr√©√© (pour ne pas √©crire par dessus pusique je conserve un historique de toutes les livraisons faites au client). def release_name_create ( release_name_dir ): if os . path . isdir ( release_name_dir ): logger . critical ( \"Directory %s already exists. You should change the release number ( -r parameter ) \" , release_name_dir ) exit ( 1 ) else : logger . info ( \"Creation of %s \" , release_name_dir ) os . makedirs ( release_name_dir ) return release_name_dir Puis make_delivery appelle le module get_envs (parsant le fichier XML) pour obtenir les noms des applications de mon environnement et en extraire les URL de chacune from get_env import get_apps [ ... ] #get the data from the get_env class which read the ConfigWrapper file from autodeploy environment_datas = get_apps ( options . environment ) Puis make_delivery lit le fichier de configuration d√©crivant comment structurer ma livraison en indiquant le nom de chaque application avec son dossier de destination. [myenv] #directory to add to the delivery whatever happens doc: fake [myenv_apps] myapp1: app myapp2: app myapp3: null [myenv_software] myapp4: app myapp5: path/to/target myapp6: null #do nothing for this app myapp7: . Enfin le transfert de fichier se produit et affiche une progress bar histoire de voir o√π on en est. def make_release ( environment_name , release_name_dir , environment_datas , configfile ): for component in environment_datas : logger . info ( \"Environment =>>> %s Components: %s : Begin \" , environment_name , component ) archives = environment_datas [ component ] for archive_name in archives : os . chdir ( curdir ) destination_directory = config . get ( environment_name + \"_\" + component , archive_name ) if destination_directory == 'null' : continue #check if the directory exists #if yes ; chdir to it if os . path . isdir ( destination_directory ): os . chdir ( destination_directory ) #otherwise create it then chdir else : os . makedirs ( destination_directory ) os . chdir ( destination_directory ) #get the url of the archive url = archives [ archive_name ] #get the filename part of the URL to download file_name = url . split ( '/' )[ - 1 ] #download the file try : logger . info ( \"Download %s - url %s \" , archive_name , url ) u = urllib2 . urlopen ( url ) except : logger . error ( \"Error: %s %s %s \" , sys . exc_info ()[ 1 ], archive_name , url ) pass f = open ( file_name , 'wb' ) meta = u . info () #get the Content Length file_size = int ( meta . getheaders ( \"Content-Length\" )[ 0 ]) #display the prgress on the screen logger . info ( \"Downloading: %s Bytes: %s \" , file_name , file_size ) file_size_dl = 0 block_sz = 8192 while True : #read the file getting from the url buffer = u . read ( block_sz ) if not buffer : break file_size_dl += len ( buffer ) f . write ( buffer ) #progressbar status = r \" %10d [ %3.2f%% ]\" % ( file_size_dl , file_size_dl * 100. / file_size ) status = status + chr ( 8 ) * ( len ( status ) + 1 ) print status , f . close () logger . info ( \"Environment =>>> %s Components: %s : End \" , environment_name , component ) Evidement, dans la foul√©e tout est logg√©, #set the name of the config logging file from the command line logging . config . fileConfig ( options . configlogfile , disable_existing_loggers = False ) [ ... ] FORMAT = ' %(asctime)s - %(name)s - %(levelname)s - %(message)s ' #write the logfile in the current working dir fh = logging . FileHandler ( './' + release_name + '.log' ) fh . setLevel ( logging . DEBUG ) formatter = logging . Formatter ( FORMAT ) fh . setFormatter ( formatter ) logger . addHandler ( fh ) ainsi je n'ai plus qu'√† regarder dans mon fichier release-YYYYMMDD-name.log si j'ai des erreurs (genre une 404 au hasard ;) Une fois lanc√©e, la commande affiche ceci : 2013-02-22 10:34:44,398 - make_delivery - INFO - Creation of release-201041.41-20130222 2013-02-22 10:34:44,439 - make_delivery - INFO - Creation of the release 201041.41 from the environment customer1-testing 2013-02-22 10:34:44,439 - make_delivery - INFO - Reading config file /root/MakeDelivery/env_dirs.conf 2013-02-22 10:34:44,470 - get_env - INFO - Read the Autodeploy config file http://autodeploy.domain.com/ConfigurationWrapper 2013-02-22 10:34:45,059 - make_delivery - INFO - Environment =>>> customer1-testing Components: apps : Begin 2013-02-22 10:34:45,104 - make_delivery - INFO - Download myapp1 - url http://maven.domain.com/deliveries/myapp1/releases/myapp_2.19.23_weblogic.tar.gz 2013-02-22 10:34:45,169 - make_delivery - INFO - Downloading: myapp1.19.23_weblogic.tar.gz Bytes: 29585377 2013-02-22 10:34:46,572 - make_delivery - INFO - Download myapp2 - url http://maven.domain.com/deliveries/myapp2/releases/myapp2_2010.r1.2.44.42_core_weblogic.tar.gz 2013-02-22 10:34:46,652 - make_delivery - INFO - Downloading: myapp2_2010.r1.2.44.42_core_weblogic.tar.gz Bytes: 67769731 2013-02-22 10:34:49,681 - make_delivery - INFO - Download framework - url http://maven.domain.com/maven2/internal/services/framework/framework/1.16.29/framework-1.16.29-delivery.tar.gz 2013-02-22 10:34:49,733 - make_delivery - INFO - Downloading: framework-1.16.29-delivery.tar.gz Bytes: 11556974 2013-02-22 10:34:50,231 - make_delivery - INFO - Download myapp3 - url http://maven.domain.com/deliveries/myapp3/releases/myapp3_2010.r1.1.37.42_weblogic.tar.gz 2013-02-22 10:34:50,303 - make_delivery - INFO - Downloading: myapp3_2010.r1.1.37.42_weblogic.tar.gz Bytes: 51400921 2013-02-22 10:34:52,224 - make_delivery - INFO - Download portal - url http://maven.domain.com/maven2/internal/services/portal/portal/1.10.18/portal-1.10.18-delivery.tar.gz 2013-02-22 10:34:52,276 - make_delivery - INFO - Downloading: portal-1.10.18-delivery.tar.gz Bytes: 16350871 2013-02-22 10:34:52,969 - make_delivery - INFO - Download myapp4 - url http://repo.domain.com/deliveries/myapp4/releases/myapp4_2010.r1.1.31.38_weblogic.tar.gz 2013-02-22 10:34:53,061 - make_delivery - INFO - Downloading: myapp4_2010.r1.1.31.38_weblogic.tar.gz Bytes: 60468113 2013-02-22 10:34:55,450 - make_delivery - INFO - Environment =>>> customer1-testing Components: apps : End 2013-02-22 10:34:55,450 - make_delivery - INFO - Environment =>>> customer1-testing Components: software : Begin 2013-02-22 10:34:56,677 - make_delivery - INFO - Download database - url http://maven.domain.com/maven2/internal/database/2010.r1.3.23.41/database-2010.r1.3.23.41.tar.gz 2013-02-22 10:34:56,727 - make_delivery - INFO - Downloading: database-2010.r1.3.23.41.tar.gz Bytes: 4902673 2013-02-22 10:35:11,832 - make_delivery - INFO - Download database2 - url http://maven.domain.com/maven2/internal/database2/database2/1.48.12/database2-1.48.12-delivery.tar.gz 2013-02-22 10:35:11,868 - make_delivery - INFO - Downloading: database2-1.48.12-delivery.tar.gz Bytes: 10995334 2013-02-22 10:35:12,321 - make_delivery - INFO - Environment =>>> customer1-testing Components: software : End 2013-02-22 10:35:12,321 - root - INFO - Environment =>>> customer1-testing download successfull completed On m'a cit√© il y a quelques temps l'usage de la lib \" requests \" plut√¥t que urllib2 car plus souple et facile de mise en oeuvre notamment pour g√©rer l'auth. Ici je n'ai nul besoin d'auth c'est un acc√®s r√©seau sur l'intranet ;) Si vous voulez zieuter de plus pr√®s les sources de ce script, ou plus simplement en avoir une vue d'ensemble, il se trouve ici sur github Etant loin d'√™tre un pro dans le domaine c'est modestement que j'ai tent√© l'exercice de vous montrer √©tape par √©tape, comment \"√ßa marche\" chez moi. Ce script marche parfaitement en prod, et me permet d'√©conomiser un temps monstreux : plus besoin de faire les mkdir plus besoin de faire les wget des presque 60 archives que constituent une \"livraison\" √† mes clients le script ne prend que 3 minutes √† produire ma livraison pour le plus \"gros\" client. Avant ce script il me fallait en passer par mkdir + wget avec risque d'erreurs potentielles ... => 1heure J'ai dans le pipe, la cr√©ation d'une RELEASE NOTE listant au client les √©l√©ments fournis, dans un doc PDF, document note que je ponds manuellement aujourd'hui : un tableau des versions avec instructions d'installation => re une heure de perdue ... alors qu'apres un test d'une soluce python √ßa me prendrait 1min :) Voilou : N'h√©sitez pas √† me faire un retour, si j'ai pu vous donner envie de vous mettre √† python (si vous veniez de php comme bibi), si vous avez trouv√© √ßa trop \"weak\"/trop juste, trop chiant, ou juste \"pas mal\", je suis pr√™t √† tout entendre ;)","tags":"Techno","url":"https://foxmask.net/post/2013/03/18/incontournables-pythonerie-pack-de-12/"},{"title":"RSS, RSS, quoi j'ai une gueule d'RSS ?","text":"Avec l' \"arriv√©e\" du \"d√©part annonc√©\" de GoogleReader pour cet √©t√©, des mouvements de foule se produisent pour trouver une alternative, une vraie. Chacun tweetant la solution qu'il trouve la mieux avec de la valeur ajout√©e qu'apporte cette derni√®re. Alors non je ne vous en donnerai pas une seule de ces solutions, je n'utilise aucun lecteur de flux RSS... J'utilise une doublette (un gestionnaire de triggers et un lecteur de carnets de notes \"pour lire plus tard\") qui n'est pas publique. Par contre tous ces mouvements, m'am√®nent √† une r√©flexion que tout √† chacun utilisant un blog a d√©j√† eu, et qui pour moi importe plus que trouver une alternative √† une solution qui meurt : Dois-je h√©berger moi m√™me un \"lecteur\" de flux RSS ? Dois-je plut√¥t utiliser une plateforme lecteur de flux RSS ? On se posait la m√™me question pour les blogs, utiliser une plateforme ou s'h√©berger son propre blog. Avec l'av√®nement de l'√®re du mobile, il importe que chacune des 2 solutions permette l'acc√®s via smartphone, que √ßa soit pour l'auto-h√©bergement, ou la plateforme qu'on aura choisi (qui fournirait un client pour smartphone of course) Ne n√©gligez pas l'auto h√©bergement sous pr√©texte que vous pr√©f√©rez avoir un client natif iOS/Android (par exemple) pour lire les \"news\" plus facilement. Il suffit de \"pusher\" les nouveaut√©s r√©cup√©rer par votre lecteur RSS vers une solution cloud, style Evernote pour parvenir √† avoir toutes vos news sans effort sur votre portable. Alors prenez votre temps pour trouver ce qui vous si√©ra le plus ;-)","tags":"Techno","url":"https://foxmask.net/post/2013/03/14/rss-rss-quoi-jai-une-gueule-drss/"},{"title":"Oracle Migrer un sch√©ma ISO en UTF8","text":"Vous avez sous la main un dump en ISO et vous souhaitez l'importer en UTF8, tout un programme ! La marche √† suivre est la suivante : On importe le dump dans un sch√©ma d'une base en ISO On ex√©cutera un script byte_to_char.sql pour que le sch√©ma prenne en compte l'UTF8 On exportera le sch√©ma en UTF8 On importera le dump en UTF8 dans une base UTF8 Import du dump je vous laisse avec l'√©tape une, basique √† souhait ;) Ex√©cution du script byte_to_char.sql BEGIN FOR i IN ( SELECT utc . TABLE_NAME , utc . column_name , utc . data_length , utc . data_type FROM user_tab_cols utc , user_tables ut WHERE ut . TABLE_NAME = utc . TABLE_NAME AND utc . data_type IN ( 'VARCHAR2' , 'CHAR' ) AND char_used = 'B' AND column_name NOT LIKE 'SYS_%' ) loop EXECUTE immediate 'alter table ' || i . TABLE_NAME || ' modify ( ' || i . column_name || ' ' || i . DATA_TYPE || '(' || i . data_length || ' CHAR) )' ; END loop ; END ; / Ainsi, √† l'issu de son ex√©cution vos colonnes bytes seront en char ce qui permettra lors de l'import, de prendre en compte les caract√®res accentu√©s sur plus d'un byte. Export du sch√©ma en UTF8 mknode pipeExp p export NLS_LANG = AMERICAN_AMERICA.UTF8 gzip MY_UTF8.dmp.gz nohup exp userid = LOGIN/PASS file = pipeExp grants = n & l'important ici est la variable d'environnement NLS_LANG √† positionner √† AMERICAN_AMERICA.UTF8 Import du dump en UTF-8 idem ci dessus, c'est simple √† souhait ;)","tags":"Techno","url":"https://foxmask.net/post/2013/03/14/oracle-migrer-un-schema-iso-en-utf8/"},{"title":"Incontournables Pythonerie : parse parse parsera la derni√®re la derni√®re","text":"Le sujet du jour concernera le traitement des param√®tres en lignes de commandes, mais au lieu de mon pr√©c√©dant billet sur le sujet , qui traitait de OptParse , celui ci traitera de argparse et des diff√©rences que j'ai constat√© pour passer de l'un √† l'autre, et qui ne sont pas dans la doc de \"migration\" Pour traiter un cas concret j'ai produit un lib python pour r√©cup√©rer des infos d'un site en ligne telles que une timeline, la liste √©pisodes d'une s√©rie tv, la liste des s√©ries tv ressemblant √† une autre etc... √ßa c'est pour la lib, elle fonctionne ;) Pour la tester j'ai pondu un script qui fait l'appel √† toutes les m√©thodes de la classe de ma lib. Il y a pas moins d'une quarantaine de m√©thodes. Pourquoi je vous dis √ßa ? parce que √ßa m'a fait faire une quarantaine de traitement d'arguments ;) Ah ba quand il faut il faut ;) Optparse Avec optparse, j'ai donc d√©cid√© de partir du postulat : faire des \"groupes\" : un par methode de ma classe avec les options qui matcheront les param√®tres attendues par chaque m√©thode (classique quoi). Cela donnait ceci (je ne vous mets pas tout rassurez vous ;) : def main (): parser = OptionParser () group0 = OptionGroup ( parser , \"*** Search series\" ) group0 . add_option ( \"--title\" , dest = \"title\" , type = \"string\" , help = \"make a search by title\" ) parser . add_option_group ( group0 ) # group the options for handling Display of series parameters group1 = OptionGroup ( parser , \"*** Details of series\" ) group1 . add_option ( \"--display\" , dest = \"display\" , action = \"store\" , help = \"the name of the given serie\" ) parser . add_option_group ( group1 ) # group the options for handling Episodes parameters group2 = OptionGroup ( parser , \"*** Episodes\" , \"use --name (--season ) (--episode ) ( -- summary ) to filter episodes you want to search \") group2 . add_option ( \"--name\" , dest = \"name\" , action = \"store\" , help = \"the name of the given serie\" ) group2 . add_option ( \"--episode\" , dest = \"episode\" , action = \"store\" , help = \"the number of the episode (optional)\" ) group2 . add_option ( \"--season\" , dest = \"season\" , action = \"store\" , help = \"the number of the season (optional)\" ) group2 . add_option ( \"--summary\" , dest = \"summary\" , action = \"store_true\" , help = \"boolean set to false by default, to only get the summary of the episode ( optional ) \") parser . add_option_group ( group2 ) [ ... ] ( options , args ) = parser . parse_args () [ ... ] Ensuite pour avoir l'aide on tape python go . py - h qui affiche Usage: go.py [ options ] Options: -h, --help show this help message and exit *** Search series: --title = TITLE make a search by title *** Details of series: --display = DISPLAY the name of the given serie *** Episodes: use --name ( --season ) ( --episode ) ( --summary ) to filter episodes you want to search --name = NAME the name of the given serie --episode = EPISODE the number of the episode ( optional ) --season = SEASON the number of the season ( optional ) --summary boolean set to false by default, to only get the summary of the episode ( optional ) Ok c'est tout beau et cool et √ßa marche (en plus ;-) Bon √† pr√©sent les limitations de optparse (outre le fait qu'il est d√©pr√©ci√© car plus maintenu) : les param√®tres obligatoires : optparse permet de rendre des param√®tres obligatoires via un required=True, mais le soucis c'est que les groupes ne sont pas exclusifs et que dans le \"options\" qui est ici : ( options , args ) = parser . parse_args () \"options\" contient TOUS les param√®tres de TOUS les groupes. Du coup si on fait un required=True sur group0 . add_option ( \"--title\" , dest = \"title\" , type = \"string\" , help = \"make a search by title\" , required = True ) quand je taperai python go . py -- display -- name dexter il me sortira que j'ai oubli√© de renseigner le param√®tre TITLE.... que je n'ai pas besoin pour l'utilisation de --display ... √áa √ßa m'a d√©rang√© car du coup j'ai d√ª d√©porter l'aspect \"obligation de renseigner un param√®tre\" plus tard dans mon code. param√®tres en conflit optparse ne permet pas d'utiliser 2 fois le m√™me nom de param√®tre pour deux groupes distincts, il p√®te une vraie exception et rien √† faire pour contourner. Du coup la convention de nommage des variables (pour les rendre unique) devient vite p√©nible pour conserver un semblant d'homog√©n√©it√© entre les noms des m√©thodes de la classe de ma lib et les noms des actions mises en place dans mon script. aide trop verbeuse Comme dit plus t√¥t j'ai pres de 40 groupes, du coup l'aide en devient carr√©ment illisible au premier coup d'oeil. Si si je vous promets, imaginer √ßa Usage: go.py [ options ] Options: -h, --help show this help message and exit *** Search series: --title = TITLE make a search by title *** Details of series: --display = DISPLAY the name of the given serie *** Episodes: use --name ( --season ) ( --episode ) ( --summary ) to filter episodes you want to search --name = NAME the name of the given serie --episode = EPISODE the number of the episode ( optional ) --season = SEASON the number of the season ( optional ) --summary boolean set to false by default, to only get the summary of the episode ( optional ) ... multipli√© par 10 ... Donc fort de ces constats je me suis dit \"bon h√© ho ; si √ßa me saoule d√©j√† rien qu'√† moi personnellement moi m√™me ; je ne serai pas le seul ; voyons argparse\" Argparse Pour d√©marrer sans trop perdre de temps j'ai donc suivi la doc d'upgrade mentionn√©e plus haut pour passer de optparse √† argparse. √áa a vite fonctionn√© et j'√©tais plut√¥t content ;) param√®tres en conflits : r√©solu Mais comme je suis toujours insatisfait, je suis reparti sur mon envie de mettre les m√™mes noms de variables √† mes actions qu'√† celle des param√®tres de mes m√©thodes de classe de ma lib. en clair je voulais pour √ßa : def shows_episodes ( self , url , season = None , episode = None , summary = False , hide_notes = False , token = None ): [ ... ] def shows_characters ( self , url , summary = False , the_id = None ): [ ... ] faire un truc du genre : python go . py shows_episodes -- url ... -- season ... -- episode ... python go . py shows_characters -- url ... -- summary ... Pour y parvenir argparse a une option de gestion des conflits conflict_handler qu'on passe √† 'resolve' Ainsi pourvu, taper les param√®tres sera beaucoup facile √† retenir ou tout du moins plus simple √† taper que python go . py -- shows_episodes -- shows_episodes_url ... -- shows_episodes_season ... -- shows_episodes_episode python go . py -- shows_characters -- shows_characters_url ... -- shows_characters_summary ... vous voyez le genre de balles dans la tete qu'on pouvait se tirer avec optparse pour avoir des var \"unique\" (sans conflit ;) aide trop verbeuse : r√©solu De m√™me l'aide cette fois-ci s'est retrouv√©e raccourcie drastiquement. avant on avait Usage: go.py [ options ] Options: -h, --help show this help message and exit *** Search series: --title = TITLE make a search by title *** Details of series: --display = DISPLAY the name of the given serie *** Episodes: use --name ( --season ) ( --episode ) ( --summary ) to filter episodes you want to search --name = NAME the name of the given serie --episode = EPISODE the number of the episode ( optional ) --season = SEASON the number of the season ( optional ) --summary boolean set to false by default, to only get the summary of the episode ( optional ) √† pr√©sent ca donne : Usage: go.py [ options ] Options: -h, --help show this help message and exit shows_search - Search series: use shows_series make a search by title shows_displays - Details of series: use display = DISPLAY the name of the given serie shows_episodes - Episodes: use shows_episode ( --season ) ( --episode ) ( --summary ) to filter episodes you want to search La diff√©rence entre les 2 ? On n'affiche plus ici les options de chaque commande ! Mais ensuite si on veut l'aide compl√®te de l'action shows_search on tapera un : python go.py show_search --help qui donnera l'aide escompt√©e usage: go [ options ] shows_search [ -h ] --title TITLE positional arguments: shows_search Search series: use --shows_search --title optional arguments: -h, --help show this help message and exit --title TITLE make a search by title C'est plus clair plus concis et on est tout joie ;) Tout ceci est obtenu avec une particularit√© propre √† argparse qui est la cr√©ation d'un sub-parser. Oui un subparser. Avant on avait la totalit√© des actions (sous la main avec optparse) comme montr√© dans le premier snipset A pr√©sent avec subparser ca donne ceci : parser = argparse . ArgumentParser ( prog = \"go\" , usage = ' %(prog)s [options]' , description = 'BetaSeries API Management' , conflict_handler = 'resolve' , add_help = True ) subparsers = parser . add_subparsers ( help = 'sub-command help' ) group0 = subparsers . add_parser ( 'shows_search' , help = 'Search series: use -- shows_search -- title ') group0 . add_argument ( \"shows_search\" , action = \"store_true\" , help = 'Search series: use --shows_search --title ' ) group0 . add_argument ( \"--title\" , action = \"store\" , required = True , help = \"make a search by title\" ) group1 = subparsers . add_parser ( \"shows_display\" , help = \"Details of series: use --shows_display --url \" ) group1 . add_argument ( \"shows_display\" , action = \"store_true\" , help = \"Details of series : use --shows_display --url \" ) group1 . add_argument ( \"--url\" , action = \"store\" , required = True , help = \"the url/name of the given serie\" ) group2 = subparsers . add_parser ( \"shows_episodes\" , help = \"Show Episodes: use -- shows_episodes -- url ( -- season ) ( -- episode ) ( -- summary ) to filter episodes you want to search \") group2 . add_argument ( \"shows_episodes\" , action = \"store_true\" , help = \"Episodes: -- shows_episodes -- url ( -- season ) ( -- episode ) ( -- summary ) to filter episodes you want to search \") group2 . add_argument ( \"--url\" , action = \"store\" , required = True , help = \"the url of the given serie\" ) group2 . add_argument ( \"--episode\" , action = \"store\" , help = \"the number of the episode (optional)\" ) group2 . add_argument ( \"--season\" , action = \"store\" , help = \"the number of the season (optional)\" ) group2 . add_argument ( \"--summary\" , action = \"store_true\" , help = \"boolean set to false by default, to only get the summary of the episode ( optional ) \") [ ... ] args = parser . parse_args () if len ( sys . argv ) > 1 : do_action ( args ) else : parser . error ( \"enter -help to see the options you can use\" ) Une petite explication sur le parm help s'impose dans l'utilisation que j'en ai faite. Quand on tape python go.py --help l'aide affich√©e n'est autre que le texte (help=\"..\") qui se trouve sur ma ligne groupX = subparser.add_parser() Quand on tape python go.py shows_search --help l'aide affich√©e est celle sur la ligne add_argument(\"show_search\",help=\"..\") puisque cette fois ci je veux l'aide de la commande elle m√™me. La diff√©rence c'est que la premiere sert pour afficher l'aide de toutes les commandes, la seconde pour l'aide de la commande elle seule. Donc, personnellement je mets la m√™me chose sinon je n'ai pas d'aide affich√©e suffisement explicite. On pourrait se dire que argparse va r√©afficher quand m√™me l'aide d√©j√† fournie pour ici groupX = subparser.add_parser() , mais non : voici la difference sans le texte d'aide usage: go [ options ] shows_search [ -h ] --title TITLE positional arguments: shows_search optional arguments: -h, --help show this help message and exit avec le texte d'aide usage: go [ options ] shows_search [ -h ] --title TITLE positional arguments: shows_search Search series: use --shows_search --title optional arguments: -h, --help show this help message and exit --title TITLE make a search by title Autre diff√©rence majeure entre optparse et argparse : R√©cuperer les infos saisies avec optparse on faisait √† la tout fin de la definition des groupes (pour mon cas) ( options , args ) = parser . parse_args () puis dans sa fonction on testait les param√®tres : if options . title : #traitement elif options . name : #traitement R√©cuperer les infos saisies avec argparse args = parser . parse_args () Ici args est une liste nomm√©e Namespace qui contient uniquement les param√®tres disponibles via le subparser concern√©, exemple un print de args donnerait ceci : python go_new . py shows_episodes -- url dexter Namespace ( episode = None , season = None , shows_episodes = True , summary = False , url = 'dexter' ) Ensuite donc dans sa fonction on teste si la commande est dispo dans options : f hasattr ( options , 'shows_characters' ): #traitement elif hasattr ( options , 'shows_episodes' ): #traitement On doit utiliser if hasattr(options, 'shows_episodes'): √† la place de if options.shows_episodes sinon python produira syst√©matiquement une erreur, puisque l'info sur options.shows_episodes n'est pas disponible quand on traitera de .... shows_characters... et inversement. voili voilo. Pour voir mes scripts complets avec optparse et argparse ; ils sont tous deux disponibles sur github au beau milieu d'un projet ;) Si vous avez des remarques &/ou corrections, l√¢chez vous ;) Si vous avez envie d'article sur un sujet particulier, \"il y a un\" billet \"pour cela\" (c) et je me fais fort de (tenter) d'y r√©pondre ;)","tags":"Techno","url":"https://foxmask.net/post/2013/03/13/incontournables-pythonerie-parse-parse-parsera-la-derniere-la-derniere/"},{"title":"Incontournables Pythonerie : BigBrother is logging you","text":"Comme chacun sait, il est √ªber bradiqueu de suivre ce que fait son programme, pour tenter de diagnostiquer tout probl√®me protentiel dans son application. Pour cela on exploite tous plus ou moins la m√™me chose avec nos langages respectifs, le plus r√©pandu en JAVA par exemple, √©tant log4j . En Python donc, on dispose du module Logger . Comment marche un syst√®me de journalisation : on d√©fini un nom de fichier dans lequel sera ajout√© tous les √©v√®nements de son programme on d√©fini un niveau de journalisation parmi INFO,DEBUG,WARN,ERROR,CRITICAL on d√©fini un formatage des lignes de journalisation Voici comment tout cela se passe avec Logger : O√π logger & les niveaux de log Un exemple le plus basique qui soit, consiste √† afficher un message dans la console √† l'ex√©cution du script : import logging logging . warning ( 'Watch out!' ) # will print a message to the console logging . info ( 'I told you so' ) # will not print anything vous affichera un beau WARNING:root:Watch out! Cela est bien sympathique mais la plupart du temps on veut mettre tout cela dans un fichier de log, ceci s'effectue comme suit : import logging logging . basicConfig ( filename = 'example.log' , level = logging . DEBUG ) logging . debug ( 'This message should go to the log file' ) logging . info ( 'So should this' ) logging . warning ( 'And this, too' ) A pr√©sent plus rien ne s'affiche √† la console mais votre fichier example.log contient bien comme attendu : DEBUG : root : This message should go to the log file INFO : root : So should this WARNING : root : And this , too Dans la foul√©e, on en a profit√© pour d√©finir le niveau de journalisation √† DEBUG (via level=logging.DEBUG), ce qui nous a permit d'avoir toutes les traces dans le fichier de log Il est par ailleurs tout √† fait possible d'utiliser la journalisation au travers de plusieurs modules : # myapp.py import logging import mylib def main (): logging . basicConfig ( filename = 'myapp.log' , level = logging . INFO ) logging . info ( 'Started' ) mylib . do_something () logging . info ( 'Finished' ) if __name__ == '__main__' : main () # mylib.py import logging def do_something (): logging . info ( 'Doing something' ) ce qui affichera : INFO : root : Started INFO : root : Doing something INFO : root : Finished Formatage des logs Apr√®s avoir vu o√π logger et quel(le)s (niveaux d') infos, voici √† pr√©sent le formatage de ses chers log: import logging logging . basicConfig ( filename = 'example.log' , level = logging . DEBUG ), \\ format = ' %(asctime)s %(message)s ' ) logging . debug ( 'This message should go to the log file' ) logging . info ( 'So should this' ) logging . warning ( 'And this, too' ) ceci vous produire une ligne affichage la date courant + le message : 2013-02-22 14:43:08,486 This message should go to the log file 2013-02-22 14:43:08,487 So should this 2013-02-22 14:43:08,487 And this, too Enfin voici un exemple complet avec en plus un fichier de configuration de log d√©finissant par module, o√π mettre les logs (console / fichier) et quels niveaux de d√©tail ces logs auront : logging.conf: [loggers] keys = root,simpleExample [handlers] keys = consoleHandler [formatters] keys = simpleFormatter [logger_root] level = DEBUG handlers = consoleHandler [logger_simpleExample] level = DEBUG handlers = consoleHandler qualname = simpleExample propagate = 0 [handler_consoleHandler] class = StreamHandler level = DEBUG formatter = simpleFormatter args = (sys.stdout,) [formatter_simpleFormatter] format = %(asctime)s - %(name)s - %(levelname)s - %(message)s datefmt = Ce fichier de configuration des log d√©fini, on l'exploite ensuite dans son script comme ceci : import logging import logging.config logging . config . fileConfig ( 'logging.conf' ) # create logger logger = logging . getLogger ( 'simpleExample' ) # 'application' code logger . debug ( 'debug message' ) logger . info ( 'info message' ) logger . warn ( 'warn message' ) logger . error ( 'error message' ) logger . critical ( 'critical message' ) Ce qui produira comme log : 2013-02-22 14:57:30,744 - simpleExample - DEBUG - debug message 2013-02-22 14:57:30,745 - simpleExample - INFO - info message 2013-02-22 14:57:30,745 - simpleExample - WARNING - warn message 2013-02-22 14:57:30,745 - simpleExample - ERROR - error message 2013-02-22 14:57:30,745 - simpleExample - CRITICAL - critical message la premi√®re colonne contient la date, la seconde, le script utilis√©/logger utilis√©, la troisi√®me le niveau d'info de log, et enfin la ligne de log elle m√™me qu'on a √©crit dans le code. Quelques subtilit√©s , vous permettent : 1) d'avoir un fichier de log par ex√©cution avec l'option filemode=\"w\" comme ceci : logging . basicConfig ( filename = 'example.log' , level = logging . DEBUG , filemode = \"w\" ) 2) de d√©finir le niveau de log sur la ligne de commande si cela vous botte via --log=INFO par exemple 3) d'avoir des lignes de log utilisant des variables comme ceci logging . warning ( ' %s before you %s ' , 'Look' , 'leap!' ) qui affichera Look before your leap! 4) de jouer sur le format d'affichage de la date comme ceci : logging . basicConfig ( filename = 'example.log' , level = logging . DEBUG , format = ' %(asctime)s %(message)s ' , datefmt = '%m/ %d /%Y %I:%M:%S %p' ) Ce billet est tr√®s largement inspir√© de la doc, tr√®s bien faite, et m'aura permit de vous pr√©senter un nouveau volet indispensable √† vos d√©veloppements ;)","tags":"Techno","url":"https://foxmask.net/post/2013/03/11/incontournable-pythonerie-bigbrother-is-logging-you/"},{"title":"Oracle et Opatch","text":"A une √©poque, patcher Oracle √©tait un sin√©cure :P Depuis avec OPatch c'est on ne peut plus simple ! On r√©cup√®re un patch chez Oracle, on le d√©compresse, on tape opatch apply et hop ! Donc apr√®s la d√©compression, √ßa donne : cd path_ou_on_a_decompresse_le_path application du patch oracle opatch apply Si vous rencontrez un erreur du genre : OPatch cannot find a valid oraInst.loc file to locate Central Inventory. Alors taper la commande suivante : opatch apply -invPtrLoc /u01/app/oracle/product/11.2.0.1.0/db/oraInst.loc le param√®tre invPtrLoc indique √† opatch, o√π se trouve le fameux \"Central Inventory\" ce qui donnera par exemple pour le patch 8795792 Invoking OPatch 11 .2.0.1.6 Oracle Interim Patch Installer version 11 .2.0.1.6 Copyright ( c ) 2011 , Oracle Corporation. All rights reserved. Oracle Home : /u01/app/oracle/product/11.2.0.1.0/db Central Inventory : /u01/app/oracle/product/11.2.0.1.0/inventory from : /u01/app/oracle/product/11.2.0.1.0/db/oraInst.loc OPatch version : 11 .2.0.1.6 OUI version : 11 .2.0.1.0 Log file location : /u01/app/oracle/product/11.2.0.1.0/db/cfgtoollogs/opatch/opatch2011-07-29_15-37-22PM.log Applying interim patch '8795792' to OH '/u01/app/oracle/product/11.2.0.1.0/db' Verifying environment and performing prerequisite checks... Voulez-vous continuer ? [ y | n ] User Responded with: Y All checks passed. Entrez votre adresse √©lectronique pour √™tre inform√© des probl√®mes de s√©curit√©, installer et lancer Oracle Configuration Manager. Le processus est plus simple pour vous si vous utilisez votre adresse √©lectronique/nom utilisateur My Oracle Support. Pour plus de d√©tails, consultez la page http://www.oracle.com/support/policies.html. Adresse √©lectronique/nom utilisateur : you@yourcompany.com Indiquez votre mot de passe My Oracle Support pour recevoir les mises √† jour de s√©curit√© via votre compte My Oracle Support. Mot de passe ( facultatif ) : Backing up files... Application d ' un patch au composant oracle.rdbms, 11 .2.0.1.0... Patch 8795792 successfully applied Log file location: /u01/app/oracle/product/11.2.0.1.0/db/cfgtoollogs/opatch/opatch2011-07-29_15-37-22PM.log OPatch succeeded. Une fois fait, relancer la base Oracle que vous aurez bien √©videmment stopp√©e avant de commencer, je ne vous l'avais pas dit ? ba il faut tout lire avant de commencer ;)","tags":"Techno","url":"https://foxmask.net/post/2013/03/07/oracle-et-opatch/"},{"title":"de PHP √† Python : Minie petite souris","text":"Nouvel opus de la s√©rie de de PHP √† Python . Aujourd'hui, Comment parcourir un fichier de configuration ini ? Alors en intro, un truc bien cool pour tout √† chacun : les fichiers ini se lisent aussi bien avec Python que PHP. Zavez une appli avec un bon (gros) fichier de config au format ini ; pas de probl√®me, vous allez voir ce que vous allez voir ;) Pour illustrer ce billet j'ai pris un fichier de config de mon forum HaveFnuBB √©crit en PHP que voici Le bout de code PHP lisant mon fichier de config permet de connaitre les R√©ponses HTML possible, le code est le suivant : de PHP ... Ceci affichera les valeurs de mes variables d√©finies dans ma section sus mentionn√©e array(3) { [\"minifyCSS\"]=> string(1) \"1\" [\"minifyJS\"]=> string(0) \"\" [\"minifyCheckCacheFiletime\"]=> string(0) \"\" } ... √† Python Pour le script python cela donnera #!/usr/bin/python # -*- coding: utf-8 -*- import ConfigParser import os config = ConfigParser . ConfigParser () config . read ( os . getcwd () + '/havefnubb/var/config/defaultconfig.ini.php.dist' ) print config . items ( 'jResponseHtml' ) pour obtenir en r√©sultat : [( 'minifyjs' , 'off' ), ( 'minifycss' , 'on' ), ( 'minifycheckcachefiletime' , 'off' )] Pour l'oeil aguerri, vous aurez remarqu√© que 1 est devenu on et \"\" est devenu off pour python. Le module ConfigParser ne se contente pas que de vous afficher le contenu d'une section (fort heureusement). Avec celui-ci vous avez un acc√®s direct √† tous les param√®tres avec une instruction get comme ceci : #!/usr/bin/python # -*- coding: utf-8 -*- import ConfigParser import os config = ConfigParser . ConfigParser () config . read ( os . getcwd () + '/havefnubb/var/config/defaultconfig.ini.php.dist' ) print config . get ( 'jResponseHtml' , 'minifyjs' ) vous affichera le \"off\" vu plus haut. Outre l'acc√®s direct, vous pouvez √©galement pondre un fichier de config √† la vol√©e en commen√ßant par ajouter la section puis les variables distinctes comme ceci : import ConfigParser config = ConfigParser . RawConfigParser () config . add_section ( 'Section1' ) config . set ( 'Section1' , 'an_int' , '15' ) config . set ( 'Section1' , 'a_bool' , 'true' ) config . set ( 'Section1' , 'a_float' , '3.1415' ) config . set ( 'Section1' , 'baz' , 'fun' ) config . set ( 'Section1' , 'bar' , 'Python' ) config . set ( 'Section1' , 'foo' , ' %(bar)s is %(baz)s !' ) # Writing our configuration file to 'example.cfg' with open ( 'example.cfg' , 'wb' ) as configfile : config . write ( configfile ) Produira un fichier example.cfg : [Section1] an_int = 15 a_bool = true a_float = 3.1415 baz = fun bar = Python foo = %(bar)s is %(baz)s! ici %(bar) et %(baz) seront remplac√©es par les valeurs de leur variable d√©finie juste au dessus Cot√© PHP on n'a rien d'√©quivalent... sauf au sein de(s) framework(s) PHP comme Jelix et sa m√©thode jIniFileModifier('fichier')->getValue('variable','section') La prochaine partie traitera du traitement de la journalisation (les logs)","tags":"Techno","url":"https://foxmask.net/post/2013/03/04/de-php-a-python-minie-petite-souris/"},{"title":"Oracle Sauvegarder avec Impdp / Expdp et le Parfile","text":"Dans un billet pr√©c√©dent j'avais abord√© ces 2 outils pour se faire des backups \"en r√©seau\" , voici √† pr√©sent plus en d√©tail, le fonctionnement des ces 2 outils. Oracle fournit donc bien √©videment des outils pour produire des sauvegardes de ses donn√©es. Les plus basiques sont impdp et expdp. Le premier produit un import d'un dump. Le second export un/des sch√©mas. impdp Exemple d'import d'un sch√©ma customer , dont le nom de fichier se nomme foo.dmp dans mon schema nomm√© MYWORK et ma tablespace MYWORKD_TB impdp USER/pass schemas = customer dumpfile = foo.dmp directory = wkdir remap_schema = CUSTOMER:MYWORK remap_tablespace = CUSTOMER_TB:MYWOKRD_TB LOGFILE = foo.log le param√®tre directory indique √† oracle quel est l' objet directory dans lequel il doit utiliser le dumpfile et ecrire dans le fichier de log foo.log pour connaitre le nom du directory, on se connecte comme dba √† la base oracle puis on tapera: select * from dba_directories ; on obtiendra donc le path vers le dossier o√π mettre foo.dmp pour qu'il soit localis√© par Oracle. Quand on veut lancer ses commandes, on a bien souvent une bonne dizaine de param√®tres √† fournir et il devient assez laborieux de les retenir pour les besoins particuliers d'une base, ou de quelques sch√©mas contenu dans notre base. C'est l√† qu'entre en jeu le \"parfile\". Celui ci contient ni plus ni moins que les param√®tres que l'on saisirait sur la ligne de commandes: voici la t√™te qu'il aurait avec l'exemple pr√©c√©dent : customer.par schemas = customer dumpfile = mywork % u . dmp directory = wkdir remap_schema = CUSTOMER : MYWORK remap_tablespace = CUSTOMER_TB : MYWOKRD_TB LOGFILE = foo . log et on lancerait l'import comme ceci impdp USER / pass parfile = customer . par cette fois ci customer.par est cherch√© dans le dossier courant, et non dans le directory oracle expdp L'export cette fois ci fonctionne de la m√™me fa√ßon : expdp user/pass directory = wkdir logfile = exp_mywork.log dumpfile = mywork.dmp et c'est tout. parallel Un param√®tre int√©ressant lorsqu'on vous fournit des dumps est l'option parallel, utilisable lors des exports et des imports. L'int√©r√™t est d'acc√©l√©rer le traitement des sauvegardes Le dumps est en \"morceaux\" (de tailles non egales) ; le nombre de morceaux etant la valeur donn√©e √† l'option parallel, exemple : expdp user/pass directory = wkdir logfile = exp_mywork.log dumpfile = mywork.dmp parallel = 4 produira les fichiers mywork1.dmp mywork2.dmp mywork3.dmp mywork4.dmp ensuite pour remonter ce dump on ecrira : impdp user / pass directory = wkdir logfile = exp_mywork . log dumpfile = mywork % U . dmp parallel = 4 That's all folk ;)","tags":"Techno","url":"https://foxmask.net/post/2013/02/28/oracle-sauvegarder-avec-impdp-expdp-et-le-parfile/"},{"title":"Incontournables Pythonerie : Oh ho ho G√©ant Vert","text":"Le G√©ant Vert en question est libreoffice ;-) Ici un tr√®s simple billet pour vous montrer comment se faire un document OpenOffice depuis un script Python en 5 lignes :P Le script va se composer comme suit : R√©cup√©ration des donn√©es √† publier dans le document R√©cup√©ration du document OpenOffice sur lequel va reposer notre g√©n√©ration finale \"Fusion\" des points 1 & 2 ;) Pour proc√©der √† cette cr√©ation, on aura besoin comme pr√©requis de Relatorio , un projet python pour cr√©er des doc ooo/pdf/html, √† partir d'objets python. Donc un petit pip install relatorio fera l'affaire pour disposer de l'armada ;) 1) R√©cup√©ration des donn√©es √† publier Ici je partirai d'un script Python renvoyant un dict, ni plus ni moins. Le voici , il se nomme \"maraicher.py\": potager = dict ( customer = 'Bonduelle' , version = '1.12.09' , previous_version = '1.12.08' , middleware = [ { 'composant' : 'Aluminium' , 'version' : '1.0.2' }, { 'composant' : 'Fer' , 'version' : '1.1.2' } , { 'composant' : 'Papier' , 'version' : '2.55.89' }, ], core = [ { 'composant' : 'Petits Pois' , 'version' : '1.12.13' }, { 'composant' : 'Carottes' , 'version' : '3.45.69' }, { 'composant' : 'Poireaux' , 'version' : '2.98.10' }, { 'composant' : 'Pommes de terre' , 'version' : '9.1' }, ], ) 2) le document OpenOffice : Ce dernier contient ce que vous avez ici . C'est en fait un tableau recensant des noms de produit avec leur versions associ√©es. 3) Fusion La fusion va consister √† lire les donn√©es du dict et les injecter dans le doc, tout cela se fait, like this (en 5lignes hein ;) : from relatorio.templates.opendocument import Template from maraicher import potager basic = Template ( source = None , filepath = 'Geant-Vert.odt' ) basic_generated = basic . generate ( o = potager ) . render () file ( 'Geant-Vert1.odt' , 'wb' ) . write ( basic_generated . getvalue ()) le r√©sultat est ici Bon App√©tit ;) edit du 25/03/2015 : mise √† jour du lien vers le projet relatorio https://code.google.com/p/python-relatorio/","tags":"Techno","url":"https://foxmask.net/post/2013/02/25/incontournables-pythonerie-oh-ho-ho-geant-vert/"},{"title":"Incontournables Pythonerie : Die Arg","text":"\"Die Arg\" , n'est pas le dernier opus de Bruce Willis ;) mais derri√®re ce titre j'ai cach√© le module argparse ;) En pr√©ambule √† ce billet, j'ai entrepris de produire des billets sur un script j'exploite en prod dans mon quotidien. J'ai donc d√©coup√© ce script en petits bouts pour vous illustrer chaque partie que j'ai exploit√©, et la premi√®re d'entres elles est ce qui suit;) Ce dernier permet de traiter/interpreter les arguments entr√©s sur la ligne de commandes, √† la suite du nom de votre script. Cot√© PHP, seuls les framework en propose(raie)nt, tels Jelix, ZF, SF, CakePHP, etceteri etcetara Avant de vous montrer le module argparse, je me dois de vous montrer √† quoi ressemble un script python sans l'usage de celui ci. Le script ci dessous va afficher un texte succinct quand les param√®tres attendus ne seront pas au rendez vous ou vous affichera une phrase avec ce qui a √©t√© saisi : test_arg.py from sys import argv def main (): #mettons ici un peu d'aide quand l'utilisateur ne s'en sortira pas usage = \"To run the script enter -e environment name -r release name. \\ nfor example : \\ npython test_arg - e foxenv - r v1 . 0 - FINAL \\ n \\ nYou can optionally use the switches : \\ n - c / path / to / configfile to use an alternative configfile \\ n - l / path / to / logging / config / file to use an alternative configfile for logging \" env = '' release = '' #pas mis assez d'arguments if len ( argv ) < 2 : #affichons donc l'aide print usage exit ( 0 ) #oops un pb ? on n'a pas encore le bon compte d'arguments if len ( argv ) < 5 and len ( argv ) > 2 : print \"the environment name ( specified with -e ) and release name ( specified with - r ) are mandatory \" exit ( 0 ) switch = argv [ 1 ] switch2 = argv [ 3 ] #o√π est quoi ? #v√©rifions l'order des switches if switch == '-e' and switch2 == '-r' : env = argv [ 2 ] release = argv [ 4 ] elif switch == '-r' and switch2 == '-e' : env = argv [ 4 ] release = argv [ 2 ] #j'ai tape portenawak - affichons ce qui ne va pas else : print \"the environment name ( specified with -e ) and release name ( specified with - r ) are mandatory \" #tout est ok : #affichage des valeurs entr√©es sur la ligne de commandes print \"environment {0} release {1}\" . format ( env , release ) if __name__ == '__main__' : main () Ainsi en tapant : python test_arg.py on obtient l'aide : To run the script enter -e environment name -r release name. for example : python test_arg -e foxenv -r v1.0-FINAL You can optionally use the switches : -c /path/to/configfile to use an alternative configfile -l /path/to/logging/config/file to use an alternative configfile for logging Ensuite python test_arg.py -r 123 .2 -e fox donne : environment fox release 123 .2 Ok parfait ca marche mais c'est tir√© par les cheveux, fastidieux et quand on a plus complexe √† traiter on n'est pas sorti de l'auberge. Voici √† pr√©sent la m√™me version avec le module \"optparse\" (la version fonctionnant avec ma debian et python 2.7, argparse √©tant pour la v3 de python) test_optparse.py from optparse import OptionParser import os def main (): #meme message d'aide en plus concis usage = \"%prog -e environment name -r release name. \\n for example : \\n python test_optparse -e envname -r 20130101\" parser = OptionParser ( usage ) #ajout d'option de param√®tres utilisables parser . add_option ( \"-e\" , \"--env\" , dest = \"environment\" , help = \"the environment name to use to build the delivery\" , metavar = \"ENV\" ) parser . add_option ( \"-r\" , \"--rel\" , dest = \"release\" , help = \"the release name of this delivery (used to name the final package like release-RELEASE-yyyymmdd)\" , metavar = \"RELEASE\" ) parser . add_option ( \"-c\" , \"--conf\" , dest = \"configfile\" , help = \"the path where the config file is located. This file should contain the name of the environment from which to download the archives. By Default the script will search in ./env_dirs.conf\" , default = \"./env_dirs.conf\" , metavar = \"CONFIG\" ) parser . add_option ( \"-l\" , \"--log\" , dest = \"configlogfile\" , help = \"the path where the config file for the loggging is located.\" , metavar = \"LOGGING_CONFIG\" ) ( options , args ) = parser . parse_args () #je n'ai pas donn√© d'environement ni de release ... hophop error :) if options . environment == None or options . release == None : parser . error ( \"options -e and -r are mandatory\" ) else : print \"environment {0} release {1}\" . format ( options . environment , options . release ) if __name__ == '__main__' : main () Cours pr√©cis clair :) A pr√©sent en tapant la ligne pr√©c√©dente sans aucun argument on obtient : python test_optparse.py Usage: test_optparse.py -e environment name -r release name. for example : python make_delivery -e envname -r 20130101 test_optparse.py: error: options -e and -r are mandatory la diff√©rence est que cette fois ci une erreur est retourn√©e. (c'est le message dans parse.error) A pr√©sent le petit plus, pas d√©gueux, en tapant python test_optparse.py -h on obtient : Usage: test_optparse.py -e environment name -r release name. for example : python test_optparse -e envname -r 20130101 Options: -h, --help show this help message and exit -e ENV, --env = ENV the environment name to use to build the delivery -r RELEASE, --rel = RELEASE the profinance release name of this delivery ( used to name the final package like release-RELEASE-yyyymmdd ) -c CONFIG, --conf = CONFIG the path where the config file is located. This file should contain the name of the environment from which to download the archives. By Default the script will search in ./env_dirs.conf -l LOGGING_CONFIG, --log = LOGGING_CONFIG the path where the config file for the loggging is located. By Default the script will search in ~/MakeDelivery/logging.conf Voil√†, tout propre, nickel ! le reste fonctionne exactement pareil ! Merci (arg|opt)pargse ;) les sources de l'article sont disponibles sur github La prochaine partie traitera du traitement des fichiers de configuration","tags":"Techno","url":"https://foxmask.net/post/2013/02/25/incontournables-pythonerie-die-arg/"},{"title":"de PHP √† Python : MeetGeek !","text":"J'aurai pu monter un site \"QQ la praline\", style MeetGeek (merde il est d√©j√† pris:P) pour coucher sur le papier ce qui suit ;) Samedi j'ai lanc√© une proposition en l'air sans aucun formalisme sur twitter . Cette proposition la voici : Vous √™tes d√©veloppeur PHP et avez envie de vous mettre au python ou vous vous √™tes lanc√©s il y a peu et souhaitez monter un projet opensource ? Je vous propose mes services ! Quel genre de projet m'int√©resse ? Tous. Que ce soit une paire de libs pour t√©l√©charger des bidules de l'autre bout du web ou un projet web en django / bottle, √ßa sera avec plaisir que je tenterai d'apporter ma contribution. L'unique but √† tout cela, comme un harlem shake : je bouge tout seul l√†, mais, bouger √† plusieurs serait l'√©clate ;) c'est sans autre contre partie que participer √† un projet pour le plaisir. Pourquoi cibler des d√©veloppeurs PHP ? Parce qu'il n'y aura pas de grand foss√© entre nous :-) Si des projets python existant manquent de bras, je ne suis pas ferm√© pour contribuer √©galement. Je vous dirai si je me sens √† l'aise dans mes baskets pour votre projet. J'ai de la motivation √† revendre alors chuis pr√™t √† moudre de grain. Vous pourriez vous dire s'il est si motiv√© il n'a qu'√† lancer ses propres projets. C'est d√©j√† fait mais seul c'est beaucoup moins fun. Si vous voulez tout de m√™me voir, ceux ci , sont ici : un gestionnaire de racourcisseurs d'URL et l√† un ifttt like (veryvery early stage) Pour revenir sur MeetGeek, l'id√©e que je m'en faisais, aurait √©t√© de mettre en relations des (id√©es de) projets et des geeks motiv√©s pour contribuer. Voil√† ! Donc Si vous √™tes int√©ress√©s faites tomber votre commentaire √† la suite ;)","tags":"Techno","url":"https://foxmask.net/post/2013/02/25/de-php-a-python-meetgeek/"},{"title":"Jelix PHP5 Framework : version 1.5.0 out","text":"Le fameux Framework PHP5 Jelix sort sa version 1.5.0 Les contributeurs se sont mis en 4 pour sortir cette derni√®re version dont voici le menu des nouveaut√©s : Support PHP 5.3 only √† pr√©sent. Utilisation dans Jelix des fonctionnalit√©s introduites par PHP 5.3, comme les fonctions anonymes, late static binding, les namespaces, la constante __DIR__ etc Support de HTML5 avec un nouvel objet Response HTML Pour jForms : Le g√©n√©rateur HTML est maintenant extensible. Vous pouvez fournir vos propres plugins pour g√©n√©rer tel ou tel contr√¥le de formulaire. Pour jDao : il est √† pr√©sent possible d'importer la d√©finition d'un autre DAO pour √©viter de recopier une DAO similaire et ajouter prou de colonnes en plus Pour jAuth : nouveau syst√®me de hashage Pour jKVDb : nouveau plugin pour l'API dba Nouveaux modules : jSoap fusionnant jWSDL jTCPDF jACL2 : d√©placement des ressources (classes, properties) dans un module d√©di√© jacl2 jPref: d√©placement de la classe jPref dans un module d√©di√© outre tout cela, nombre de nouveaut√©s concernent jZones, jEvents, jLocale, jelix-script et j'en passe. Ces nouveaut√©s sont pass√©es au crible sur le site m√™me. Comme √† l'accoutum√© la doc compl√®te pour cette version est disponible. Je vous invite donc √† T√©l√©charger cette derni√®re version 1.5.0 . Et la v 1.6.0 est d√©j√† sur les rails, viendez forker ;) Have Fnu ! :D","tags":"Techno","url":"https://foxmask.net/post/2013/02/20/jelix-1-5-0-out/"},{"title":"de PHP √† Python : X aime L","text":"Nouvel opus de la s√©rie de de PHP √† Python . Aujourd'hui, Comment parcourir un fichier XML ? Bon en plus je vais pousser le bouchon √† utiliser XPath ;) tant qu'√† lire un fichier, autant que √ßa soit \"intelligent\" et pas juste lire pour lire (quoi je me r√©p√®te r√©p√®te;) La mati√®re premi√®re commune √† ces 2 scripts sera ce fichier XML all√©g√© pour l'occasion mais issu directement de autodeploy un outil ( opensource devrai-je le pr√©ciser ? ) que j'utilise au quotidien pour faire des d√©ploiements d'applications les doigts dans le nez ;) En prod je n'ai que 200 environnements, avec en moyenne pr√®s de 10 targz chacun, je vous laisse imaginez le poids du trucs (pres de 10Mo grosso merdo;) Vivendi qui s'en sert en gere 10x plus ;) Ici je n'en extrairai que le nom de l'application/software et l'URL de PHP ... la version PHP donne ceci avec un coup de DOMXPath : Load('ConfigurationWrapper'); $xpath = new DOMXPath($doc); $app = find_archive($xpath,$envName,'/applicationservers/applicationserver/applications/application'); $soft = find_archive($xpath,$envName,'/softwares/software'); function find_archive(DOMXPath $xpath, $envName, $queryPath) { $query = '//environments/environment[@name=\"'.$envName.'\"]'.$queryPath; $entries = $xpath->query($query); foreach ($entries as $entry) { echo $entry->getAttribute('name') . ' ' . $entry->getAttribute('uri') .\"\\n\"; } } affichera : app1 http://maven.intranet.mycompany.com/repository/my-app1.tar.gz app2 http://maven.intranet.mycompany.com/repository/my-app2.tar.gz My Oracle Upgrade http://maven.intranet.mycompany.com/repository/my-oracle-upgrade.tar.gz ... √† Python Le m√™me process en Python avec cette fois ci le module LXML donne ceci : # -*- coding: utf-8 -*- from lxml import etree from lxml.etree import Element autodeploy_filename = 'ConfigurationWrapper' env = 'my-environmentA' def find_archive ( env_name , tree , xpath ): my_nodes = tree . xpath ( '//environments/environment[@name=\"' + env_name + '\"]' + xpath ); for node in my_nodes : if len ( node . get ( 'uri' , None )) > 0 : print \"{name} {uri}\" . format ( name = node . get ( 'name' , None ), uri = node . get ( 'uri' , None )) tree = etree . parse ( autodeploy_filename ) #get the name of the applications find_archive ( env , tree , '/applicationservers/applicationserver/applications/application' ) #get the name of the Software find_archive ( env , tree , '/softwares/software' ); affichera : app1 http://maven.intranet.mycompany.com/repository/my-app1.tar.gz app2 http://maven.intranet.mycompany.com/repository/my-app2.tar.gz My Oracle Upgrade http://maven.intranet.mycompany.com/repository/my-oracle-upgrade.tar.gz Actuellement sur l'intranet j'ai une appli en Jelix , qui parcourt le XML (dans un cache) et affiche tout le toutim aux end-user (consultants) pour leur permettre de trouver ce qui est install√© sur les environnements jEE ainsi que les adresses des bases etc... Quand les consultants veulent que je livre un client avec une release donn√©e, alors, √† l'autre bout de la chaine j'ai un script Python home made , qui parcourt le m√™me flux et me pond un livrable √† partir d'un fichier de configuration qui me d√©crit l'arbo cible et d√©pose chaque targz dans cette derni√®re. D'ailleurs un billet est √† venir sur la lecture de fichier de config en PHP/Python, une histoire de petite souris mais je n'en dirais pas plus ;)","tags":"Techno","url":"https://foxmask.net/post/2013/02/18/de-php-a-python-x-aime-l/"},{"title":"Pythonthon","text":"L'association Python est sous le coup de perdre la marque Python L'Afpy est sur le qui vive, le branle bas va √™tre lanc√© je pense au vu de ce qui s'est vite dit sur le mailing-list AMHA, vu le gigantesque microcosme gravitant autour du langage je suis optimiste : Il y a tant de ramifications, d'organisations commerciales, industrielles, scientifiques, associations autour de python, qu'il serait ahurissant et impensable que tous ne puissions pas en d√©montrer l'utilisation dans note quotidien. Par exemple toutes les distributions linux pourraient faire un geste, et notamment celles reposant sur une entreprise comme RedHat, Ubuntu, SuSe. De m√™me l'existence de user group python semblent aussi peser dans la balance. Et l√† d'autres fondations existantes utilisant python sont nombreuses, pour n'en citer qu'une Django. Il suffirait que les instances en charge du dossier fasse une chose simple pour se rendre compte de l'√©tendue de l'utilisation de Python dans le monde informatique : aller sur le plus grand magasin en ligne au monde et taper python. Pour moi c'est quand m√™me cousu de fil blanc. J'esp√®re avoir raison ;)","tags":"Techno","url":"https://foxmask.net/post/2013/02/16/pythonthon/"},{"title":"Incontournables Pythonerie","text":"Parall√®lement √† ma pitite s√©rie \" de PHP √† Python \", je vais d√©buter ici une nouvelle s√©rie qui illustrera des modules facilement accessibles aux d√©butants et surtout leur rendront un √©norme service. Dans le viseur, pour l'heure, j'ai : argparse (python v3) / optparse (python v2) : module permettant de r√©cup√©rer les arguments entr√©s sur la ligne de commandes logger : module permettant de journaliser ce que bon vous semble √† la mani√®re du fameux log4j d'Apache urllib2 : un module permettant de manipuler des fichiers distants Si vous avez d'autres id√©es de modules python, \"rikiki\" mais \"maousse costaud\", mettez les moi en commentaires je verrai pour en faire un sujet ;)","tags":"Techno","url":"https://foxmask.net/post/2013/02/15/incontournables-pythonerie/"},{"title":"Oracle Trouver les tablespaces utilis√©s par un sch√©ma","text":"Tout comme Rom√©o a sa Juliette, une base Oracle poss√®de son tablespace ;) Donc pour trouver ce(s) dernier(s) tout se r√©sume √† interroger la table dba_segment dont le tablespace_name ne contient aucun de ceux des TB \"system\". SET linesize 300 SET pagesize 20 SET feedback off SELECT sysdate , a . owner username , a . tablespace_name , round ( b . total_space / 1024 / 1024 , 2 ) \"Total (MB)\" , round ( SUM ( a . bytes ) / 1024 / 1024 , 2 ) \"Used (MB)\" , round ( SUM ( a . bytes / b . total_space ) * 100 , 2 ) \"% Used\" FROM dba_segments a , ( SELECT tablespace_name , SUM ( bytes ) total_space FROM dba_data_files GROUP BY tablespace_name ) b WHERE a . tablespace_name NOT IN ( 'SYSAUX' , 'SYSTEM' , 'UNDOTBS1' , 'UNDOTBS2' ) AND a . tablespace_name = b . tablespace_name GROUP BY a . tablespace_name , a . owner , b . total_space / 1024 / 1024 ORDER BY a . tablespace_name , a . owner ; Ceci permet ensuite d'interroger dba_data_files pour trouver les noms de fichiers qui constituent le Tablespace cherch√© pour l'agrandir par exemple.","tags":"Techno","url":"https://foxmask.net/post/2013/02/14/oracle-trouver-les-tablespaces-utilises-par-un-schema/"},{"title":"de PHP √† Python : les tests unitaires","text":"Nouvel √©pisode de la s√©rie de PHP √† Python . Cette fois ci nous allons nous pencher sur l'incontournable outil du dev voulant s'assurer la qualit√© de son code et de sa non r√©gression : le test unitaire. ](http://blog.pagesd.info/public/ContactManagement/unit-testing.png) J'aborderai succinctement comment on s'y prend en PHP pour ensuite vous montrer l'√©quivalent Python et finirai par d'autres moyens dont dispose Python dans son arsenal. de PHP ... Alors d'avance d√©sol√©, mais je ne vais pas aborder Atoum , quand bien m√™me cela ne me d√©plairait pas :) Le but √©tant de montrer comment en PHP on fait un test unitaire et retrouver une smilitude voire carrement des ressemblances avec Python. Atoum n'existant pas dans une version Pythonesque, ca sera donc PHPUnit puisque de ce cot√© l√†, un pendant Python existe ;) Donc PHPUnit est bien connu des d√©veloppeurs PHP et est donc un framework de tests unitaires d√©riv√© de JUnit (issue du monde Java) Voici donc un script test.php contenant ce qui suit : cal = new Calc(); } public function testMoyenne() { $this->assertEquals($this->cal->moyenne(array(1,2,3)),2); $this->assertEquals($this->cal->moyenne(array(2,4,6)),4); } public function testDivision() { $cal = new Calc(); $this->assertEquals($this->cal->division(10,5),2); } } ?> calculs.php quant √† lui contient : J'ai volontairement √©luder la question de la division par z√©ro, on va le voir plus tard. le resultat du test donne ceci : phpunit test.php PHPUnit 3.4.14 by Sebastian Bergmann. .. Time: 0 seconds, Memory: 6.50Mb OK (2 tests, 3 assertions) Et \"voil√†\" :) .... √† Python partie 1 : unittest Cot√© du fameux reptile, il s'agit de \" unittest \" et est √©galement un framework de tests unitaires, d√©riv√© du m√™me JUnit - donc on peut d√©j√† se frotter les mains, l'acquis sur PHPUnit pour passer √† unittest devrait √™tre le plus smoothy possible :) Petite d√©finition en passant d'unittest, toute droit sortie de la doc : The Python unit testing framework, sometimes referred to as \"PyUnit,\" is a Python language version of JUnit, by Kent Beck and Erich Gamma. JUnit is, in turn, a Java version of Kent's Smalltalk testing framework. Each is the de facto standard unit testing framework for its respective language. voici test.py import unittest from calculs import moyenne from calculs import division class CalculsTest ( unittest . TestCase ): def test_moyenne ( self ): self . assertEquals ( moyenne ( 1 , 2 , 3 ), 2 ) self . assertEquals ( moyenne ( 2 , 4 , 6 ), 4 ) def test_division ( self ): self . assertEquals ( division ( 10 , 5 ), 2 ) if __name__ == '__main__' : unittest . main () et calculs.py def moyenne ( * args ): length = len ( args ) sum = 0 for num in args : sum += num return float ( sum ) / float ( length ) def division ( a , b ): return a / b ce qui donne un fois lanc√© : python test.py .. ---------------------------------------------------------------------- Ran 2 tests in 0 .000s OK Quant √† la division par Z√©ro volontairement omise voici en Python comment on la g√®re et la teste : [ ... ] class CalculsTest ( unittest . TestCase ): [ ... ] def test_division ( self ): self . assertEquals ( division ( 10 , 5 ), 2 ) self . assertRaises ( ZeroDivisionError , division , 10 , 0 ) Pour PHPUnit, on n'a semble-t-il toujours rien en magasin qui permette de tester quelle m√©thode l√®ve bien l'exception attendue, alors qu' Atoum oui ;) une note finale, sur cette partie, pour rendre √† c√©sar le code Python ici est enti√®rement extrait du livre de Tarek Ziad√© \"Python, Petit guide √† l'usage du d√©veloppeur agile\" Partie 2 : doctest A pr√©sent que nous avons vu les TU unittest , Python poss√®de une seconde m√©thode de tests : doctest . Comment fonctionne-t-elle ? Le module doctest, au lancement de la commande python, va scruter votre code source √† la recherche de texte ressemblant √† un session python et une fois trouv√©, ex√©cutera justement la session python. Exemple : mynameis.py \"\"\" >>> my_name_is(\"foxmask\") 'foxmask' \"\"\" def my_name_is ( string ): return string if __name__ == '__main__' : import doctest doctest . testmod () pour tester on fera : $ python mynameis.py $ rien s'affiche, donc pas d'erreur - bon voyons le mode verbose quand m√™me puisqu'on est curieux : python mynameis.py -v Trying: my_name_is ( \"foxmask\" ) Expecting: 'foxmask' ok 1 items had no tests: __main__.my_name_is 1 items passed all tests: 1 tests in __main__ 1 tests in 2 items. 1 passed and 0 failed. Test passed. Vous pourriez vous demander pourquoi faire 2 outils pour la m√™me chose finalement ? Doctest permet √©galement de produire de la doc et les docstring comme on les appelle permettent cela tout autant que de tester la non r√©gression de votre code qui aurait pu vari√©. D'aucuns diront (l'un d'eux se reconnaitra ;) que l'on n'a pas √©crit le code du test avant le code lui-m√™me, mais l'inverse, et que donc doctest v√©rifie le r√©sultat de son ex√©cution. Ce n'est pas faux mais √ßa fait quand m√™me son boulot ;) Il existe enfin une derni√®re m√©thode dite DDD : le D√©veloppement Dirig√© par la Documentation. Je ne l'ai pas encore abord√©e et ne pourrait vous en dire plus en d√©tails, juste qu'elle existe. nota : les sources de l'article sont sur github ;)","tags":"Techno","url":"https://foxmask.net/post/2013/02/12/de-php-a-python-les-tests-unitaires/"},{"title":"HaveFnuBB sous le domaine exactement","text":"Amis lecteurs, vous savez que j'ai produit HaveFnuBB, ce projet de forum opensource en PHP5 avec Jelix , d√©marr√© en 2008, je vous en avais m√™me parl√© dans un billet de retour aux sources ;) Alors nan le projet n'est pas mort, loin s'en faut, il dort un peu parce que je consacre mon temps √† d'autres occupations. Cependant devant le trop grand nombre de posts ouverts sur le site du projet, j'en ai d√©duit par ce dernier, qu'il est si stable et fiable que personne n'a besoin de support √† son sujet, et c'est tant mieux (h√©h√©). Donc par cons√©quent, j'ai d√©cid√© de d√©m√©nager le projet sur le sous domaine http://havefnubb.foxmask.info . Tout s'y trouve √† l'identique, site, forum, doc, fichiers de t√©l√©chargement. Et comme d'hab' si vous avez envie de contribuer, le projet havefnubb sur github se trouve. Viendez tous forker ensemble ;)","tags":"Techno","url":"https://foxmask.net/post/2013/02/07/havefnubb-sous-le-domaine-exactement/"},{"title":"de PHP √† Python : Gangnam Style","text":"\"Gangnam Style\" k√©zako : Bon en fait j'√©tais parti vous parler s√©rieusement avec un titre de PSR-1 √† PEP8 mais ca manquait de fun ;-) Donc le sujet du jour de la s√©rie \" de PHP √† Python \", comme le laisse supposer (ceux qui connaissent) ces 2 'codes' PSR-1 & PEP8 : les r√®gles de coding dans chacun des 2 langages. Je me suis dit qu'apr√®s tout, on ne pouvait pas aborder le passage √† python sans en passer par les r√®gles de \"r√©daction\", donc voici. de PHP ... Pour PHP la d√©finition de la PSR-1 est toute r√©cente, et comme le rappelle mageekguy , celle ci est somme toute tr√®s subjective car cela n'emp√™chera personne de coder comme il a toujours fait, et cette r√®gle peut d√©ranger les habitudes de tout √† chacun (moi le premier :) exemple de code : Pourquoi diable pour les fonctions les accolades sont √† la ligne suivante et pas sur celle du if ? Perso, je les ai toujours TOUTES mises sur la m√™me ligne, une habitude prise avec PERL :) ... √† Python La PEP8 quant √† elle n'a que 12 ans ... Les accolades n'existent pas on met des \":\" sur la m√™me ligne que l'instruction et on indent de 4 espaces. Voici √† quoi cela ressemble et on en discute apr√®s : #Use 4 spaces per indentation level. foo = long_function_name(var_one, var_two, var_three, var_four) def long_function_name(var_one, var_two, var_three, var_four): print(var_one) on remarquera qu'en php on d√©fini une fonction par le mot cl√© \"function\", ici on utilisera \"def\" Le Python n'√©tant pas rigide en tout point, parfois \"la queue\" (ligne de code) est un peu longue donc on la \"retrousse\" comme suit : # Aligned with opening delimiter foo = long_function_name ( var_one , var_two , var_three , var_four ) # More indentation included to distinguish this from the rest. def long_function_name ( var_one , var_two , var_three , var_four ): print ( var_one ) C'est tout aussi lisible et l'indentation fait son office Alors certes cela peut perturber le d√©veloppeur PHP au d√©but, mais si comme moi vous aimez que ca soit au carr√© vous vous y ferez super vite. La PEP8 d√©finie √©galement le nombre de lignes blanches entre 2 \"def\" ou la taille maximum de caract√®res par ligne. Une autre r√®gle importante concerne les imports. En PHP on n'ira pas √©crire use Customer, Order mais bien use Customer use Order En Python on n'√©crira pas non plus import customer , order mais bien 2 imports distincts import customer import order on retiendra que si la PEP8 n'est pas respect√©e, en ex√©cutant votre script python vous aurez droit √† une belle erreur ;) PHP a cot√© est largement plus laxiste ! Par exemple j'avais pris pour habitude d(e volontairement) √©crire ce genre de tru,c pour bien le rep√©rer visuellement plus tard, et le retirer quand j'avais fini de d√©bogger : function bagnole_spec($voiture) { var_dump($voiture); if ( in_array($voiture,'nb_portes')) { echo $voiture['nb_portes']; } } En python, aucun atermoiement n'est possible, on ne peut pas faire du code crade m√™me temporairement, √ßa doit pas d√©passer. L'ordre de facto on s'y fait, apr√®s tout le deboggage a sa place, autant ne pas le n√©gliger :) Conclusion : Bon √©videment la PSR-1 ne se contente pas que de cela de m√™me que la PEP8 ne se borne pas √† ces limitations/impositions de style. Se conformer aux r√®gles a du bon d√®s le d√©part, bon sauf quand √ßa fait plus de 10 piges qu'on crache du code et qu'on vous dit qu'il faut changer ;) De toute fa√ßon avec des IDE modernes vous aurez tout loisir que ce dernier v√©rifie que votre code colle aux exigences du langage. Par exemple avec Python et Aptana vous pouvez ajouter les lib qui permettent √† l'IDE de valider que votre code n'est pas √©crit de travers, l'une d'elle est pylint , √ßa donne cela : Comme on voit l√† sur la ligne return render , j'ai bien le droit de me faire plaisir par quelques retours √† la ligne align√©s sur la parenth√®se ouvrante, quant √† la ligne logger.debug on la voit beaucoup trop longue. L√† python ne poussera pas le bouchon √† nous invalider le code pour \"si peu\". Pour en revenir √† \"Gangnam Style\": avec les accolades √† tirelarigot on a vraiment l'impression d'avoir une posture de 'code' sur un canasson (quand on code pas comme un bourrin ;) et cot√© Python, d'aucuns diront qu'ils sont des poneys zail√©s ;)","tags":"Techno","url":"https://foxmask.net/post/2013/02/04/gangam-style/"},{"title":"de PHP √† Python : de composer √† setuptools","text":"Comme introduit dans ce billet , voici donc le premier billet de la s√©rie de PHP √† Python . G√©rer des d√©pendances √† son projet ? il y a aussi une application pour cela ! de PHP ... Cette application se nomme Composer Voici un extrait de la doc de Composer qui illustrera l'analogie qui suit pour la version python Le fichier composer.json est disponible en principe sur chacun des d√©p√¥ts des projets qu'on peut trouver sur github et packagist. C'est le fichier sur lequel tout repose. composer.json : { \"repositories\": [ { \"type\": \"package\", \"package\": { \"name\": \"smarty/smarty\", \"version\": \"3.1.7\", \"dist\": { \"url\": \"http://www.smarty.net/files/Smarty-3.1.7.zip\", \"type\": \"zip\" }, \"source\": { \"url\": \"http://smarty-php.googlecode.com/svn/\", \"type\": \"svn\", \"reference\": \"tags/Smarty_3_1_7/distribution/\" }, \"autoload\": { \"classmap\": [\"libs/\"] } } } ], \"require\": { \"smarty/smarty\": \"3.1.*\" } } ici on comprendra qu'on s'est rajout√© une d√©pendance sur smarty qui n'est pas sur packagist mais sur un repository \"priv√©\". ... √† Python Cette application se nomme Setuptools L'homologue python sur lequel tout repose est le script setup.py dont voici un exemple : from setuptools import setup , find_packages setup ( name = 'fox_php_lib' , version = '0.1' , description = 'Fox dessine un mouton' , author = 'foxmask' , author_email = 'devnull@foxmask.info' , url = 'https://github.com/foxmask/fox_php_lib' , download_url = 'https://github.com/downloads/foxmask/fox_php_lib/fox_php_lib0.1.tar.gz' , packages = find_packages (), classifiers = [ 'Development Status :: 4 - Beta' , 'Environment :: Web Environment' , 'Intended Audience :: Developers' , 'License :: OSI Approved :: BSD License' , 'Operating System :: OS Independent' , 'Programming Language :: Python' , 'Framework :: Django' , 'Topic :: Software Development :: Libraries :: Python Modules' , 'Topic :: Utilities' ] ) Ce setup permet (quasiment comme son homologue) : De d√©crire un module, une lib De t√©l√©charger l'archive, d√©crite au param√®tre download_url , via une commande particuli√®re De t√©l√©charger les d√©pendances (lors de l'installation), d√©crite au param√®tre packages via une fonction find_packages() qui parcourira mon application et identifiera les d√©pendances et les installera les meta donn√©es name , version , description , author , author_email , classifiers , sont assez explicites pour savoir ce qu'on y met ;) De d√©finir des classifiers utiles pour retrouver et \"ranger\" ses contributions sur Pypi (cf plus bas) Comme on le voit sur la premi√®re ligne du script on a une ligne de code python, plus tard on a la m√©thode find_packages(), donc oui on a toute latitude d'utiliser du python pour \"peupler\" ses variables. A pr√©sent comment s'en servir ? on tape simplement : python setup.py install qui installera votre lib/module/app comme attendue pour composer, on taperait : php composer.phar install w00t :) Une fois install√©e, on peut v√©rifier que la lib est dispo en tapant : foxmask @foxmask : ~ $ python Python 2.6 . 6 ( r266 : 84292 , Dec 26 2010 , 22 : 31 : 48 ) [ GCC 4.4 . 5 ] on linux2 Type \"help\" , \"copyright\" , \"credits\" or \"license\" for more information . >>> from fox_php_lib import python >>> python () [ 2013 - 01 - 14 22 : 26 : 49.669036 ] Python ca rox ce que fait cette lib est juste ce qui suit ( test.py ): #!/usr/bin/env python # -*- coding: utf-8 -*- from datetime import datetime def python (): print \"[ %s ] Python ca rox\" % datetime . now () if __name__ == \"__main__\" : python () Dans la foul√©e de la cr√©ation de notre setup.py, on peut tr√®s all√©grement publier sa lib / son appli sur Python Package Index aka \"Pypi\" , mais cela pourra faire partie d'un autre billet sur son utilisation. presque le mot de la fin une derni√®re information quant √† la publication de ce billet qui est tr√®s largement inspir√© du tr√®s bon article de sam & max : Cr√©er un setup et mettre sa lib python en ligne un dernier mot n'√©tant pas un utilisateur (m√™me pas averti:P) de Composer, je me suis bas√© sur la doc et l'aide pr√©cieuse d'Artemiz pour son support √† sa compr√©hension ;) nota : les sources de l'article sont disponibles sur github","tags":"Techno","url":"https://foxmask.net/post/2013/01/28/de-php-a-python-de-composer-a-setuptools/"},{"title":"Django __unicode__ et form.as_p mes amis","text":"Toujours dans mes p√©rigrinations de d√©butant, voici un coup qui m'a pris du temps √† trouver seul, donc si √ßa peut servir √† d'autres ;) Donc voici, Chapitre Un __unicode__ je veux produire une page pour afficher un formulaire compos√© de 2 listes d√©roulantes issues d'un autre mod√®le + un champ de texte j'ai compos√© le mod√®le suivant : models.py class TriggerType ( models . Model ): \"\"\" TriggerType \"\"\" code = models . CharField ( max_length = 80 ) name = models . CharField ( max_length = 140 ) class TriggerService ( models . Model ): \"\"\" TriggerService \"\"\" provider = models . ForeignKey ( TriggerType , related_name = '+' , blank = True ) consummer = models . ForeignKey ( TriggerType , related_name = '+' , blank = True ) description = models . CharField ( max_length = 200 ) user = models . ForeignKey ( User ) date_created = models . DateField () et voici mon formulaire forms.py class TriggerServiceForm ( forms . ModelForm ): \"\"\" Trigger Form \"\"\" class Meta : \"\"\" meta to add/override anything we need \"\"\" model = TriggerService widgets = { 'description' : TextInput ( attrs = { 'placeholder' : _ ( 'A description for your new service' )}), } provider = forms . ModelChoiceField ( queryset = TriggerType . objects . all ()) consummer = forms . ModelChoiceField ( queryset = TriggerType . objects . all ()) Voil√† ! A pr√©sent voici ce qui se passait quand j'affichais mon formulaire : Dans mes 2 listes d√©roulantes j'obtenais \"TriggerType object\" en quise de valeur dans ces 2 listes. Comme j'ai eu du mal √† trouver la solution finale, dans un premier temps je me suis r√©sign√© √† faire un tuple dans mon form : TRIGGER_TYPE = [( data . code , data . name ) for data in TriggerType . objects . all ()] provider = forms . ChoiceField ( label = _ ( 'Provider' ), widget = forms . Select , choices = TRIGGER_TYPE , help_text = _ ( 'Select the service from which you want to grad your datas' )) consummer = forms . ChoiceField ( label = _ ( 'Consummer' ), widget = forms . Select , choices = TRIGGER_TYPE , help_text = _ ( 'Select the service to which you want to put your datas' )) ca marchait tr√®s bien mais comme je suis born√© et avait rep√©r√© ModelChoiceField je me suis dit \"nan mais ho ModelChoiceField prend bien en argument le nom d'un mod√®le alors CA DOIT le faire!\" En retournant donc sur la doc j'entrevois la lumi√®re : The __unicode__ method of the model will be called to generate string representations of the objects for use in the field's choices; to provide customized representations, Non de ieuD ! c'est aussi con que √ßa ? je retourne √† mon mod√®le : models.py class TriggerType ( models . Model ): \"\"\" TriggerType \"\"\" code = models . CharField ( max_length = 80 ) name = models . CharField ( max_length = 140 ) def __unicode__ ( self ): \"\"\" required to build the drop down list otherwise will dislpay \"\"\" return \" %s \" % ( self . name ) et l√† de retour dans ma page web, Al√©louya tout est tout propre. Content de moi, cette fois ci je pars pour saisir mes donn√©es et les enregistrer. Chapitre Deux form.as_p Confiant je ponds un formulaire √† la main avec la vue qui va bien et avec le mod√®le ci dessus TriggerService et mon form TriggerServiceForm add_service.html { % trans 'Creation of a new service' % } { % csrf_token % } { % trans 'Provider' % } {{ form . provider }} { % trans 'Consummer' % } {{ form . consummer }} { % trans 'Description' % } {{ form . description }} { % trans \"Create it\" % } et voici ma vue views.py @login_required def save_service ( request ): \"\"\" save a service \"\"\" if request . method == 'POST' : # If the form has been submitted... service = TriggerService ( user_id = request . user . id ) form = TriggerServiceForm ( request . POST , instance = service ) if form . is_valid (): # All validation rules pass form . save () return HttpResponseRedirect ( '/trigger_added/' ) else : # unbound form (if any) form = TriggerServiceForm () # redirect to home of the existing enabled services return redirect ( 'home' ) Et l√† quand je soumets mon formulaire je repars d'o√π je viens, la page d'accueil (ici \"home\") sans que rien n'ai √©t√© ajout√© dans ma base. Parti la fleur au fusil j'ai carr√©ment √©t√© trop vite. Oui et le lecteur attentif dira \"ben oui tu g√®res pas le cas o√π le formulaire n'est pas valide du coup on n'a pas les raisons du pourquoi ca passe pas\" Exact ! So Let's go : @login_required def save_service ( request ): \"\"\" save a service \"\"\" if request . method == 'POST' : # If the form has been submitted... service = TriggerService ( user_id = request . user . id ) form = TriggerServiceForm ( request . POST , instance = service ) # 1) valid the form if form . is_valid (): # All validation rules pass form . save () # 2) redirect user return HttpResponseRedirect ( '/trigger_added/' ) # 3) if not valid else : template_name = 'add_service.html' # 4) keep the data put in the form context = { 'form' : form } context . update ( csrf ( request )) # 5) go back to the form and display the values + errors return render_to_response ( template_name , context , context_instance = RequestContext ( request )) # attempt to acces to save_service by another method than POST else : # unbound form (if any) form = TriggerServiceForm () # redirect to home of the existing enabled services return redirect ( 'home' ) L√†, ma vue m'a l'air cool mais encore une fois je me retrouve sur le formulaire de saisie √† tourner en boucle sans avoir les erreurs ... Apr√®s un peu de creusage de neuronne (oui j'en ai qu'un, surtout √† cette heure l√† :P) je farfouille dans les sources de django-registration :D et retombe sur la propri√©t√© errors de chacun des champs. Je modifie tout ca et fini par produire le template suivant : add_service.html { % trans 'Creation of a new service' % } { % csrf_token % } {{ form . non_field_errors }} { % trans 'Provider' % } {{ form . provider . errors }} {{ form . provider }} { % trans 'Consummer' % } {{ form . consummer . errors }} {{ form . consummer }} { % trans 'Description' % } {{ form . description . errors }} {{ form . description }} { % trans \"Create it\" % } L√† tranquillement j'enregistre mon formulaire confiant (oui toujours ;) mais d√©chante aussit√¥t ! Je boucle toujours !!! *Groumpf* Je retourne √† la doc et je retrouve une balise form.as_p qui permet d'afficher son formulaire sans rien faire d'autre ;) je m'empresse de l'ajouter apr√®s {% csrf_token %} et recharge ma page et l√† √î surprise, je m'aper√ßois que j'ai oubli√© tout b√™tement 2 √©l√©ments de mon mod√®le qui sont √† pr√©sent dans mon formulaire qui sont : user et date_create ce qui fait que mon form.is_valid() ne passait pas une seule fois. Donc j'ajoute √† ma classe Meta de ma classe TriggerServiceForm forms.py exclude = ( 'user' , 'date_created' ) et une option √† mon mod√®le pour ajouter une date automatiquement √† chaque enregistrement des donn√©es du mod√®le models.py class TriggerService ( models . Model ): \"\"\" TriggerService \"\"\" ... date_created = models . DateField ( auto_now_add = True ) et hop hop hop tout roule comme sur des roulettes. C'est pas trop t√¥t !","tags":"Techno","url":"https://foxmask.net/post/2013/01/21/django-__unicode__-et-form_as_p-mes-amis/"},{"title":"Oracle Identifications des Locks, Process, Sessions en cours","text":"Voici une requete SQL dans l'arsenal du DBA, nommons la locks.sql , permettant d'identifier les locks en cours sur un schema oracle : SELECT /*+ choose */ bs . username \"Blocking User\" , bs . username \"DB User\" , ws . username \"Waiting User\" , bs . sid \"SID\" , ws . sid \"WSID\" , bs . sql_address \"address\" , bs . sql_hash_value \"Sql hash\" , bs . program \"Blocking App\" , ws . program \"Waiting App\" , bs . machine \"Blocking Machine\" , ws . machine \"Waiting Machine\" , bs . osuser \"Blocking OS User\" , ws . osuser \"Waiting OS User\" , bs . serial # \"Serial#\" , DECODE ( wk . TYPE , 'MR' , 'Media Recovery' , 'RT' , 'Redo Thread' , 'UN' , 'USER Name' , 'TX' , 'Transaction' , 'TM' , 'DML' , 'UL' , 'PL/SQL USER LOCK' , 'DX' , 'Distributed Xaction' , 'CF' , 'Control FILE' , 'IS' , 'Instance State' , 'FS' , 'FILE SET' , 'IR' , 'Instance Recovery' , 'ST' , 'Disk SPACE Transaction' , 'TS' , 'Temp Segment' , 'IV' , 'Library Cache Invalidation' , 'LS' , 'LOG START OR Switch' , 'RW' , 'ROW Wait' , 'SQ' , 'Sequence Number' , 'TE' , 'Extend TABLE' , 'TT' , 'Temp TABLE' , wk . TYPE ) lock_type , DECODE ( hk . lmode , 0 , 'None' , 1 , 'NULL' , 2 , 'ROW-S (SS)' , 3 , 'ROW-X (SX)' , 4 , 'SHARE' , 5 , 'S/ROW-X (SSX)' , 6 , 'EXCLUSIVE' , TO_CHAR ( hk . lmode ) ) mode_held , DECODE ( wk . request , 0 , 'None' , 1 , 'NULL' , 2 , 'ROW-S (SS)' , 3 , 'ROW-X (SX)' , 4 , 'SHARE' , 5 , 'S/ROW-X (SSX)' , 6 , 'EXCLUSIVE' , TO_CHAR ( wk . request ) ) mode_requested , object_name , TO_CHAR ( hk . id1 ) lock_id1 , TO_CHAR ( hk . id2 ) lock_id2 FROM v$lock hk , v$session bs , v$lock wk , v$session ws , V$LOCKED_OBJECT a , dba_objects b WHERE hk . BLOCK = 1 AND hk . lmode != 0 AND hk . lmode != 1 AND wk . request != 0 AND wk . TYPE ( + ) = hk . TYPE AND wk . id1 ( + ) = hk . id1 AND wk . id2 ( + ) = hk . id2 AND hk . sid = bs . sid ( + ) AND wk . sid = ws . sid ( + ) AND a . object_id = b . object_id AND HK . sid = a . SESSION_ID ORDER BY 1 ; Oui hein ! √ßa s'invente pas ;) Une seconde current_request.sql vous donnant les requ√™tes en cours : Avec Oracle 9i : SELECT sesion . sid , sesion . username , optimizer_mode , hash_value , address , cpu_time , elapsed_time , sql_text FROM v$sqlarea sqlarea , v$session sesion WHERE sesion . sql_hash_value = sqlarea . hash_value AND sesion . sql_address = sqlarea . address AND sesion . username IS NOT NULL Mais ca c'√©tait avant Ci dessous la m√™me en \"encore plus longue\" pour les versions oracle > 9i SELECT sql_text , STATUS FROM v$session , v$sqlarea WHERE v$session . sql_id = v$sqlarea . sql_id ; Ah oui √ßa tranche hein ! Pour avoir la liste des sessions en cours un petit script session.sql : SET echo off ; SET termout ON ; SET linesize 180 ; SET pagesize 60 ; SET newpage 0 ; SELECT rpad ( c . name || ':' , 11 ) || rpad ( ' current logons=' || ( to_number ( b . sessions_current )), 20 ) || 'cumulative logons=' || rpad ( substr ( a . VALUE , 1 , 10 ), 10 ) || 'highwater mark=' || b . sessions_highwater Information FROM v$sysstat a , v$license b , v$database c WHERE a . name = 'logons cumulative' ; ttitle \"dbname Database|UNIX/Oracle Sessions\" ; SET heading off ; SELECT 'Sessions on database ' || substr ( name , 1 , 8 ) FROM v$database ; SET heading ON ; SELECT substr ( a . spid , 1 , 15 ) pid , substr ( b . sid , 1 , 15 ) sid , substr ( b . serial # , 1 , 15 ) ser # , substr ( b . machine , 1 , 16 ) box , substr ( b . username , 1 , 50 ) username , -- b.server, substr ( b . osuser , 1 , 28 ) os_user , substr ( b . program , 1 , 60 ) program FROM v$session b , v$process a WHERE b . paddr = a . addr AND TYPE = 'USER' ORDER BY spid ; ttitle off ; spool off ; Pour obtenir les requ√™tes en cours d'annulation (rollback), session_undo.sql : COLUMN username FORMAT A15 SELECT s . username , s . sid , s . serial # , t . used_ublk , t . used_urec , rs . segment_name , r . rssize , r . STATUS FROM v$transaction t , v$session s , v$rollstat r , dba_rollback_segs rs WHERE s . saddr = t . ses_addr AND t . xidusn = r . usn AND rs . segment_id = t . xidusn ORDER BY t . used_ublk DESC ; Voil√†, √ßa sera tout pour aujourd'hui","tags":"Techno","url":"https://foxmask.net/post/2013/01/17/oracle-identifications-des-locks-process-sessions-en-cours/"},{"title":"Oracle des expdp et impdp en r√©seau, si c'est possible","text":"A l'heure actuelle, la version d'Oracle est la 11G R2 (√† tes souhaits pourrait r√©torqu√© 6P0 √† R2D2 :P), et avec cette version il est de coutume de ne plus employer pour ses sauvegardes/gestions de dumps, que le fameux duo expdp et impdp pour produire ce qu'on appelle des datapumps (√† tes souhaits encore ;) Tout ceci rend la gestion des dumps beaucoup plus funs qu'avec les commandes exp/imp qu'on se trainaient depuis Oracle 8i&9i. Par contre un inconv√©nient majeur pour tout radin qui se respecte, ca bouffe l'espace disque ! Avant expdp / impdp avec \"exp\", on pouvait compresser ses dumps like that : mknod pipe p gzip < pipe > FOX_DUMP.gz & nohup exp LOGIN/PASS file = pipe grants = n & j'exporte mon dump dans le pipe qui le compresse √† la vol√©e, magie magie ;) Qui dit mieux ? ben pas oracle 11G :P je vous note la m√™me chose √† l'envers pour un import avec imp mknod pipe p gunzip < FOX_DUMP.gz > pipe & nohup imp LOGIN/PASS file = pipe grants = n ignore = y fromuser = OLDLOGIN touser = LOGIN & Bon ok on a pige la compression / d√©compression √† la vol√©e. A pr√©sent supposons que j'ai vraiment des soucis de place disque, m√™me pour produire le dump compress√© localement √† mon serveur oracle. On proc√©dait ainsi : depuis une autre machine disposant des outils oracle (il faut un minimum hein;) mknod pipe p gunzip < FOX_DUMP.gz > pipe & nohup imp LOGIN/PASS@FOX-SERV file = pipe grants = n ignore = y fromuser = OLDLOGIN touser = LOGIN & Ici la subtilit√© r√©side dans ce qui suit le @ ; ceci demande √† oracle \"vas voir dans le fichier tnsnames.ora et trouves moi la r√©f√©rence FOX-SERV, puis quand tu l'as trouv√© connectes-toi au serveur concern√©\". Ceci marche aussi bien localement (pour invoquer une instance Oracle local, l'ORACLE_SID quoi) qu'en r√©seau car le tnsnames.ora contient tout ce qu'il faut pour trouver le serveur, le port d'√©coute et l'instance exemple : FOX - SERVER = ( DESCRIPTION = ( ADDRESS_LIST = ( ADDRESS = ( PROTOCOL = TCP )( HOST = fox . somewhere . other . the . rainbow )( PORT = 1523 )) ) ( CONNECT_DATA = ( SID = V11UTF8 ) ) ) Ainsi, il m'etait facile de balancer un dump √† trifouilli-les-oies avec exp :P Depuis expdp et impdp Ok, super on a vu comment on g√©rait avant , √† pr√©sent comment fait-on ? Depuis l'arriv√©e du duo (ex|im)pdp, on ne peut plus : compresser les dumps √† la vol√©e exploiter le dernier cas pr√©c√©demment √©voqu√©, car la commande prend des arguments qui demandent √† Oracle de v√©rifier \"localement\" ses ressources. bon ya aussi plein d'autres trucs qu'on peut plus faire mais OSEF :P c'est pas le sujet du jour ;) Le premier des param√®tres oracle \"v√©rifi√©\" localement : DIRECTORY DIRECTORY est un objet oracle et pas un path qu'on peut indiquer √† oracle √† la vol√©e pour lui dire \"mon dump est l√† / est √† mettre l√†\", nan nan √ßa √ßa marche plus ! Le directory oracle est donc localisable comme suit : SQL > conn / AS sysdba Connected . SQL > select * from dba_directories ; OWNER DIRECTORY_NAME ------------------------------ ------------------------------ DIRECTORY_PATH -------------------------------------------------------------------------------- SYS ORACLE_OCM_CONFIG_DIR / app / oracle / product / 11 . 2 . 0 . 3 . 0 / db / ccr / state SYS DATA_PUMP_DIR / app / oracle / product / 11 . 2 . 0 . 3 . 0 / db / rdbms / log / Donc comme on le voit ici, ce sont des dossiers propre √† Oracle cr√©√©s lors de l'installation. Mais moi je veux importer / exporter des dumps sur un NAS (allez :P) Donc pour arriver √† mes fins, j'ajoute une ligne dans mon /etc/fstab pointant sur un des dossiers (qu'on dit \"export√©s\") de mon NAS en NFS, disons que le dossier sera dans /mnt/dump_oracle et je le \"mount\" (of course) Reste alors √† ajouter ce dossier √† oracle : SQL > conn / AS sysdba Connected . SQL > create directory fox_dump_oracle as '/mnt/dump_oracle' ; Directory created . SQL > A pr√©sent reste √† finir ses affaires : expdp LOGIN/PASS dumpfile = exp_FOX_SCHEMA.dmp directory = fox_dump_oracle logfile = fox_dump_oracle.log & et l√† au joie, le dump partira clopin-clopant sur le NAS bouffer l'espace disque ailleurs ;)","tags":"Techno","url":"https://foxmask.net/post/2013/01/16/oracle-des-expdp-et-impdp-en-reseau-si-cest-possible/"},{"title":"de PHP √† Python : tous ensemble","text":"Voici (venu le temps des rires et des chants dans l'ile aux enfants du web c'est tous les jours le printemps, aheu 'scusez j'm'√©gare :) une nouvelle s√©rie d'articles \"de PHP √† Python\" qui voit le jour. Elle n'aura rien √† voir avec une certaine √©mission de construction de baraques en ruine pour familles en d√©tresse... :P Celle ci va consister √† illustrer et (tenter de) r√©pondre √† la question \"Comment fais tu √ßa en Python quand je fais √ßa en PHP ?\" Encore une fois, ma grandeur d'√¢me aura eu raison de moi (√ßa sera ma \"tourn√©e\" pour mon cadeau d'anniversaire √† chacun de vous en ce jour b√©ni des dieux du net ;) et c'est un nouveau d√©fi sur IRC (sur un channel PHP), qui est le r√©sultat de ce billet et de ceux qui suivront. En voici les \"termes\" ;) dis moi, toi qui touche √† python depuis un bon moment, √ßa te dis pas de nous pondre un petit article comparatif avec PHP ? genre les √©quivalents en python dans les grandes lignes une sorte de how to switch to python genre l'√©quivalent de composer, de phpunit, etc... niveau code, par exemple l'√©quivalent de pdo, de simpleXml, etc... donne nous envie de switcher ;) On retiendra tout de m√™me une judicieuse remarque sur #python-fr √† ma question \"connaissez-vous des articles pour montrer comment passer de php √† python ?\" PHP et Python n'ont pas exactement la m√™me utilit√©, donc √† part dans le cadre d'un projet pr√©cis, je vois mal comment se dire \"tiens, je vais passer de PHP √† Python\" \\&#94;\\&#94; Le niveau des billets risque de ne pas √™tre pour le d√©butant en programmation (forc√©ment ;) mais si d'aventure vous le seriez en Python vous pourriez me corriger ;) Je me lance bien que n'√©tant pas le moins du monde l'expert attitr√© dans ces 2 langages, je pratique python depuis ao√ªt 2012 et plus assid√ªment depuis PyConFr 2012 (niveau noob++), et pour PHP je pratique depuis un tout petit poil plus longtemps (niveau dev++/l33tmoinsmoins ;) mais comme j'appr√©cie les 2 ( et ces temps ci plus l'un que l'autre parce que je m'√©clate ) je prends le risque et rel√®ve le gant ;) Donc le sujet pour cette s√©rie sera de montrer comment telle \"op√©ration\" en PHP se r√©alise en Python. Dans la bannette pour le moment il y aura : \"En Python comment fais tu \" : avec un Composer like ? PSR-1 like (update 28/1) Les String (update 29/1) les Tests unitaires ? le Passage de param√®tres au nombre variable ? les Arrays ( demand√© via twitter ) oui c'est cours (en fait c'√©tait cours au d√©part mais depuis 1mois il s'en est pass√© des choses) mais... ... je vous propose de me coller en commentaire les sujets qu'ils vous plairaient de voir abord√©s et je verrai \"si je sais faire\", de m√™me, je modifierai la liste ult√©rieurement en fonction de mes envies ;) et surtout pour maintenir le liens avec les articles publi√©s apr√®s coup. D√©j√† paru en \"kioske\" : \"de Composer √† SetupTools\" PSR-1 like Les String Shrek passe √† table les Tests Unitaires A para√Ætre : Lecture de fichier de configuration Parser du XML","tags":"Techno","url":"https://foxmask.net/post/2013/01/14/de-php-a-python-tous-ensemble/"},{"title":"Oracle Gestion des Tablespaces","text":"Quand on n'a pas demand√© √† Oracle de g√©rer l'espace disque avec l'option auto extend sur ses tablespaces, il arrive (souvant) qu'on se mange des erreurs parce que le tablespace est full. Donc ; Pour lister ses tablespace on tapera : SELECT file_name FROM dba_data_files WHERE tablespace_name = 'MONBEAUTBSPC' ; affichera FILE_NAME -------------------------------------------------------------------------------- / u02 / oradata / INSTANCE / data01 . dbf / u02 / oradata / INSTANCE / data02 . dbf ... Pour le tablespace temporaire on fait : SELECT tablespace_name , file_name , bytes FROM dba_temp_files WHERE tablespace_name = 'TEMP' ; Trouver la taille restant dans le tablespace SELECT SUM ( bytes ) / 1024 / 1024 AS Mo FROM dba_free_space WHERE tablespace_name = 'MONBEAUTBSPC' ; MO ---------- 5205 . 625 Si on constate que la taille n'est pas suffisante, pour les agrandir on fera, pour le tablespace MONBEAUTBSPC : alter tablespace MONBEAUTBSPC add datafile '/u02/oradata/INSTANCE/data03.dbf' size 30720 M ; pour le tablespace TEMP : ALTER TABLESPACE temp ADD TEMPFILE '/u02/oradata/INSTANCE/temp02.dbf' SIZE 512 m ;","tags":"Techno","url":"https://foxmask.net/post/2013/01/10/oracle-gestion-des-tablespace/"},{"title":"Sam et Max Le Papa No√´l descendu du ciel","text":"A la suite d'un concours improvis√© par Sam et Max , me voici l'heureux gagnant d'un joli cadeau, je vous laisse d√©couvrir en images le paquet ;) ici le fond du colis : Les enfants ont d√©j√† fait la razia ;) Ici on notera la touche \"perso\" de Sam et Max (c'est scotch√© sur la boiboite :) Les petits points blancs (si vous zoomez) ; c'est le sucre des bonbons secou√©s, dans l'emballage ! Etui, tapis et notice et la molette elle m√™me est retro √©clair√©e, du plus bel effet : Alors, \"petit bonhomme au chapeau pointu\" : un tr√®s grand merci ! j'allais en changer, mais Razer, c'√©tait pas au budget ! Je pourrai tester cette fus√©e sur une partie de CODMW3 :)","tags":"General","url":"https://foxmask.net/post/2013/01/08/sam-max-le-papa-noel-descendu-du-ciel/"},{"title":"Oracle Exporter une Proc","text":"Le script suivant, nommons le export_pkg, vous permet d'exporter une proc de votre choix : SET heading off SET pagesize 0 SET linesize 255 SET trimspool ON SET feedback off SET verify off spool &&1\\.pkg SELECT 'CREATE OR REPLACE ' FROM dual; SELECT TEXT FROM user_source WHERE TYPE='PACKAGE' AND NAME= '&&1' ORDER BY line ASC; SELECT '/ ' FROM dual; SELECT ' ' FROM dual; SELECT 'CREATE OR REPLACE ' FROM dual; SELECT TEXT FROM user_source WHERE TYPE='PACKAGE BODY' AND NAME= '&&1' ORDER BY line ASC; SELECT '/ ' FROM dual; SELECT 'exit; ' FROM dual; spool off; exit; Il s'utilise ainsi : sqlplus login/pass @export_pgk.sql TOTO et vous cr√©era TOTO.pkg avec le contenu de la proc contenu dans le schema \"login\"","tags":"Techno","url":"https://foxmask.net/post/2013/01/03/oracle-exporter-une-proc/"},{"title":"Oracle Changer l'√©diteur SQL","text":"Maints fois on se retrouve √† taper une connerie dans SQL*Plus mais on n'a pas la main sur l'histoirique comme on l'a avec votre shell BASH en pressant la touche fl√®ch√© du haut. Donc pour tout de m√™me se retrouver dans un \"univers\" familier on peut faire ceci define _editor=vi et en tapant la commande : SQL > ed on se retrouvera dans l'√©diteur VI (dans un univers famillier :) et on pourra changer la derni√®re ligne qui nous posa probl√®me ;)","tags":"Techno","url":"https://foxmask.net/post/2012/12/27/oracle-changer-lediteur-sql/"},{"title":"Jelix et un minify avant les f√™tes","text":"Hey !!! Ca faisait une √©ternit√© que je ne m'√©tais pas arr√™t√© sur Jelix et propos√© un billet sur le sujet ;) Bon au menu de ce soir un truc tr√®s court mais utile si on ne veut pas se bourrer de dolipranes √† en avance sur les f√™tes ;) Donc voici : Minify Comme tout jelixien le sait, on peut \"minifier\" ses scripts CSS & JS. Tout se passe bien tant qu'on veut pas jouer au malin (comme moi ;p). J'installe une version 1.5-dev toute fra√Æche pour me farcir une √©vol' toute con mais avec maints ramifications . Du coup l√† apr√®s m'√™tre farci jConfigCompiler, je suis sur jelix_minify.php et l√†, apr√®s avoir configur√© jelix pour minifier mes CSS, je me mange un message d'erreur trop lourd pour une avant veille de r√©veillon : ERROR 400 BAD REQUEST Ma qu√© passa ? tout cass√© la machina ? Je plonge dans le code de jelix_minify et ne vois rien qui cloche sur mon √©vol', donc commence √† mettre dans un bateau firebug et firephp pour voir lequel des 2 sera le premier √† ne pas tomber √† l'eau. Manque de pot, ils se sont tous 2 noy√©s, j'ai d√ª me trouver la solution tout seul (comme d'hab' quand c'est trop compliqu√©, tout le monde se d√©bine :P ). Alors !! T'accouche ? je vous vois tr√©pigner \"mais qu'il est long pour la cracher sa valda\"... mais nan allez encore 2min de patience. Quand on se d√©marre un projet flambant neuf avec jelix, on obtient la belle page toute bleue ressemblant √† celle ci . Mais avant d'√™tre bleue, elle est toute blanche parce qu'on n'a pas ajout√© dans son dossier www le path vers lib/jelix-www contenant les CSS de base de Jelix. Donc comme tout √† chacun, devant ma page blanche (avec du texte mais sans couleur, s'entend) je me fais un pur lien symbolique : ln -s ../../lib/jelix-www jelix je recharge ma page et hop la voil√† toute belle v√™tue de bleu. Ensuite arrive ma config minify je recharge la page et hop ... toute blanche ... avec comme HTTP r√©ponse l'indigeste 400... Comme on commence √† l'entrevoir c'est mon lien symbolique qui le d√©frise l'ami Jelix_Minify. J'ai donc fini par sucrer le lien symbolique et le remplacer par une copie du dossier lui m√™me. En rechargeant ma page ce coup ci tout √©tait bleu (sans √©l√©PHPant :D ) et sans plus l'erreur 400. Sur ce passez un bon r√©veillon √† tous ;)","tags":"Techno","url":"https://foxmask.net/post/2012/12/21/jelix-et-un-minify-avant-les-fetes/"},{"title":"Oracle Personnalisation du Prompt SQL*Plus","text":"Tout comme un admin syst√®me adore faire joujou en personnalisant son prompt de son shell ch√©ri en rajoutant le nom du host et l'heure, on peut tout aussi bien le faire avec SQL*Plus afin de savoir sur quelle Instance Oracle on s'est connect√© et avec quel Utilisateur et √† quelle heure. Pour ce faire, on editera le fichier \\$ORACLE_HOME/sqlplus/admin/glogin.sql pour ajouter : set sqlprompt \"_user 'on' _date 'at' _connect_identifier > \" ce qui permettra d'afficher : -bash-3.2$ sqlplus /nolog SQL*Plus: Release 10.2.0.4.0 - Production on Tue Jan 19 14:42:05 2010 Copyright (c) 1982, 2007, Oracle. All Rights Reserved. on 19-Jan-11 at > conn /as sysdba Connected. SYS on 19-Jan-11 at INSTANCE >","tags":"Techno","url":"https://foxmask.net/post/2012/12/20/oracle-personnalisation-du-prompt-sqlplus/"},{"title":"Quand Django reste muet √† vous rendre dingue","text":"Voici un truc qui m'a us√© les nerfs (de noob mais pas que :P) avec Django . je me fais un template principale, con √† souhait, dans lequel je fais un include, \"QQ la praline\", comme suit : base.html { % load static % } { % load staticfiles % } { % load i18n % } { % load url from future % } [ ... ] { % include \"mark_forum.inc.html\" % } dans mark_forum.inc.html { % trans \"Mark all forum as read\" % } { % if current_id_forum > 0 % } { % trans 'Mark this forum as read' % } { % endif % } { % trans 'Show new posts' % } { % if current_id_forum > 0 % } { % if subscribed_to_this_forum % } { % trans 'Unsubscribe to this forum' % } { % else % } { % trans 'Subscribe to this forum' % } { % endif % } { % endif % } je lance mon appli et dans la console, me saute aux yeux lib/python2.6/site-packages/django/template/defaulttags.py:1235: DeprecationWarning: The syntax for the url template tag is changing. Load the ` url ` tag from the ` future ` tag library to start using the new behavior. donc j'ajoute √† mark_forum.inc.html (malgr√© l'ajout existant dans l'index.html) { % load url from future % } et je relance ... et l√† plus d'erreur dans la console ! Yeah ! je me dis nickel ca marche, avancons ! ... ben non. Aucun message d'erreur et le template que je tente d'inclure affiche ... rien ! Donc je sors le scalpele et pars d√©cortiquer tout le code du template. Je retire tout et colle un beau coucou √† la place de tout le reste ; qui s'affiche. Bon d√©j√† je me dis ok je suis pas d√©bile c'est bien comme √ßa que l'inclusion marche (vin diou). Je rajoute mon premier noeud li et l√† re patatra plus rien ne s'affiche... Comme le probl√®me de syntaxe sur url n'est plus en cause je me dis voyons trans et mettons une string pipo ~~alakon~~. Et l√† Bingo ! Il me manque donc { % load \"i18n\" % } J'avais imagin√© que le template inclus r√©cup√©rait le contexte parent et donc le load que j'avais fait dans le index.html.... que n√©ni... comme pour le load url en fait. Mais l√† o√π j'ai mis le temps c'est, comme je l'ai dit plus t√¥t AUCUN message d'erreur me dit que je tente d'utiliser un \"template tag\" que je n'ai pas charg√© avant ... Une bosse grosse engueulade comme pour le load url from future m'aurait largement aid√© ;) L√† franchement c'est tr√®s bas de la part de Django :P Si quelqu'un a une explication sur le mutisme de Django l√† dessus, je lui en serai gr√© ;)","tags":"Techno","url":"https://foxmask.net/post/2012/12/19/quand-django-reste-muet-a-vous-rendre-dingue/"},{"title":"Debian, amour et d√©samour","text":"Utilisateur de Debian depuis Le toutou elastic aka \"Slink\" (version 2.1), je n'ai jamais eu √† me plaindre. Je me suis toujours √©clater avec cette distribution Linux, m√™me si j'ai crois√© sur le chemin SlackWare, Mandrake, RedHat, Suse etc... J'utilise actuellement Debian Squeeze (version 6 donc) que j'ai pu installer sur mon HP en passant par ... windows... parce que le BIOS des HP est inaccessible, oui ma bonne dame. Donc je n'ai aucun moyen de booter le PC depuis un m√©dia quelconque \"CD/DVD/Cl√© USB\". C'est donc depuis windows seven, je dis bien, que j'ai install√© l'installeur debian pour ajouter ensuite au bootloader de windows un point d'entr√©e pour booter sur l'installeur debian (vous avez bien suivi ? c'est tordu hein ;) Donc √† pr√©sent, quand je reboot j'ai 3 choix dans mon bootloader windows : windows 7 Debian GNU/Linux l'installeur Debian Tout √ßa marchait tr√®s bien, mais comme Wheezy va sortir dans peu de temps j'ai voulu mettre √† jour ma version, et l√†, la catastrophe. Apr√®s un aptitude update un aptitude upgrade m'affichait R√©solution des d√©pendances... ouverts: 378146 ferm√©s: 658730 report√©s: 344 en conflit: 1436 ca durait 2 heures, √ßa m'a gonfl√©, j'ai tout arrete et fait un simple apt-get dist-upgrade J'ai eu droit √† un probleme de depedance sur default-java (un truc du genre) j'ai fait un dpkg -P default-java et relancer le dist-upgrade, et tout se finissa comme dans un r√™ve H√© bien Nan ! X √©tait plant√©, j'att√©ri dans une bonne vieille console 80 colonnes, comme j'avais lanc√© l'upgrade depuis une session X, X a √©t√© mis √† jour et je ne voyais plus o√π l'upgrade s'√©tait arr√©t√© alors qu'un ps -auxf m'affichait toujours le process en cours... UN gros kill du PID + un apt-get --JENESAISPLUSQUOIPOURTOUTREMETTREDEQUERRE Et l'upgrade se finissa oui Comme par magie X se lan√ßa je pu acc√©der √† gnome 3. Youpi ! Mais en fait non ! Avec Gnome2, ma Nvidia (une GT 220) √©tait prise en charge, et mon processeur (le ventilateur) ne faisait AUCUN bruit. Par bruit j'entends (trop fort:P) comme quand un process lourd se lance vous voyez le genre, style j'extrais des pistes d'un CD avec abcde, ou encode une connerie en avi avec ffmpeg. C'est le m√™me \"son\" que fait le PC au boot tant que l'OS (windows / linux) n'a pas fini de se charger et afficher l'interface graphique (de l'un des deux OS). A pr√©sent, avec Gnome3, ce bruit est constant, ce qui me fait dire que Debian Wheezy n'a pas charg√© le module NVIDIA appropri√© sinon je n'entendrais plus un bruit. J'ai regard√© la doc sur le wiki debian concernant NVIDIA, un beau bug de la commande nvidia-xconfig flingue la conf de X (cr√©√© un fichier xorg.conf vide). Si je tente d'en cr√©er un avec juste la section Monitor pour ajouter le nom du driver, je ne peux plus acc√©der √† X en rebootant. Obliger de faire un \"mode sans √©chec\" et virer le fichier pour que GDM red√©marre. Comme le BRUIT m'insupporte, je suis reparti pour me r√©installer une debian squeeze, et l√†, pratiquement √† la fin, grub veut pas s'installer, lilo non plus. D√®s lors qu'on ne fait pas ce que l'installeur s'attend comme op√©ration, grub se vrille ; obliger de tout recommencer, ce qui m'exasp√®re apres 3 installations _pour rien_ Donc une question √† vous lecteur(s) : Avez vous une telle carte graphique et si oui pouvez vous me montrer votre /etc/X11/xorg.conf ? Si non, quelle distribution utilisez vous autre que Ubuntu, qui utilise Gnome3 ? Et par dessus le march√©, cerise sur le cake, qui poss√®de un installeur sous windows ? (saloperie de HP ... :P) Dans tout cela je ne vous ai pas dit pourquoi je voulais mettre une Debian Wheezy : Parce que j'ai besoin des nouvelles versions de Python > 2.6 (et accessoirement PHP :D) pour pouvoir fournir des applications fonctionnelles √† souhait et parce que la squeeze, une fois la wheezy sortie, ne sera plus \"autant\" maintenu, comprendre que les nouveaut√©s on devra tirer un trait dessus. Edit : 22h51 Bon je m'en suis enfin sorti apres 3 nouvelles installations et en me reprenant la t√™te avec le driver fourni par Debian qui est une vraie plaie sur mon 64bits... Analyse post-mortem : Quelque soit la config utilis√©e avec les pack deb l'√©cran blinkait ind√©finiment. J'avais pris tous les pack deb nvidia ; taper nvidia-xconfig ; editer le fichier /etc/X11/xorg.conf mais rien y a fait. Hier pour anticiper le coup, j'avais download le driver chez nvidia.com directement. Ensuite j'ai lanc√© l'installeur apr√®s avoir install√© gcc et kernel-header et choisi l'installation via DKMS Grosse erreur ! Il en avait rien √† faire de mes kernel-headers. Solution : arreter X /etc/init.d/gdm3 stop lancer ./NVIDIA-.....run et √† l'invite NE PAS UTILISER DKMS La compilation se passe les doigts dans le nez ! Ensuite un bon coup de nvidia-xconfig pour pondre le fichier /etc/X11/xorg.conf Puis un petit modprobe nvidia lancer gdm3 /etc/init.d/gdm3 start Et l√† comme par enchantement le processeur se tait et \"la lumi√®re\" soit ! Me voil√† de retour sur une Debian Squeeze ... et j'attendrai de pied ferme une Wheezy STABLE !","tags":"Techno","url":"https://foxmask.net/post/2012/12/17/debian-amour-et-desamour/"},{"title":"Oracle bottant le train des r√©fractaires","text":"Voici le d√©but d'une suite de billets d√©di√©e √† Oracle, One of my Job in Professional life :) Il √©tait une fois un DBA qui en avait plein les bottes de demander aux utilisateurs de bien vouloir se d√©connecter du sch√©ma pour remonter un dump ... √† leur demande de surcroit. Ainsi donc il d√©gaina une requ√™te pour leur envoyer un bon coup de pompe dans le derri√®re. Pour trouver la/les connexions existantes sur un sch√©ma oracle on fait : SELECT sid , serial # , osuser , status from v$session where username = '&1' ; et on indique le nom du sch√©ma voulu. Quand on a une session on peut encore se faire \"√† la main\" le fameux : alter system kill session ',' ; Mais quand vous avez une ribambelle de t√™tes de mule, il faut employer les grands moyens, et l√†, se faire la paire de kill √† la main devient p√©nible et on maudit encore plus ces utilisateurs. Donc on produit un script SQL, nommons le generate-kill.sql , qui va produire un \"rapport\" redirigeant les fautifs dans un script SQL qu'on lancera ensuite. set head off spool kill_session . sql select 'alter system kill session ''' || sid || ',' || serial #|| ''';' from v$session where username = '&1' ; spool off exit On se connecte en tant que sysdba et on tape @ kill_session . sql bye bye : System altered . System altered . System altered . System altered . System altered . System altered . System altered . System altered . System altered . System altered . System altered . Et on peut enfin faire son drop user/create user p√©p√®re pour remonter le dump .","tags":"Techno","url":"https://foxmask.net/post/2012/12/13/oracle-bottant-le-train-des-refractaires/"},{"title":"Django blocktrans et l'indigestion de variables","text":"Dans mes tribulations (d'un Djangonaute en Poneyland) d'exploitation de modules tiers comme django registration , le template permettant l'envoi de mail est tr√®s \"free style\", comprendre qu'il est tellement explicite qu'on en perd son latin, du coup dans mes \"d√©buts\" je me suis carr√©ment pris la t√™te √† d√©piauter tout la pile d'appels du \"schmilblick\". Ce qui ne marche pas Ainsi j'avais cod√© : { % url 'registration_activate' activation_key as registration_activate % } { % blocktrans % } Hello , You wish to subscribe to the service provided by {{ site . name }} . To confirm your subscription , go on the following page {{ site . domain }}{{ registration_activate }} to activate your account Your subscription request will expire in {{ expiration_days }} days if you dont confirm it . -- 2012 - {{ site . domain }} { % endblocktrans % } et le mail partant, arrivait comme ceci Hello, You wish to subscribe to the service provided by . To confirm your subscription, go on the following page /accounts/activate/1ccfbb6800bde1b8549f8384cd88fa3d1c931fa3/ to activate your account Your subscription request will expire in 7 days if you dont confirm it. -- 2012 - Un beau mail ... pourri √† souhait, mais que se passe-t-il ? WTF ? je suis all√© jusqu'√† coller des print dans le fonction send_activation_email du module registration mais l'objet site √©tait correctement peupl√©. J'ai recheck√© que mes propres context_processors n'interf√®raient pas avec le template et que le framework Site √©tait par√©. Ce qu'il fallait faire Puis d'un coup (il √©tait temps depuis 1h que je tournais en rond √† tout v√©rifier) je me suis rappell√© mais blocktrans faisait des indigestion de variables ... faut les lui faire bouffer tout cru en lui pin√ßant le pif avec le keyword with ! { % url 'registration_activate' activation_key as registration_activate % } { % blocktrans with site_name = site . name site_domain = site . domain % } Hello , You wish to subscribe to the service provided by {{ site_name }} . To confirm your subscription , go on the following page {{ site_domain }}{{ registration_activate }} to activate your account Your subscription request will expire in {{ expiration_days }} days if you dont confirm it . -- 2012 - {{ site_domain }} Et voil√† ! Ceci m'avait saut√© aux yeux avec la tentative d'utilisation de {% url .... %} puisque django hurlait ses grands Dieux que je n'avais pas le droit de le faire, donc j'avais trouv√© √† r√©soudre le probl√®me de url, mais l√† Django s'est tu sans dire que site.xxx ne g√™nait.","tags":"Techno","url":"https://foxmask.net/post/2012/10/15/django-blocktrans-indigestion-variable/"},{"title":"Django, un template tag, une boussole dans le template","text":"Dans un template utilis√© tout au long de son site, tel un menu, je voulais trouver un moyen de savoir quelle vue l'avait appel√© afin de positionner une classe CSS 'active' au bon endroit. Dans mes recherches j'ai trouv√© A Django template tag for the current active page , o√π au d√©but j'avais le me cheminement consistant √† parser request.path, ensuite j'ai mis la main sur une am√©lioration de la proposition pr√©c√©dente sur ce blog ... que j'ai √† mon tour modifi√© ;) Voici ce que √ßa donne dans un template : { % url 'base' as home % } { % url 'profiles_profile_detail' request . user . username as profiles_profile_detail % } { % url 'relationship_list' request . user . username 'friends' as relationship_list_friends % } { % trans \"Home\" % } {{ request . user . username }} { % trans \"My network\" % } { % trans \"log out\" % } Mon grin de sel se situe cot√© HTML o√π je ne veux pas laisser dans la page HTML des propri√©t√©s vides comme on le voit ici Du coup je retourne b√™tement class=\"active\" plut√¥t que active @register.simple_tag def active ( request , pattern ): import re pattern = \"&#94; %s $\" % pattern if re . search ( pattern , request . path ): return ' class=\"active\" ' return ''","tags":"Techno","url":"https://foxmask.net/post/2012/10/13/django-template-tag-boussole-template/"},{"title":"Django Shortener clap une premi√®re","text":"Ce soir, me suis fendu d'un mini module django permettant de g√©rer son propre service de raccourcisseurs d'URL tel bitly et ses amis. Premier effet kisskool : un service \"con comme la lune\" On d√©pose une longue URL, le module vous en retourne une version courte. 2 petits param√®tres sont n√©cessaire dans votre fichier settings.py: la taille de l'URL courte, l'h√¥te h√©bergeant le service (si ce n'est pas le domaine courant). Quand c'est fait vous faites votre copier coller de l'URL courte dans votre texte et \"voil√†\" comme ils disent outre manche ;) Deuxi√®me effet kisskool : int√©gration avec d'autres modules Comme le service ne pouvait s'en tenir l√†, j'ai aussi produit un template processor permettant de parser une string pour en extraire toutes les URLs et en ressortir une version courte pour chaque ! {{ my_nice_text | shrt }} on peut bien √©videment ajouter une ribambelle de filtres √† la suite {{ my_nice_text | shrt | safe | escape }} O√π trouver le module ? Pour tester ce module vous avez la possibilit√© de le trouver sur PyPi , ou de taper pip install django_shortener ou de vous faire un fork sur github . Tout retour sur ce module sera appr√©ci√© comme c'est le premier, j'esp√®re d'une longue s√©rie ;)","tags":"Techno","url":"https://foxmask.net/post/2012/09/30/django-shortener-clap-une-premiere/"},{"title":"Python pip freeze by noob","text":"Dans la s√©rie je d√©couvre les joies de python, voici un tr√®s court billet sur l'utilisation de pip √† la suite de ce tr√®s instructif billet de Sam et Max o√π on apprend qu'on peut produire son propre fichier requirements.txt recensant les modules utilis√©s pour son virtualenv . Le but de la manoeuvre √©tant d'√©viter de se coltiner les r√©installations √† l'identique sur des virtualenv / serveurs distincts. Donc tout content de mettre en pratique je me lance la commande comme suit : foxmask@foxmask:~$ cd Django-VirtualEnv/django-huanui foxmask@foxmask:~/Django-VirtualEnv/django-huanui$ pip freeze --local > requirements.txt ce qui me donne comme requirements.txt : Axiom==0.6.0 BeautifulSoup==3.1.0.1 Brlapi==0.5.5 ClientForm==0.2.10 Coherence==0.6.6.2 Epsilon==0.6.0 GnuPGInterface==0.3.2 Louie==1.1 Mako==0.3.4 MarkupSafe==0.9.2 MySQL-python==1.2.2 Nevow==0.10.0 PAM==0.4.2 PIL==1.1.7 PyOpenGL==3.0.1b2 Twisted-Conch==10.1.0 Twisted-Core==10.1.0 Twisted-Web==10.1.0 apt-xapian-index==0.41 chardet==2.0.1 configobj==4.7.2 cups==1.0 distribute==0.6.14 feedparser==4.1 gdata==2.0.8 gnome-app-install==0.4.7-nmu1 httplib2==0.6.0 louis==2.0.0 mechanize==0.1.11 mercurial==1.6.4 numpy==1.4.1 pep8==0.5.0 pexpect==2.3 pyOpenSSL==0.10 pyasn1==0.0.11a pycrypto==2.1.0 pyserial==2.3 pysqlite==2.6.0 python-apt==0.7.100.1-squeeze1 python-debian==0.1.18-squeeze1 pyxdg==0.19 rdflib==2.4.2 reportbug==4.12.6 rope==0.9.2 tagpy==0.94.7 uTidylib==0.2 unattended-upgrades==0.1 virtualenv==1.4.9 wsgiref==0.1.2 zope.interface==3.5.3 Oula mais √ßa me va pas cette ribambelle de modules, but wtf ? Bon ben comme les pros du pot l'ont d√©j√† vu ; faute de d√©butant flagrante. Quand on se cr√©√© un virtualenv on n'utilise les scripts qui sont dans ce dernier, donc dans mon cas ici : ~/Django-VirtualEnv/django-huanui/bin/ donc on la refait : foxmask@foxmask:~/Django-VirtualEnv/django-huanui$ ./bin/pip freeze --local > requirements.txt et cette fois ci on respire, la \"pollution\" environnementale s'est dissip√©e : foxmask@foxmask:~/Django-VirtualEnv/django-huanui$ cat requirements.txt Django==1.4.1 distribute==0.6.10 django-debug-toolbar==0.9.4 django-profiles==0.2 django-registration==0.8 django-relationships==0.3.2 nota: si on ne colle pas le --local on \"ramasse\" tous les modules pr√©c√©dents edit : vu ce weekend √† PyConFr gr√¢ce √† @Dzen ;) pour ne plus se prendre le chou avec ./bin/pip ou autre ../bin/bin/pip blabla dans le dossier de son virtualenv on tape betement source bin/activate et les variables d'environnement feront leur boulot pour que tout soit relatif √† votre environnement virtuel __avant__ celui de la machine courante","tags":"Techno","url":"https://foxmask.net/post/2012/09/10/python-pip-freeze/"},{"title":"Django reverse for xxx with arguments ... not found","text":"Nombreux sont ceux qui tombent dans le pi√®ge de cette erreur qui semble √™tre une erreur de noobs ... Cette erreur la voici : Erreur : NoReverseMatch at / histo / Reverse for '' histo_save '' with arguments '()' and keyword arguments '{}' not found . Pour autant tout semble √™tre correct, le fichier urls.py contient url ( r '&#94;histo/$' , 'tglr.views.histo' , name = 'histo' ), Tantdis que le template lui contient ``` {language=\"python\"} {% csrf_token %} Donc tout semble parfaitement tourner rond sauf que ... dans la console saute aux yeux : ```shell /usr/local/lib/python2.6/dist-packages/django/template/defaulttags.py:1235: DeprecationWarning: The syntax for the url template tag is changing. Load the `url` tag from the `future` tag library to start using the new behavior. category=DeprecationWarning) Okkkayyyyy donc dans le template on rajoutera : { % load url from future % } et tout rentrera dans l'ordre Pour info j'aurai pu faire sauter les simples quotes autour de histo_save mais comme le dit le DeprecationWarning , utiliser {% url toto %} est d√©pr√©ci√©","tags":"Techno","url":"https://foxmask.net/post/2012/08/31/django-reverse-for-xxx-with-arguments-not-found/"},{"title":"HaveFnuBB 1.5.0","text":"cette nouvelle version, 1 an apr√®s la pr√©c√©dente quasiment jour pour jour, est marqu√©e par de nombreuses corrections de bugs et d'importantes am√©liorations de performances. Corrections modules : havefnubb: moult petites corrections moduleinfos : affiche √† pr√©sent les infos des modules correctement hfnurates : correction de la soumission des donn√©es ajax quand l'utilisateur n'est pas connect√© fonctionnalit√©s : le d√©sabonnement n'√©tait pas possible. apr√®s l'abonnement √† une discussion, on ne retournait pas √† la page d'o√π on venait suppression de la gestion des caches des zones des utilisateurs ne permettant pas l'affichage exact de leur information dans le mail avertissant qu'un nouveau message auquel on est abonn√© contenait un le lien erron√© menant √† une page 404 disparition des Tags sur les discussions corrig√©e Am√©liorations : installation l'installation du forum a √©t√© simplifi√©e pour fournir les informations \"√† propos\", affichage des informations de la version existante et celle √† installer l'installation de mise √† jour / migration a √©t√© revue forum le recomptage des messages que l'on bouge d'un forum √† l'autre a √©t√© am√©lior√©e gestion des flux Atom Ajout de meta keyword dans la configuration du forum Gestion de la messagerie priv√©e Performances : le Th√®me principal ne repose √† pr√©sent plus sur le syst√®me de grille 960gs dans un soucis de performance et d'am√©lioration de la rapidit√© du rendu, les autres th√®mes restent inchang√©s et toujours bas√©s sur 960gs le forum a √©t√© all√©g√© dans la gestion de ses tables afin d'√©liminer le maximum d'interm√©diaires pour obtenir des informations simples et les restituer le plus vite possible. Ainsi la quantit√© de requ√™tes SQL a chut√© drastiquement de m√™me que les appels inutiles √† des templates et zones. Par cons√©quent si vous aviez produit des th√®mes, il faudra revoir le templae index.tpl pour y retirer l'appel d'une zone et la remplacer par une simple ligne HTML. (cf le index.tpl du th√®me par d√©faut pour plus d'infos). Installation de HaveFnuBB T√©l√©charger la version 1.5.0 Une fois fait, au choix vous pouvez utilisez : le Wizard via l'interface web - pour une premi√®re installation rendez vous sur http://localhost/install.php - pour une mise √† jour depuis une version 1.4.x, rendez vous sur http://localhost/update.php La ligne de commandes - Pour l'installation : `php lib/jelix-scripts/jelix.php --havefnubb installapp ` - Pour la mise √† jour `php lib/jelix-scripts/jelix.php --havefnubb installapp ` Ah ba oui c'est bien la m√™me commande ! ne vous avais je pas dit que Jelix √©tait fun ? ;) Have Fnu !","tags":"Techno","url":"https://foxmask.net/post/2012/04/02/havefnubb-1-5-0/"},{"title":"Jelix PHP 5 Bouillon de Cultures","text":"Je ne vous pr√©sente plus Jelix , le framework PHP 5, voici juste quelques news de ce dernier qui pourront vous int√©resser ;-) R√©cemment ouverte chez googlegroups , la mailing-list Jelix-fr est le terrain de riches discussions sur le devenir du framework . Terrain fertile depuis que les statistiques de t√©l√©chargements ont d√©col√© significativement ! Parmi les √©changes on retrouve la r√©organisation et r√©am√©nagement des roadmaps pour permettre aux contributeurs de mieux s'y retrouver. Ainsi sont abord√©s pour les versions : la v1.4, en particulier le rythme de publications des releases de la branche 1.x, le but est de tendre sur 3 mois. Sur son contenu , jAuth devrait s'enrichir avec oAuth, jForms devrait am√©liorer le stockage des instances, jApp::Config remplacerait les variables globales gJConfig et gJCoord. La simplification du moteur d'URL (√† un seul moteur au lieu de 3 actuellement) pour am√©liorer les perf. Par ailleurs Laurent a d√©but√© la r√©daction de quelques RFC pour concr√©tiser ces r√©flexions. la v2 dans ses grandes lignes pour les tests unitaires : l'utilisation d' atoum a √©t√© √©voqu√©e M√™me si le framework est d√©j√† performant sur des sites √† forte charge, le but, comme on peut le voir, est d'am√©liorer les perfs encore et toujours. Ainsi donc, les √©changes (sur la ML ) sont nombreux et chacun peut venir exposer ce qu'il ne veut plus ou souhaite absolument voir entre ses mains, d√©battre d'axes d'am√©liorations, etc... Enfin comme √† son habitude l'√©quipe est ouverte √† toutes propositions, alors venez nous en parler ! Quelques liens utiles : mailing-list Jelix-fr Comment contribuer au projet Jelix et travailler avec les sources Le d√©p√¥t GitHub de Jelix","tags":"Techno","url":"https://foxmask.net/post/2012/01/12/jelix-php-5-bouillon-de-cultures/"},{"title":"Oracle et taille de schema, tablespace","text":"Pour obtenir la taille d'un sch√©ma, avec son script size_of_schema.sql SELECT SUM ( bytes ) / 1024 / 1024 FROM dba_segments WHERE owner = '&1' ; √† l'invite, donnez lui le nom du schema et roule ;) Pour obtenir le param√®tre de la base \"Undo Retention\", avec son script undo_retention.sql SELECT name , VALUE FROM v$parameter WHERE name = 'undo_retention' ; On tape sur la vue v\\$parameter qui contient une bonne partie des param√®tres de votre base oracle que vous avez dans l'init.ora Taille du tablespace Undo avec son petit script undo_tablespace.sql SELECT ( bytes / 1024 / 1024 / 1024 ), FILE_NAME FROM dba_data_files WHERE tablespace_name = 'UNDO' ; le tablespace UNDO et le param√®tre Undo retention permettent la gestion des rollback. l'undo retention est definie en minute, la duree pendant laquelle on conserve une requ√™te de rollback et l'undo tablespace lui g√®re les donn√©es qu'on annule. Si l'un des 2 est trop petit, les rollback vont exploser.","tags":"Techno","url":"https://foxmask.net/post/2012/01/10/oracle-et-taille-de-schema-tablespace/"},{"title":"Linux Live USB Persistent : failed","text":"Suite √† cette m√©saventure , j'ai fait les frais d'une cl√© USB 32Go, et de 2 soir√©es d'affil√©es √† la recherche d'images ISO qui soit exploitable sur le (vieux) portable recycl√© pour ma fille. Mon \"cahier des charges\" √©tant : Hardware RAM utilisable 512Mo Wifi sur une clef USB √† prendre en charge Linux en Fran√ßais (avec Gnome 2 pas 3 tant qu'√† faire puisque vieux PC) le mode persistant pour stocker quelques photos de copines :P Fort de tout cela j'ai pu essayer plusieurs outils : Linux Live USB fourni un outil permettant de choisir quel p√©riph√©rique utiliser, de t√©l√©charger une ISO, l'installer et sp√©cifier la taille max d√©di√© au mode persistant. Mon premier choix s'√©tait bien s√ªr port√© sur Debian (utilisateur de debian depuis la potatoe ceci explique cela:), mais les ISO debian 6.0.1 requis par l'outil ne sont pas les bonnes... Ensuite j'ai pu m'orienter sur Ubuntu 11.10 , et tenter en vain de booter sur le portable... En vain car j'avais pas fait attention que j'avais d√©j√† du mal √† booter une 10.10 avant le crash du disque dur ... J'ai donc repris un 10.10 mais h√©las mille fois h√©las, √† part le splash screen avec les petits points qui passent du blanc au marron, je n'arrive jamais √† passer cet √©cran. Pourtant avec un live CD Ubuntu 10.10 , ca passe ... Devant cet √©chec j'ai install√© les doigts dans le nez, une slackware : Slax de son nom! Slax fourni KDE mais est totalement en anglais (or je vous rappelle que c'est pour ma fille de 10ans, l'anglais technique c'est un poil trop t√¥t:) ... et ne prend pas en charge ma clef usb pour le wifi (√† ba oui on cumule les obstacles) J'ai bien √©videment tent√© d'installer le projet Linux Live USB Debian mais √† part une liste de packages √† installer, rien n'explique comment le faire... Ensuite pour quand m√™me tenter d'installer une Debian (oui t√™tu un jour t√™tu toujours) j'ai utilis√© Cet outil qui m'a permis de mettre une 6.0.3 tout aussi facilement que la slackware, et booter, tout nickel jusqu'au deux derniers obstacles : la cl√© usb pour le wifi, non reconnue et Gnome full English ! Shit ! J'ai eu beau r√©cup√©r√© le driver (non-free:p) pour l'installer, de r√©seau wifi la Debian ne vit, ni ne voulu prendre en compte avec les infos que je lui avais fourni. Apr√®s tout cela je suis d√©pit√©, ok Ubuntu avant le crash disque reconnaissait ma cl√© usb et fonctionnait tant bien que mal, mais depuis toutes ces ann√©es je n'avais jamais vu de distribution ne pas me donner satisfaction. Sauf qu'√† pr√©sent, l'id√©e de \"redonner un second souffle √† un PC\" avec un linux salvateur/sauveur devient de plus en plus hypoth√©tique. Si ubuntu avait envi de faire comme windows en devenant de plus en plus gourmand, c'est gagn√© ! Maintenant o√π j'en suis ? l√† : \"Papa quand est-ce que je peux utiliser mon ordinateur ?\" PS : maintenant je suis cal√© pour monter une distrib' en mode persistant et ... redimensionner la partie non allou√©e au del√† des 4Go :D Si quelqu'un connait une distribution linux avec un gnome 2 en fran√ßais qui soit exploitable avec moins de 512Mo ... et avec prise en charge du driver usb ZD1211 ca serait le grand pied !","tags":"Techno","url":"https://foxmask.net/post/2011/11/05/linux-live-usb-persistent-failed/"},{"title":"Linux sur laptop sans disque dur","text":"Hmm naaaaaaaaaaaaaaaaannnnnnnnnnnnn, le disque dur du portable qui me l√¢che :( Quelqu'un aurait une id√©e pour utiliser linux sur un (vieux) portable sans disque dur ? j'imaginerai juste pouvoir stocker le /home sur cl√© usb au moins, genre pour conserver les pr√©f√©rences de firefox et puis c'est tout. est-ce possible ? nota : le disque dur √©tait un Seagate ST94019A (de 40Go) sur un hp pavillon zv5000.","tags":"Techno","url":"https://foxmask.net/post/2011/10/22/linux-sur-laptop-sans-disque-dur/"},{"title":"Jelix PHP5 Framework, version 1.3.0 dans les bacs","text":"Le framework PHP5, Jelix , sort une nouvelle version majeure (*) : 1.3 . Cette derni√®re a mis l'accent sur de nombreuses am√©liorations et nouveaut√©s , dont une meilleure gestion des erreurs et des am√©liorations du syst√®me de log une nouvelle barre de debuggage, extensible ( que je vous avais pr√©sent√© ) un objet r√©ponse html am√©lior√©, et extensible des simplifications dans la structure d'une application, et dans les scripts d'aide au d√©veloppement une gestion des profils de connexion unifi√©e (jDb, jKvDb, Soap etc) des am√©liorations dans la gestion des droits jAcl2 et beaucoup beaucoup d'autres ... De m√™me, tout est fait pour que vous puissiez migrer ais√©ment depuis toute version ant√©rieure √† la 1.3. Dans la dynamique de cette version nous en avons profit√© pour produire le projet \" Booster \", le portail des ressources Jelix produites par tout √† chacun. [*] La manuel complet [*] T√©l√©charger la version 1.3.0","tags":"Techno","url":"https://foxmask.net/post/2011/10/19/jelix-php5-framework-version-1-3-dans-les-bacs/"},{"title":"HaveFnuBB Th√®me Twitter Bootstrap","text":"Apr√®s de longs mois sans trop faire avancer le projet (la faute aux vacances et √† Booster.jelix.org ;) ) voici donc apr√®s quelques temps d'adaptation au toolkit tout en un qu'est Twitter BootStrap , je me suis lanc√© sur la cr√©ation d'un th√®me pour HaveFnubb , voici ce que √ßa donne : La page d'accueil La liste des messages Encore quelques pages et ca devrait √™tre pas mal au final. rg ;) ) voici donc apr√®s quelques temps d'adaptation au toolkit tout en un qu'est Twitter BootStrap , je me suis lanc√© sur la cr√©ation d'un th√®me pour HaveFnubb , voici ce que √ßa donne : La page d'accueil La liste des messages Encore quelques pages et ca devrait √™tre pas mal au final.","tags":"Techno","url":"https://foxmask.net/post/2011/10/02/havefnubb-theme-twitter-bootstrap/"},{"title":"Jelix PHP5 Framework tout neuf","text":"Bonjour, En ces temps de \"rentr√©e\", Jelix annonce, lui, plusieurs \"sorties\" ! Number one : nouveau serveur d√©di√© pour le projet ! Le pr√©c√©dent avait √©t√© gracieusement offert par Bastnic mais avait fini par se sentir mal (et nous avait fait des frayeurs derni√®rement;) Number Two : nouveau projet Booster . Ce site va permettre √† la communaut√© Jelix de trouver un d√©p√¥t unique, central, de toutes les ressources Jelix existantes produites par la communaut√©, et surtout de se l'approprier pour ajouter ses propres cr√©ations. Ainsi donc, on y retrouvera tout aussi bien, des applications compl√®tes, pr√™tes √† l'emploi que des petits plugins ou gros modules. Ce projet aura √©t√© r√©alis√© avec le concours de FlorianLB et votre serviteur. Number Three : Nouvelles releases 1.2.5 et 1.3RC2 . Voil√† ! On aura √©t√© sur tous les fronts ;) et on a encore un paquet de choses en cours dont la mise √† jour du forum, la 1.3 finale, un passage √† OpenWorldForum , ParisWeb , etc... PS : un grand merci √† Laurent pour m'avoir laiss√© prendre autant de place dans le projet depuis 3ans que je m'y suis interess√©, franchement un bon grand \"kiffe\" que cette aventure, comme 'ils' disent ! Et une mention sp√©ciale pour FlorianLB avec qui je prends beaucoup de plaisir √† coder Booster.","tags":"Techno","url":"https://foxmask.net/post/2011/09/23/jelix-php5-framework-tout-neuf/"},{"title":"Erreur 403 pour Validator W3C et Google","text":"Un sympt√¥me me casse bien les pieds depuis quelques temps et je ne trouve pas l'issue. Les Services \"Google centre pour webmasters\" et le \"Validator W3C\" me crachent une erreur 403 sur le pr√©sent site et un 2nd ; tous 2 h√©berg√©s chez OVH. Or √† part le fichier robots.txt et le .htaccess je ne vois pas ce qui d√©friserait ces 2 services :/ J'ai questionn√© le support OVH, je mettrai les suites de ces m√©saventures ici au fur et √† mesure de l'avancement de ce patacaisse.","tags":"Techno","url":"https://foxmask.net/post/2011/07/16/erreur-403-pour-validator-w3c-et-google/"},{"title":"HaveFnuBB! 1.4.0","text":"Bonjour, (r√©)Intro : HaveFnuBB est un logiciel de gestion de Forums OpenSource (sous licence GPL 2.0) avec pour buts d'√™tre : Rapide, L√©ger et Agr√©able ! Aujourd'hui : Apr√®s pr√®s d'un an de d√©veloppement depuis la sortie de la version 1.3.6, voici la 1.4.0. Cette version se dote d'une nouvelle mouture du Framework PHP5 Jelix en 1.2 ( facilitant grandement les installations/mises √† jour des modules et des applications ), et a subit √©norm√©ment de corrections de bogues, d'am√©liorations des performances Je tire mon chapeau et adresse un tr√®s grand merci √† Mr Jelix himself : Laurent Jouanneau , pour sa participation au code du forum, qui a grandement apport√© sa pierre √† l'√©difice et remis plein de choses √† leur place ;) L'annonce compl√®te T√©l√©charger HaveFnuBB! 1.4.0","tags":"Techno","url":"https://foxmask.net/post/2011/04/03/havefnubb-1-4-0/"},{"title":"Django, la doc, en PDF c'est mieux","text":"Afin de rentabiliser le temps que je perds dans les transports parisiens, et ayant envi de d√©couvrir Django , me suis dit qu'il me faudrait bien la documentation de Django sur mon p'tit iPodTouch. Donc je me suis farci le site http://www.djangoproject.com/ en long en large et en travers √† la recherche d'un PDF, mais en vain. En faisant une petite recherche sur google , je me jette sur un vieux billet de 2008 , qui indique la marche √† suivre pour ... se g√©n√©rer la documentation soi-m√™me. Ok, je vais pas m'arr√™ter l√†, suis motiv√© :-) hop installation des outils easy_install et du support latex apt-get install python-setuptools apt-get install python-plastex apt-get install python-sphinx apt-get install texlive-full ( necessaire sinon erreur √† la compilation latex = >pdf ) Mais au moment de la compilation sur ma debian (5.0) via : sphinx-build -b latex . build_latex l'avion crash en plein vol ... The process fails when it tries to do an import: from sphinx.directives.desc import option_desc_re Bon, pour ne pas passer pour un enquiquineur de premi√®re sur la ML django-fr, je m'en retourne voir google , et nouvelle trouvaille J'apprends l√† bas qu'il faut une mise √† jour issue tout droit du trunk django, et qui consiste donc √† copier le fichier djangodocs.py en lieu et place de celle de la 1.2.1.... et rebuilder Reste donc enfin √† produire le pdf :) latex build_latex/django.tex django.pdf Et l√† miracle, ca rep√®te :) tex capacity exceeded, sorry [ save = 5000 ] rebelote google tout √ßaaaaaaaaaaaa, on doit donc √©diter /usr/share/texmf/web2c/texmf.cnf et changer la valeur de save_size retestage : latex build_latex/django.tex django.pdf Output written on django.pdf ( 1032 pages, 5261614 bytes ) Aaaaaaaaaaaaah enfin je peux le transf√©rer dans iBooks sur l'iPodTouch Quel p√©riple juste pour un PDF, gageons que la suite sera moins \"rigolote\" . Ben en fait c'est pas g√©nial :/ dans le PDF, le code √©crit en noir sur fond noir √ßa le fait pas du tout. EDIT : apr√®s un retour √† la doc du projet lui m√™me j'ai fini par faire plus simple et √ßa marche : Donc on se rend dans le dossier \"doc\" et on tape juste : make latex puis cd _build/latex make all-pdf pour obtenir Output written on django.pdf ( 1057 pages ... ) et cette fois ci on a le code illustrant la doc tout √† fait lisible :) La Doc Django 1.2.1 en PDF est doc l√† :) EDIT2 : c'est bien lisible dans iBooks :D √† moi le mille feuilles dans le RER :-)","tags":"Techno","url":"https://foxmask.net/post/2010/08/24/django-doc-en-pdf-cest-mieux/"},{"title":"Jelix c'est Fini !","text":"Bon, h√© bien finalement, pour moi l'aventure Jelix s'arr√™tera l√†. Les sir√®nes de Symfony m'ont convaincues par le biais de Doctrine, que c'√©tait le framework qu'il me fallait. Donc je vais arr√™ter √©galement HaveFnuBB, le forum √©ponyme 100% Jelix. Je garderai juste un oeil sur le projet mais de loin quand m√™me :-)","tags":"General","url":"https://foxmask.net/post/2010/04/01/jelix-cest-fini/"},{"title":"Jelix versions 1.1.6 1.0.12 et Bitbucket","text":"Oy√© Oy√© Braves Gens Voici Quelques nouvelles de Jelix . Nouvelles versions : A commencer par 2 nouvelles versions de mises √† jour de maintenance pour les branches 1.1 et 1.0 O√π pour la version 1.1.6, une petite manipulation est n√©cessaire suite au support des champs binaires dans jDb et jDao Nouveaux d√©pots : Ensuite, il est √† noter que les d√©p√¥ts m√™me de Jelix sont √† pr√©sent sur Dans son sillage, auront boug√© des projets de la forge tels : jCommunity : l'indispensable module pour g√©rer son site communautaire HaveFnuBB : le forum 100% Jelix powered , vrai composite des modules de la communaut√© jBlog : un blog 100% Jelix powered :) \"d√©p√¥t de miel\" : un ensemble de modules jelix ind√©pendants, comme le download manager, etc.. Rarangi : Le G√©n√©rateur de documentation PHP jButracker : Le syst√®me de gestion de tickets, wiki, sources Voil√† de quoi satisfaire la majorit√© d'entre nous ;-)","tags":"Techno","url":"https://foxmask.net/post/2010/03/27/jelix-versions-1-1-6-1-0-12-et-bitbucket/"},{"title":"HaveFnuBB Hook System","text":"Parmi les forums bien pens√©s, existent des syst√®mes d'extension (ou hook) laissant libre cours √† la cr√©ativit√© des d√©veloppeurs de ces hooks. Dans HaveFnuBB (le forum que je r√©alise), il m'aura fallu un plugin de 10 lignes pour permettre √† tout d√©veloppeur, d'enrichir ses templates avec une souplesse d√©concertante. L'id√©e derri√®re ce plugin est la suivante : Je me cr√©√© un portail, blog, forum, et me \"contente\" d'une petite batteries de fonctionnalit√©s rendant la page √† mon go√ªt. Mais avec ce plugin, je permets √† quiconque de rajouter ses propres fonctionnalit√©s √† l'endroit o√π le hook est appel√©. Concr√®tement comment cela marche ? Je vous invite √† poursuivre la lecture par ici => HaveFnuBB Hook System :)","tags":"Techno","url":"https://foxmask.net/post/2009/11/10/havefnubb-hook-system-2/"},{"title":"IRSSI dans tout sa splendeur","text":"Utilisateur du client IRC IRSSI depuis des si√®cles on en d√©couvre toujours :) Sur Freenode il arrive qu'on soit redirig√© sur #freenode-fr apr√®s s'y √™tre connect√© voici la config pour l'acc√®s √† freenode servers = ( { address = \"irc.freenode.org\"; chatnet = \"freenode\"; port = \"6667\"; autoconnect = \"yes\"; term_type = \"utf-8\"; }); Donc Pourquoi la redirection vers ce channel ? Parce qu'on ne s'est pas identifi√© au nickserv avant d'entrer sur le channel. Pourtant vous avez bien ajout√© √† irssi l'autosendcmd permettant de vous identifier au service nickserv chatnets = { freenode = { type = \"IRC\"; nick = \"votre_pseudo\"; autosendcmd = \"/&#94;msg NickServ IDENTIFY mot_de_passe\"; };}; Donc au d√©marrage de IRSSI, on lit bien 09 : 45 [ freenode ] - NickServ ( NickServ @ services .)- Please identify via / msg NickServ identify < password >. 09 : 45 [ freenode ] - NickServ ( NickServ @ services .)- You are now identified for FoxMaSk . 09 : 45 [ freenode ] -!- FoxMaSk n = foxmask You are now logged in . ( id FoxMaSk , username n = foxmask , hostname foxmask . info ) Donc que se passe-t-il ? H√© bien la connexion de IRSSI est trop rapide , et irssi enchaine aussit√¥t l'acc√®s au channel sit√¥t connec√©e sans avoir le temps de passer par la case nickserv. Donc l'option permettant de faire un pause apr√®s la connection et l'indetification avant de joindre un channel est un wait qui s'utilise comme suit : autosendcmd = \"/&#94;msg NickServ IDENTIFY mot_de_passe;wait 2000\" ce qui marquera une pause de 2secondes et l√† le tour est jou√© !","tags":"Techno","url":"https://foxmask.net/post/2009/10/25/irssi-dans-tout-sa-splendeur/"},{"title":"ForumPHP 2009, avec Jelix et HaveFnuBB","text":"Dans ce pr√©c√©dant billet , j'√©voquais une \"carence\" sur la pr√©sence des d√©veloppeurs PHP contribuant √† la communaut√©. Et √¥ surprise, quelque jours plus tard, je me vois contacter par un membre de l'Afup pour participer √† un \"espace projets PHP opensource\". Je ne sais pas s'il y a une relation de cause √† effet, mais en tout cas, l'esprit \"du libre\" m'animant depuis plus de 10ans, je n'ai pu m'emp√™cher de partager cela et contacter mes \"ex\" de CakePHP-Fr pour leur en toucher 2 mots, juste histoire que \"cette porte entrouverte\" profite au plus grand nombre afin que l'√©v√®nement soit une vraie r√©ussite et perdure :) Et donc CakePHP-Fr y sera aussi :) Ainsi donc je pourrai vous pr√©senter HaveFnuBB, le forum OpenSource produit avec Jelix le framework PHP5. Et cerise sur le g√¢teau, en la pr√©sence de Laurent Jouanneau, mr Jelix lui-m√™me. :-)","tags":"Techno","url":"https://foxmask.net/post/2009/10/20/forumphp-2009-avec-jelix-et-havefnubb-2/"},{"title":"Jelix Dev Summit Episode 1, le 9 Octobre 2009","text":"Non ce n'est pas le titre d'une s√©rie Am√©ricaine \"chopp√©e\" sur le reseaux peer-to-peer, mais tout simplement de la premi√®re rencontre des d√©veloppeurs Jelix qui se tiendra donc ce 9 octobre 2009 prochain. Les lieu et sujets abord√©s sont disponibles ici","tags":"Techno","url":"https://foxmask.net/post/2009/10/01/jelix-dev-summit-episode-1-9-octobre-2009/"},{"title":"Jelix et le module jCommunity","text":"En PHP, si une classe ou API existante vous plait mais que vous souhaitez y apporter votre touche personnelle vous inclurez cette derni√®re et la surchargerez pour √©viter d'y toucher. Exactement le m√™me principe s'applique avec les modules Jelix. On parlera alors \"d'overload\". Un module n'√©tant pas une simple classe (mais compos√© de contr√¥leurs, daos, forms, template, zones, classes, fichiers de traductions) tout ne peut-√™tre surcharg√©. Qu'est ce qui peut faire l'objet d'overload ? Les templates : pour modifier le rendu les Dao : pour ajouter des propri√©t√©s (des colonnes/ tables ) et des factories (m√©thodes d'acc√®s aux tables) les forms : pour ajouter des champs de formulaires et leurs r√®gles de contr√¥le associ√©es les locales : fichiers de traductions Avantages de l'\"Overload\" : Extension des fonctionnalit√©s du module original Adaptabilit√© de tous les aspects du module (exception faite du contr√¥leur) Facilit√© de mise √† jour du module originel , puisqu'on ne change aucune ligne de code de ce dernier Ainsi prenons comme exemple concret le module Jelix, jCommunity, et voyons ce que l'on peut en tirer. Pr√©sentation : jCommunity est le module de gestion des utilisateurs pour tout type de site web . Il inclut une gestion compl√®te du workflow de : Inscription/d√©sincsription Connexion/d√©connexion 1) Overload des templates : Question : Ok c'est cool mais je veux adapter le rendu des templates de jCommunity aux th√®mes de mon site. comment faire ? R√©ponse Par d√©faut le nom du th√®me se nomme default. Ainsi donc pour surcharger un template on placera tout simplement la version modifi√©e de ce dernier dans le dossier var/themes/default/jcommunity Ainsi quand Jelix appellera le template du module, il ira voir d'abord si une version existe dans le dossier des th√®mes et l'utilisera. Comparer : le template de la page de consultation d'un membre : jcommunity (l'originale) havefnubb (l'overload) 2) Overload de Dao : Question La table jCommunity ne contient pas assez d'informations pour g√©rer mes utilisateurs, comment \"√©tendre\" celle-ci ? R√©ponse Copions la Dao jcommunity/dao/user.dao.xml dans le dossier var/overload/jcommunity/daos Changeons √† l'int√©rieur tout ce dont on a besoin : nom de la table et des nouvelles colonnes. Nouvelles m√©thodes Dao etc. Comme pr√©c√©demment Jelix ira voir d'abord si une Dao existe dans ce dossier. tout cela en respectant √† minima le nom des m√©thodes existantes dans la DAO d'origine. Comparer : la Dao account.dao.xml : jcommunity (l'originale) havefnubb (l'overloaded) 3) Overload de forms : Question : Le formulaire g√©rant les donn√©es des utilisateurs est trop l√©ger √† votre go√ªt ? R√©ponse : Qu'√† cela ne tienne on cr√©e une copie du forms jcommunity/forms/account.form.xml dans le dossier var/overload/jcommunity/forms Ensuite on y rajoute les champs qu'il nous sied de voir afficher (correspondant √† notre DAO modifi√©e). Comme pr√©c√©demment Jelix ira voir d'abord si un forms existe dans ce dossier. Comparer : le Forms account.forms.xml : jcommunity (l'originale) havefnubb (l'overloaded) 4) Extension fonctionnelle du module Ok tout fonctionne nickel On a pu tout surcharger comme souhait√© Subsiste un dernier d√©tail, apr√®s la surcharge de la couche de pr√©sentation, on a besoin d' √©tendre la couche fonctionnelle . Et cela est rendu possible gr√¢ce aux events Jelix . Par exemple, lors de l'inscription d'un membre, je souhaite v√©rifier que celui ci n'est pas banni du site. Pour cela jCommunity, g√©n√®re un √©v√©nement jcommunity_registration_prepare_save , envoy√© juste avant l'enregistrement de l'e-mail du membre. En r√©pondant √† cet √©v√©nement (via un listener) on est en mesure de proc√©der √† cette v√©rification puis retourner au module jCommunty la r√©ponse, positive ou non. ( petit rappel sur les Events Jelix dans un billet pr√©c√©dant ) 5) Conclusion : Ainsi, lors de l'appel √† jCommunity, et gr√¢ce aux divers orverload, ce sont bien vos propres ressources qui sont utilis√©es, tout en exploitant pleinement le core/workflow de jCommunity.","tags":"Techno","url":"https://foxmask.net/post/2009/09/15/jelix-le-module-jcommunity-2/"},{"title":"HaveFnuBB! et son installeur automatique aka wizard","text":"Dans un pr√©c√©dent billet vous m'aviez demand√© de vous pr√©senter l'installeur de mon forum HaveFnuBB! Voici donc le Syst√®me d'installation d'HaveFnuBB! : Le syst√®me d'installation se compose des √©tapes suivantes : ) V√©rifications des pr√©-requis syst√®me ) Configuration du Forum ) Configuration de la Base de donn√©es ) Installation de la Base de donn√©es ) Cr√©ation du compte Administrateur ) Fin INSTALLATION : Techniquement les √©tapes consistent en : Un seul contr√¥leur, 4 forms (*.forms.xml), 3 fichiers de config (*.ini.php) entre parenth√®ses, se trouve le nom de la m√©thode du contr√¥leur \"default\" du module \"hfnuinstall\" Etape 1 ( check ) - V√©rifications : version_compare(phpversion(),'5.0','>=') function_exists('mysql_connect') Etape 2 ( config ) - Nom, description, langue et th√®me principaux, etc... lecture/√©criture du fichier de config defaultconfig.ini.php lecture/√©criture du fichier de config havefnu.ini.php Etape 3 ( dbconfig ) - Info sur les noms: du serveur, de la base, de l'utilisateur de la base et son mot de passe lecture/√©criture du fichier de config dbprofils.ini.php Etape 4 ( installdb ) - ex√©cution du script install.mysql.sql la structure de chaque module poss√®de un dossier install/ , renfermant √† son tour sql/install. driver .sql update/ version /install. driver .sql Etape 5 ( adminaccount ) - Infos admin : lecture/ecriture du fichier de config havefnu.ini.php appels des m√©thodes \"core\" de Jelix pour cr√©er un utilisateur Etape 6 ( end ) - Message de fin ;) MISE A JOUR : La syst√®me de mise √† jour, se charge : au minimum de mettre la version √† jour dans havefnu.ini.php (le fichier de config principal du forum) sinon s'occupe de mettre √† jour d'autres fichiers de configuration, et ex√©cuter les scripts SQL. A chaque √©tape, l'installeur v√©rifie si la version actuelle est diff√©rente et enchaine les √©tapes sinon s'arr√™te. puis fini par vider le cache Bien √©videment, on ne peut pas ex√©cuter 2 fois de suite l'installation, puisque la v√©rification de la version est toujours faite. EPILOGUE : Si vous acc√©dez √† la racine de votre forum et qu'il n'est pas install√©, Jelix routera l'utilisateur directement sur l'installeur. Ceci se fait gr√¢ce √† l'intervention du plugin Coordinateur (qui pourra faire l'objet d'un autre article) v√©rifiant si le forum est install√©. Pour plus d'infos je vous invite √† consulter le code ici ou bien venir en parler sur le forum lui m√™me ;) NOTA BENE : L'installeur n'a rien √† voir avec la prochaine feature de Jelix, l'installeur touzazimut, de modules, plugins etc.. ;) Mais pour en avoir pas mal discut√© en Janvier et cod√© appmgr, r√©adapter l'installeur d'HaveFnuBB avec Jelix 1.2 ne me posera aucun probl√®me :P","tags":"Techno","url":"https://foxmask.net/post/2009/09/01/havefnubb-et-son-installeur-automatique-aka-wizard/"},{"title":"Jelix et la Communication inter modules","text":"Une p√©pite parmi tant d'autres que renferme Jelix, est la communication inter module. Mais qu'est-ce que cela ? Il arrive que des modules aient besoin de communiquer entre eux ou qu'ils aient besoin d'informations des uns et des autres. Imaginons un cas simple, une interface d'administration listant les modules (articles,wiki,news), pr√©sents sur son site favori. La solution \"Jelixienne\" consiste √† faire communiquer le module d'administration avec tous les autres. Le module d'administration va √©mettre un message et r√©cup√©rera les r√©ponses des modules. Mise en place : je ferai apparaitre ces infos sur une pages d√©di√©es \"Liste des modules\". Cette page sera constitu√©e d'un template et les r√©ponses des modules se feront √† l'aide de zones ( rappel : les zones sont des portions de page) Donc pour cela je d√©fini un contr√¥leur \"modules\" avec une action \"index\" par d√©faut : le contr√¥leur class modulesCtrl extends jController { function index() { $rep = $this->getResponse('html'); $tpl = new jTpl(); $tpl->assign('modules',jEvent::notify('HfnuAboutModule')->getResponse()); $rep->body->assign('MAIN',$tpl->fetch('modules')); return $rep; } } la ligne int√©ressante ici est : $tpl->assign('modules',jEvent::notify('HfnuAboutModule')->getResponse()); cette ligne fait 3 choses en m√™me temps : elle √©met un message nomm√© HfnuAboutModule elle r√©cup√®re les donn√©es du message √©mis elle assigne ses donn√©es √† la variable \"modules\" du template. la ligne suivante indique √† Jelix, le nom du template \"module\", qui affichera les donn√©es $rep->body->assign('MAIN',$tpl->fetch('modules')); le template < h1 > Liste des modules </ h1 > {if count($modules)} {assign $count = count($modules)} {for $i=0; $i < $count;$i++} < div class = \"two-cols\" > < div class = \"col\" > {$modules[$i]} </ div > </ div > {/for} {/if} Bon ok on visualise un peu ce qui va se passer \"√† la fin\" mais comment nos modules \"news\",\"wiki\",\"articles\" vont ils r√©pondre √† l'evenement HfnuAboutModule ? A tout jEvent::notify, un listener peut r√©pondre, donc nous allons d√©finir un listener comme suite en 2 temps : d√©finition d'un fichier events.xml d√©crivant le nom de l'√©v√®nement et la classe y r√©pondant, events.xml est donc le \"liant\" d√©finition du listener lui-m√™me. fichier events.xml <?xml version=\"1.0\" encoding=\"iso-8859-1\"?> <events xmlns= \"http://jelix.org/ns/events/1.0\" > <listener name= \"hfnuadmin\" > <event name= \"HfnuAboutModule\" /> </listener> </events> On retrouve bien ici le nom de l'√©v√®nement HfnuAboutModule auquel le listener hfnuadmin va se charger de r√©pondre le listener class hfnuadminListener extends jEventListener{ function onHfnuAboutModule ($event) { $event->add( jZone::get('hfnuadmin~about',array('modulename'=>'hfnuadmin')) ); } } lorsque HfnuAboutModule est d√©clench√©, alors onHfnuAboutModule entre en oeuvre et r√©pond √† l'event (via \\$event->add()) \\$event->add() peut recevoir tout type de donn√©es. Ici nous lui retournons une zone ( que nous avons pr√©c√©demment abord√©s dans mes 2 pr√©c√©dants articles ) nomm√©e \"about\" la zone class aboutZone extends jZone { protected $_tplname='zone.about'; protected function _prepareTpl(){ $moduleName = $this->param('modulename'); if ($moduleName == '') return; jClasses::inc('havefnubb~modulexml'); $moduleInfo = modulexml::parse($moduleName); $this->_tpl->assign('moduleInfo',$moduleInfo); } } notre zone ici r√©cup√®re le param√®tre du nom du module, puis parse le fichier module.xml et affecte le r√©sultat au template zone.about le template < h1 > {$moduleInfo['name']} </ h1 > < dl > < dt > {@hfnuadmin~hfnuabout.about.version@} : </ dt >< dd > {$moduleInfo['version']} ({@hfnuadmin~hfnuabout.about.date.create@} {$moduleInfo['dateCreate']}) </ dd > < dt > {@hfnuadmin~hfnuabout.about.label@} : </ dt >< dd > {$moduleInfo['label']|escxml} </ dd > < dt > {@hfnuadmin~hfnuabout.about.desc@} : </ dt >< dd > {$moduleInfo['desc']} </ dd > < dt > {@hfnuadmin~hfnuabout.about.notes@} : </ dt >< dd > {$moduleInfo['notes']} </ dd > < dt > {@hfnuadmin~hfnuabout.about.licence@} : </ dt >< dd > {if $moduleInfo['licenceURL'] != ''} < a href = \"{$moduleInfo['licenceURL']}\" > {$moduleInfo['licence']} </ a > {else}{$moduleInfo['licence']}{/if} </ dd > < dt > {@hfnuadmin~hfnuabout.about.copyright@} : </ dt >< dd > {$moduleInfo['copyright']} </ dd > {foreach $moduleInfo['creators'] as $author} < dt > {@hfnuadmin~hfnuabout.about.authors@} : </ dt >< dd > {if $author['email'] != ''} < a href = \"mailto:{$author['email']}\" > {$author['name']|escxml}{else}{$author['name']|escxml}{/if} </ a ></ dd > {/foreach} < dt > {@hfnuadmin~hfnuabout.about.links@} </ dt >< dd >< a href = \"{$moduleInfo['homepageURL']}\" > {@hfnuadmin~hfnuabout.about.homepageURL@} </ a > - < a href = \"{$moduleInfo['updateURL']}\" > {@hfnuadmin~hfnuabout.about.updateURL@} </ a ></ dd > </ dl > R√©sultat : Liste des modules News! Version : stable 1.1.2 (du 2008-12-16) Libell√© : Module de gestion de nouvelles Description : Ce module permet de gerer les nouvelles de son site web Notes : N/A License : GNU General Public Licence Copyright : 2008 FoxMaSk Auteurs : FoxMaSk Liens : Page d'accueil du module - Lien mise √† jour Wiki Version : stable 1.0.2 (du 2009-01-25) Libell√© : Wiki Description : Wiki maison pour la documentation du site web Notes : N/A License : GNU General Public Licence Copyright : 2008 FoxMaSk Auteurs : FoxMaSk Liens Page d'accueil du module - Lien mise √† jour PS : ici je n'ai pas d√©taill√© tous les events.xml des 3 modules ni les 3 listeners mais le code est le m√™me ;) Conclusion : Voici donc la perle ; qui en quelques petites lignes ; a permis √† tous les modules de se \"trouver\" et r√©unir des infos au m√™me endroit. La m√™me m√©canique des jEvent::notify() permet par exemple d'enchainer des actions apr√®s l'inscription d'un membre (tels que lui envoyer un mail) jEvent::notify() permet √©galement d'enrichir les fonctionnalit√©s d'un module A via d'autres modules B,C,D sans avoir √† modifier le module A, etc... en savoir plus sur la communication inter module","tags":"Techno","url":"https://foxmask.net/post/2009/08/18/jelix-et-la-communication-inter-modules-2/"},{"title":"Jelix est son nom","text":"j'√©voquais ici ma d√©couverte du framework PHP 5 Jelix. Depuis, 9mois se sont √©coul√©s, mon implication autour du framework aura donc plu et me voici donc intronis√© \" Member Core Team \" de Jelix, framework PHP ! Je ne reviendrai pas sur les qualit√©s av√©r√©es du framework ( nan nan je ne suis pas parti pris ;) qui m'auront fait me lancer dans un projet d'envergure, le forum 100% en Jelix HaveFnuBB! . Ce projet a deux buts, pour moi : que les utilisateurs de forum trouvent une alternative aux mastodontes existants ;) avec une solution full PHP5 gage d'√©volutivit√© que les d√©veloppeurs PHP trouvent √† leur tour une application des principes d'int√©gration de Jelix, car HaveFnuBB est un patchwork de modules Jelix ind√©pendant les uns des autres, qui une fois r√©unis fournissent une application compl√®te. Pour conclure : Merci √† Jelix pour la confiance, je t√¢cherai de faire des beaux commits :D","tags":"Techno","url":"https://foxmask.net/post/2009/06/24/jelix-est-son-nom/"},{"title":"HaveFnuBB! fait son entr√©e sur FreshMeat","text":"HaveFnuBB! fait son entr√©e sur Freshmeat.net Le but est de faire conna√Ætre HaveFnuBB! aux bons endroits avec l'audience qui lui sied ;-)","tags":"Techno","url":"https://foxmask.net/post/2009/06/07/havefnubb-fait-son-entree-sur-freshmeat/"},{"title":"HaveFnuBB s'installe sur la toile","text":"Apr√®s avoir fait part du projet HaveFnuBB! ici m√™me , voici que le projet s'installe sur la toile sur son propre domaine : HaveFnuBB.Org ! HaveFnuBB est le premier logiciel de forum produit √† partir du framework PHP5 qu'est Jelix . Je vous invite √† le tester , et si le projet vous int√©resse, vous pouvez toujours participer en attendant une premi√®re version pour bient√¥t.","tags":"Techno","url":"https://foxmask.net/post/2009/04/13/havefnubb-s-installe-sur-la-toile/"},{"title":"Jelix et votre portail dans la langue de l'Utilisateur","text":"Je ne vais pas ici r√©p√©ter la documentation sur le plugin coord \"autolocale\", plugin permettant de g√©rer automatiquement l'internationalisation de vos templates . Le propos de ce billet consiste √† montrer comment avec Jelix, jAuth et jCommunity en particulier, on peut changer la langue de l'utilisateur et ainsi obtenir des pages dans pour sa langue. jCommunity donc, fourni des √©v√®nements, dont un permettant d'enregistrer toutes modifications sur le compte de l'utilisateur, cet evenement est jcommunity_save_account . Dans la class de mon listener authhavefnubb.listener.php j'aurai donc ce qui suit √† chaque modification de mon compte : function onjcommunity_save_account ($event) { global $gJConfig; // recuperation des donn√©es saisies dans mon formulaire $form = $event->getParam('form'); if ( $form->getData('member_language') != '') { $_SESSION['JX_LANG'] = $form->getData('member_language'); $gJConfig->locale = $form->getData('member_language'); } // un petit message d'info signalant que le profil est mis √† jour jMessage::add(jLocale::get('havefnubb~member.profile.updated'),'ok'); } l'astuce ici est de mettre $gJConfig->locale = $form->getData('member_language'); avant le jMessage::add pour que le message qui vient juste apres soit traduit imm√©diatement dans la langue choisie, sinon ce dernier apparaitrait \"encore\" dans la langue pr√©c√©dante ou celle du portail. ensuite on op√©rera de la m√™me fa√ßon avec les √©v√®nement de jAuth que sont AuthLogin (lors de la connexion) et AuthLogout (lors de la d√©connexion) function onAuthLogin ($event) { ... $_SESSION['JX_LANG'] = $user->member_language; $gJConfig->locale = $user->member_language; } function onAuthLogout ($event) { // suppression de la langue dans la session courante pour r√©cup√©rer celle du portail $_SESSION['JX_LANG'] = ''; unset($_SESSION['JX_LANG']); } et l'on d√©finira notre fichier events.xml comme suit : <listener name= \"authhavefnubb\" > <event name= \"AuthLogin\" /> <event name= \"AuthLogout\" /> <event name= \"jcommunity_save_account\" /> </listener> Ainsi donc avec une petite dizaine de lignes dans un listener et 3 noeuds XML on a permit √† tout utilisateur de notre site d'avoir des pages dans sa langue favorite.","tags":"Techno","url":"https://foxmask.net/post/2009/03/08/jelix-et-votre-portail-dans-la-langue-de-lutilisateur/"},{"title":"HaveFnuBB, le forum \"made in\" Jelix","text":"Apr√®s avoir annonc√© faire une pause sur les CMS , et d√©marr√© la d√©couverte d'un framework nomm√© Jelix , ce dernier m'a amen√© √† cr√©er un petit blog perso (d√©)pot de miel sur lequel je \"blog\" √† la mani√®re que fut la mienne sur CakePHP ici m√™me ;) Avec bout de code, projets etc... Je me perds un peu vous me direz ;) Mais en fait non, c'est la trame qui m'am√®ne √† vous parler d'un projet √©crit avec Jelix donc (forc√©ment) nomm√© HaveFnuBB . Ce projet sans pr√©tention, se veut √™tre un simple forum (de plus, vu la palanqu√©e qu'il existe sur la toile) mais qu'importe ! Le sien est toujours mieux que celui des autres ;) J'y apporte plusieurs choses et met en pratique les pr√©ceptes de la modularit√©, force, simplicit√©, vitesse de Jelix ! Ce petit joujou est d√©j√† pourvu des fonctionnalit√©s suivantes : Cot√© Forum Syntaxe Wiki (byebye le bbcode :P) Sous-Forum √† foisons Tagger les Sujets Un bon moteur de recherche SEO Un fil d'ariane Cot√© Utilisateurs Moultes options pour g√©rer son profil peuvent faire parti de plusieurs groupes Cot√© Admin : Une configuration principale Gestion de Cat√©gories de forums, de Forums, des droits au forums, notifications des sujets Cache Utilisateurs, Groupes, Ban (exclusions) Voil√† donc le dernier passe-temps qui m'occupe quotidiennement ;) nb : Pour ceux qui seraient int√©ress√©s par un tel projet, il y a de la place, manifestez vous ! HaveFnu - !","tags":"Techno","url":"https://foxmask.net/post/2009/03/06/havefnubb-le-forum-made-in-jelix/"},{"title":"Jelix - Token le r√©v√©lateur !","text":"Depuis la v 1.1RC1 de Jelix , l'apparition de la \"lutte\" contre les CSRF avec les tokens permettent non seulement de s√©curiser vos formulaires ; tout √† fait automatiquement et de fa√ßon transparente ; mais pas seulement ! Comment cela ? Supposons que nous √©ditions l'article 1 depuis l'url http://localhost/article/edit/1 le code de la methode \"edit\" serait le suivant : function edit { // recuperation de l'id pass√© sur l'url $id = (integer) $this->param('id'); // si le bouton validate n'est pas utilis√©, nous inititions le formulaire if ($this->param('validate') == '') { $form = jForms::get('article~artdao',$id); } // le bouton validate a √©t√© press√© : else { // r√©cuperation de l'instance du formulaire $form = jForms::fill('article~artdao'); $form->saveToDao('article~artdao',$id); } } Que ce passerait il avec ce code ? # L'acces √† la page d'edition passerait impeccable. # La sauvegarde des donn√©es ne se passerait pas bien et nous aurions un message d'erreur : [exception 835] Le token du formulaire n'est pas valide, vous devez remplir le formulaire correctement √† partir du site. ..lib/jelix/forms/jFormsBase.class.php 142 on aura beau vider le cache de son application rien n'y fera. Alors pourquoi ce message ? Simplement parceque lors de l'initialisation de l'instance \\$form (avec jForms::get() nous avons pass√© en param√®tre l'id , mais qu'on ne l'a pas utiliser avec $form = jForms::fill('article~artdao'); donc, remplacez le code ci dessus, par ceci $form = jForms::fill('article~artdao',$id); et le message d'erreur sur le token ne se produira plus. Voici une fa√ßon d√©tourner de v√©rifier que son formulaire est correctement g√©r√© avec la fonction anti CSRF ;-)","tags":"Techno","url":"https://foxmask.net/post/2008/12/14/jelix-token-le-revelateur/"},{"title":"Jelix - AppMgr - ou l'installeur de modules Jelix","text":"Voici un snapshot d'un module de gestion de ... modules Jelix Celui ci permet d'installer, activer, d√©sactiver, supprimer, rechercher une mise √† jour sur le site d'origine du module. Techniquement, Il s'occupe de parcourir l'arborescence des modules d√©finis dans le fichier defaultconfig.ini.php dans la variable modulesPath et lit le fichier module.xml de chaque module. Si un tel module vous interesse faites vous conna√Ætre (un commentaire ?).","tags":"Techno","url":"https://foxmask.net/post/2008/11/03/jelix-appmgr-ou-linstalleur-de-modules-jelix/"},{"title":"J'ai l'X !","text":"Non le titre n'a rien √† voir avec des films pour adultes ni avec l' √©cole Polytechnique , d√©couvrez ici ce qu'il en est r√©ellement. Il y a presque un an de cela je faisais un comparatif des frameworks PHP(5) , et m'√©tais lanc√© avec CakePHP sur un projet libre √† la cl√© que j'ai produit jusqu'√† pr√©sent. Aujourd'hui, la bataille fait rage entre les frameworks par le biais de comparatifs de tout bord : PHP.net XML.net Comme je suis un √©ternel insatisfait et surtout toujours curieux de tout, je me suis tourn√© cette fois ci vers JELIX , un vrai Framework MVC en PHP5 . Rapide Pr√©s' de la b√™te : Jelix est un framework open-source pour PHP5 qui permet de d√©velopper tout type d'application : * Performant : con√ßu pour les sites √† forte charge. * Enti√®rement objet, fortement modulaire et extensible. * Bas√© sur des mod√®les de conception connus dont MVC, DAO.. * Prend en charge de nombreux formats de sortie : XHTML, XUL, RSS, ATOM, RDF, ZIP, XML, PDF, etc. * Facilite le d√©veloppement des services web de type XML-RPC, JSON, et autres contenus pour Ajax. * Int√®gre un puissant syst√®me de formulaires, notamment pour faire des formulaires de type CRUD. * Inclus bien d'autres fonctionnalit√©s et facilit√©s... d√®s que j'aurai le temps je publierai quelques petits bouts de code de ci de l√† ;)","tags":"Techno","url":"https://foxmask.net/post/2008/09/10/j-ai-l-x/"}]}