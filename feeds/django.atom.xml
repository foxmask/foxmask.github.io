<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Le Free de la Passion - django</title><link href="https://foxmask.net/" rel="alternate"></link><link href="https://foxmask.net/feeds/django.atom.xml" rel="self"></link><id>https://foxmask.net/</id><updated>2017-07-10T14:00:00+02:00</updated><subtitle>La passion de la liberté</subtitle><entry><title>Fabric, et la contrib django pour acceder à tous vos joujoux</title><link href="https://foxmask.net/post/2017/07/10/fabric-contrib-django/" rel="alternate"></link><published>2017-07-10T14:00:00+02:00</published><updated>2017-07-10T14:00:00+02:00</updated><author><name>foxmask</name></author><id>tag:foxmask.net,2017-07-10:/post/2017/07/10/fabric-contrib-django/</id><summary type="html">&lt;p&gt;Dans mon &lt;a href="https://foxmask.trigger-happy.eu/post/2017/07/06/fabric-sa-var-env-nos-variables-dynamiques"&gt;billet précédent&lt;/a&gt;, j'évoquais l'existence d'une "contrib" Fabric pour intégrer Django au sein de ses tasks Fabric, mais qu'elle déconnait...&lt;/p&gt;
&lt;p&gt;Après maints tests supplementaires et digging ze toile, j'ai entrevu la lumière après la lecture de 3 issues chez Fabric &lt;a href="https://github.com/fabric/fabric/issues/1509"&gt;#1509&lt;/a&gt;, &lt;a href="https://github.com/fabric/fabric/issues/1033"&gt;#1033&lt;/a&gt;, &lt;a href="https://github.com/fabric/fabric/issues/1207"&gt;#1207&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Tout compulsé ca donne ceci :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# coding …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;Dans mon &lt;a href="https://foxmask.trigger-happy.eu/post/2017/07/06/fabric-sa-var-env-nos-variables-dynamiques"&gt;billet précédent&lt;/a&gt;, j'évoquais l'existence d'une "contrib" Fabric pour intégrer Django au sein de ses tasks Fabric, mais qu'elle déconnait...&lt;/p&gt;
&lt;p&gt;Après maints tests supplementaires et digging ze toile, j'ai entrevu la lumière après la lecture de 3 issues chez Fabric &lt;a href="https://github.com/fabric/fabric/issues/1509"&gt;#1509&lt;/a&gt;, &lt;a href="https://github.com/fabric/fabric/issues/1033"&gt;#1033&lt;/a&gt;, &lt;a href="https://github.com/fabric/fabric/issues/1207"&gt;#1207&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Tout compulsé ca donne ceci :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# coding: utf-8&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="c1"&gt;# ajout du chemin où se trouve projetA&lt;/span&gt;
&lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dirname&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="vm"&gt;__file__&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;../../projeta&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# appel de la librairie django de Fabric pour appeler les objets Django&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fabric.contrib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;
&lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;projeta&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# import de django&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;django&lt;/span&gt;
&lt;span class="c1"&gt;# setup django&lt;/span&gt;
&lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;# appel du model&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;projeta.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;MonModel&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MonModel&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;foobar&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;execution&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ fab main

foobar

Done.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ceci fonctionne (pour un vhost) si vous avez collé votre appli "fabric" dans le même dossier que celui du projet Django, sinon adapter la ligne &lt;strong&gt;path =&lt;/strong&gt; pour que ca match votre env&lt;/p&gt;</content><category term="Techno"></category><category term="python"></category><category term="Fabric"></category><category term="django"></category></entry><entry><title>Revue Technique de la semaine du 05/09/2016</title><link href="https://foxmask.net/post/2016/09/08/revue-technique-de-la-semaine-du-05092016/" rel="alternate"></link><published>2016-09-08T08:00:00+02:00</published><updated>2016-09-08T08:00:00+02:00</updated><author><name>foxmask</name></author><id>tag:foxmask.net,2016-09-08:/post/2016/09/08/revue-technique-de-la-semaine-du-05092016/</id><summary type="html">&lt;p&gt;Cela faisait un bon moment que je ne m'etais pas penché sur une revue technique, depuis ma migration Wordpress =&amp;gt; Pelican à vrai dire :)&lt;/p&gt;
&lt;p&gt;Donc voici un petit tour de la technosphere des sujets, projets (et autre bidules machins trucs) croisés sur le chemin &lt;/p&gt;
&lt;h1&gt;Wallabag 2.0.8&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://wallabag.org"&gt;Wallabag&lt;/a&gt; nous gratifie …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Cela faisait un bon moment que je ne m'etais pas penché sur une revue technique, depuis ma migration Wordpress =&amp;gt; Pelican à vrai dire :)&lt;/p&gt;
&lt;p&gt;Donc voici un petit tour de la technosphere des sujets, projets (et autre bidules machins trucs) croisés sur le chemin &lt;/p&gt;
&lt;h1&gt;Wallabag 2.0.8&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://wallabag.org"&gt;Wallabag&lt;/a&gt; nous gratifie d'une version 2.0.8 avant une potentielle 2.1&lt;/p&gt;
&lt;h1&gt;Sam et Max&lt;/h1&gt;
&lt;p&gt;'ils' sont de retour avec de nouveaux billets dont le dernier aborde UUID : &lt;a href="http://sametmax.com/verifier-quun-uuid-est-valide-en-python/"&gt;Vérifier qu'un UUID est valide en Python&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;Django&lt;/h1&gt;
&lt;h2&gt;... et une nouvelle release&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://www.djangoproject.com/weblog/2016/sep/01/bugfix-release/"&gt;une version 1.10.1 contentant quelques bugfix&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;... et Docker&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://semaphoreci.com/community/tutorials/dockerizing-a-python-django-web-application"&gt;Dockerizing a Python Django Web Application&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;... et le framework message&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://simpleisbetterthancomplex.com/tips/2016/09/06/django-tip-14-messages-framework.html"&gt;Django Tips #14 Using the Messages Framework&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://simpleisbetterthancomplex.com/tips/2016/08/23/django-tip-13-f-expressions.html"&gt;Django Tips #13 F() Expressions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;... et sa config gunicorn&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://samoylov.tech/2016/08/31/deploying-django-with-gunicorn-and-supervisor/"&gt;Deploying Django with Gunicorn and Supervisor&lt;/a&gt;
Billet que j'ai trouvé trop trop trop court comparé à un de &lt;a href="https://foxmask.trigger-happy.eu/post/2015/06/19/supervisor-celery-django-orchestration/"&gt;mes vieux billets&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;Python&lt;/h1&gt;
&lt;p&gt;La couverture de ce livre &lt;a href="http://www.blog.pythonlibrary.org/2016/09/06/python-201-is-officially-published/"&gt;Python 201&lt;/a&gt;, m'a fait penser à un coaching culinaire par Ratatouille :) N'en demeure pas moins qu'il existe ... pour les dev intermediaires.&lt;/p&gt;
&lt;p&gt;7 trucs pour ecrire du code plus meilleur ;)&lt;/p&gt;
&lt;blockquote class="twitter-tweet" data-lang="fr"&gt;&lt;p lang="en" dir="ltr"&gt;7 Simple &lt;a href="https://twitter.com/hashtag/Tricks?src=hash"&gt;#Tricks&lt;/a&gt; to Write Better &lt;a href="https://twitter.com/hashtag/Python?src=hash"&gt;#Python&lt;/a&gt; Code &lt;a href="https://t.co/uqEN50U7nI"&gt;https://t.co/uqEN50U7nI&lt;/a&gt; &lt;a href="https://t.co/dk2NDVVhZd"&gt;pic.twitter.com/dk2NDVVhZd&lt;/a&gt;&lt;/p&gt;&amp;mdash; Nicolas RAMY (@darkelda) &lt;a href="https://twitter.com/darkelda/status/770554167932968960"&gt;30 août 2016&lt;/a&gt;&lt;/blockquote&gt;

&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;h1&gt;IndexError&lt;/h1&gt;
&lt;p&gt;Comment pourquoi que ca marche-t-il (pas) mon code, S.O.S d'un codeur en détresse :  &lt;/p&gt;
&lt;p&gt;voici les 5 derniers sujets traités ou en cours sur
&lt;a href="http://IndexError.net"&gt;IndexError.net&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://indexerror.net/4267/facebook-api"&gt;Facebook API&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://indexerror.net/4257/ajouter-des-donn%C3%A9es-aux-fields-dun-form"&gt;Ajouter des données aux fields d'un form&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://indexerror.net/4265/architecture-faut-limiter-methodes-accessibles-dun-objet"&gt;Architecture : faut-il limiter les methodes accessibles d'un objet ?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://indexerror.net/4259/comment-trier-les-logs-de-ses-diff%C3%A9rentes-applis"&gt;Comment trier les logs de ses différentes applis ?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://indexerror.net/4203/decorateur-async-await"&gt;decorateur async await&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://indexerror.net/4198/vos-types-customis%C3%A9s-utiles"&gt;vos types customisés utiles&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Meetup&lt;/h1&gt;
&lt;p&gt;La rentrée scolaire annonce son lot de rencontres, dont une le 13/09 : &lt;a href="https://www.meetup.com/fr-FR/Paris-Devops-Meetup/events/233922902/"&gt;Paris Devops&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;Firefox&lt;/h1&gt;
&lt;p&gt;On nous promettrait un Firefox &lt;a href="https://techcrunch.com/2016/09/02/multi-process-firefox-brings-400-700-improvement-in-responsiveness/"&gt;7x plus rapide que l'actuel&lt;/a&gt; grâce au multiprocessing, qui arriverait entre la version 49 et la 51.
On pourrait déjà testé la fonction en l'activant depuis "about:config" en changeant le paramètre "browser.tabs.remote.autostart" à True.
Un temps sur mobile, le multiprocessing a été retiré car produisant un bottleneck, mais avec cette amélioration sur la version desktop, le mutliprocessing sur la version sur mobile pourrait faire son retour.&lt;/p&gt;
&lt;h1&gt;Smartphone&lt;/h1&gt;
&lt;p&gt;Coté smartphones, pendant que &lt;a href="http://www.frandroid.com/marques/samsung/375914_galaxy-note-7-de-samsung-bientot-bannis-vols-americains"&gt;Samsumg met le feu&lt;/a&gt;, &lt;a href="http://www.frandroid.com/marques/apple/376170_apple-watch-series-2-officielle"&gt;Apple se mouille 30minutes 'max'&lt;/a&gt; et nous fait des écouteurs &lt;a href="https://twitter.com/TheRealSheldonC/status/773787951260114944"&gt;sans fils&lt;/a&gt; et Google rebaptise sa gamme &lt;a href="http://www.frandroid.com/marques/google/375266_google-lancerait-cet-automne-pixel-pixel-xl-a-place-nexus"&gt;Nexus en Pixel&lt;/a&gt; pour faire moins geek et plus grand publique.&lt;/p&gt;
&lt;h1&gt;Ce n'est qu'un au revoir&lt;/h1&gt;
&lt;p&gt;Un dinosaure qui disparait d'internet, &lt;a href="http://www.readability.com"&gt;Readability&lt;/a&gt; ferme ses portes le 30 de ce mois, à vos API, à vos migrations de service, de préférence vers Wallabag ;)&lt;/p&gt;
&lt;h1&gt;C U&lt;/h1&gt;
&lt;p&gt;A bientôt !&lt;/p&gt;</content><category term="Techno"></category><category term="Django"></category><category term="indexerror"></category><category term="python"></category><category term="samsung"></category><category term="pixel"></category><category term="apple"></category><category term="docker"></category><category term="firefox"></category></entry><entry><title>Django et HTTPS</title><link href="https://foxmask.net/post/2016/07/03/django-et-https/" rel="alternate"></link><published>2016-07-03T22:00:00+02:00</published><updated>2016-07-03T22:00:00+02:00</updated><author><name>foxmask</name></author><id>tag:foxmask.net,2016-07-03:/post/2016/07/03/django-et-https/</id><summary type="html">&lt;p&gt;Un rapide billet pour poser ici un retour de prise de tête :)&lt;/p&gt;
&lt;p&gt;Avec la venue de &lt;a href="https://letsencrypt.org/"&gt;LetsEncrypt&lt;/a&gt;, il va fleurer bon les sites en HTTPS de ci de là.&lt;/p&gt;
&lt;p&gt;Par contre une fois mis en place en prod, coté dev il arrive qu'on fasse un hack vite fait pour pas …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Un rapide billet pour poser ici un retour de prise de tête :)&lt;/p&gt;
&lt;p&gt;Avec la venue de &lt;a href="https://letsencrypt.org/"&gt;LetsEncrypt&lt;/a&gt;, il va fleurer bon les sites en HTTPS de ci de là.&lt;/p&gt;
&lt;p&gt;Par contre une fois mis en place en prod, coté dev il arrive qu'on fasse un hack vite fait pour pas passer 3 plombes sur sa conf nginx comme ça :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;HTTPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;on
./manage.py runserver
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;et roule ma poule !&lt;/p&gt;
&lt;p&gt;Bon en prod par contre on ne va pas s'amuser à ca quand on a un NGINX en frontal du Gunicorn par exemple.&lt;/p&gt;
&lt;p&gt;Et si on laisse en etat, au final tout accès à request.scheme vous retournera dans les dents un casse-burette 'http'.&lt;/p&gt;
&lt;p&gt;Donc en suivant &lt;a href="https://docs.djangoproject.com/en/1.9/ref/settings/#std:setting-SECURE_PROXY_SSL_HEADER"&gt;la doc&lt;/a&gt; on modifie son settings en rajoutant &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;SECURE_PROXY_SSL_HEADER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HTTP_X_FORWARDED_PROTO&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;mais ça ne suffit toujours pas. Nginx renverra encore et toujours du HTTP...&lt;/p&gt;
&lt;p&gt;donc à sa conf toute QQ &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="na"&gt;location / {&lt;/span&gt;
        &lt;span class="na"&gt;add_header           Front-End-Https    on;&lt;/span&gt;
        &lt;span class="na"&gt;add_header Cache-Control &amp;quot;public, must-revalidate&amp;quot;;&lt;/span&gt;
        &lt;span class="na"&gt;add_header Strict-Transport-Security &amp;quot;max-age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;2592000; includeSubdomains&amp;quot;;&lt;/span&gt;
&lt;span class="s"&gt;        proxy_pass http://127.0.0.1:8080; # Pass to Gunicorn&lt;/span&gt;
&lt;span class="s"&gt;        proxy_next_upstream error timeout invalid_header;&lt;/span&gt;
&lt;span class="s"&gt;        proxy_set_header        Host            $host;&lt;/span&gt;
&lt;span class="s"&gt;        proxy_set_header        X-Real-IP       $remote_addr;&lt;/span&gt;
&lt;span class="s"&gt;        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;&lt;/span&gt;
&lt;span class="s"&gt;        proxy_set_header        X-Forwarded-Host $host;&lt;/span&gt;
&lt;span class="s"&gt;    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;on rajoutera &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="na"&gt;proxy_set_header        X-Forwarded-Proto $scheme;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;pour obtenir : &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="na"&gt;location / {&lt;/span&gt;
        &lt;span class="na"&gt;add_header           Front-End-Https    on;&lt;/span&gt;
        &lt;span class="na"&gt;add_header Cache-Control &amp;quot;public, must-revalidate&amp;quot;;&lt;/span&gt;
        &lt;span class="na"&gt;add_header Strict-Transport-Security &amp;quot;max-age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;2592000; includeSubdomains&amp;quot;;&lt;/span&gt;
&lt;span class="s"&gt;        proxy_pass http://127.0.0.1:8080; # Pass to Gunicorn&lt;/span&gt;
&lt;span class="s"&gt;        proxy_next_upstream error timeout invalid_header;&lt;/span&gt;
&lt;span class="s"&gt;        proxy_set_header        Host            $host;&lt;/span&gt;
&lt;span class="s"&gt;        proxy_set_header        X-Real-IP       $remote_addr;&lt;/span&gt;
&lt;span class="s"&gt;        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;&lt;/span&gt;
&lt;span class="s"&gt;        proxy_set_header        X-Forwarded-Host $host;&lt;/span&gt;
&lt;span class="s"&gt;        proxy_set_header        X-Forwarded-Proto $scheme;&lt;/span&gt;
&lt;span class="s"&gt;    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Et là au joie, on obtiendra bien un request.scheme vallant 'https'.&lt;/p&gt;</content><category term="Techno"></category><category term="Django"></category><category term="HTTPS"></category></entry><entry><title>ActionForm Django à la rescousse !</title><link href="https://foxmask.net/post/2016/03/23/actionform-django-a-la-rescousse/" rel="alternate"></link><published>2016-03-23T22:30:00+01:00</published><updated>2016-03-23T22:30:00+01:00</updated><author><name>foxmask</name></author><id>tag:foxmask.net,2016-03-23:/post/2016/03/23/actionform-django-a-la-rescousse/</id><summary type="html">&lt;p&gt;ActionForm ou Comment produire une liste d'actions, dans l'admin django, à partir du contenu d'un autre modèle, tel est le but de ce billet ;)&lt;/p&gt;</summary><content type="html">&lt;p&gt;Un besoin se fit ressentir today :&lt;/p&gt;
&lt;p&gt;Pouvoir, depuis la page d'administration de django, réaffecter des données se trouvant dans un service et les mettre dans un autre.&lt;/p&gt;
&lt;p&gt;Comme le montre la &lt;a href="https://docs.djangoproject.com/fr/1.8/ref/contrib/admin/actions/#adding-actions-to-the-modeladmin"&gt;doc&lt;/a&gt;, on peut effectuer des actions à sa sauce comme ceci :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.contrib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;admin&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;myapp.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Article&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;make_published&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;modeladmin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;queryset&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;queryset&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;p&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;make_published&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;short_description&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Mark selected stories as published&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ArticleAdmin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ModelAdmin&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;list_display&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;ordering&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;actions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;make_published&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;register&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Article&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ArticleAdmin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Arrive le moment où c'est sympa, mais ceci ne suffit plus.&lt;/p&gt;
&lt;p&gt;&lt;img alt="page de l'admin classique" src="/static/2016/03/admin_standard.png"&gt;&lt;/p&gt;
&lt;p&gt;Si j'ai à ventiler des données à partir de données se trouvant dans un autre modèle, je vais pas créer 'n' make_published_x,y,z .&lt;/p&gt;
&lt;p&gt;Et le DRY là dedans, hmmm? :P&lt;/p&gt;
&lt;p&gt;Pour arriver à ses fins, un helper existe tout de même, il s'agit d'&lt;a href="https://github.com/django/django/blob/master/django/contrib/admin/helpers.py#L26"&gt;ActionForm&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Dans mon module &lt;code&gt;admin.py&lt;/code&gt; j'y mettrai donc un truc du genre&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ServicesActivatedActionForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActionForm&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;provider&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChoiceField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;choices&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ServicesActivated&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values_list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;consumer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChoiceField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;choices&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ServicesActivated&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values_list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;on notera en passant l'astuce pour fournir à &lt;code&gt;choices&lt;/code&gt; un &lt;code&gt;tuple&lt;/code&gt; qui provient du modèle, grâce à l'utilisation de &lt;code&gt;values_list()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Puis dans le ModelAdmin je glisse :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TriggerServiceAdmin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ModelAdmin&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;action_form&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ServicesActivatedActionForm&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ce qui aura pour effet, d'afficher à coté de la liste déroulante des actions, une liste déroulante des mes provider/consumer.&lt;/p&gt;
&lt;p&gt;En l'état ça ne suffit pas pour fonctionner complètement. Il faut évidement gérer la validation du choix du provider/consumer comme suit :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;change_service&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;queryset&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;provider&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;POST&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;provider&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;consumer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;POST&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;consumer&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;queryset&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;provider&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;provider&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;consumer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;consumer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;change_service&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;short_description&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Change of Service&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;A présent, ma liste d'actions contient 2 actions, la suppression (action par defaut proposer par l'admin) et la mienne. Tout ça à gauche de ma liste déroulante des provider/consumer !&lt;/p&gt;
&lt;p&gt;&lt;img alt="page de l'admin avec les actions" src="/static/2016/03/admin_actionform.png"&gt;&lt;/p&gt;
&lt;p&gt;Le code complet à présent donne :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.contrib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;admin&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.contrib.admin.helpers&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;ActionForm&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django_th.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;TriggerService&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ServicesActivatedActionForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActionForm&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;provider&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChoiceField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;choices&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ServicesActivated&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values_list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;consumer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChoiceField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;choices&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ServicesActivated&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values_list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TriggerServiceAdmin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ModelAdmin&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="n"&gt;list_display&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;user&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;provider&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;consumer&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;description&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;date_created&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;date_triggered&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;list_filter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;user&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;provider&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;consumer&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;action_form&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ServicesActivatedActionForm&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;change_service&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;queryset&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;provider&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;POST&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;provider&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;consumer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;POST&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;consumer&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;queryset&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;provider&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;provider&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;consumer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;consumer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;change_service&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;short_description&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Change of Service&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;actions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;change_service&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;


&lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;register&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TriggerService&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TriggerServiceAdmin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Voilou pour le tips du jour ;)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Edit du 22/09/2016&lt;/strong&gt; :&lt;/p&gt;
&lt;p&gt;Avec ce form, on peut avoir un soucis qui ne saute pas aux yeux, de prime abord, quand les données ne varient pas souvent&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ServicesActivatedActionForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActionForm&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;provider&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChoiceField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;choices&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ServicesActivated&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values_list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;consumer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChoiceField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;choices&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ServicesActivated&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values_list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Mais si votre liste déroulante contient des catégories que vous mettez à jour, ajoutez, retirez regulierement, on "remarque" que les données ne sont "rafraîchies" correctement dans la liste déroulante. Par exemple, si j'ajoute une catégorie, elle ne s'affiche pas immédiatement dans la vue, et inversement si je retire une catégorie de la base, elle reste encore présente dans la liste déroulante de ma vue.&lt;/p&gt;
&lt;p&gt;Pour corriger cela on passe par un form simple :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ServicesActivatedActionForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActionForm&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;provider&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ModelChoiceField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;queryset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ServicesActivated&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="n"&gt;consumer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ModelChoiceField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;queryset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ServicesActivated&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="Techno"></category><category term="django"></category><category term="actionform"></category></entry><entry><title>Trigger Happy running softly with RQ</title><link href="https://foxmask.net/post/2016/02/15/trigger-happy-running-softly-with-rq/" rel="alternate"></link><published>2016-02-15T19:30:00+01:00</published><updated>2016-02-15T19:30:00+01:00</updated><author><name>foxmask</name></author><id>tag:foxmask.net,2016-02-15:/post/2016/02/15/trigger-happy-running-softly-with-rq/</id><summary type="html">&lt;h2&gt;TriggerHappy and Celery&lt;/h2&gt;
&lt;p&gt;Actually, Trigger Happy works perlfectly with &lt;a href="http://celery.readthedocs.org/"&gt;Celery&lt;/a&gt;, but.... there is a but.&lt;/p&gt;
&lt;p&gt;Sometimes, (once a week) celery stays stuck without any visible reason. &lt;/p&gt;
&lt;p&gt;No error logs occur, and even in DEBUG level, no log appear at all. The logfile remain as is (and yes the disk is …&lt;/p&gt;</summary><content type="html">&lt;h2&gt;TriggerHappy and Celery&lt;/h2&gt;
&lt;p&gt;Actually, Trigger Happy works perlfectly with &lt;a href="http://celery.readthedocs.org/"&gt;Celery&lt;/a&gt;, but.... there is a but.&lt;/p&gt;
&lt;p&gt;Sometimes, (once a week) celery stays stuck without any visible reason. &lt;/p&gt;
&lt;p&gt;No error logs occur, and even in DEBUG level, no log appear at all. The logfile remain as is (and yes the disk is not full:)&lt;/p&gt;
&lt;p&gt;As this is very annoying for me, I went on &lt;a href="irc://irc.freenode.net/celery"&gt;#celery@freenode&lt;/a&gt; to try to get some details about this behavior, before breaking everything ...&lt;/p&gt;
&lt;p&gt;Here, we told me that this behavior was also met with AMQ as broker (when I currently use REDIS).&lt;/p&gt;
&lt;h2&gt;TriggerHappy and RQ&lt;/h2&gt;
&lt;p&gt;So I decide to give a try to &lt;a href="http://python-rq.org"&gt;Python-RQ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;His (well known) author presents it as follow :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Python RQ (Redis Queue) is a simple Python library for queueing jobs and processing them in the background with workers
This project has been inspired by the good parts of Celery, &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So to integrate RQ with TriggerHappy here is what I should do :&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;I installed django-rq that I added to &lt;em&gt;INSTALLED_APPS&lt;/em&gt; in the &lt;strong&gt;settings.py&lt;/strong&gt; file.&lt;/li&gt;
&lt;li&gt;to not break the existing way (with Celery) that (almost) works perfectly, I changed few details in the tasks.py module :&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;before &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;celery&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;shared_task&lt;/span&gt;

&lt;span class="nd"&gt;@shared_task&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;reading&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="nd"&gt;@shared_task&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;publishing&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;after &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django_rq&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;job&lt;/span&gt;
&lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;ImportError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;celery&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;shared_task&lt;/span&gt;

&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="nd"&gt;@job&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nd"&gt;@shared_task&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;reading&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="nd"&gt;@job&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;high&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nd"&gt;@shared_task&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;publishing&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Those tasks are executed by celery with the decorator &lt;strong&gt;@shared_task&lt;/strong&gt; (with its own scheduler) or by the RQ with the &lt;strong&gt;@job&lt;/strong&gt; decorator, through some crontab tasks, with management commands. As RQ asole use my_tasks.delay(), I dont have to change anything else, other than just adding a @job decorator.&lt;/p&gt;
&lt;p&gt;I perfectly know that it's not satifying because if Celery or RQ is not installed, the decorator call with fail and the tasks wont happen.
It's just for testing purpose :) That way, I'm able to compare performance between the two solutions, one weight and one very light.&lt;/p&gt;
&lt;p&gt;Surprisingly, the weight win by handling my reading tasks in less than a seconde for ~50triggers against 30sec for the light one. For the publishing tasks, they are neck and neck. But one thing hangs in the balance actually against celery, it is out of order once a week. The process are not dead, the log does not move, the query I made with celery inspect and so on, respond perfectly.&lt;/p&gt;
&lt;p&gt;As my project is not so overloaded I can say that the cursor between something a "little bit slow" and something "out of order" is quickly choosen :)&lt;/p&gt;
&lt;p&gt;So at least if you want to give a try to &lt;a href="http://python-rq.org"&gt;RQ&lt;/a&gt; with TriggerHappy, the stuff that will need to be handle, will continue to work.&lt;/p&gt;
&lt;p&gt;Here I provide the line I enter in my crontab :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;*/12 * * * * . /my/env/bin/activate &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; /my/env/th/ &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./manage.py fire_read_data &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; ../bin/rqworker-default-burst.sh
*/15 * * * * . /my/env/bin/activate &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; /my/env/th/ &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./manage.py fire_publish_data &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; ../bin/rqworker-high-burst.sh
*/20 * * * * . /my/env/bin/activate &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; /my/env/th/ &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./manage.py fire_get_outside_data &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; ../bin/rqworker-low-burst.sh
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and the content of, for example, rqworker-default-burst.sh&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;
python manage.py rqworker default --burst &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
python manage.py rqworker default --burst &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
python manage.py rqworker default --burst &lt;span class="p"&gt;&amp;amp;&lt;/span&gt; 
python manage.py rqworker default --burst &lt;span class="p"&gt;&amp;amp;&lt;/span&gt; 
python manage.py rqworker default --burst &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
python manage.py rqworker default --burst &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
python manage.py rqworker default --burst &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
python manage.py rqworker default --burst &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
python manage.py rqworker default --burst &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
python manage.py rqworker default --burst &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
python manage.py rqworker default --burst &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Yes I like to spawn a lot :)&lt;/p&gt;
&lt;h2&gt;A Question to finish&lt;/h2&gt;
&lt;p&gt;I take the opportunity of this post to ask you a question :&lt;/p&gt;
&lt;p&gt;If I want to support Celery and RQ for my tasks, one should I write a decorator that could handle each of them.
Is there a way to write a generic decorator that will permit to be inherited to handle each of them ?&lt;/p&gt;
&lt;p&gt;Thus in my tasks.py I'll be able to just do &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django_th.my_powerful_decorator&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;jobth&lt;/span&gt;


&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="nd"&gt;@jobth&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;reading&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
   &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and &lt;strong&gt;jobth&lt;/strong&gt; will check which of the two Queueing system is here and handled the right decorator&lt;/p&gt;</content><category term="Techno"></category><category term="Django"></category><category term="TriggerHappy"></category></entry><entry><title>History not to lose the thread : TrackingFields</title><link href="https://foxmask.net/post/2016/02/13/history-not-to-lose-the-thread-trackingFields/" rel="alternate"></link><published>2016-02-13T17:00:00+01:00</published><updated>2016-02-13T17:00:00+01:00</updated><author><name>foxmask</name></author><id>tag:foxmask.net,2016-02-13:/post/2016/02/13/history-not-to-lose-the-thread-trackingFields/</id><summary type="html">&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;this post is an english version [of this post made on &lt;a href="http://sametmax.com/histoire-de-ne-pas-perdre-le-fil-trackingfields/"&gt;sam et max&lt;/a&gt; made last week.&lt;/p&gt;
&lt;p&gt;The goal of that post will be to show how, without changing anything in a form, we can track the modifications of the data made in the application&lt;/p&gt;
&lt;p&gt;the first part will …&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;this post is an english version [of this post made on &lt;a href="http://sametmax.com/histoire-de-ne-pas-perdre-le-fil-trackingfields/"&gt;sam et max&lt;/a&gt; made last week.&lt;/p&gt;
&lt;p&gt;The goal of that post will be to show how, without changing anything in a form, we can track the modifications of the data made in the application&lt;/p&gt;
&lt;p&gt;the first part will set the scene by starting to show you how articulates an application with a form, additionally, composed by a sub form. I will explain when later. &lt;/p&gt;
&lt;p&gt;To do so, I takes you into the world of the 7th art, come, we will redo StarWars!&lt;/p&gt;
&lt;p&gt;One model, one form, a view, a template and that will be finished &lt;/p&gt;
&lt;h2&gt;the models.py&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.db&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;


    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Movie&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;            Movie&lt;/span&gt;
&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unique&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;description&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__str__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;


    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Episode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;           Episode - for Trilogy and So on ;)&lt;/span&gt;
&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;scenario&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TextField&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;movie&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ForeignKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Movie&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__str__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;the forms.py, very mini mini&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.forms.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;inlineformset_factory&lt;/span&gt;

    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;starwars.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Movie&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Episode&lt;/span&gt;


    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MovieForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ModelForm&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

        &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Meta&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;                As I have to use : &amp;quot;exclude&amp;quot; or &amp;quot;fields&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;                As I&amp;#39;m very lazy, I dont want to fill the list in the &amp;quot;fields&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;                so I say that I just want to exclude ... nothing :P&lt;/span&gt;
&lt;span class="sd"&gt;            &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
            &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Movie&lt;/span&gt;
            &lt;span class="n"&gt;exclude&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

    &lt;span class="c1"&gt;# a formeset based on the model of the Mother &amp;quot;Movie&amp;quot; and Child &amp;quot;Episode&amp;quot; + 1 new empty lines&lt;/span&gt;
    &lt;span class="n"&gt;EpisodeFormSet&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;inlineformset_factory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Movie&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Episode&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;scenario&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;extra&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;the views.py very very very DRY :)&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.http&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;HttpResponseRedirect&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.core.urlresolvers&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;reverse&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.views.generic&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;CreateView&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;UpdateView&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ListView&lt;/span&gt;

    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;starwars.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Movie&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;starwars.forms&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;MovieForm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;EpisodeFormSet&lt;/span&gt;


    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MovieMixin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Movie&lt;/span&gt;
        &lt;span class="n"&gt;form_class&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;MovieForm&lt;/span&gt;

        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_context_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kw&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;context&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;super&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MovieMixin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_context_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kw&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;POST&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;episode_form&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;EpisodeFormSet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;POST&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;episode_form&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;EpisodeFormSet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;instance&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;object&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;

        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_success_url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;reverse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;home&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;form_valid&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;formset&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;EpisodeFormSet&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;POST&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;instance&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;object&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;formset&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_valid&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
                &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;object&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
                &lt;span class="n"&gt;formset&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;instance&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;object&lt;/span&gt;
                &lt;span class="n"&gt;formset&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;HttpResponseRedirect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reverse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;home&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;


    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Movies&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ListView&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Movie&lt;/span&gt;
        &lt;span class="n"&gt;context_object_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;movies&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;template_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;base.html&amp;quot;&lt;/span&gt;


    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MovieCreate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MovieMixin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;CreateView&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;            MovieMixin manage everything for me ...&lt;/span&gt;
&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;pass&lt;/span&gt;


    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MovieUpdate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MovieMixin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;UpdateView&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;            ... and I&amp;#39;m DRY :D&lt;/span&gt;
&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;To finish to set the scene and the costumes : the templates&lt;/h2&gt;
&lt;h3&gt;base.html&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="cp"&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt; &lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;fr&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Manage stories for StarWars&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Stories Manager for Starwars&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    {% block content %}
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;{% url &amp;#39;movie_create&amp;#39; %}&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Add a movie&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;br&lt;/span&gt;&lt;span class="p"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Movie list&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;ul&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    {% for movie in movies %}
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;{% url &amp;#39;movie_edit&amp;#39; movie.id %}&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ movie.name }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    {% endfor %}
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;ul&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    {% endblock %}
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;movie_form.htlm (the template used by UpdateView &amp;amp; CreateView)&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    {% extends &amp;quot;base.html&amp;quot; %}
    {% block content %}
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;form&lt;/span&gt; &lt;span class="na"&gt;method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;post&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;action&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        {% csrf_token %}
        {{ formset.management_form }}
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        {{ form.as_table }}
        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        {{ episode_form.as_table }}
        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;button&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Save&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;button&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;form&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    {% endblock %}
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Update of the database&lt;/h2&gt;
&lt;p&gt;this is necessary  :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;starwars&lt;span class="o"&gt;)&lt;/span&gt; foxmask@foxmask:~/DjangoVirtualEnv/starwars/starwars $  ./manage.py migrate

Operations to perform:
  Synchronize unmigrated apps: messages, starwars, staticfiles
  Apply all migrations: contenttypes, admin, sessions, auth
Synchronizing apps without migrations:
  Creating tables...
    Creating table starwars_movie
    Creating table starwars_episode
    Running deferred SQL...
  Installing custom SQL...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here we are, ready, I can now create my double Trilogy like Georges Lucas&lt;/p&gt;
&lt;h2&gt;Tracking the ungodly&lt;/h2&gt;
&lt;p&gt;But a day comes when me, George Lucas, I sell StarWars to Walt Disney, but I want to miss
what they will do my "baby", I add a "tracker changes" in my application, not to lose the "field" of history.&lt;/p&gt;
&lt;h3&gt;Installation of Tracking Fields&lt;/h3&gt;
&lt;p&gt;as a prerequisites, if you want to also track who change thing, and not what data have been whanged, you will need&lt;br&gt;
django-current-user, so the pip command to use will be this one &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;starwars&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;foxmask&lt;/span&gt;&lt;span class="nd"&gt;@foxmask&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="n"&gt;DjangoVirtualEnv&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;starwars&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;starwars&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tracking&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fields&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cuser&lt;/span&gt;
    &lt;span class="n"&gt;Collecting&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tracking&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fields&lt;/span&gt;
      &lt;span class="n"&gt;Downloading&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tracking&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;6.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;58&lt;/span&gt;&lt;span class="n"&gt;kB&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="err"&gt;████████████████████████████████&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;61&lt;/span&gt;&lt;span class="n"&gt;kB&lt;/span&gt; &lt;span class="mi"&gt;104&lt;/span&gt;&lt;span class="n"&gt;kB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; 
    &lt;span class="n"&gt;Collecting&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cuser&lt;/span&gt;
      &lt;span class="n"&gt;Downloading&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cuser&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;2014.9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;28.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
    &lt;span class="n"&gt;Requirement&lt;/span&gt; &lt;span class="n"&gt;already&lt;/span&gt; &lt;span class="n"&gt;satisfied&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;upgrade&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;upgrade&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="n"&gt;Django&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;foxmask&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;DjangoVirtualEnv&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;starwars&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;packages&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cuser&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;Installing&lt;/span&gt; &lt;span class="n"&gt;collected&lt;/span&gt; &lt;span class="n"&gt;packages&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tracking&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cuser&lt;/span&gt;
      &lt;span class="n"&gt;Running&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tracking&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fields&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt;
      &lt;span class="n"&gt;Running&lt;/span&gt; &lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cuser&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt;
    &lt;span class="n"&gt;Successfully&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cuser&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;2014.9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt; &lt;span class="n"&gt;django&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tracking&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;the necessary changes in  &lt;strong&gt;settings.py&lt;/strong&gt; :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="n"&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="o"&gt;...&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;cuser&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;tracking_fields&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;MIDDLEWARE_CLASSES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;django.contrib.sessions.middleware.SessionMiddleware&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;django.middleware.common.CommonMiddleware&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;django.middleware.csrf.CsrfViewMiddleware&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;django.contrib.auth.middleware.AuthenticationMiddleware&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;django.contrib.auth.middleware.SessionAuthenticationMiddleware&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;django.contrib.messages.middleware.MessageMiddleware&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;django.middleware.clickjacking.XFrameOptionsMiddleware&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;django.middleware.security.SecurityMiddleware&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;cuser.middleware.CuserMiddleware&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="c1"&gt;## &amp;lt;=== do not forget to catch the badass who make change on my movies;)&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;the little migrate that fit our needs, to add the tables for our modeles of django-tracking-fields&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;starwars&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;foxmask&lt;/span&gt;&lt;span class="nd"&gt;@foxmask&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="n"&gt;DjangoVirtualEnv&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;starwars&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;starwars&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;  &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;manage&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt; &lt;span class="n"&gt;migrate&lt;/span&gt;
    &lt;span class="n"&gt;Operations&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;perform&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;Synchronize&lt;/span&gt; &lt;span class="n"&gt;unmigrated&lt;/span&gt; &lt;span class="n"&gt;apps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;staticfiles&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;messages&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cuser&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;starwars&lt;/span&gt;
      &lt;span class="n"&gt;Apply&lt;/span&gt; &lt;span class="nb"&gt;all&lt;/span&gt; &lt;span class="n"&gt;migrations&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;auth&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sessions&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;contenttypes&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tracking_fields&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;admin&lt;/span&gt;
    &lt;span class="n"&gt;Synchronizing&lt;/span&gt; &lt;span class="n"&gt;apps&lt;/span&gt; &lt;span class="n"&gt;without&lt;/span&gt; &lt;span class="n"&gt;migrations&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;Creating&lt;/span&gt; &lt;span class="n"&gt;tables&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
        &lt;span class="n"&gt;Running&lt;/span&gt; &lt;span class="n"&gt;deferred&lt;/span&gt; &lt;span class="n"&gt;SQL&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
      &lt;span class="n"&gt;Installing&lt;/span&gt; &lt;span class="n"&gt;custom&lt;/span&gt; &lt;span class="n"&gt;SQL&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="n"&gt;Running&lt;/span&gt; &lt;span class="n"&gt;migrations&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;Rendering&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="n"&gt;states&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="n"&gt;DONE&lt;/span&gt;
      &lt;span class="n"&gt;Applying&lt;/span&gt; &lt;span class="n"&gt;tracking_fields&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0001&lt;/span&gt;&lt;span class="n"&gt;_initial&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="n"&gt;OK&lt;/span&gt;
      &lt;span class="n"&gt;Applying&lt;/span&gt; &lt;span class="n"&gt;tracking_fields&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0002&lt;/span&gt;&lt;span class="n"&gt;_auto_20160203_1048&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="n"&gt;OK&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and here we are ready to play with the trackers&lt;/p&gt;
&lt;h3&gt;Usage&lt;/h3&gt;
&lt;p&gt;We cant dream a more simpler way to do, this can be summarize to a decorator on the model which identifies which data are changed, 
and on field ̀&lt;code&gt;histo&lt;/code&gt; which will link the model TrackingEvent of the application TrackingFields, to my tacle to watch.
And here, even if my model has been changed with this new field, it's unecessary to do a new "python manage.py migrate", nothing will happen, 
because histo will be a &lt;a href="https://docs.djangoproject.com/en/1.8/ref/contrib/contenttypes/#generic-relations"&gt;GenericRelation()&lt;/a&gt;. &lt;br&gt;
Effectivly, TrackingEvent is based of &lt;a href="https://docs.djangoproject.com/e,/1.9/ref/contrib/contenttypes/"&gt;ContenType&lt;/a&gt; aka
En effet, TrackingEvent repose sur &lt;a href="https://docs.djangoproject.com/fr/1.9/ref/contrib/contenttypes/"&gt;ContenType&lt;/a&gt; aka "The contenttypes framework". 
If you already played with the permission management, you should have already  meet it before;)&lt;/p&gt;
&lt;p&gt;To make it short, this will give :&lt;/p&gt;
&lt;h4&gt;models.py&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.db&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.contrib.contenttypes.fields&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;GenericRelation&lt;/span&gt;

    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;tracking_fields.decorators&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;track&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;tracking_fields.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;TrackingEvent&lt;/span&gt;


    &lt;span class="nd"&gt;@track&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;description&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Movie&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;            Movie&lt;/span&gt;
&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unique&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;description&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;histo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;GenericRelation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TrackingEvent&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content_type_field&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;object_content_type&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;episodes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Episode&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;movie&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__str__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;

    &lt;span class="nd"&gt;@track&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;scenario&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Episode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;           Episode - for Trilogy and So on ;)&lt;/span&gt;
&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;scenario&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TextField&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;movie&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ForeignKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Movie&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;histo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;GenericRelation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TrackingEvent&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content_type_field&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;object_content_type&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__str__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;so, here, it is very simple like a pancake recipe: 3 imports, the decorator, the  GenericRelation, we mix all of them and that give what follow.
I have, in the meantime, added a function &lt;code&gt;episodes&lt;/code&gt; to my Movie class, I will explain it too later ;)&lt;/p&gt;
&lt;h3&gt;the template of the expected DetailView&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
       &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;caption&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;History of the modification of {{ object }} &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;caption&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
       &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;thead&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
       &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Old Value&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;New Value&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;By&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;at&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
       &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;thead&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
       &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tbody&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    {% for h in object.histo.all %}
       {% for f in h.fields.all %}
           &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ f.old_value }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ f.new_value }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ h.user }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ h.date }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
       {% endfor %}
    {% endfor %}
       &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tbody&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now if I go the my page to modify the story of one episode, my template below, wont display thoses modifications !
But Why god ? Because until here, I just display the "histo" of Movie and not of the Episode. We now understand here my interest for the sub form.
The issue &lt;/p&gt;
&lt;h3&gt;Let's fix it&lt;/h3&gt;
&lt;p&gt;this is here, that enter if the game, the function &lt;code&gt;episodes&lt;/code&gt; of my Movie class to permit to loop on it and display of the needed stuff &lt;/p&gt;
&lt;h3&gt;the template of the expected DetailView (again :)&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;caption&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;History of the modifications of {{ object }} &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;caption&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;thead&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Old Value&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;New Value&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;By&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;at&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;thead&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tbody&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    {% for h in object.histo.all %}
       {% for f in h.fields.all %}
           &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ f.old_value }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ f.new_value }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ h.user }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ h.date }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
       {% endfor %}
    {% endfor %}
        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tbody&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    {% for ep in object.episodes %}
        {% if ep.histo.all %}
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;caption&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;history of the modifications of Episode&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;caption&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;thead&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Old Value&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;New Value&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;By&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;at&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;th&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;thead&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tbody&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
            {% for h in ep.histo.all %}
                {% for f in h.fields.all %}
                {% if f.old_value == f.new_value %} {# they are the same when the new value is created to avoid to display &amp;quot;null&amp;quot; #}
                {% else %}
                &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ f.old_value }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ f.new_value }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ h.user }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;{{ h.date }}&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
                {% endif %}
                {%  endfor %}
            {% endfor %}
        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tbody&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
     &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        {% endif %}
    {% endfor %}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And voilà !
Voili voilou ! As a bonus, if you're curious, of the admin side, you also have a list of all the changes if needed;)&lt;/p&gt;
&lt;p&gt;For the advanced users who would say:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;why have recoded the front side since this is already managed on the admin side without lifting a finger?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Because George Lucas wants to show changes to his baby StarWars by Walt Disney, to the world of course &lt;/p&gt;
&lt;p&gt;Ho, and a last detail : in the admin, the view which displays the list of changes gives : "Episode Object" or "Movie Object".
To avoid that, you shoud have notice that I have added the function  &lt;strong&gt;&lt;strong&gt;str&lt;/strong&gt;&lt;/strong&gt;  in my model which will return a more
readable value of what have been changed&lt;/p&gt;
&lt;h2&gt;Conclusion :&lt;/h2&gt;
&lt;p&gt;IRL, I didnt see myself, create a History model linked physically by a FK on each model, I decide to search, arround the web, some ressources &lt;/p&gt;
&lt;p&gt;It's finally on &lt;a href="irc://irc.freenode.net/django-fr"&gt;#django-fr@freenode&lt;/a&gt; that I asked my question and got from &lt;a href="https://github.com/gagaro"&gt;Gagaro&lt;/a&gt; the grââl : 
one application named &lt;a href="https://github.com/makinacorpus/django-tracking-fields"&gt;tracking-fields&lt;/a&gt;, his author.&lt;/p&gt;
&lt;p&gt;For once I do my lazy by not coding all by myself, &lt;a href="https://github.com/makinacorpus/django-tracking-fields"&gt;it's nice to come across such an app&lt;/a&gt; ! &lt;/p&gt;
&lt;p&gt;If you want to play with the code of this Movie manager &lt;a href="https://github.com/foxmask/tracking-starwars"&gt;here is the tasty soup&lt;/a&gt;&lt;/p&gt;</content><category term="Techno"></category><category term="django"></category><category term="python"></category></entry><entry><title>Revue Technique de la semaine du 02/02/2016</title><link href="https://foxmask.net/post/2016/02/02/revue-technique-de-la-semaine-du-02022016/" rel="alternate"></link><published>2016-02-02T01:00:00+01:00</published><updated>2016-02-02T01:00:00+01:00</updated><author><name>foxmask</name></author><id>tag:foxmask.net,2016-02-02:/post/2016/02/02/revue-technique-de-la-semaine-du-02022016/</id><summary type="html">&lt;p&gt;Ca vous manquait aussi un billet du renard masqué hein ?
Bon qu'est-ce que je vais bien pouvoir vous racontrer ? &lt;/p&gt;
&lt;h3&gt;Evernote de mieux en pire ?&lt;/h3&gt;
&lt;p&gt;Je résumerai bien ce qui arrive a Evernote par "Qui trop étreint, mal embrasse" tant ce qui se passe le reflète.
L'an passé on apprenait qu'Evernote …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Ca vous manquait aussi un billet du renard masqué hein ?
Bon qu'est-ce que je vais bien pouvoir vous racontrer ? &lt;/p&gt;
&lt;h3&gt;Evernote de mieux en pire ?&lt;/h3&gt;
&lt;p&gt;Je résumerai bien ce qui arrive a Evernote par "Qui trop étreint, mal embrasse" tant ce qui se passe le reflète.
L'an passé on apprenait qu'Evernote se séparait d'une partie de ses equipes d'ingénierie, après que certains associés fondateurs aient tirés leur révérence, au point qu'on evoquait sa fin, ce qui m'a du coup fait prendre conscience, comme pour google, "nom di diou si ca ferme demain que fais je de mon contenu?", ou "Le syndrôme des services gratos Google qui vous font perdre vos données à vous même rien à vous".&lt;/p&gt;
&lt;p&gt;Pour ma part j'ai rapidement repris le dessus puisque je peux facilement renvoyer tout ce que j'ai chez, eux ailleurs, via mon projet &lt;a href="http://blog.trigger-happy.eu"&gt;TriggerHappy&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Mais revenons à nos moutons, après ce premier évènement, suit un second depuis hier, Evernote annonce cesser son activité de &lt;a href="http://www.theverge.com/2016/2/1/10890562/evernote-market-shut-down-moleskine-notebook-2016"&gt;vente de produits hype&lt;/a&gt; et quand même cher pour ce que c'est. Donc fini les carnets moleskine, portefeuille et scanner, qui ne seront plus vendus que par leur partenaire. Evernote se recentrant (enfin?) sur le software.&lt;/p&gt;
&lt;p&gt;Ce qui m'a toujours paru bizarre c'est leur blog où il tente de "louer", via des personnes exterieures à l'entreprise, la reussite de l'utilisation de l'outil, qui leur a changé la vie, qui les a rendu plus productifs etc. Comme s'ils avaient besoins de témoignages pour s'en convaincre eux mêmes. Ca me fait trop penser aux vieilles "pub témoignages" moisies "Weight Watchers" où pour vous convaincre, il faut vous le dire...&lt;/p&gt;
&lt;p&gt;Pour ma part j'adore l'outil qui, techniquement, est incontournable (le moteur de recherche offline + l'OCR notamment + le plugin firefox de capture d'article) mais la comm marketing autour est une misère.&lt;/p&gt;
&lt;p&gt;Donc pour l'heure, tant que le bateau ne chavire pas, je ne bougerai rien, sinon j'irai m'oriente vers une alternative libre déjà existante mais pour l'heure sans API permettant d'ajouter des données autrement que manuellement. Celle ci se nommera &lt;a href="https://github.com/twostairs/paperwork"&gt;paperwork&lt;/a&gt; ou &lt;a href="https://github.com/Laverna/laverna"&gt;laverna&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Django&lt;/h3&gt;
&lt;h4&gt;1.9.2 security fix and 1.8.9 bug fix&lt;/h4&gt;
&lt;p&gt;&lt;a href="https://www.djangoproject.com/weblog/2016/feb/01/releases-192-and-189/"&gt;A vos mises à jour&lt;/a&gt; si vous êtes sur la 1.9.x !
Pour la 1.8.9 rien à craindre, il s'agit que d'une release concernant peu de corrections de bugs.&lt;/p&gt;
&lt;h4&gt;Extensions or not to be&lt;/h4&gt;
&lt;p&gt;Il y a quelques jours j'évoquais un besoin sur les forms django (je ne sais plus lequel :P) avec &lt;a href="https://twitter.com/spoutnik"&gt;SpoutBe&lt;/a&gt; qui me disait que &lt;a href="https://github.com/maraujop/django-crispy-forms/"&gt;django crispy&lt;/a&gt; répondait à mon besoin. Mais je lui avais répondu que j'étais très réticent à utiliser des "projets satellites" parce que le jour où plus maintenus, le code produit (n')évolue (plus que) difficilement. Donc tant que c'est pas "core" je n'y toucherai pas. Il n'y a que les cas où des projets satellites "naissent" du core que je les emploie, comme par exemple &lt;a href="https://pypi.python.org/pypi/django-formwizard"&gt;django-formwizard&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Et vous, comment gérez vous l'ajout de fonctionnalités offertes par de tels projets pour Django ? Vous fiez vous à la "vivacité" du projet pour le choisir et vous dire que c'est un gage d'évolution ?&lt;/p&gt;
&lt;h3&gt;Meetup - c'est reparti !&lt;/h3&gt;
&lt;p&gt;Des meetup (DevOps, Paris.py) ont repris mais j'ai pas l'envie là tout de suite, pourtant j'ai l'occasion d'y aller en bonne compagnie, mais non là non, j'ai encore un coup de "mood" là , ca attendra !&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.meetup.com/fr-FR/Paris-Devops-Meetup/"&gt;Paris DevOps, aujourd'hui&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.meetup.com/Paris-py-Python-Django-friends/"&gt;Paris.Py, le 4 février&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Arround the world&lt;/h3&gt;
&lt;p&gt;Quelques bons billets à se mettre sous la dent :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://sametmax.com/evolution-de-python/"&gt;Evolution de Python&lt;/a&gt; par Sam et Max&lt;/li&gt;
&lt;li&gt;&lt;a href="http://anarc.at/blog/2016-01-31-free-software-activities-january-2016/"&gt;Free Software activities&lt;/a&gt; par Anarc&lt;/li&gt;
&lt;li&gt;&lt;a href="http://sametmax.com/nouvelle-release-de-crossbar-historique-des-events-et-crypto/"&gt;News de Crossbar&lt;/a&gt; par Sam et Max&lt;/li&gt;
&lt;li&gt;&lt;a href="http://feedproxy.google.com/~r/Pycharm/~3/YWRWdinNGw4/"&gt;PyCharm 5.0.4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://pyfound.blogspot.fr/2016/01/postscript-to-warehouse-post.html"&gt;Le Pypi nouveau est sur les rails&lt;/a&gt; par la PSF&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;A Tester / A Lire&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.ansible.com/blog/ansible-2.0-launch"&gt;Ansible 2&lt;/a&gt;, à tester avant de switcher de 1.9, car ca pète pas mal de choses qui focntionnaient avant ou passent en dépréciées comme les inclusions de playbook avec un tag ... ca ca me reste en travers ...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ceci n'est plus possible :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;   include: /path/to/foo/bar tag=foobar&lt;/span&gt;
&lt;span class="err"&gt;   include: /path/to/bar/foo tag=barfoo&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;du coup dans un main.yml, je ne peux plus conditionner l'inclusion (et donc l'execution de ce qui est inclus), merci !&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/gabrielhora/github_reviewer"&gt;Github Reviewer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://makina-corpus.com/blog/metier/2016/bien-demarrer-avec-django-rest-framework-personnalisation-des-routeurs-partie-5"&gt;bien démarrer DRF - Partie 5&lt;/a&gt; par Makina Corpus. ici j'ai pris le feuilleton en chemin, alors j'ai raccroché les vagons en m'envoyant les 4 premières parties ;)&lt;/li&gt;
&lt;li&gt;&lt;a href="http://mashable.com/2016/01/12/internet-explorer-8-9-10-dead/"&gt;IE 8,9,10, de l'histoire ancienne ?&lt;/a&gt; j'aime quand c'est microsoft qui le dit :) &lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.v3.co.uk/v3-uk/news/2443810/oracle-signals-the-end-of-java-applet-support-for-browsers"&gt;Oracle met à mort le support de la java applet dans les browsers&lt;/a&gt;. Les boites qui sont encore avec du IE &amp;lt; 10 et avec des applet java (au pif Oracle Forms) ont du mouron à se faire ...&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;J'en fout pas une&lt;/h3&gt;
&lt;p&gt;Depuis quelques semaines je commit que dalle sur TriggerHappy, je "papillone", je teste des trucs, je regarde des nouveaux langages, je glande, je joue, je procrastine, je fais de la bouffe (&lt;a href="http://www.recettes-bretonnes.fr/gateaux-bretons/quatre-quarts-pommes.html"&gt;genre&lt;/a&gt;), la vie quoi ...&lt;/p&gt;</content><category term="Techno"></category><category term="Django"></category><category term="python"></category><category term="devops"></category><category term="ansible"></category><category term="meetup"></category><category term="pycharm"></category></entry><entry><title>Django TEST_RUNNER exploitant settings.INSTALLED_APPS</title><link href="https://foxmask.net/post/2015/11/30/django-test_runner-exploitant-settings-installed_apps/" rel="alternate"></link><published>2015-11-30T22:19:00+01:00</published><updated>2015-11-30T22:19:00+01:00</updated><author><name>foxmask</name></author><id>tag:foxmask.net,2015-11-30:/post/2015/11/30/django-test_runner-exploitant-settings-installed_apps/</id><summary type="html">&lt;p&gt;Bon, à un moment, à force de faire des modifications sur son
&lt;a href="http://trigger-happy.eu" title="a bridge between your internet services"&gt;projet&lt;/a&gt;
pour contenter "&lt;a href="https://nicolas.steinmetz.fr/blog/"&gt;son&lt;/a&gt;" fan ;) Je ne
pouvais pas rester à me limiter à faire tourner les tests sur 2 ou 3
applications django quand j'en fourni 10.&lt;/p&gt;
&lt;p&gt;Donc actuellement (pour faire court), Django lance les tests sur …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Bon, à un moment, à force de faire des modifications sur son
&lt;a href="http://trigger-happy.eu" title="a bridge between your internet services"&gt;projet&lt;/a&gt;
pour contenter "&lt;a href="https://nicolas.steinmetz.fr/blog/"&gt;son&lt;/a&gt;" fan ;) Je ne
pouvais pas rester à me limiter à faire tourner les tests sur 2 ou 3
applications django quand j'en fourni 10.&lt;/p&gt;
&lt;p&gt;Donc actuellement (pour faire court), Django lance les tests sur tout ce
qui commence par test*.py à partir du dossier courrant.&lt;/p&gt;
&lt;p&gt;Problème :&lt;br&gt;
J'ai 10 applications, et seules 2 sont installées (présentes dans
&lt;code&gt;settings.INSTALLED_APPS&lt;/code&gt;), et au lancement des tests on a droit à une
erreur d'absence de table liée au model de son application X.&lt;/p&gt;
&lt;p&gt;Pour que ça marche quand même, on est obligé de faire&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;manage&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;v2&lt;/span&gt; &lt;span class="n"&gt;app1&lt;/span&gt; &lt;span class="n"&gt;app2&lt;/span&gt; &lt;span class="n"&gt;app3&lt;/span&gt; &lt;span class="n"&gt;app4&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Pas top du tout à mon goût.&lt;/p&gt;
&lt;p&gt;Je suis donc allé à la pèche et je n'ai rien trouvé que &lt;a href="https://groups.google.com/forum/#!topic/django-developers/2Bb4iHR626s"&gt;des besoins
identiques&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Du coup ce soir je me suis fendu d'un test assez simple et qui rempli
tout à fait sa fonction.&lt;/p&gt;
&lt;p&gt;La doc dit qu'il suffit de définir un TEST_RUNNER perso en fournissant
la méthode &lt;code&gt;run_tests()&lt;/code&gt;, et de l'indiquer dans le settings.py&lt;/p&gt;
&lt;p&gt;et ca donne ceci :&lt;/p&gt;
&lt;p&gt;&lt;code&gt;settings.py&lt;/code&gt; :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;TEST_RUNNER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;django_th.runner.DiscoverRunnerTriggerHappy&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;runner.py&lt;/code&gt; :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.conf&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.test.runner&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;DiscoverRunner&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DiscoverRunnerTriggerHappy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DiscoverRunner&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;    A Django test runner that uses unittest2 test discovery.&lt;/span&gt;
&lt;span class="sd"&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;run_tests&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;test_labels&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;extra_tests&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;        Run the unit tests for all the test labels in the provided list.&lt;/span&gt;

&lt;span class="sd"&gt;        Test labels are taken from settings.INSTALLED_APPS&lt;/span&gt;

&lt;span class="sd"&gt;        A list of &amp;#39;extra&amp;#39; tests may also be provided; these tests&lt;/span&gt;
&lt;span class="sd"&gt;        will be added to the test suite.&lt;/span&gt;

&lt;span class="sd"&gt;        Returns the number of tests that failed.&lt;/span&gt;
&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup_test_environment&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;installed_app&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INSTALLED_APPS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;test_labels&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;test_labels&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;installed_app&lt;/span&gt;&lt;span class="p"&gt;,)&lt;/span&gt;
        &lt;span class="n"&gt;suite&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;build_suite&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_labels&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;extra_tests&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;old_config&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup_databases&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run_suite&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;suite&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;teardown_databases&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;old_config&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;teardown_test_environment&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;suite_result&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;suite&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="Techno"></category><category term="Django"></category></entry><entry><title>Trigger-Happy, stats, requête et proposition</title><link href="https://foxmask.net/post/2015/10/02/trigger-happy-stats-requete-et-proposition/" rel="alternate"></link><published>2015-10-02T11:04:00+02:00</published><updated>2015-10-02T11:04:00+02:00</updated><author><name>foxmask</name></author><id>tag:foxmask.net,2015-10-02:/post/2015/10/02/trigger-happy-stats-requete-et-proposition/</id><summary type="html">&lt;p&gt;Avec wordpress on dispose de stats par billet, et le fait de m'être mis
un coup de pompe au cul pour publier des billets in ze Shakespeare
language a fait que dans le top 100 des billets les plus lus sur le
blog, on trouve celui concernant la sortie de …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Avec wordpress on dispose de stats par billet, et le fait de m'être mis
un coup de pompe au cul pour publier des billets in ze Shakespeare
language a fait que dans le top 100 des billets les plus lus sur le
blog, on trouve celui concernant la sortie de la &lt;a href="/post/2015/08/18/django-trigger-happy-0-11-0-english-version/"&gt;v0.11.0 in
English&lt;/a&gt;
(en 87° position avec 1013 vues en 1mois et demi). Là où &lt;a href="/post/2015/08/17/django-trigger-happy-0-11-0/"&gt;la version
francophone&lt;/a&gt;,
n'a pas atteint la moitié de l'autre sur la même période.&lt;br&gt;
L'heureuse conséquence tout de même, c'est que le nombre de personnes
s'intéressant au projet (qu'on dénombre avec les petites "stars" sur
github) fini par atteindre 99 :) A coté de ça le nombre de
téléchargements de l'appli est de 333/mois sur pypi.&lt;br&gt;
Pour un projet ne cherchant ni gloire ni fortune, et au départ juste
pour mes propres besoins, c'est toujours plaisant même si les chiffres
sont ridicules comparativement à des projets similaires.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Une requête&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Tout récemment, hier en fait, un utilisateur a envoyé un mail à la
mailbox que j'avais ouverte pour contacter le projet.&lt;br&gt;
Ouais c'est à ça que ça sert les mails :) Le monsieur me demandait
comment pouvoir utiliser TriggerHappy depuis le site.&lt;/p&gt;
&lt;p&gt;Bon voici ma réponse :&lt;br&gt;
"bonjour,&lt;br&gt;
le service n'est pas encore rendu accessible à tout le monde, mais si
vous n'avez pas les compétences (en langage de programmation python) ou
les moyens d'installer l'application, je peux vous créer un compte pour
que vous le testiez à votre guise"&lt;/p&gt;
&lt;p&gt;Donc depuis hier, un utilisateur fait joujou avec le service. Il a
activé 2 services et créé un trigger (le minimum vital pour faire
quelque chose) et hop roule ma poule.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Une proposition&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Si vous voulez également tester, faites péter un mail avec login
souhaité, email à utiliser, le tout à "service chez trigger-happy point
eu" et je vous fournirai le mot de passe et l'url de connexion en
retour.&lt;/p&gt;
&lt;p&gt;Avant cela, &lt;a href="http://trigger-happy.eu/infos/"&gt;vérifier que les services
couverts&lt;/a&gt; par le projet sont à votre
goût, histoire d'éviter que vous ne pestiez parce que ca ne fait pas le
café. En plus c'est un projet libre, où j'ai documenté à mort "&lt;a href="https://github.com/foxmask/django-th/blob/master/CONTRIBUTING.md"&gt;comment
contribuer&lt;/a&gt;"
et &lt;a href="https://github.com/foxmask/django-th-ansible"&gt;fourni des outils&lt;/a&gt;
pour en faire le moins possible ;)&lt;/p&gt;
&lt;p&gt;Si la demande est plus conséquente, je me botterai le train pour
rajouter un module d'inscription plus vite que prévu (j'attendais le
retour du module django dédié mais il semble que ca prenne bien plus de
temps) et chacun ira s'inscrire.&lt;/p&gt;
&lt;p&gt;Comme cette proposition est tout à fait informelle, je reviendrai en
détails sur ce que je fais avec "vos données perso", mais pour résumer,
c'est "RIEN". Vous êtes maître à bord et décider des recettes que vous
voulez faire en faisant se parler les services de votre choix.&lt;/p&gt;
&lt;p&gt;Tout ce que je ferai, c'est avoir un oeil sur l'état du projet pour
savoir où améliorer les choses mais aucunement me servir de vos infos
pour mon usage perso (tel que collecte de mail pour spam ou autre
joyeusete qu'on "affectionne" tous)&lt;/p&gt;
&lt;p&gt;Je reviendrai là dessus au moment de l'ouverture "publique" du service.&lt;/p&gt;
&lt;p&gt;Pour l'heure, ca sera du test avec votre concours, bien que je m'en
serve au quotidien pour mes propres besoins depuis le début.&lt;/p&gt;</content><category term="Techno"></category><category term="Django"></category><category term="TriggerHappy"></category></entry><entry><title>Trigger Happy, de tout, de rien, la vie</title><link href="https://foxmask.net/post/2015/09/08/trigger-happy-de-tout-de-rien-la-vie/" rel="alternate"></link><published>2015-09-08T10:30:00+02:00</published><updated>2015-09-08T10:30:00+02:00</updated><author><name>foxmask</name></author><id>tag:foxmask.net,2015-09-08:/post/2015/09/08/trigger-happy-de-tout-de-rien-la-vie/</id><summary type="html">&lt;p&gt;Depuis la sortie de la version 0.11.0, j'ai lancé quelques bidules
périphériques :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://blog.trigger-happy.eu/"&gt;un blog dédié&lt;/a&gt; en pelican, que j'ai
    commencé à remplir. J'essaierai de lui trouver un thème plus
    responsive que du rendu à taille fixe.&lt;/li&gt;
&lt;li&gt;un compte &lt;a href="https://twitter.com/TriggerHappyEu"&gt;@TriggerHappyEu&lt;/a&gt;
    dédié qui relaiera les news du projet&lt;/li&gt;
&lt;li&gt;&lt;a href="https://alternativeto.net/software/trigger-happy/"&gt;une inscription …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;Depuis la sortie de la version 0.11.0, j'ai lancé quelques bidules
périphériques :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://blog.trigger-happy.eu/"&gt;un blog dédié&lt;/a&gt; en pelican, que j'ai
    commencé à remplir. J'essaierai de lui trouver un thème plus
    responsive que du rendu à taille fixe.&lt;/li&gt;
&lt;li&gt;un compte &lt;a href="https://twitter.com/TriggerHappyEu"&gt;@TriggerHappyEu&lt;/a&gt;
    dédié qui relaiera les news du projet&lt;/li&gt;
&lt;li&gt;&lt;a href="https://alternativeto.net/software/trigger-happy/"&gt;une inscription sur
    Alternativeto.net&lt;/a&gt;,
    pour voir sur quel créneau se positionne le projet au milieu des
    plus "lourds"&lt;/li&gt;
&lt;li&gt;quelques posts sur
    &lt;a href="https://www.reddit.com/r/selfhosted/"&gt;r/selfhosted&lt;/a&gt; &amp;amp;
    &lt;a href="https://www.reddit.com/r/django/"&gt;r/django&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Quant à l'évolution du projet, j'ai pu ajouter à son arc, 2 services,
&lt;a href="https://trello.com/"&gt;Trello&lt;/a&gt;, Un gestionnaire de projets et
&lt;a href="https://github.com/"&gt;GitHub&lt;/a&gt;. Ce qui permet par exemple de pouvoir
créer des tickets sur github dès qu'on a créé une "carte" Trello dans un
board de son choix.&lt;/p&gt;
&lt;p&gt;Dans le même temps j'ai pris contact avec le projet
&lt;a href="https://github.com/wekan/wekan"&gt;WeKan&lt;/a&gt;, un Trello like opensource, en
tout point identique à l'UI originale, afin de leur proposer d'exploiter
leur API, mais elle n'existe pas encore mais sera complétement calquée
sur celle de Trello. Je vois bien d'ici là un yes.wekan.io poindre le
bout de son nez tiens ;)&lt;/p&gt;</content><category term="Techno"></category><category term="Django"></category><category term="TriggerHappy"></category></entry></feed>