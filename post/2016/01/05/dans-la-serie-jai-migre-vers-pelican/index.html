<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Dans la série, j'ai migré vers Pélican - Le Free de la Passion</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://www.foxmask.org/post/2016/01/05/dans-la-serie-jai-migre-vers-pelican/">

        <meta name="author" content="foxmask" />
        <meta name="keywords" content="python,pelican" />
        <meta name="description" content="Dans cet article, je vais aborder comment je créé des billets et les publie automatiquement sans plus lever le petit doigt." />

        <meta property="og:site_name" content="Le Free de la Passion" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Dans la série, j&#39;ai migré vers Pélican"/>
        <meta property="og:url" content="https://www.foxmask.org/post/2016/01/05/dans-la-serie-jai-migre-vers-pelican/"/>
        <meta property="og:description" content="Dans cet article, je vais aborder comment je créé des billets et les publie automatiquement sans plus lever le petit doigt."/>
        <meta property="article:published_time" content="2016-01-05" />
            <meta property="article:section" content="Techno" />
            <meta property="article:tag" content="python" />
            <meta property="article:tag" content="pelican" />
            <meta property="article:author" content="foxmask" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://www.foxmask.org/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="https://www.foxmask.org/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://www.foxmask.org/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://www.foxmask.org/theme/css/style.css" type="text/css"/>

        <link href="https://www.foxmask.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Le Free de la Passion ATOM Feed"/>

        <link href="https://www.foxmask.org/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Le Free de la Passion RSS Feed"/>
        <link href="https://www.foxmask.org/feeds/techno.atom.xml" type="application/atom+xml" rel="alternate"
              title="Le Free de la Passion Techno ATOM Feed"/>
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://www.foxmask.org/" class="navbar-brand">
Le Free de la Passion            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://www.foxmask.org/pages/a-propos">
                             À propos
                          </a></li>
                        <li >
                            <a href="https://www.foxmask.org/category/games.html">Games</a>
                        </li>
                        <li >
                            <a href="https://www.foxmask.org/category/general.html">General</a>
                        </li>
                        <li >
                            <a href="https://www.foxmask.org/category/korea.html">Korea</a>
                        </li>
                        <li >
                            <a href="https://www.foxmask.org/category/link.html">Link</a>
                        </li>
                        <li class="active">
                            <a href="https://www.foxmask.org/category/techno.html">Techno</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://www.foxmask.org/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://www.foxmask.org/post/2016/01/05/dans-la-serie-jai-migre-vers-pelican/"
                       rel="bookmark"
                       title="Permalink to Dans la série, j'ai migré vers Pélican">
                        Dans la série, j'ai migré vers Pélican
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-01-05T12:00:00+01:00"> mar. 05 janvier 2016</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://www.foxmask.org/tag/python.html">python</a>
        /
	<a href="https://www.foxmask.org/tag/pelican.html">pelican</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <h2>Le Besoin</h2>
<p>Le besoin est le suivant, <a href="http://getpelican.com">Pélican</a> c'est cool parce que statique mais le travers c'est qu'on ne dispose d'aucun outil "web" pour produire un billet.
Certes, si je suis joueur je peux, via mon smartphone, me connecter sur le "blog", lancer vi et produire mon billet.md :-)
On voit le coté pratique de la chose :)</p>
<h2>Petite digression</h2>
<p>Gordon, sur <a href="irc://irc.freenode.net/sametmax">irc://irc.freenode.net/sametmax</a> m'a parlé de Lektor, un CMS à base de fichiers plats, sans aucune base de données. Le projet semble cool.
Ce qui m'a fait sourire dans l'explication de la création de ce CMS c'est que l'auteur tire sur WordPress et balaye méchament de la main toutes les solutions de generation de pages statiques pour un blog en disant que c'est orienté pour les developpeurs, soit !</p>
<p>Mais quand on regarde attentivement la doc, ce n'est pas très orienté pour les "non dev" pour autant. Pourquoi ? <a href="https://www.getlektor.com/docs/quickstart/">Regardons le quickstart</a></p>
<blockquote>
<p>The best way to get started with Lektor is to use the quickstart command to let Lektor generate a basic project layout for you.</p>
</blockquote>
<p>Il faut taper une commande pour créer un projet. Ca suppose que l'utilisateur sait utiliser la ligne de commandes et ... ait accès à un shell pour héberger son site.
Or avec Wordpress, on décompresse l'archive, on transfert via FTP chez son hébergeur (sans accès SSH) et on a déjà accès à son blog.</p>
<p>Bref passons :)</p>
<h2>Billets depuis GitHub</h2>
<h3>via des issues</h3>
<p>Bob m'a parlé d'une solution rigolote, à base d' "issues" github, qui permet de produire directement des billets en utilisant du coup l'interface "markdown" de GitHub et des tags pour gérer le statut du billet.</p>
<h3>via des nouveaux fichiers</h3>
<p>Du coup ca m'a donné l'idée d'également exploiter l'interface markdown de github, pour, ce coup-ci, créer directement des fichiers dans le dossier <strong>content</strong>.
Puis une fois fait, sur le serveur hébergeant le blog, déclencher, via une <em>crontab</em>, un <em>git pull</em>, et lancer la génération du nouveau billet.</p>
<p>La tâche dans ma crontab donne ceci :</p>
<div class="highlight"><pre><span></span><code><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>.<span class="w"> </span>/foxhome/.keychain/<span class="si">${</span><span class="nv">HOSTNAME</span><span class="si">}</span>-sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>.<span class="w"> </span>/foxblog/bin/activate<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/foxblog/website<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>pull<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>html
</code></pre></div>

<p>(on passera sur le fait que j'ai un venv dans /foxblog:)</p>
<p>L'astuce ici consiste à utiliser <strong>keychain</strong>, pour que le <em>git pull</em> ne reste pas stuck sur la demande de votre passphrase lors de l'exécution de la tâche</p>
<p>En effet, après l'installation de keychain, on lanche la commande</p>
<div class="highlight"><pre><span></span><code>keychain<span class="w"> </span><span class="nv">$HOME</span>/.ssh/id_dsa
</code></pre></div>

<p>ce qui produit</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>keychain<span class="w"> </span>~/.ssh/id_rsa

<span class="w"> </span>*<span class="w"> </span>keychain<span class="w"> </span><span class="m">2</span>.7.1<span class="w"> </span>~<span class="w"> </span>http://www.funtoo.org
<span class="w"> </span>*<span class="w"> </span>Starting<span class="w"> </span>ssh-agent...
<span class="w"> </span>*<span class="w"> </span>Starting<span class="w"> </span>gpg-agent...
<span class="w"> </span>*<span class="w"> </span>Adding<span class="w"> </span><span class="m">1</span><span class="w"> </span>ssh<span class="w"> </span>key<span class="o">(</span>s<span class="o">)</span>:<span class="w"> </span>/foxhome/.ssh/id_rsa
Enter<span class="w"> </span>passphrase<span class="w"> </span><span class="k">for</span><span class="w"> </span>/foxhome/.ssh/id_rsa:
<span class="w"> </span>*<span class="w"> </span>ssh-add:<span class="w"> </span>Identities<span class="w"> </span>added:<span class="w"> </span>/foxhome/.ssh/id_rsa
</code></pre></div>

<p>Cette commande n'est à taper qu'une seule fois, par exemple après un reboot du serveur.
Si vous la tapez une seconde fois il ne se passera rien :) il réaffichera la liste des clés déjà chargées</p>
<h2>Vous avez dit Offline ?</h2>
<p>Enfin, s'il vous arrive d'être déconnecté et ne pouvez exploiter github pour produire vos billets, ben un bête editeur texte fait l'affaire :) bon si vous avez PyCharm, vous avez un super editeur qui vous montre le rendu en live de votre texte;)
Pour ma part je suis toujours fourré avec Evernote pour ce genre de chose, dans le bus et le train. 
Ca permet de relire plusieurs fois avant de commit 'n' fois pour rien le nouveau billet.</p>
<p>Avec tout ça, on est paré :)</p>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="https://www.foxmask.org/post/2016/01/02/de-wordpress-a-pelican/">De wordpress à pelican</a></li>
        <li><a href="https://www.foxmask.org/post/2015/12/29/une-autre-histoire/">Une autre histoire</a></li>
        <li><a href="https://www.foxmask.org/post/2023/05/18/pythno-chatgpt-ccbv-metaclasses/">Python ChatGPT, CCBV, Metaclasses</a></li>
        <li><a href="https://www.foxmask.org/post/2022/05/27/boring-python-dependency-management-b-list/">Boring Python: dependency management - b-list</a></li>
        <li><a href="https://www.foxmask.org/post/2022/05/27/build-a-url-shortener-with-fastapi-and-python-real-python-realpython/">Build a URL Shortener With FastAPI and Python – Real Python - realpython</a></li>
        <li><a href="https://www.foxmask.org/post/2022/05/27/the-call-for-proposals-for-djangocon-us-2022-is-now-open-djangoproject/">The Call for Proposals for DjangoCon US 2022 Is Now Open! - djangoproject</a></li>
        <li><a href="https://www.foxmask.org/post/2022/05/27/how-to-publish-an-open-source-python-package-to-pypi-real-python-realpython/">How to Publish an Open-Source Python Package to PyPI – Real Python - realpython</a></li>
        <li><a href="https://www.foxmask.org/post/2022/05/27/welcome-to-hypothesis-hypothesis-6469-documentation-readthedocs/">Welcome to Hypothesis! — Hypothesis 6.46.9 documentation - readthedocs</a></li>
    </ul>
</section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="/feeds/all.rss.xml" target="_blank">FoxMaSk RSS</a>
    </li>
    <li class="list-group-item">
      <a href="https://python.org/" target="_blank">Python</a>
    </li>
    <li class="list-group-item">
      <a href="https://pycon.fr/" target="_blank">PyConFr</a>
    </li>
    <li class="list-group-item">
      <a href="https://pycon.kr/" target="_blank">PyConKr</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.djangoproject.com/" target="_blank">Django</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.django-rest-framework.org/" target="_blank">DRF</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.ansible.com/" target="_blank">Ansible</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.coree-culture.org/?lang=fr" target="_blank">Centre Culturel Coréen</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2023 FoxMaSk
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>              <p><small>Unless otherwise stated, all articles are published under the <a href="http://www.wtfpl.net/about/">WTFPL</a> license.</small></p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://www.foxmask.org/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://www.foxmask.org/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://www.foxmask.org/theme/js/respond.min.js"></script>


    <script src="https://www.foxmask.org/theme/js/bodypadding.js"></script>


</body>
</html>