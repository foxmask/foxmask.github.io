<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Django, un template tag, une boussole dans le template - Le Free de la Passion</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://foxmask.github.io/post/2012/10/13/django-template-tag-boussole-template/">

        <meta name="author" content="foxmask" />
        <meta name="keywords" content="Django" />
        <meta name="description" content="Dans un template utilisé tout au long de son site, tel un menu, je voulais trouver un moyen de savoir quelle vue l&#39;avait appelé afin de positionner une classe CSS &#39;active&#39; au bon endroit. Dans mes recherches j&#39;ai trouvé A Django template tag for the current active page, où au …" />

        <meta property="og:site_name" content="Le Free de la Passion" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Django, un template tag, une boussole dans le template"/>
        <meta property="og:url" content="https://foxmask.github.io/post/2012/10/13/django-template-tag-boussole-template/"/>
        <meta property="og:description" content="Dans un template utilisé tout au long de son site, tel un menu, je voulais trouver un moyen de savoir quelle vue l&#39;avait appelé afin de positionner une classe CSS &#39;active&#39; au bon endroit. Dans mes recherches j&#39;ai trouvé A Django template tag for the current active page, où au …"/>
        <meta property="article:published_time" content="2012-10-13" />
            <meta property="article:section" content="Techno" />
            <meta property="article:tag" content="Django" />
            <meta property="article:author" content="foxmask" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://foxmask.github.io/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="https://foxmask.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://foxmask.github.io/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://foxmask.github.io/theme/css/style.css" type="text/css"/>

        <link href="https://foxmask.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Le Free de la Passion ATOM Feed"/>

        <link href="https://foxmask.github.io/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Le Free de la Passion RSS Feed"/>
        <link href="https://foxmask.github.io/feeds/techno.atom.xml" type="application/atom+xml" rel="alternate"
              title="Le Free de la Passion Techno ATOM Feed"/>
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://foxmask.github.io/" class="navbar-brand">
Le Free de la Passion            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://foxmask.github.io/pages/a-propos">
                             À propos
                          </a></li>
                        <li >
                            <a href="https://foxmask.github.io/category/games.html">Games</a>
                        </li>
                        <li >
                            <a href="https://foxmask.github.io/category/general.html">General</a>
                        </li>
                        <li >
                            <a href="https://foxmask.github.io/category/korea.html">Korea</a>
                        </li>
                        <li >
                            <a href="https://foxmask.github.io/category/link.html">Link</a>
                        </li>
                        <li class="active">
                            <a href="https://foxmask.github.io/category/techno.html">Techno</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://foxmask.github.io/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://foxmask.github.io/post/2012/10/13/django-template-tag-boussole-template/"
                       rel="bookmark"
                       title="Permalink to Django, un template tag, une boussole dans le template">
                        Django, un template tag, une boussole dans le template
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2012-10-13T16:30:00+02:00"> sam. 13 octobre 2012</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://foxmask.github.io/tag/django.html">Django</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Dans un template utilisé tout au long de son site, tel un menu, je
voulais trouver un moyen de savoir quelle vue l'avait appelé afin de
positionner une classe CSS 'active' au bon endroit.</p>
<p>Dans mes recherches j'ai trouvé <a href="http://gnuvince.wordpress.com/2007/09/14/a-django-template-tag-for-the-current-active-page/">A Django template tag for the current
active
page</a>,
où au début j'avais le me cheminement consistant à parser request.path,
ensuite j'ai mis la main sur une amélioration de la proposition
précédente <a href="http://110j.wordpress.com/2009/01/25/django-template-tag-for-active-class/">sur ce
blog</a>...
que j'ai à mon tour modifié ;)</p>
<p>Voici ce que ça donne dans un template :</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="o">%</span> <span class="n">url</span> <span class="s1">&#39;base&#39;</span> <span class="k">as</span> <span class="n">home</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">url</span> <span class="s1">&#39;profiles_profile_detail&#39;</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span> <span class="k">as</span> <span class="n">profiles_profile_detail</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">url</span> <span class="s1">&#39;relationship_list&#39;</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span> <span class="s1">&#39;friends&#39;</span> <span class="k">as</span> <span class="n">relationship_list_friends</span> <span class="o">%</span><span class="p">}</span>              


     <span class="p">{</span><span class="o">%</span> <span class="n">trans</span> <span class="s2">&quot;Home&quot;</span> <span class="o">%</span><span class="p">}</span>
     <span class="p">{{</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span> <span class="p">}}</span>
     <span class="p">{</span><span class="o">%</span> <span class="n">trans</span> <span class="s2">&quot;My network&quot;</span> <span class="o">%</span><span class="p">}</span>
     <span class="p">{</span><span class="o">%</span> <span class="n">trans</span> <span class="s2">&quot;log out&quot;</span> <span class="o">%</span><span class="p">}</span>                        
</code></pre></div>

<p>Mon grin de sel se situe coté HTML où je ne veux pas laisser dans la
page HTML des propriétés vides <a href="http://110j.wordpress.com/2009/01/25/django-template-tag-for-active-class/">comme on le voit
ici</a></p>
<p>Du coup je retourne bêtement <strong>class="active"</strong> plutôt que <strong>active</strong></p>
<div class="highlight"><pre><span></span><code><span class="nd">@register</span><span class="o">.</span><span class="n">simple_tag</span>
<span class="k">def</span> <span class="nf">active</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">re</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="s2">&quot;^</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="n">pattern</span>
    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39; class=&quot;active&quot; &#39;</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="https://foxmask.github.io/post/2023/05/18/pythno-chatgpt-ccbv-metaclasses/">Python ChatGPT, CCBV, Metaclasses</a></li>
        <li><a href="https://foxmask.github.io/post/2022/05/27/the-call-for-proposals-for-djangocon-us-2022-is-now-open-djangoproject/">The Call for Proposals for DjangoCon US 2022 Is Now Open! - djangoproject</a></li>
        <li><a href="https://foxmask.github.io/post/2022/02/21/hacker-news-clone-askpython/">Hacker News Clone - askpython</a></li>
        <li><a href="https://foxmask.github.io/post/2022/02/08/hacker-news-avec-django/">hacker news avec django</a></li>
        <li><a href="https://foxmask.github.io/post/2022/02/03/jsocoldjango-ratelimit-cache-based-rate-limiting-for-django-github/">jsocol/django-ratelimit: Cache-based rate-limiting for Django - github</a></li>
        <li><a href="https://foxmask.github.io/post/2022/02/01/how-to-add-favicon-to-django-in-4-steps-simpleit/">How to add favicon to Django in 4 steps - simpleit</a></li>
        <li><a href="https://foxmask.github.io/post/2022/01/26/announcing-djangocon-europe-2022-djangoproject/">Announcing DjangoCon Europe 2022 - djangoproject</a></li>
        <li><a href="https://foxmask.github.io/post/2022/01/20/django-documentation-djangoproject/">Django documentation - djangoproject</a></li>
    </ul>
</section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="/feeds/all.rss.xml" target="_blank">FoxMaSk RSS</a>
    </li>
    <li class="list-group-item">
      <a href="https://python.org/" target="_blank">Python</a>
    </li>
    <li class="list-group-item">
      <a href="https://pycon.fr/" target="_blank">PyConFr</a>
    </li>
    <li class="list-group-item">
      <a href="https://pycon.kr/" target="_blank">PyConKr</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.djangoproject.com/" target="_blank">Django</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.django-rest-framework.org/" target="_blank">DRF</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.ansible.com/" target="_blank">Ansible</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.coree-culture.org/?lang=fr" target="_blank">Centre Culturel Coréen</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2023 FoxMaSk
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>              <p><small>Unless otherwise stated, all articles are published under the <a href="http://www.wtfpl.net/about/">WTFPL</a> license.</small></p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://foxmask.github.io/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://foxmask.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://foxmask.github.io/theme/js/respond.min.js"></script>


    <script src="https://foxmask.github.io/theme/js/bodypadding.js"></script>


</body>
</html>